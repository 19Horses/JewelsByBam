function Jk(i,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in i)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Kk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var TR={exports:{}},Kv={},CR={exports:{}},Ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=Symbol.for("react.element"),Qk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),eO=Symbol.for("react.profiler"),tO=Symbol.for("react.provider"),rO=Symbol.for("react.context"),nO=Symbol.for("react.forward_ref"),iO=Symbol.for("react.suspense"),sO=Symbol.for("react.memo"),oO=Symbol.for("react.lazy"),kA=Symbol.iterator;function aO(i){return i===null||typeof i!="object"?null:(i=kA&&i[kA]||i["@@iterator"],typeof i=="function"?i:null)}var RR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PR=Object.assign,IR={};function ad(i,t,n){this.props=i,this.context=t,this.refs=IR,this.updater=n||RR}ad.prototype.isReactComponent={};ad.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};ad.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function LR(){}LR.prototype=ad.prototype;function mw(i,t,n){this.props=i,this.context=t,this.refs=IR,this.updater=n||RR}var gw=mw.prototype=new LR;gw.constructor=mw;PR(gw,ad.prototype);gw.isPureReactComponent=!0;var OA=Array.isArray,jR=Object.prototype.hasOwnProperty,yw={current:null},DR={key:!0,ref:!0,__self:!0,__source:!0};function kR(i,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)jR.call(t,r)&&!DR.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(i&&i.defaultProps)for(r in u=i.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:kp,type:i,key:o,ref:a,props:s,_owner:yw.current}}function lO(i,t){return{$$typeof:kp,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function vw(i){return typeof i=="object"&&i!==null&&i.$$typeof===kp}function uO(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(n){return t[n]})}var BA=/\/+/g;function W1(i,t){return typeof i=="object"&&i!==null&&i.key!=null?uO(""+i.key):t.toString(36)}function oy(i,t,n,r,s){var o=typeof i;(o==="undefined"||o==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case kp:case Qk:a=!0}}if(a)return a=i,s=s(a),i=r===""?"."+W1(a,0):r,OA(s)?(n="",i!=null&&(n=i.replace(BA,"$&/")+"/"),oy(s,t,n,"",function(c){return c})):s!=null&&(vw(s)&&(s=lO(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(BA,"$&/")+"/")+i)),t.push(s)),1;if(a=0,r=r===""?".":r+":",OA(i))for(var u=0;u<i.length;u++){o=i[u];var l=r+W1(o,u);a+=oy(o,t,n,l,s)}else if(l=aO(i),typeof l=="function")for(i=l.call(i),u=0;!(o=i.next()).done;)o=o.value,l=r+W1(o,u++),a+=oy(o,t,n,l,s);else if(o==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Gm(i,t,n){if(i==null)return i;var r=[],s=0;return oy(i,r,"","",function(o){return t.call(n,o,s++)}),r}function cO(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(n){(i._status===0||i._status===-1)&&(i._status=1,i._result=n)},function(n){(i._status===0||i._status===-1)&&(i._status=2,i._result=n)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var ts={current:null},ay={transition:null},fO={ReactCurrentDispatcher:ts,ReactCurrentBatchConfig:ay,ReactCurrentOwner:yw};function OR(){throw Error("act(...) is not supported in production builds of React.")}Ar.Children={map:Gm,forEach:function(i,t,n){Gm(i,function(){t.apply(this,arguments)},n)},count:function(i){var t=0;return Gm(i,function(){t++}),t},toArray:function(i){return Gm(i,function(t){return t})||[]},only:function(i){if(!vw(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Ar.Component=ad;Ar.Fragment=Zk;Ar.Profiler=eO;Ar.PureComponent=mw;Ar.StrictMode=$k;Ar.Suspense=iO;Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;Ar.act=OR;Ar.cloneElement=function(i,t,n){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var r=PR({},i.props),s=i.key,o=i.ref,a=i._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=yw.current),t.key!==void 0&&(s=""+t.key),i.type&&i.type.defaultProps)var u=i.type.defaultProps;for(l in t)jR.call(t,l)&&!DR.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&u!==void 0?u[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}return{$$typeof:kp,type:i.type,key:s,ref:o,props:r,_owner:a}};Ar.createContext=function(i){return i={$$typeof:rO,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:tO,_context:i},i.Consumer=i};Ar.createElement=kR;Ar.createFactory=function(i){var t=kR.bind(null,i);return t.type=i,t};Ar.createRef=function(){return{current:null}};Ar.forwardRef=function(i){return{$$typeof:nO,render:i}};Ar.isValidElement=vw;Ar.lazy=function(i){return{$$typeof:oO,_payload:{_status:-1,_result:i},_init:cO}};Ar.memo=function(i,t){return{$$typeof:sO,type:i,compare:t===void 0?null:t}};Ar.startTransition=function(i){var t=ay.transition;ay.transition={};try{i()}finally{ay.transition=t}};Ar.unstable_act=OR;Ar.useCallback=function(i,t){return ts.current.useCallback(i,t)};Ar.useContext=function(i){return ts.current.useContext(i)};Ar.useDebugValue=function(){};Ar.useDeferredValue=function(i){return ts.current.useDeferredValue(i)};Ar.useEffect=function(i,t){return ts.current.useEffect(i,t)};Ar.useId=function(){return ts.current.useId()};Ar.useImperativeHandle=function(i,t,n){return ts.current.useImperativeHandle(i,t,n)};Ar.useInsertionEffect=function(i,t){return ts.current.useInsertionEffect(i,t)};Ar.useLayoutEffect=function(i,t){return ts.current.useLayoutEffect(i,t)};Ar.useMemo=function(i,t){return ts.current.useMemo(i,t)};Ar.useReducer=function(i,t,n){return ts.current.useReducer(i,t,n)};Ar.useRef=function(i){return ts.current.useRef(i)};Ar.useState=function(i){return ts.current.useState(i)};Ar.useSyncExternalStore=function(i,t,n){return ts.current.useSyncExternalStore(i,t,n)};Ar.useTransition=function(){return ts.current.useTransition()};Ar.version="18.3.1";CR.exports=Ar;var Qe=CR.exports;const Ty=pw(Qe),dO=Jk({__proto__:null,default:Ty},[Qe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hO=Qe,pO=Symbol.for("react.element"),mO=Symbol.for("react.fragment"),gO=Object.prototype.hasOwnProperty,yO=hO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vO={key:!0,ref:!0,__self:!0,__source:!0};function BR(i,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gO.call(t,r)&&!vO.hasOwnProperty(r)&&(s[r]=t[r]);if(i&&i.defaultProps)for(r in t=i.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:pO,type:i,key:o,ref:a,props:s,_owner:yO.current}}Kv.Fragment=mO;Kv.jsx=BR;Kv.jsxs=BR;TR.exports=Kv;var Rt=TR.exports,FR={exports:{}},Bs={},UR={exports:{}},NR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(V,W){var Y=V.length;V.push(W);e:for(;0<Y;){var J=Y-1>>>1,ie=V[J];if(0<s(ie,W))V[J]=W,V[Y]=ie,Y=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],Y=V.pop();if(Y!==W){V[0]=Y;e:for(var J=0,ie=V.length,I=ie>>>1;J<I;){var O=2*(J+1)-1,H=V[O],q=O+1,Z=V[q];if(0>s(H,Y))q<ie&&0>s(Z,H)?(V[J]=Z,V[q]=Y,J=q):(V[J]=H,V[O]=Y,J=O);else if(q<ie&&0>s(Z,Y))V[J]=Z,V[q]=Y,J=q;else break e}}return W}function s(V,W){var Y=V.sortIndex-W.sortIndex;return Y!==0?Y:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var l=[],c=[],d=1,p=null,f=3,h=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,t(l,W);else break;W=n(c)}}function b(V){if(y=!1,x(V),!m)if(n(l)!==null)m=!0,z(S);else{var W=n(c);W!==null&&Q(b,W.startTime-V)}}function S(V,W){m=!1,y&&(y=!1,g(R),R=-1),h=!0;var Y=f;try{for(x(W),p=n(l);p!==null&&(!(p.expirationTime>W)||V&&!C());){var J=p.callback;if(typeof J=="function"){p.callback=null,f=p.priorityLevel;var ie=J(p.expirationTime<=W);W=i.unstable_now(),typeof ie=="function"?p.callback=ie:p===n(l)&&r(l),x(W)}else r(l);p=n(l)}if(p!==null)var I=!0;else{var O=n(c);O!==null&&Q(b,O.startTime-W),I=!1}return I}finally{p=null,f=Y,h=!1}}var T=!1,M=null,R=-1,L=5,P=-1;function C(){return!(i.unstable_now()-P<L)}function k(){if(M!==null){var V=i.unstable_now();P=V;var W=!0;try{W=M(!0,V)}finally{W?D():(T=!1,M=null)}}else T=!1}var D;if(typeof _=="function")D=function(){_(k)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=k,D=function(){G.postMessage(null)}}else D=function(){v(k,0)};function z(V){M=V,T||(T=!0,D())}function Q(V,W){R=v(function(){V(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){m||h||(m=!0,z(S))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return n(l)},i.unstable_next=function(V){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Y=f;f=W;try{return V()}finally{f=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=f;f=V;try{return W()}finally{f=Y}},i.unstable_scheduleCallback=function(V,W,Y){var J=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?J+Y:J):Y=J,V){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Y+ie,V={id:d++,callback:W,priorityLevel:V,startTime:Y,expirationTime:ie,sortIndex:-1},Y>J?(V.sortIndex=Y,t(c,V),n(l)===null&&V===n(c)&&(y?(g(R),R=-1):y=!0,Q(b,Y-J))):(V.sortIndex=ie,t(l,V),m||h||(m=!0,z(S))),V},i.unstable_shouldYield=C,i.unstable_wrapCallback=function(V){var W=f;return function(){var Y=f;f=W;try{return V.apply(this,arguments)}finally{f=Y}}}})(NR);UR.exports=NR;var _O=UR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xO=Qe,Os=_O;function bt(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GR=new Set,Jh={};function Sc(i,t){Jf(i,t),Jf(i+"Capture",t)}function Jf(i,t){for(Jh[i]=t,i=0;i<t.length;i++)GR.add(t[i])}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lx=Object.prototype.hasOwnProperty,bO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FA={},UA={};function wO(i){return Lx.call(UA,i)?!0:Lx.call(FA,i)?!1:bO.test(i)?UA[i]=!0:(FA[i]=!0,!1)}function SO(i,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function AO(i,t,n,r){if(t===null||typeof t>"u"||SO(i,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rs(i,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=i,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_i[i]=new rs(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];_i[t]=new rs(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){_i[i]=new rs(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_i[i]=new rs(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_i[i]=new rs(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){_i[i]=new rs(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){_i[i]=new rs(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){_i[i]=new rs(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){_i[i]=new rs(i,5,!1,i.toLowerCase(),null,!1,!1)});var _w=/[\-:]([a-z])/g;function xw(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace(_w,xw);_i[t]=new rs(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace(_w,xw);_i[t]=new rs(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace(_w,xw);_i[t]=new rs(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){_i[i]=new rs(i,1,!1,i.toLowerCase(),null,!1,!1)});_i.xlinkHref=new rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){_i[i]=new rs(i,1,!1,i.toLowerCase(),null,!0,!0)});function bw(i,t,n,r){var s=_i.hasOwnProperty(t)?_i[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AO(t,n,s,r)&&(n=null),r||s===null?wO(t)&&(n===null?i.removeAttribute(t):i.setAttribute(t,""+n)):s.mustUseProperty?i[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?i.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?i.setAttributeNS(r,t,n):i.setAttribute(t,n))))}var tl=xO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hm=Symbol.for("react.element"),vf=Symbol.for("react.portal"),_f=Symbol.for("react.fragment"),ww=Symbol.for("react.strict_mode"),jx=Symbol.for("react.profiler"),HR=Symbol.for("react.provider"),zR=Symbol.for("react.context"),Sw=Symbol.for("react.forward_ref"),Dx=Symbol.for("react.suspense"),kx=Symbol.for("react.suspense_list"),Aw=Symbol.for("react.memo"),Tl=Symbol.for("react.lazy"),VR=Symbol.for("react.offscreen"),NA=Symbol.iterator;function jd(i){return i===null||typeof i!="object"?null:(i=NA&&i[NA]||i["@@iterator"],typeof i=="function"?i:null)}var _n=Object.assign,X1;function gh(i){if(X1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);X1=t&&t[1]||""}return`
`+X1+i}var Y1=!1;function q1(i,t){if(!i||Y1)return"";Y1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(i,[],t)}else{try{t.call()}catch(c){r=c}i.call(t.prototype)}else{try{throw Error()}catch(c){r=c}i()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,u=o.length-1;1<=a&&0<=u&&s[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(s[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||s[a]!==o[u]){var l=`
`+s[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=u);break}}}finally{Y1=!1,Error.prepareStackTrace=n}return(i=i?i.displayName||i.name:"")?gh(i):""}function MO(i){switch(i.tag){case 5:return gh(i.type);case 16:return gh("Lazy");case 13:return gh("Suspense");case 19:return gh("SuspenseList");case 0:case 2:case 15:return i=q1(i.type,!1),i;case 11:return i=q1(i.type.render,!1),i;case 1:return i=q1(i.type,!0),i;default:return""}}function Ox(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _f:return"Fragment";case vf:return"Portal";case jx:return"Profiler";case ww:return"StrictMode";case Dx:return"Suspense";case kx:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case zR:return(i.displayName||"Context")+".Consumer";case HR:return(i._context.displayName||"Context")+".Provider";case Sw:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Aw:return t=i.displayName||null,t!==null?t:Ox(i.type)||"Memo";case Tl:t=i._payload,i=i._init;try{return Ox(i(t))}catch{}}return null}function EO(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ox(t);case 8:return t===ww?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ql(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function WR(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TO(i){var t=WR(i)?"checked":"value",n=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),r=""+i[t];if(!i.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(i,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function zm(i){i._valueTracker||(i._valueTracker=TO(i))}function XR(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return i&&(r=WR(i)?i.checked?"true":"false":i.value),i=r,i!==n?(t.setValue(i),!0):!1}function Cy(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Bx(i,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??i._wrapperState.initialChecked})}function GA(i,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ql(t.value!=null?t.value:n),i._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function YR(i,t){t=t.checked,t!=null&&bw(i,"checked",t,!1)}function Fx(i,t){YR(i,t);var n=ql(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+n):i.value!==""+n&&(i.value=""+n);else if(r==="submit"||r==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?Ux(i,t.type,n):t.hasOwnProperty("defaultValue")&&Ux(i,t.type,ql(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function HA(i,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,n||t===i.value||(i.value=t),i.defaultValue=t}n=i.name,n!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,n!==""&&(i.name=n)}function Ux(i,t,n){(t!=="number"||Cy(i.ownerDocument)!==i)&&(n==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+n&&(i.defaultValue=""+n))}var yh=Array.isArray;function kf(i,t,n,r){if(i=i.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<i.length;n++)s=t.hasOwnProperty("$"+i[n].value),i[n].selected!==s&&(i[n].selected=s),s&&r&&(i[n].defaultSelected=!0)}else{for(n=""+ql(n),t=null,s=0;s<i.length;s++){if(i[s].value===n){i[s].selected=!0,r&&(i[s].defaultSelected=!0);return}t!==null||i[s].disabled||(t=i[s])}t!==null&&(t.selected=!0)}}function Nx(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function zA(i,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(bt(92));if(yh(n)){if(1<n.length)throw Error(bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}i._wrapperState={initialValue:ql(n)}}function qR(i,t){var n=ql(t.value),r=ql(t.defaultValue);n!=null&&(n=""+n,n!==i.value&&(i.value=n),t.defaultValue==null&&i.defaultValue!==n&&(i.defaultValue=n)),r!=null&&(i.defaultValue=""+r)}function VA(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function JR(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gx(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?JR(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Vm,KR=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return i(t,n,r,s)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(Vm=Vm||document.createElement("div"),Vm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vm.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function Kh(i,t){if(t){var n=i.firstChild;if(n&&n===i.lastChild&&n.nodeType===3){n.nodeValue=t;return}}i.textContent=t}var Ah={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CO=["Webkit","ms","Moz","O"];Object.keys(Ah).forEach(function(i){CO.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),Ah[t]=Ah[i]})});function QR(i,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ah.hasOwnProperty(i)&&Ah[i]?(""+t).trim():t+"px"}function ZR(i,t){i=i.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=QR(n,t[n],r);n==="float"&&(n="cssFloat"),r?i.setProperty(n,s):i[n]=s}}var RO=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hx(i,t){if(t){if(RO[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function zx(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vx=null;function Mw(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wx=null,Of=null,Bf=null;function WA(i){if(i=Fp(i)){if(typeof Wx!="function")throw Error(bt(280));var t=i.stateNode;t&&(t=t0(t),Wx(i.stateNode,i.type,t))}}function $R(i){Of?Bf?Bf.push(i):Bf=[i]:Of=i}function e3(){if(Of){var i=Of,t=Bf;if(Bf=Of=null,WA(i),t)for(i=0;i<t.length;i++)WA(t[i])}}function t3(i,t){return i(t)}function r3(){}var J1=!1;function n3(i,t,n){if(J1)return i(t,n);J1=!0;try{return t3(i,t,n)}finally{J1=!1,(Of!==null||Bf!==null)&&(r3(),e3())}}function Qh(i,t){var n=i.stateNode;if(n===null)return null;var r=t0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(i=i.type,r=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!r;break e;default:i=!1}if(i)return null;if(n&&typeof n!="function")throw Error(bt(231,t,typeof n));return n}var Xx=!1;if(za)try{var Dd={};Object.defineProperty(Dd,"passive",{get:function(){Xx=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{Xx=!1}function PO(i,t,n,r,s,o,a,u,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Mh=!1,Ry=null,Py=!1,Yx=null,IO={onError:function(i){Mh=!0,Ry=i}};function LO(i,t,n,r,s,o,a,u,l){Mh=!1,Ry=null,PO.apply(IO,arguments)}function jO(i,t,n,r,s,o,a,u,l){if(LO.apply(this,arguments),Mh){if(Mh){var c=Ry;Mh=!1,Ry=null}else throw Error(bt(198));Py||(Py=!0,Yx=c)}}function Ac(i){var t=i,n=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(n=t.return),i=t.return;while(i)}return t.tag===3?n:null}function i3(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function XA(i){if(Ac(i)!==i)throw Error(bt(188))}function DO(i){var t=i.alternate;if(!t){if(t=Ac(i),t===null)throw Error(bt(188));return t!==i?null:i}for(var n=i,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return XA(s),i;if(o===r)return XA(s),t;o=o.sibling}throw Error(bt(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,u=s.child;u;){if(u===n){a=!0,n=s,r=o;break}if(u===r){a=!0,r=s,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=s;break}if(u===r){a=!0,r=o,n=s;break}u=u.sibling}if(!a)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?i:t}function s3(i){return i=DO(i),i!==null?o3(i):null}function o3(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=o3(i);if(t!==null)return t;i=i.sibling}return null}var a3=Os.unstable_scheduleCallback,YA=Os.unstable_cancelCallback,kO=Os.unstable_shouldYield,OO=Os.unstable_requestPaint,jn=Os.unstable_now,BO=Os.unstable_getCurrentPriorityLevel,Ew=Os.unstable_ImmediatePriority,l3=Os.unstable_UserBlockingPriority,Iy=Os.unstable_NormalPriority,FO=Os.unstable_LowPriority,u3=Os.unstable_IdlePriority,Qv=null,oa=null;function UO(i){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Qv,i,void 0,(i.current.flags&128)===128)}catch{}}var ko=Math.clz32?Math.clz32:HO,NO=Math.log,GO=Math.LN2;function HO(i){return i>>>=0,i===0?32:31-(NO(i)/GO|0)|0}var Wm=64,Xm=4194304;function vh(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ly(i,t){var n=i.pendingLanes;if(n===0)return 0;var r=0,s=i.suspendedLanes,o=i.pingedLanes,a=n&268435455;if(a!==0){var u=a&~s;u!==0?r=vh(u):(o&=a,o!==0&&(r=vh(o)))}else a=n&~s,a!==0?r=vh(a):o!==0&&(r=vh(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=r;0<t;)n=31-ko(t),s=1<<n,r|=i[n],t&=~s;return r}function zO(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VO(i,t){for(var n=i.suspendedLanes,r=i.pingedLanes,s=i.expirationTimes,o=i.pendingLanes;0<o;){var a=31-ko(o),u=1<<a,l=s[a];l===-1?(!(u&n)||u&r)&&(s[a]=zO(u,t)):l<=t&&(i.expiredLanes|=u),o&=~u}}function qx(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function c3(){var i=Wm;return Wm<<=1,!(Wm&4194240)&&(Wm=64),i}function K1(i){for(var t=[],n=0;31>n;n++)t.push(i);return t}function Op(i,t,n){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-ko(t),i[t]=n}function WO(i,t){var n=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var r=i.eventTimes;for(i=i.expirationTimes;0<n;){var s=31-ko(n),o=1<<s;t[s]=0,r[s]=-1,i[s]=-1,n&=~o}}function Tw(i,t){var n=i.entangledLanes|=t;for(i=i.entanglements;n;){var r=31-ko(n),s=1<<r;s&t|i[r]&t&&(i[r]|=t),n&=~s}}var Wr=0;function f3(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var d3,Cw,h3,p3,m3,Jx=!1,Ym=[],Fl=null,Ul=null,Nl=null,Zh=new Map,$h=new Map,Rl=[],XO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qA(i,t){switch(i){case"focusin":case"focusout":Fl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Zh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(t.pointerId)}}function kd(i,t,n,r,s,o){return i===null||i.nativeEvent!==o?(i={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Fp(t),t!==null&&Cw(t)),i):(i.eventSystemFlags|=r,t=i.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),i)}function YO(i,t,n,r,s){switch(t){case"focusin":return Fl=kd(Fl,i,t,n,r,s),!0;case"dragenter":return Ul=kd(Ul,i,t,n,r,s),!0;case"mouseover":return Nl=kd(Nl,i,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Zh.set(o,kd(Zh.get(o)||null,i,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,$h.set(o,kd($h.get(o)||null,i,t,n,r,s)),!0}return!1}function g3(i){var t=Wu(i.target);if(t!==null){var n=Ac(t);if(n!==null){if(t=n.tag,t===13){if(t=i3(n),t!==null){i.blockedOn=t,m3(i.priority,function(){h3(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){i.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ly(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var n=Kx(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(n===null){n=i.nativeEvent;var r=new n.constructor(n.type,n);Vx=r,n.target.dispatchEvent(r),Vx=null}else return t=Fp(n),t!==null&&Cw(t),i.blockedOn=n,!1;t.shift()}return!0}function JA(i,t,n){ly(i)&&n.delete(t)}function qO(){Jx=!1,Fl!==null&&ly(Fl)&&(Fl=null),Ul!==null&&ly(Ul)&&(Ul=null),Nl!==null&&ly(Nl)&&(Nl=null),Zh.forEach(JA),$h.forEach(JA)}function Od(i,t){i.blockedOn===t&&(i.blockedOn=null,Jx||(Jx=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,qO)))}function ep(i){function t(s){return Od(s,i)}if(0<Ym.length){Od(Ym[0],i);for(var n=1;n<Ym.length;n++){var r=Ym[n];r.blockedOn===i&&(r.blockedOn=null)}}for(Fl!==null&&Od(Fl,i),Ul!==null&&Od(Ul,i),Nl!==null&&Od(Nl,i),Zh.forEach(t),$h.forEach(t),n=0;n<Rl.length;n++)r=Rl[n],r.blockedOn===i&&(r.blockedOn=null);for(;0<Rl.length&&(n=Rl[0],n.blockedOn===null);)g3(n),n.blockedOn===null&&Rl.shift()}var Ff=tl.ReactCurrentBatchConfig,jy=!0;function JO(i,t,n,r){var s=Wr,o=Ff.transition;Ff.transition=null;try{Wr=1,Rw(i,t,n,r)}finally{Wr=s,Ff.transition=o}}function KO(i,t,n,r){var s=Wr,o=Ff.transition;Ff.transition=null;try{Wr=4,Rw(i,t,n,r)}finally{Wr=s,Ff.transition=o}}function Rw(i,t,n,r){if(jy){var s=Kx(i,t,n,r);if(s===null)o_(i,t,r,Dy,n),qA(i,r);else if(YO(s,i,t,n,r))r.stopPropagation();else if(qA(i,r),t&4&&-1<XO.indexOf(i)){for(;s!==null;){var o=Fp(s);if(o!==null&&d3(o),o=Kx(i,t,n,r),o===null&&o_(i,t,r,Dy,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else o_(i,t,r,null,n)}}var Dy=null;function Kx(i,t,n,r){if(Dy=null,i=Mw(r),i=Wu(i),i!==null)if(t=Ac(i),t===null)i=null;else if(n=t.tag,n===13){if(i=i3(t),i!==null)return i;i=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return Dy=i,null}function y3(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BO()){case Ew:return 1;case l3:return 4;case Iy:case FO:return 16;case u3:return 536870912;default:return 16}default:return 16}}var Ll=null,Pw=null,uy=null;function v3(){if(uy)return uy;var i,t=Pw,n=t.length,r,s="value"in Ll?Ll.value:Ll.textContent,o=s.length;for(i=0;i<n&&t[i]===s[i];i++);var a=n-i;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return uy=s.slice(i,1<r?1-r:void 0)}function cy(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function qm(){return!0}function KA(){return!1}function Fs(i){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in i)i.hasOwnProperty(u)&&(n=i[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qm:KA,this.isPropagationStopped=KA,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qm)},persist:function(){},isPersistent:qm}),t}var ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iw=Fs(ld),Bp=_n({},ld,{view:0,detail:0}),QO=Fs(Bp),Q1,Z1,Bd,Zv=_n({},Bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lw,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bd&&(Bd&&i.type==="mousemove"?(Q1=i.screenX-Bd.screenX,Z1=i.screenY-Bd.screenY):Z1=Q1=0,Bd=i),Q1)},movementY:function(i){return"movementY"in i?i.movementY:Z1}}),QA=Fs(Zv),ZO=_n({},Zv,{dataTransfer:0}),$O=Fs(ZO),eB=_n({},Bp,{relatedTarget:0}),$1=Fs(eB),tB=_n({},ld,{animationName:0,elapsedTime:0,pseudoElement:0}),rB=Fs(tB),nB=_n({},ld,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),iB=Fs(nB),sB=_n({},ld,{data:0}),ZA=Fs(sB),oB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uB(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=lB[i])?!!t[i]:!1}function Lw(){return uB}var cB=_n({},Bp,{key:function(i){if(i.key){var t=oB[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=cy(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?aB[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lw,charCode:function(i){return i.type==="keypress"?cy(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?cy(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fB=Fs(cB),dB=_n({},Zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$A=Fs(dB),hB=_n({},Bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lw}),pB=Fs(hB),mB=_n({},ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),gB=Fs(mB),yB=_n({},Zv,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vB=Fs(yB),_B=[9,13,27,32],jw=za&&"CompositionEvent"in window,Eh=null;za&&"documentMode"in document&&(Eh=document.documentMode);var xB=za&&"TextEvent"in window&&!Eh,_3=za&&(!jw||Eh&&8<Eh&&11>=Eh),eM=" ",tM=!1;function x3(i,t){switch(i){case"keyup":return _B.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b3(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var xf=!1;function bB(i,t){switch(i){case"compositionend":return b3(t);case"keypress":return t.which!==32?null:(tM=!0,eM);case"textInput":return i=t.data,i===eM&&tM?null:i;default:return null}}function wB(i,t){if(xf)return i==="compositionend"||!jw&&x3(i,t)?(i=v3(),uy=Pw=Ll=null,xf=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _3&&t.locale!=="ko"?null:t.data;default:return null}}var SB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rM(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!SB[i.type]:t==="textarea"}function w3(i,t,n,r){$R(r),t=ky(t,"onChange"),0<t.length&&(n=new Iw("onChange","change",null,n,r),i.push({event:n,listeners:t}))}var Th=null,tp=null;function AB(i){j3(i,0)}function $v(i){var t=Sf(i);if(XR(t))return i}function MB(i,t){if(i==="change")return t}var S3=!1;if(za){var e_;if(za){var t_="oninput"in document;if(!t_){var nM=document.createElement("div");nM.setAttribute("oninput","return;"),t_=typeof nM.oninput=="function"}e_=t_}else e_=!1;S3=e_&&(!document.documentMode||9<document.documentMode)}function iM(){Th&&(Th.detachEvent("onpropertychange",A3),tp=Th=null)}function A3(i){if(i.propertyName==="value"&&$v(tp)){var t=[];w3(t,tp,i,Mw(i)),n3(AB,t)}}function EB(i,t,n){i==="focusin"?(iM(),Th=t,tp=n,Th.attachEvent("onpropertychange",A3)):i==="focusout"&&iM()}function TB(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $v(tp)}function CB(i,t){if(i==="click")return $v(t)}function RB(i,t){if(i==="input"||i==="change")return $v(t)}function PB(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var Bo=typeof Object.is=="function"?Object.is:PB;function rp(i,t){if(Bo(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var n=Object.keys(i),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lx.call(t,s)||!Bo(i[s],t[s]))return!1}return!0}function sM(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function oM(i,t){var n=sM(i);i=0;for(var r;n;){if(n.nodeType===3){if(r=i+n.textContent.length,i<=t&&r>=t)return{node:n,offset:t-i};i=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sM(n)}}function M3(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?M3(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function E3(){for(var i=window,t=Cy();t instanceof i.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)i=t.contentWindow;else break;t=Cy(i.document)}return t}function Dw(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function IB(i){var t=E3(),n=i.focusedElem,r=i.selectionRange;if(t!==n&&n&&n.ownerDocument&&M3(n.ownerDocument.documentElement,n)){if(r!==null&&Dw(n)){if(t=r.start,i=r.end,i===void 0&&(i=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(i,n.value.length);else if(i=(t=n.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!i.extend&&o>r&&(s=r,r=o,o=s),s=oM(n,o);var a=oM(n,r);s&&a&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),i.removeAllRanges(),o>r?(i.addRange(t),i.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),i.addRange(t)))}}for(t=[],i=n;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)i=t[n],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var LB=za&&"documentMode"in document&&11>=document.documentMode,bf=null,Qx=null,Ch=null,Zx=!1;function aM(i,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zx||bf==null||bf!==Cy(r)||(r=bf,"selectionStart"in r&&Dw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ch&&rp(Ch,r)||(Ch=r,r=ky(Qx,"onSelect"),0<r.length&&(t=new Iw("onSelect","select",null,t,n),i.push({event:t,listeners:r}),t.target=bf)))}function Jm(i,t){var n={};return n[i.toLowerCase()]=t.toLowerCase(),n["Webkit"+i]="webkit"+t,n["Moz"+i]="moz"+t,n}var wf={animationend:Jm("Animation","AnimationEnd"),animationiteration:Jm("Animation","AnimationIteration"),animationstart:Jm("Animation","AnimationStart"),transitionend:Jm("Transition","TransitionEnd")},r_={},T3={};za&&(T3=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function e0(i){if(r_[i])return r_[i];if(!wf[i])return i;var t=wf[i],n;for(n in t)if(t.hasOwnProperty(n)&&n in T3)return r_[i]=t[n];return i}var C3=e0("animationend"),R3=e0("animationiteration"),P3=e0("animationstart"),I3=e0("transitionend"),L3=new Map,lM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zl(i,t){L3.set(i,t),Sc(t,[i])}for(var n_=0;n_<lM.length;n_++){var i_=lM[n_],jB=i_.toLowerCase(),DB=i_[0].toUpperCase()+i_.slice(1);Zl(jB,"on"+DB)}Zl(C3,"onAnimationEnd");Zl(R3,"onAnimationIteration");Zl(P3,"onAnimationStart");Zl("dblclick","onDoubleClick");Zl("focusin","onFocus");Zl("focusout","onBlur");Zl(I3,"onTransitionEnd");Jf("onMouseEnter",["mouseout","mouseover"]);Jf("onMouseLeave",["mouseout","mouseover"]);Jf("onPointerEnter",["pointerout","pointerover"]);Jf("onPointerLeave",["pointerout","pointerover"]);Sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kB=new Set("cancel close invalid load scroll toggle".split(" ").concat(_h));function uM(i,t,n){var r=i.type||"unknown-event";i.currentTarget=n,jO(r,t,void 0,i),i.currentTarget=null}function j3(i,t){t=(t&4)!==0;for(var n=0;n<i.length;n++){var r=i[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],l=u.instance,c=u.currentTarget;if(u=u.listener,l!==o&&s.isPropagationStopped())break e;uM(s,u,c),o=l}else for(a=0;a<r.length;a++){if(u=r[a],l=u.instance,c=u.currentTarget,u=u.listener,l!==o&&s.isPropagationStopped())break e;uM(s,u,c),o=l}}}if(Py)throw i=Yx,Py=!1,Yx=null,i}function cn(i,t){var n=t[nb];n===void 0&&(n=t[nb]=new Set);var r=i+"__bubble";n.has(r)||(D3(t,i,2,!1),n.add(r))}function s_(i,t,n){var r=0;t&&(r|=4),D3(n,i,r,t)}var Km="_reactListening"+Math.random().toString(36).slice(2);function np(i){if(!i[Km]){i[Km]=!0,GR.forEach(function(n){n!=="selectionchange"&&(kB.has(n)||s_(n,!1,i),s_(n,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[Km]||(t[Km]=!0,s_("selectionchange",!1,t))}}function D3(i,t,n,r){switch(y3(t)){case 1:var s=JO;break;case 4:s=KO;break;default:s=Rw}n=s.bind(null,t,n,i),s=void 0,!Xx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?i.addEventListener(t,n,{capture:!0,passive:s}):i.addEventListener(t,n,!0):s!==void 0?i.addEventListener(t,n,{passive:s}):i.addEventListener(t,n,!1)}function o_(i,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;u!==null;){if(a=Wu(u),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}u=u.parentNode}}r=r.return}n3(function(){var c=o,d=Mw(n),p=[];e:{var f=L3.get(i);if(f!==void 0){var h=Iw,m=i;switch(i){case"keypress":if(cy(n)===0)break e;case"keydown":case"keyup":h=fB;break;case"focusin":m="focus",h=$1;break;case"focusout":m="blur",h=$1;break;case"beforeblur":case"afterblur":h=$1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=QA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$O;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=pB;break;case C3:case R3:case P3:h=rB;break;case I3:h=gB;break;case"scroll":h=QO;break;case"wheel":h=vB;break;case"copy":case"cut":case"paste":h=iB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=$A}var y=(t&4)!==0,v=!y&&i==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var _=c,x;_!==null;){x=_;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=Qh(_,g),b!=null&&y.push(ip(_,b,x)))),v)break;_=_.return}0<y.length&&(f=new h(f,m,null,n,d),p.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=i==="mouseover"||i==="pointerover",h=i==="mouseout"||i==="pointerout",f&&n!==Vx&&(m=n.relatedTarget||n.fromElement)&&(Wu(m)||m[Va]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Wu(m):null,m!==null&&(v=Ac(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(y=QA,b="onMouseLeave",g="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(y=$A,b="onPointerLeave",g="onPointerEnter",_="pointer"),v=h==null?f:Sf(h),x=m==null?f:Sf(m),f=new y(b,_+"leave",h,n,d),f.target=v,f.relatedTarget=x,b=null,Wu(d)===c&&(y=new y(g,_+"enter",m,n,d),y.target=x,y.relatedTarget=v,b=y),v=b,h&&m)t:{for(y=h,g=m,_=0,x=y;x;x=Vc(x))_++;for(x=0,b=g;b;b=Vc(b))x++;for(;0<_-x;)y=Vc(y),_--;for(;0<x-_;)g=Vc(g),x--;for(;_--;){if(y===g||g!==null&&y===g.alternate)break t;y=Vc(y),g=Vc(g)}y=null}else y=null;h!==null&&cM(p,f,h,y,!1),m!==null&&v!==null&&cM(p,v,m,y,!0)}}e:{if(f=c?Sf(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=MB;else if(rM(f))if(S3)S=RB;else{S=TB;var T=EB}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=CB);if(S&&(S=S(i,c))){w3(p,S,n,d);break e}T&&T(i,f,c),i==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Ux(f,"number",f.value)}switch(T=c?Sf(c):window,i){case"focusin":(rM(T)||T.contentEditable==="true")&&(bf=T,Qx=c,Ch=null);break;case"focusout":Ch=Qx=bf=null;break;case"mousedown":Zx=!0;break;case"contextmenu":case"mouseup":case"dragend":Zx=!1,aM(p,n,d);break;case"selectionchange":if(LB)break;case"keydown":case"keyup":aM(p,n,d)}var M;if(jw)e:{switch(i){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else xf?x3(i,n)&&(R="onCompositionEnd"):i==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(_3&&n.locale!=="ko"&&(xf||R!=="onCompositionStart"?R==="onCompositionEnd"&&xf&&(M=v3()):(Ll=d,Pw="value"in Ll?Ll.value:Ll.textContent,xf=!0)),T=ky(c,R),0<T.length&&(R=new ZA(R,i,null,n,d),p.push({event:R,listeners:T}),M?R.data=M:(M=b3(n),M!==null&&(R.data=M)))),(M=xB?bB(i,n):wB(i,n))&&(c=ky(c,"onBeforeInput"),0<c.length&&(d=new ZA("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=M))}j3(p,t)})}function ip(i,t,n){return{instance:i,listener:t,currentTarget:n}}function ky(i,t){for(var n=t+"Capture",r=[];i!==null;){var s=i,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Qh(i,n),o!=null&&r.unshift(ip(i,o,s)),o=Qh(i,t),o!=null&&r.push(ip(i,o,s))),i=i.return}return r}function Vc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function cM(i,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var u=n,l=u.alternate,c=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&c!==null&&(u=c,s?(l=Qh(n,o),l!=null&&a.unshift(ip(n,l,u))):s||(l=Qh(n,o),l!=null&&a.push(ip(n,l,u)))),n=n.return}a.length!==0&&i.push({event:t,listeners:a})}var OB=/\r\n?/g,BB=/\u0000|\uFFFD/g;function fM(i){return(typeof i=="string"?i:""+i).replace(OB,`
`).replace(BB,"")}function Qm(i,t,n){if(t=fM(t),fM(i)!==t&&n)throw Error(bt(425))}function Oy(){}var $x=null,eb=null;function tb(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rb=typeof setTimeout=="function"?setTimeout:void 0,FB=typeof clearTimeout=="function"?clearTimeout:void 0,dM=typeof Promise=="function"?Promise:void 0,UB=typeof queueMicrotask=="function"?queueMicrotask:typeof dM<"u"?function(i){return dM.resolve(null).then(i).catch(NB)}:rb;function NB(i){setTimeout(function(){throw i})}function a_(i,t){var n=t,r=0;do{var s=n.nextSibling;if(i.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){i.removeChild(s),ep(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ep(t)}function Gl(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function hM(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var n=i.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return i;t--}else n==="/$"&&t++}i=i.previousSibling}return null}var ud=Math.random().toString(36).slice(2),na="__reactFiber$"+ud,sp="__reactProps$"+ud,Va="__reactContainer$"+ud,nb="__reactEvents$"+ud,GB="__reactListeners$"+ud,HB="__reactHandles$"+ud;function Wu(i){var t=i[na];if(t)return t;for(var n=i.parentNode;n;){if(t=n[Va]||n[na]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(i=hM(i);i!==null;){if(n=i[na])return n;i=hM(i)}return t}i=n,n=i.parentNode}return null}function Fp(i){return i=i[na]||i[Va],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Sf(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(bt(33))}function t0(i){return i[sp]||null}var ib=[],Af=-1;function $l(i){return{current:i}}function fn(i){0>Af||(i.current=ib[Af],ib[Af]=null,Af--)}function nn(i,t){Af++,ib[Af]=i.current,i.current=t}var Jl={},Oi=$l(Jl),vs=$l(!1),uc=Jl;function Kf(i,t){var n=i.type.contextTypes;if(!n)return Jl;var r=i.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=s),s}function _s(i){return i=i.childContextTypes,i!=null}function By(){fn(vs),fn(Oi)}function pM(i,t,n){if(Oi.current!==Jl)throw Error(bt(168));nn(Oi,t),nn(vs,n)}function k3(i,t,n){var r=i.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(bt(108,EO(i)||"Unknown",s));return _n({},n,r)}function Fy(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Jl,uc=Oi.current,nn(Oi,i),nn(vs,vs.current),!0}function mM(i,t,n){var r=i.stateNode;if(!r)throw Error(bt(169));n?(i=k3(i,t,uc),r.__reactInternalMemoizedMergedChildContext=i,fn(vs),fn(Oi),nn(Oi,i)):fn(vs),nn(vs,n)}var ja=null,r0=!1,l_=!1;function O3(i){ja===null?ja=[i]:ja.push(i)}function zB(i){r0=!0,O3(i)}function eu(){if(!l_&&ja!==null){l_=!0;var i=0,t=Wr;try{var n=ja;for(Wr=1;i<n.length;i++){var r=n[i];do r=r(!0);while(r!==null)}ja=null,r0=!1}catch(s){throw ja!==null&&(ja=ja.slice(i+1)),a3(Ew,eu),s}finally{Wr=t,l_=!1}}return null}var Mf=[],Ef=0,Uy=null,Ny=0,ro=[],no=0,cc=null,Ba=1,Fa="";function Ou(i,t){Mf[Ef++]=Ny,Mf[Ef++]=Uy,Uy=i,Ny=t}function B3(i,t,n){ro[no++]=Ba,ro[no++]=Fa,ro[no++]=cc,cc=i;var r=Ba;i=Fa;var s=32-ko(r)-1;r&=~(1<<s),n+=1;var o=32-ko(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ba=1<<32-ko(t)+s|n<<s|r,Fa=o+i}else Ba=1<<o|n<<s|r,Fa=i}function kw(i){i.return!==null&&(Ou(i,1),B3(i,1,0))}function Ow(i){for(;i===Uy;)Uy=Mf[--Ef],Mf[Ef]=null,Ny=Mf[--Ef],Mf[Ef]=null;for(;i===cc;)cc=ro[--no],ro[no]=null,Fa=ro[--no],ro[no]=null,Ba=ro[--no],ro[no]=null}var js=null,Ls=null,pn=!1,Po=null;function F3(i,t){var n=so(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=i,t=i.deletions,t===null?(i.deletions=[n],i.flags|=16):t.push(n)}function gM(i,t){switch(i.tag){case 5:var n=i.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,js=i,Ls=Gl(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,js=i,Ls=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cc!==null?{id:Ba,overflow:Fa}:null,i.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=so(18,null,null,0),n.stateNode=t,n.return=i,i.child=n,js=i,Ls=null,!0):!1;default:return!1}}function sb(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ob(i){if(pn){var t=Ls;if(t){var n=t;if(!gM(i,t)){if(sb(i))throw Error(bt(418));t=Gl(n.nextSibling);var r=js;t&&gM(i,t)?F3(r,n):(i.flags=i.flags&-4097|2,pn=!1,js=i)}}else{if(sb(i))throw Error(bt(418));i.flags=i.flags&-4097|2,pn=!1,js=i}}}function yM(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;js=i}function Zm(i){if(i!==js)return!1;if(!pn)return yM(i),pn=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!tb(i.type,i.memoizedProps)),t&&(t=Ls)){if(sb(i))throw U3(),Error(bt(418));for(;t;)F3(i,t),t=Gl(t.nextSibling)}if(yM(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(bt(317));e:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var n=i.data;if(n==="/$"){if(t===0){Ls=Gl(i.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}i=i.nextSibling}Ls=null}}else Ls=js?Gl(i.stateNode.nextSibling):null;return!0}function U3(){for(var i=Ls;i;)i=Gl(i.nextSibling)}function Qf(){Ls=js=null,pn=!1}function Bw(i){Po===null?Po=[i]:Po.push(i)}var VB=tl.ReactCurrentBatchConfig;function Fd(i,t,n){if(i=n.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,i));var s=r,o=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var u=s.refs;a===null?delete u[o]:u[o]=a},t._stringRef=o,t)}if(typeof i!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,i))}return i}function $m(i,t){throw i=Object.prototype.toString.call(t),Error(bt(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function vM(i){var t=i._init;return t(i._payload)}function N3(i){function t(g,_){if(i){var x=g.deletions;x===null?(g.deletions=[_],g.flags|=16):x.push(_)}}function n(g,_){if(!i)return null;for(;_!==null;)t(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function s(g,_){return g=Wl(g,_),g.index=0,g.sibling=null,g}function o(g,_,x){return g.index=x,i?(x=g.alternate,x!==null?(x=x.index,x<_?(g.flags|=2,_):x):(g.flags|=2,_)):(g.flags|=1048576,_)}function a(g){return i&&g.alternate===null&&(g.flags|=2),g}function u(g,_,x,b){return _===null||_.tag!==6?(_=m_(x,g.mode,b),_.return=g,_):(_=s(_,x),_.return=g,_)}function l(g,_,x,b){var S=x.type;return S===_f?d(g,_,x.props.children,b,x.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tl&&vM(S)===_.type)?(b=s(_,x.props),b.ref=Fd(g,_,x),b.return=g,b):(b=yy(x.type,x.key,x.props,null,g.mode,b),b.ref=Fd(g,_,x),b.return=g,b)}function c(g,_,x,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=g_(x,g.mode,b),_.return=g,_):(_=s(_,x.children||[]),_.return=g,_)}function d(g,_,x,b,S){return _===null||_.tag!==7?(_=tc(x,g.mode,b,S),_.return=g,_):(_=s(_,x),_.return=g,_)}function p(g,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=m_(""+_,g.mode,x),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hm:return x=yy(_.type,_.key,_.props,null,g.mode,x),x.ref=Fd(g,null,_),x.return=g,x;case vf:return _=g_(_,g.mode,x),_.return=g,_;case Tl:var b=_._init;return p(g,b(_._payload),x)}if(yh(_)||jd(_))return _=tc(_,g.mode,x,null),_.return=g,_;$m(g,_)}return null}function f(g,_,x,b){var S=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:u(g,_,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hm:return x.key===S?l(g,_,x,b):null;case vf:return x.key===S?c(g,_,x,b):null;case Tl:return S=x._init,f(g,_,S(x._payload),b)}if(yh(x)||jd(x))return S!==null?null:d(g,_,x,b,null);$m(g,x)}return null}function h(g,_,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,u(_,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Hm:return g=g.get(b.key===null?x:b.key)||null,l(_,g,b,S);case vf:return g=g.get(b.key===null?x:b.key)||null,c(_,g,b,S);case Tl:var T=b._init;return h(g,_,x,T(b._payload),S)}if(yh(b)||jd(b))return g=g.get(x)||null,d(_,g,b,S,null);$m(_,b)}return null}function m(g,_,x,b){for(var S=null,T=null,M=_,R=_=0,L=null;M!==null&&R<x.length;R++){M.index>R?(L=M,M=null):L=M.sibling;var P=f(g,M,x[R],b);if(P===null){M===null&&(M=L);break}i&&M&&P.alternate===null&&t(g,M),_=o(P,_,R),T===null?S=P:T.sibling=P,T=P,M=L}if(R===x.length)return n(g,M),pn&&Ou(g,R),S;if(M===null){for(;R<x.length;R++)M=p(g,x[R],b),M!==null&&(_=o(M,_,R),T===null?S=M:T.sibling=M,T=M);return pn&&Ou(g,R),S}for(M=r(g,M);R<x.length;R++)L=h(M,g,R,x[R],b),L!==null&&(i&&L.alternate!==null&&M.delete(L.key===null?R:L.key),_=o(L,_,R),T===null?S=L:T.sibling=L,T=L);return i&&M.forEach(function(C){return t(g,C)}),pn&&Ou(g,R),S}function y(g,_,x,b){var S=jd(x);if(typeof S!="function")throw Error(bt(150));if(x=S.call(x),x==null)throw Error(bt(151));for(var T=S=null,M=_,R=_=0,L=null,P=x.next();M!==null&&!P.done;R++,P=x.next()){M.index>R?(L=M,M=null):L=M.sibling;var C=f(g,M,P.value,b);if(C===null){M===null&&(M=L);break}i&&M&&C.alternate===null&&t(g,M),_=o(C,_,R),T===null?S=C:T.sibling=C,T=C,M=L}if(P.done)return n(g,M),pn&&Ou(g,R),S;if(M===null){for(;!P.done;R++,P=x.next())P=p(g,P.value,b),P!==null&&(_=o(P,_,R),T===null?S=P:T.sibling=P,T=P);return pn&&Ou(g,R),S}for(M=r(g,M);!P.done;R++,P=x.next())P=h(M,g,R,P.value,b),P!==null&&(i&&P.alternate!==null&&M.delete(P.key===null?R:P.key),_=o(P,_,R),T===null?S=P:T.sibling=P,T=P);return i&&M.forEach(function(k){return t(g,k)}),pn&&Ou(g,R),S}function v(g,_,x,b){if(typeof x=="object"&&x!==null&&x.type===_f&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Hm:e:{for(var S=x.key,T=_;T!==null;){if(T.key===S){if(S=x.type,S===_f){if(T.tag===7){n(g,T.sibling),_=s(T,x.props.children),_.return=g,g=_;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tl&&vM(S)===T.type){n(g,T.sibling),_=s(T,x.props),_.ref=Fd(g,T,x),_.return=g,g=_;break e}n(g,T);break}else t(g,T);T=T.sibling}x.type===_f?(_=tc(x.props.children,g.mode,b,x.key),_.return=g,g=_):(b=yy(x.type,x.key,x.props,null,g.mode,b),b.ref=Fd(g,_,x),b.return=g,g=b)}return a(g);case vf:e:{for(T=x.key;_!==null;){if(_.key===T)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(g,_.sibling),_=s(_,x.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else t(g,_);_=_.sibling}_=g_(x,g.mode,b),_.return=g,g=_}return a(g);case Tl:return T=x._init,v(g,_,T(x._payload),b)}if(yh(x))return m(g,_,x,b);if(jd(x))return y(g,_,x,b);$m(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(g,_.sibling),_=s(_,x),_.return=g,g=_):(n(g,_),_=m_(x,g.mode,b),_.return=g,g=_),a(g)):n(g,_)}return v}var Zf=N3(!0),G3=N3(!1),Gy=$l(null),Hy=null,Tf=null,Fw=null;function Uw(){Fw=Tf=Hy=null}function Nw(i){var t=Gy.current;fn(Gy),i._currentValue=t}function ab(i,t,n){for(;i!==null;){var r=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),i===n)break;i=i.return}}function Uf(i,t){Hy=i,Fw=Tf=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(ps=!0),i.firstContext=null)}function uo(i){var t=i._currentValue;if(Fw!==i)if(i={context:i,memoizedValue:t,next:null},Tf===null){if(Hy===null)throw Error(bt(308));Tf=i,Hy.dependencies={lanes:0,firstContext:i}}else Tf=Tf.next=i;return t}var Xu=null;function Gw(i){Xu===null?Xu=[i]:Xu.push(i)}function H3(i,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Gw(t)):(n.next=s.next,s.next=n),t.interleaved=n,Wa(i,r)}function Wa(i,t){i.lanes|=t;var n=i.alternate;for(n!==null&&(n.lanes|=t),n=i,i=i.return;i!==null;)i.childLanes|=t,n=i.alternate,n!==null&&(n.childLanes|=t),n=i,i=i.return;return n.tag===3?n.stateNode:null}var Cl=!1;function Hw(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z3(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Na(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function Hl(i,t,n){var r=i.updateQueue;if(r===null)return null;if(r=r.shared,kr&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Wa(i,n)}return s=r.interleaved,s===null?(t.next=t,Gw(r)):(t.next=s.next,s.next=t),r.interleaved=t,Wa(i,n)}function fy(i,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=i.pendingLanes,n|=r,t.lanes=n,Tw(i,n)}}function _M(i,t){var n=i.updateQueue,r=i.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},i.updateQueue=n;return}i=n.lastBaseUpdate,i===null?n.firstBaseUpdate=t:i.next=t,n.lastBaseUpdate=t}function zy(i,t,n,r){var s=i.updateQueue;Cl=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var l=u,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var d=i.alternate;d!==null&&(d=d.updateQueue,u=d.lastBaseUpdate,u!==a&&(u===null?d.firstBaseUpdate=c:u.next=c,d.lastBaseUpdate=l))}if(o!==null){var p=s.baseState;a=0,d=c=l=null,u=o;do{var f=u.lane,h=u.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var m=i,y=u;switch(f=t,h=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){p=m.call(h,p,f);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(h,p,f):m,f==null)break e;p=_n({},p,f);break e;case 2:Cl=!0}}u.callback!==null&&u.lane!==0&&(i.flags|=64,f=s.effects,f===null?s.effects=[u]:f.push(u))}else h={eventTime:h,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,a|=f;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;f=u,u=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);dc|=a,i.lanes=a,i.memoizedState=p}}function xM(i,t,n){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var r=i[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(bt(191,s));s.call(r)}}}var Up={},aa=$l(Up),op=$l(Up),ap=$l(Up);function Yu(i){if(i===Up)throw Error(bt(174));return i}function zw(i,t){switch(nn(ap,t),nn(op,i),nn(aa,Up),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gx(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=Gx(t,i)}fn(aa),nn(aa,t)}function $f(){fn(aa),fn(op),fn(ap)}function V3(i){Yu(ap.current);var t=Yu(aa.current),n=Gx(t,i.type);t!==n&&(nn(op,i),nn(aa,n))}function Vw(i){op.current===i&&(fn(aa),fn(op))}var mn=$l(0);function Vy(i){for(var t=i;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var u_=[];function Ww(){for(var i=0;i<u_.length;i++)u_[i]._workInProgressVersionPrimary=null;u_.length=0}var dy=tl.ReactCurrentDispatcher,c_=tl.ReactCurrentBatchConfig,fc=0,vn=null,Yn=null,ui=null,Wy=!1,Rh=!1,lp=0,WB=0;function Ti(){throw Error(bt(321))}function Xw(i,t){if(t===null)return!1;for(var n=0;n<t.length&&n<i.length;n++)if(!Bo(i[n],t[n]))return!1;return!0}function Yw(i,t,n,r,s,o){if(fc=o,vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dy.current=i===null||i.memoizedState===null?JB:KB,i=n(r,s),Rh){o=0;do{if(Rh=!1,lp=0,25<=o)throw Error(bt(301));o+=1,ui=Yn=null,t.updateQueue=null,dy.current=QB,i=n(r,s)}while(Rh)}if(dy.current=Xy,t=Yn!==null&&Yn.next!==null,fc=0,ui=Yn=vn=null,Wy=!1,t)throw Error(bt(300));return i}function qw(){var i=lp!==0;return lp=0,i}function ea(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?vn.memoizedState=ui=i:ui=ui.next=i,ui}function co(){if(Yn===null){var i=vn.alternate;i=i!==null?i.memoizedState:null}else i=Yn.next;var t=ui===null?vn.memoizedState:ui.next;if(t!==null)ui=t,Yn=i;else{if(i===null)throw Error(bt(310));Yn=i,i={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},ui===null?vn.memoizedState=ui=i:ui=ui.next=i}return ui}function up(i,t){return typeof t=="function"?t(i):t}function f_(i){var t=co(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=i;var r=Yn,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var u=a=null,l=null,c=o;do{var d=c.lane;if((fc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:i(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(u=l=p,a=r):l=l.next=p,vn.lanes|=d,dc|=d}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=u,Bo(r,t.memoizedState)||(ps=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(i=n.interleaved,i!==null){s=i;do o=s.lane,vn.lanes|=o,dc|=o,s=s.next;while(s!==i)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function d_(i){var t=co(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=i;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=i(o,a.action),a=a.next;while(a!==s);Bo(o,t.memoizedState)||(ps=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function W3(){}function X3(i,t){var n=vn,r=co(),s=t(),o=!Bo(r.memoizedState,s);if(o&&(r.memoizedState=s,ps=!0),r=r.queue,Jw(J3.bind(null,n,r,i),[i]),r.getSnapshot!==t||o||ui!==null&&ui.memoizedState.tag&1){if(n.flags|=2048,cp(9,q3.bind(null,n,r,s,t),void 0,null),ci===null)throw Error(bt(349));fc&30||Y3(n,t,s)}return s}function Y3(i,t,n){i.flags|=16384,i={getSnapshot:t,value:n},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.stores=[i]):(n=t.stores,n===null?t.stores=[i]:n.push(i))}function q3(i,t,n,r){t.value=n,t.getSnapshot=r,K3(t)&&Q3(i)}function J3(i,t,n){return n(function(){K3(t)&&Q3(i)})}function K3(i){var t=i.getSnapshot;i=i.value;try{var n=t();return!Bo(i,n)}catch{return!0}}function Q3(i){var t=Wa(i,1);t!==null&&Oo(t,i,1,-1)}function bM(i){var t=ea();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:i},t.queue=i,i=i.dispatch=qB.bind(null,vn,i),[t.memoizedState,i]}function cp(i,t,n,r){return i={tag:i,create:t,destroy:n,deps:r,next:null},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.lastEffect=i.next=i):(n=t.lastEffect,n===null?t.lastEffect=i.next=i:(r=n.next,n.next=i,i.next=r,t.lastEffect=i)),i}function Z3(){return co().memoizedState}function hy(i,t,n,r){var s=ea();vn.flags|=i,s.memoizedState=cp(1|t,n,void 0,r===void 0?null:r)}function n0(i,t,n,r){var s=co();r=r===void 0?null:r;var o=void 0;if(Yn!==null){var a=Yn.memoizedState;if(o=a.destroy,r!==null&&Xw(r,a.deps)){s.memoizedState=cp(t,n,o,r);return}}vn.flags|=i,s.memoizedState=cp(1|t,n,o,r)}function wM(i,t){return hy(8390656,8,i,t)}function Jw(i,t){return n0(2048,8,i,t)}function $3(i,t){return n0(4,2,i,t)}function eP(i,t){return n0(4,4,i,t)}function tP(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function rP(i,t,n){return n=n!=null?n.concat([i]):null,n0(4,4,tP.bind(null,t,i),n)}function Kw(){}function nP(i,t){var n=co();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xw(t,r[1])?r[0]:(n.memoizedState=[i,t],i)}function iP(i,t){var n=co();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xw(t,r[1])?r[0]:(i=i(),n.memoizedState=[i,t],i)}function sP(i,t,n){return fc&21?(Bo(n,t)||(n=c3(),vn.lanes|=n,dc|=n,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,ps=!0),i.memoizedState=n)}function XB(i,t){var n=Wr;Wr=n!==0&&4>n?n:4,i(!0);var r=c_.transition;c_.transition={};try{i(!1),t()}finally{Wr=n,c_.transition=r}}function oP(){return co().memoizedState}function YB(i,t,n){var r=Vl(i);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aP(i))lP(t,n);else if(n=H3(i,t,n,r),n!==null){var s=Zi();Oo(n,i,r,s),uP(n,t,r)}}function qB(i,t,n){var r=Vl(i),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aP(i))lP(t,s);else{var o=i.alternate;if(i.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,u=o(a,n);if(s.hasEagerState=!0,s.eagerState=u,Bo(u,a)){var l=t.interleaved;l===null?(s.next=s,Gw(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=H3(i,t,s,r),n!==null&&(s=Zi(),Oo(n,i,r,s),uP(n,t,r))}}function aP(i){var t=i.alternate;return i===vn||t!==null&&t===vn}function lP(i,t){Rh=Wy=!0;var n=i.pending;n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t}function uP(i,t,n){if(n&4194240){var r=t.lanes;r&=i.pendingLanes,n|=r,t.lanes=n,Tw(i,n)}}var Xy={readContext:uo,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},JB={readContext:uo,useCallback:function(i,t){return ea().memoizedState=[i,t===void 0?null:t],i},useContext:uo,useEffect:wM,useImperativeHandle:function(i,t,n){return n=n!=null?n.concat([i]):null,hy(4194308,4,tP.bind(null,t,i),n)},useLayoutEffect:function(i,t){return hy(4194308,4,i,t)},useInsertionEffect:function(i,t){return hy(4,2,i,t)},useMemo:function(i,t){var n=ea();return t=t===void 0?null:t,i=i(),n.memoizedState=[i,t],i},useReducer:function(i,t,n){var r=ea();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},r.queue=i,i=i.dispatch=YB.bind(null,vn,i),[r.memoizedState,i]},useRef:function(i){var t=ea();return i={current:i},t.memoizedState=i},useState:bM,useDebugValue:Kw,useDeferredValue:function(i){return ea().memoizedState=i},useTransition:function(){var i=bM(!1),t=i[0];return i=XB.bind(null,i[1]),ea().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,n){var r=vn,s=ea();if(pn){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=t(),ci===null)throw Error(bt(349));fc&30||Y3(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,wM(J3.bind(null,r,o,i),[i]),r.flags|=2048,cp(9,q3.bind(null,r,o,n,t),void 0,null),n},useId:function(){var i=ea(),t=ci.identifierPrefix;if(pn){var n=Fa,r=Ba;n=(r&~(1<<32-ko(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=lp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=WB++,t=":"+t+"r"+n.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},KB={readContext:uo,useCallback:nP,useContext:uo,useEffect:Jw,useImperativeHandle:rP,useInsertionEffect:$3,useLayoutEffect:eP,useMemo:iP,useReducer:f_,useRef:Z3,useState:function(){return f_(up)},useDebugValue:Kw,useDeferredValue:function(i){var t=co();return sP(t,Yn.memoizedState,i)},useTransition:function(){var i=f_(up)[0],t=co().memoizedState;return[i,t]},useMutableSource:W3,useSyncExternalStore:X3,useId:oP,unstable_isNewReconciler:!1},QB={readContext:uo,useCallback:nP,useContext:uo,useEffect:Jw,useImperativeHandle:rP,useInsertionEffect:$3,useLayoutEffect:eP,useMemo:iP,useReducer:d_,useRef:Z3,useState:function(){return d_(up)},useDebugValue:Kw,useDeferredValue:function(i){var t=co();return Yn===null?t.memoizedState=i:sP(t,Yn.memoizedState,i)},useTransition:function(){var i=d_(up)[0],t=co().memoizedState;return[i,t]},useMutableSource:W3,useSyncExternalStore:X3,useId:oP,unstable_isNewReconciler:!1};function To(i,t){if(i&&i.defaultProps){t=_n({},t),i=i.defaultProps;for(var n in i)t[n]===void 0&&(t[n]=i[n]);return t}return t}function lb(i,t,n,r){t=i.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),i.memoizedState=n,i.lanes===0&&(i.updateQueue.baseState=n)}var i0={isMounted:function(i){return(i=i._reactInternals)?Ac(i)===i:!1},enqueueSetState:function(i,t,n){i=i._reactInternals;var r=Zi(),s=Vl(i),o=Na(r,s);o.payload=t,n!=null&&(o.callback=n),t=Hl(i,o,s),t!==null&&(Oo(t,i,s,r),fy(t,i,s))},enqueueReplaceState:function(i,t,n){i=i._reactInternals;var r=Zi(),s=Vl(i),o=Na(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Hl(i,o,s),t!==null&&(Oo(t,i,s,r),fy(t,i,s))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var n=Zi(),r=Vl(i),s=Na(n,r);s.tag=2,t!=null&&(s.callback=t),t=Hl(i,s,r),t!==null&&(Oo(t,i,r,n),fy(t,i,r))}};function SM(i,t,n,r,s,o,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!rp(n,r)||!rp(s,o):!0}function cP(i,t,n){var r=!1,s=Jl,o=t.contextType;return typeof o=="object"&&o!==null?o=uo(o):(s=_s(t)?uc:Oi.current,r=t.contextTypes,o=(r=r!=null)?Kf(i,s):Jl),t=new t(n,o),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=i0,i.stateNode=t,t._reactInternals=i,r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=o),t}function AM(i,t,n,r){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==i&&i0.enqueueReplaceState(t,t.state,null)}function ub(i,t,n,r){var s=i.stateNode;s.props=n,s.state=i.memoizedState,s.refs={},Hw(i);var o=t.contextType;typeof o=="object"&&o!==null?s.context=uo(o):(o=_s(t)?uc:Oi.current,s.context=Kf(i,o)),s.state=i.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(lb(i,t,o,n),s.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&i0.enqueueReplaceState(s,s.state,null),zy(i,n,s,r),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function ed(i,t){try{var n="",r=t;do n+=MO(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:i,source:t,stack:s,digest:null}}function h_(i,t,n){return{value:i,source:null,stack:n??null,digest:t??null}}function cb(i,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ZB=typeof WeakMap=="function"?WeakMap:Map;function fP(i,t,n){n=Na(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qy||(qy=!0,xb=r),cb(i,t)},n}function dP(i,t,n){n=Na(-1,n),n.tag=3;var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){cb(i,t)}}var o=i.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){cb(i,t),typeof r!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function MM(i,t,n){var r=i.pingCache;if(r===null){r=i.pingCache=new ZB;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),i=dF.bind(null,i,t,n),t.then(i,i))}function EM(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function TM(i,t,n,r,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===t?i.flags|=65536:(i.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Na(-1,1),t.tag=2,Hl(n,t,1))),n.lanes|=1),i)}var $B=tl.ReactCurrentOwner,ps=!1;function Ji(i,t,n,r){t.child=i===null?G3(t,null,n,r):Zf(t,i.child,n,r)}function CM(i,t,n,r,s){n=n.render;var o=t.ref;return Uf(t,s),r=Yw(i,t,n,r,o,s),n=qw(),i!==null&&!ps?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Xa(i,t,s)):(pn&&n&&kw(t),t.flags|=1,Ji(i,t,r,s),t.child)}function RM(i,t,n,r,s){if(i===null){var o=n.type;return typeof o=="function"&&!iS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,hP(i,t,o,r,s)):(i=yy(n.type,null,r,t,t.mode,s),i.ref=t.ref,i.return=t,t.child=i)}if(o=i.child,!(i.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:rp,n(a,r)&&i.ref===t.ref)return Xa(i,t,s)}return t.flags|=1,i=Wl(o,r),i.ref=t.ref,i.return=t,t.child=i}function hP(i,t,n,r,s){if(i!==null){var o=i.memoizedProps;if(rp(o,r)&&i.ref===t.ref)if(ps=!1,t.pendingProps=r=o,(i.lanes&s)!==0)i.flags&131072&&(ps=!0);else return t.lanes=i.lanes,Xa(i,t,s)}return fb(i,t,n,r,s)}function pP(i,t,n){var r=t.pendingProps,s=r.children,o=i!==null?i.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Rf,Ps),Ps|=n;else{if(!(n&1073741824))return i=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,nn(Rf,Ps),Ps|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,nn(Rf,Ps),Ps|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,nn(Rf,Ps),Ps|=r;return Ji(i,t,s,n),t.child}function mP(i,t){var n=t.ref;(i===null&&n!==null||i!==null&&i.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fb(i,t,n,r,s){var o=_s(n)?uc:Oi.current;return o=Kf(t,o),Uf(t,s),n=Yw(i,t,n,r,o,s),r=qw(),i!==null&&!ps?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Xa(i,t,s)):(pn&&r&&kw(t),t.flags|=1,Ji(i,t,n,s),t.child)}function PM(i,t,n,r,s){if(_s(n)){var o=!0;Fy(t)}else o=!1;if(Uf(t,s),t.stateNode===null)py(i,t),cP(t,n,r),ub(t,n,r,s),r=!0;else if(i===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=uo(c):(c=_s(n)?uc:Oi.current,c=Kf(t,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||l!==c)&&AM(t,a,r,c),Cl=!1;var f=t.memoizedState;a.state=f,zy(t,r,a,s),l=t.memoizedState,u!==r||f!==l||vs.current||Cl?(typeof d=="function"&&(lb(t,n,d,r),l=t.memoizedState),(u=Cl||SM(t,n,u,r,f,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,z3(i,t),u=t.memoizedProps,c=t.type===t.elementType?u:To(t.type,u),a.props=c,p=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=uo(l):(l=_s(n)?uc:Oi.current,l=Kf(t,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==p||f!==l)&&AM(t,a,r,l),Cl=!1,f=t.memoizedState,a.state=f,zy(t,r,a,s);var m=t.memoizedState;u!==p||f!==m||vs.current||Cl?(typeof h=="function"&&(lb(t,n,h,r),m=t.memoizedState),(c=Cl||SM(t,n,c,r,f,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||u===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),r=!1)}return db(i,t,n,r,o,s)}function db(i,t,n,r,s,o){mP(i,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&mM(t,n,!1),Xa(i,t,o);r=t.stateNode,$B.current=t;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,i!==null&&a?(t.child=Zf(t,i.child,null,o),t.child=Zf(t,null,u,o)):Ji(i,t,u,o),t.memoizedState=r.state,s&&mM(t,n,!0),t.child}function gP(i){var t=i.stateNode;t.pendingContext?pM(i,t.pendingContext,t.pendingContext!==t.context):t.context&&pM(i,t.context,!1),zw(i,t.containerInfo)}function IM(i,t,n,r,s){return Qf(),Bw(s),t.flags|=256,Ji(i,t,n,r),t.child}var hb={dehydrated:null,treeContext:null,retryLane:0};function pb(i){return{baseLanes:i,cachePool:null,transitions:null}}function yP(i,t,n){var r=t.pendingProps,s=mn.current,o=!1,a=(t.flags&128)!==0,u;if((u=a)||(u=i!==null&&i.memoizedState===null?!1:(s&2)!==0),u?(o=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),nn(mn,s&1),i===null)return ob(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,i=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=a0(a,r,0,null),i=tc(i,r,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,t.child.memoizedState=pb(n),t.memoizedState=hb,i):Qw(t,a));if(s=i.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return eF(i,t,a,r,u,s,n);if(o){o=r.fallback,a=t.mode,s=i.child,u=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Wl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Wl(u,o):(o=tc(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=i.child.memoizedState,a=a===null?pb(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=i.childLanes&~n,t.memoizedState=hb,r}return o=i.child,i=o.sibling,r=Wl(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,i!==null&&(n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)),t.child=r,t.memoizedState=null,r}function Qw(i,t){return t=a0({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function eg(i,t,n,r){return r!==null&&Bw(r),Zf(t,i.child,null,n),i=Qw(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function eF(i,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=h_(Error(bt(422))),eg(i,t,a,r)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=a0({mode:"visible",children:r.children},s,0,null),o=tc(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Zf(t,i.child,null,a),t.child.memoizedState=pb(a),t.memoizedState=hb,o);if(!(t.mode&1))return eg(i,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(bt(419)),r=h_(o,r,void 0),eg(i,t,a,r)}if(u=(a&i.childLanes)!==0,ps||u){if(r=ci,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Wa(i,s),Oo(r,i,s,-1))}return nS(),r=h_(Error(bt(421))),eg(i,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=i.child,t=hF.bind(null,i),s._reactRetry=t,null):(i=o.treeContext,Ls=Gl(s.nextSibling),js=t,pn=!0,Po=null,i!==null&&(ro[no++]=Ba,ro[no++]=Fa,ro[no++]=cc,Ba=i.id,Fa=i.overflow,cc=t),t=Qw(t,r.children),t.flags|=4096,t)}function LM(i,t,n){i.lanes|=t;var r=i.alternate;r!==null&&(r.lanes|=t),ab(i.return,t,n)}function p_(i,t,n,r,s){var o=i.memoizedState;o===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function vP(i,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Ji(i,t,r.children,n),r=mn.current,r&2)r=r&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&LM(i,n,t);else if(i.tag===19)LM(i,n,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}r&=1}if(nn(mn,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)i=n.alternate,i!==null&&Vy(i)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),p_(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(i=s.alternate,i!==null&&Vy(i)===null){t.child=s;break}i=s.sibling,s.sibling=n,n=s,s=i}p_(t,!0,n,null,o);break;case"together":p_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function py(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function Xa(i,t,n){if(i!==null&&(t.dependencies=i.dependencies),dc|=t.lanes,!(n&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(bt(153));if(t.child!==null){for(i=t.child,n=Wl(i,i.pendingProps),t.child=n,n.return=t;i.sibling!==null;)i=i.sibling,n=n.sibling=Wl(i,i.pendingProps),n.return=t;n.sibling=null}return t.child}function tF(i,t,n){switch(t.tag){case 3:gP(t),Qf();break;case 5:V3(t);break;case 1:_s(t.type)&&Fy(t);break;case 4:zw(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;nn(Gy,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(nn(mn,mn.current&1),t.flags|=128,null):n&t.child.childLanes?yP(i,t,n):(nn(mn,mn.current&1),i=Xa(i,t,n),i!==null?i.sibling:null);nn(mn,mn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,i.flags&128){if(r)return vP(i,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nn(mn,mn.current),r)break;return null;case 22:case 23:return t.lanes=0,pP(i,t,n)}return Xa(i,t,n)}var _P,mb,xP,bP;_P=function(i,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)i.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mb=function(){};xP=function(i,t,n,r){var s=i.memoizedProps;if(s!==r){i=t.stateNode,Yu(aa.current);var o=null;switch(n){case"input":s=Bx(i,s),r=Bx(i,r),o=[];break;case"select":s=_n({},s,{value:void 0}),r=_n({},r,{value:void 0}),o=[];break;case"textarea":s=Nx(i,s),r=Nx(i,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(i.onclick=Oy)}Hx(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var u=s[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jh.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(l!=null||u!=null))if(c==="style")if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&cn("scroll",i),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};bP=function(i,t,n,r){n!==r&&(t.flags|=4)};function Ud(i,t){if(!pn)switch(i.tailMode){case"hidden":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?i.tail=null:n.sibling=null;break;case"collapsed":n=i.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:r.sibling=null}}function Ci(i){var t=i.alternate!==null&&i.alternate.child===i.child,n=0,r=0;if(t)for(var s=i.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=r,i.childLanes=n,t}function rF(i,t,n){var r=t.pendingProps;switch(Ow(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(t),null;case 1:return _s(t.type)&&By(),Ci(t),null;case 3:return r=t.stateNode,$f(),fn(vs),fn(Oi),Ww(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Zm(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Po!==null&&(Sb(Po),Po=null))),mb(i,t),Ci(t),null;case 5:Vw(t);var s=Yu(ap.current);if(n=t.type,i!==null&&t.stateNode!=null)xP(i,t,n,r,s),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(bt(166));return Ci(t),null}if(i=Yu(aa.current),Zm(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[na]=t,r[sp]=o,i=(t.mode&1)!==0,n){case"dialog":cn("cancel",r),cn("close",r);break;case"iframe":case"object":case"embed":cn("load",r);break;case"video":case"audio":for(s=0;s<_h.length;s++)cn(_h[s],r);break;case"source":cn("error",r);break;case"img":case"image":case"link":cn("error",r),cn("load",r);break;case"details":cn("toggle",r);break;case"input":GA(r,o),cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},cn("invalid",r);break;case"textarea":zA(r,o),cn("invalid",r)}Hx(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Qm(r.textContent,u,i),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Qm(r.textContent,u,i),s=["children",""+u]):Jh.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&cn("scroll",r)}switch(n){case"input":zm(r),HA(r,o,!0);break;case"textarea":zm(r),VA(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Oy)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=JR(n)),i==="http://www.w3.org/1999/xhtml"?n==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof r.is=="string"?i=a.createElement(n,{is:r.is}):(i=a.createElement(n),n==="select"&&(a=i,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):i=a.createElementNS(i,n),i[na]=t,i[sp]=r,_P(i,t,!1,!1),t.stateNode=i;e:{switch(a=zx(n,r),n){case"dialog":cn("cancel",i),cn("close",i),s=r;break;case"iframe":case"object":case"embed":cn("load",i),s=r;break;case"video":case"audio":for(s=0;s<_h.length;s++)cn(_h[s],i);s=r;break;case"source":cn("error",i),s=r;break;case"img":case"image":case"link":cn("error",i),cn("load",i),s=r;break;case"details":cn("toggle",i),s=r;break;case"input":GA(i,r),s=Bx(i,r),cn("invalid",i);break;case"option":s=r;break;case"select":i._wrapperState={wasMultiple:!!r.multiple},s=_n({},r,{value:void 0}),cn("invalid",i);break;case"textarea":zA(i,r),s=Nx(i,r),cn("invalid",i);break;default:s=r}Hx(n,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var l=u[o];o==="style"?ZR(i,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KR(i,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kh(i,l):typeof l=="number"&&Kh(i,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jh.hasOwnProperty(o)?l!=null&&o==="onScroll"&&cn("scroll",i):l!=null&&bw(i,o,l,a))}switch(n){case"input":zm(i),HA(i,r,!1);break;case"textarea":zm(i),VA(i);break;case"option":r.value!=null&&i.setAttribute("value",""+ql(r.value));break;case"select":i.multiple=!!r.multiple,o=r.value,o!=null?kf(i,!!r.multiple,o,!1):r.defaultValue!=null&&kf(i,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=Oy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ci(t),null;case 6:if(i&&t.stateNode!=null)bP(i,t,i.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(bt(166));if(n=Yu(ap.current),Yu(aa.current),Zm(t)){if(r=t.stateNode,n=t.memoizedProps,r[na]=t,(o=r.nodeValue!==n)&&(i=js,i!==null))switch(i.tag){case 3:Qm(r.nodeValue,n,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qm(r.nodeValue,n,(i.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[na]=t,t.stateNode=r}return Ci(t),null;case 13:if(fn(mn),r=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(pn&&Ls!==null&&t.mode&1&&!(t.flags&128))U3(),Qf(),t.flags|=98560,o=!1;else if(o=Zm(t),r!==null&&r.dehydrated!==null){if(i===null){if(!o)throw Error(bt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(bt(317));o[na]=t}else Qf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ci(t),o=!1}else Po!==null&&(Sb(Po),Po=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(i!==null&&i.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(i===null||mn.current&1?qn===0&&(qn=3):nS())),t.updateQueue!==null&&(t.flags|=4),Ci(t),null);case 4:return $f(),mb(i,t),i===null&&np(t.stateNode.containerInfo),Ci(t),null;case 10:return Nw(t.type._context),Ci(t),null;case 17:return _s(t.type)&&By(),Ci(t),null;case 19:if(fn(mn),o=t.memoizedState,o===null)return Ci(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ud(o,!1);else{if(qn!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(a=Vy(i),a!==null){for(t.flags|=128,Ud(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,i=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=i,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,i=a.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return nn(mn,mn.current&1|2),t.child}i=i.sibling}o.tail!==null&&jn()>td&&(t.flags|=128,r=!0,Ud(o,!1),t.lanes=4194304)}else{if(!r)if(i=Vy(a),i!==null){if(t.flags|=128,r=!0,n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ud(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!pn)return Ci(t),null}else 2*jn()-o.renderingStartTime>td&&n!==1073741824&&(t.flags|=128,r=!0,Ud(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=jn(),t.sibling=null,n=mn.current,nn(mn,r?n&1|2:n&1),t):(Ci(t),null);case 22:case 23:return rS(),r=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ps&1073741824&&(Ci(t),t.subtreeFlags&6&&(t.flags|=8192)):Ci(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function nF(i,t){switch(Ow(t),t.tag){case 1:return _s(t.type)&&By(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return $f(),fn(vs),fn(Oi),Ww(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return Vw(t),null;case 13:if(fn(mn),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));Qf()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return fn(mn),null;case 4:return $f(),null;case 10:return Nw(t.type._context),null;case 22:case 23:return rS(),null;case 24:return null;default:return null}}var tg=!1,ji=!1,iF=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Cf(i,t){var n=i.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Mn(i,t,r)}else n.current=null}function gb(i,t,n){try{n()}catch(r){Mn(i,t,r)}}var jM=!1;function sF(i,t){if($x=jy,i=E3(),Dw(i)){if("selectionStart"in i)var n={start:i.selectionStart,end:i.selectionEnd};else e:{n=(n=i.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,l=-1,c=0,d=0,p=i,f=null;t:for(;;){for(var h;p!==n||s!==0&&p.nodeType!==3||(u=a+s),p!==o||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)f=p,p=h;for(;;){if(p===i)break t;if(f===n&&++c===s&&(u=a),f===o&&++d===r&&(l=a),(h=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=h}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eb={focusedElem:i,selectionRange:n},jy=!1,kt=t;kt!==null;)if(t=kt,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,kt=i;else for(;kt!==null;){t=kt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:To(t.type,y),v);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(b){Mn(t,t.return,b)}if(i=t.sibling,i!==null){i.return=t.return,kt=i;break}kt=t.return}return m=jM,jM=!1,m}function Ph(i,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&i)===i){var o=s.destroy;s.destroy=void 0,o!==void 0&&gb(t,n,o)}s=s.next}while(s!==r)}}function s0(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&i)===i){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yb(i){var t=i.ref;if(t!==null){var n=i.stateNode;switch(i.tag){case 5:i=n;break;default:i=n}typeof t=="function"?t(i):t.current=i}}function wP(i){var t=i.alternate;t!==null&&(i.alternate=null,wP(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[na],delete t[sp],delete t[nb],delete t[GB],delete t[HB])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function SP(i){return i.tag===5||i.tag===3||i.tag===4}function DM(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||SP(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vb(i,t,n){var r=i.tag;if(r===5||r===6)i=i.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(i,t):n.insertBefore(i,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(i,n)):(t=n,t.appendChild(i)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Oy));else if(r!==4&&(i=i.child,i!==null))for(vb(i,t,n),i=i.sibling;i!==null;)vb(i,t,n),i=i.sibling}function _b(i,t,n){var r=i.tag;if(r===5||r===6)i=i.stateNode,t?n.insertBefore(i,t):n.appendChild(i);else if(r!==4&&(i=i.child,i!==null))for(_b(i,t,n),i=i.sibling;i!==null;)_b(i,t,n),i=i.sibling}var gi=null,Ro=!1;function ml(i,t,n){for(n=n.child;n!==null;)AP(i,t,n),n=n.sibling}function AP(i,t,n){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Qv,n)}catch{}switch(n.tag){case 5:ji||Cf(n,t);case 6:var r=gi,s=Ro;gi=null,ml(i,t,n),gi=r,Ro=s,gi!==null&&(Ro?(i=gi,n=n.stateNode,i.nodeType===8?i.parentNode.removeChild(n):i.removeChild(n)):gi.removeChild(n.stateNode));break;case 18:gi!==null&&(Ro?(i=gi,n=n.stateNode,i.nodeType===8?a_(i.parentNode,n):i.nodeType===1&&a_(i,n),ep(i)):a_(gi,n.stateNode));break;case 4:r=gi,s=Ro,gi=n.stateNode.containerInfo,Ro=!0,ml(i,t,n),gi=r,Ro=s;break;case 0:case 11:case 14:case 15:if(!ji&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&gb(n,t,a),s=s.next}while(s!==r)}ml(i,t,n);break;case 1:if(!ji&&(Cf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Mn(n,t,u)}ml(i,t,n);break;case 21:ml(i,t,n);break;case 22:n.mode&1?(ji=(r=ji)||n.memoizedState!==null,ml(i,t,n),ji=r):ml(i,t,n);break;default:ml(i,t,n)}}function kM(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var n=i.stateNode;n===null&&(n=i.stateNode=new iF),t.forEach(function(r){var s=pF.bind(null,i,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wo(i,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=i,a=t,u=a;e:for(;u!==null;){switch(u.tag){case 5:gi=u.stateNode,Ro=!1;break e;case 3:gi=u.stateNode.containerInfo,Ro=!0;break e;case 4:gi=u.stateNode.containerInfo,Ro=!0;break e}u=u.return}if(gi===null)throw Error(bt(160));AP(o,a,s),gi=null,Ro=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Mn(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)MP(t,i),t=t.sibling}function MP(i,t){var n=i.alternate,r=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(wo(t,i),$o(i),r&4){try{Ph(3,i,i.return),s0(3,i)}catch(y){Mn(i,i.return,y)}try{Ph(5,i,i.return)}catch(y){Mn(i,i.return,y)}}break;case 1:wo(t,i),$o(i),r&512&&n!==null&&Cf(n,n.return);break;case 5:if(wo(t,i),$o(i),r&512&&n!==null&&Cf(n,n.return),i.flags&32){var s=i.stateNode;try{Kh(s,"")}catch(y){Mn(i,i.return,y)}}if(r&4&&(s=i.stateNode,s!=null)){var o=i.memoizedProps,a=n!==null?n.memoizedProps:o,u=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&YR(s,o),zx(u,a);var c=zx(u,o);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?ZR(s,p):d==="dangerouslySetInnerHTML"?KR(s,p):d==="children"?Kh(s,p):bw(s,d,p,c)}switch(u){case"input":Fx(s,o);break;case"textarea":qR(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?kf(s,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?kf(s,!!o.multiple,o.defaultValue,!0):kf(s,!!o.multiple,o.multiple?[]:"",!1))}s[sp]=o}catch(y){Mn(i,i.return,y)}}break;case 6:if(wo(t,i),$o(i),r&4){if(i.stateNode===null)throw Error(bt(162));s=i.stateNode,o=i.memoizedProps;try{s.nodeValue=o}catch(y){Mn(i,i.return,y)}}break;case 3:if(wo(t,i),$o(i),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ep(t.containerInfo)}catch(y){Mn(i,i.return,y)}break;case 4:wo(t,i),$o(i);break;case 13:wo(t,i),$o(i),s=i.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(eS=jn())),r&4&&kM(i);break;case 22:if(d=n!==null&&n.memoizedState!==null,i.mode&1?(ji=(c=ji)||d,wo(t,i),ji=c):wo(t,i),$o(i),r&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!d&&i.mode&1)for(kt=i,d=i.child;d!==null;){for(p=kt=d;kt!==null;){switch(f=kt,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ph(4,f,f.return);break;case 1:Cf(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){Mn(r,n,y)}}break;case 5:Cf(f,f.return);break;case 22:if(f.memoizedState!==null){BM(p);continue}}h!==null?(h.return=f,kt=h):BM(p)}d=d.sibling}e:for(d=null,p=i;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=QR("display",a))}catch(y){Mn(i,i.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(y){Mn(i,i.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===i)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:wo(t,i),$o(i),r&4&&kM(i);break;case 21:break;default:wo(t,i),$o(i)}}function $o(i){var t=i.flags;if(t&2){try{e:{for(var n=i.return;n!==null;){if(SP(n)){var r=n;break e}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Kh(s,""),r.flags&=-33);var o=DM(i);_b(i,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,u=DM(i);vb(i,u,a);break;default:throw Error(bt(161))}}catch(l){Mn(i,i.return,l)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function oF(i,t,n){kt=i,EP(i)}function EP(i,t,n){for(var r=(i.mode&1)!==0;kt!==null;){var s=kt,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||tg;if(!a){var u=s.alternate,l=u!==null&&u.memoizedState!==null||ji;u=tg;var c=ji;if(tg=a,(ji=l)&&!c)for(kt=s;kt!==null;)a=kt,l=a.child,a.tag===22&&a.memoizedState!==null?FM(s):l!==null?(l.return=a,kt=l):FM(s);for(;o!==null;)kt=o,EP(o),o=o.sibling;kt=s,tg=u,ji=c}OM(i)}else s.subtreeFlags&8772&&o!==null?(o.return=s,kt=o):OM(i)}}function OM(i){for(;kt!==null;){var t=kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ji||s0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ji)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:To(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&xM(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xM(t,a,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&ep(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}ji||t.flags&512&&yb(t)}catch(f){Mn(t,t.return,f)}}if(t===i){kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,kt=n;break}kt=t.return}}function BM(i){for(;kt!==null;){var t=kt;if(t===i){kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,kt=n;break}kt=t.return}}function FM(i){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{s0(4,t)}catch(l){Mn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Mn(t,s,l)}}var o=t.return;try{yb(t)}catch(l){Mn(t,o,l)}break;case 5:var a=t.return;try{yb(t)}catch(l){Mn(t,a,l)}}}catch(l){Mn(t,t.return,l)}if(t===i){kt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,kt=u;break}kt=t.return}}var aF=Math.ceil,Yy=tl.ReactCurrentDispatcher,Zw=tl.ReactCurrentOwner,lo=tl.ReactCurrentBatchConfig,kr=0,ci=null,Un=null,vi=0,Ps=0,Rf=$l(0),qn=0,fp=null,dc=0,o0=0,$w=0,Ih=null,ds=null,eS=0,td=1/0,Ra=null,qy=!1,xb=null,zl=null,rg=!1,jl=null,Jy=0,Lh=0,bb=null,my=-1,gy=0;function Zi(){return kr&6?jn():my!==-1?my:my=jn()}function Vl(i){return i.mode&1?kr&2&&vi!==0?vi&-vi:VB.transition!==null?(gy===0&&(gy=c3()),gy):(i=Wr,i!==0||(i=window.event,i=i===void 0?16:y3(i.type)),i):1}function Oo(i,t,n,r){if(50<Lh)throw Lh=0,bb=null,Error(bt(185));Op(i,n,r),(!(kr&2)||i!==ci)&&(i===ci&&(!(kr&2)&&(o0|=n),qn===4&&Pl(i,vi)),xs(i,r),n===1&&kr===0&&!(t.mode&1)&&(td=jn()+500,r0&&eu()))}function xs(i,t){var n=i.callbackNode;VO(i,t);var r=Ly(i,i===ci?vi:0);if(r===0)n!==null&&YA(n),i.callbackNode=null,i.callbackPriority=0;else if(t=r&-r,i.callbackPriority!==t){if(n!=null&&YA(n),t===1)i.tag===0?zB(UM.bind(null,i)):O3(UM.bind(null,i)),UB(function(){!(kr&6)&&eu()}),n=null;else{switch(f3(r)){case 1:n=Ew;break;case 4:n=l3;break;case 16:n=Iy;break;case 536870912:n=u3;break;default:n=Iy}n=DP(n,TP.bind(null,i))}i.callbackPriority=t,i.callbackNode=n}}function TP(i,t){if(my=-1,gy=0,kr&6)throw Error(bt(327));var n=i.callbackNode;if(Nf()&&i.callbackNode!==n)return null;var r=Ly(i,i===ci?vi:0);if(r===0)return null;if(r&30||r&i.expiredLanes||t)t=Ky(i,r);else{t=r;var s=kr;kr|=2;var o=RP();(ci!==i||vi!==t)&&(Ra=null,td=jn()+500,ec(i,t));do try{cF();break}catch(u){CP(i,u)}while(!0);Uw(),Yy.current=o,kr=s,Un!==null?t=0:(ci=null,vi=0,t=qn)}if(t!==0){if(t===2&&(s=qx(i),s!==0&&(r=s,t=wb(i,s))),t===1)throw n=fp,ec(i,0),Pl(i,r),xs(i,jn()),n;if(t===6)Pl(i,r);else{if(s=i.current.alternate,!(r&30)&&!lF(s)&&(t=Ky(i,r),t===2&&(o=qx(i),o!==0&&(r=o,t=wb(i,o))),t===1))throw n=fp,ec(i,0),Pl(i,r),xs(i,jn()),n;switch(i.finishedWork=s,i.finishedLanes=r,t){case 0:case 1:throw Error(bt(345));case 2:Bu(i,ds,Ra);break;case 3:if(Pl(i,r),(r&130023424)===r&&(t=eS+500-jn(),10<t)){if(Ly(i,0)!==0)break;if(s=i.suspendedLanes,(s&r)!==r){Zi(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=rb(Bu.bind(null,i,ds,Ra),t);break}Bu(i,ds,Ra);break;case 4:if(Pl(i,r),(r&4194240)===r)break;for(t=i.eventTimes,s=-1;0<r;){var a=31-ko(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aF(r/1960))-r,10<r){i.timeoutHandle=rb(Bu.bind(null,i,ds,Ra),r);break}Bu(i,ds,Ra);break;case 5:Bu(i,ds,Ra);break;default:throw Error(bt(329))}}}return xs(i,jn()),i.callbackNode===n?TP.bind(null,i):null}function wb(i,t){var n=Ih;return i.current.memoizedState.isDehydrated&&(ec(i,t).flags|=256),i=Ky(i,t),i!==2&&(t=ds,ds=n,t!==null&&Sb(t)),i}function Sb(i){ds===null?ds=i:ds.push.apply(ds,i)}function lF(i){for(var t=i;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Bo(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pl(i,t){for(t&=~$w,t&=~o0,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var n=31-ko(t),r=1<<n;i[n]=-1,t&=~r}}function UM(i){if(kr&6)throw Error(bt(327));Nf();var t=Ly(i,0);if(!(t&1))return xs(i,jn()),null;var n=Ky(i,t);if(i.tag!==0&&n===2){var r=qx(i);r!==0&&(t=r,n=wb(i,r))}if(n===1)throw n=fp,ec(i,0),Pl(i,t),xs(i,jn()),n;if(n===6)throw Error(bt(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,Bu(i,ds,Ra),xs(i,jn()),null}function tS(i,t){var n=kr;kr|=1;try{return i(t)}finally{kr=n,kr===0&&(td=jn()+500,r0&&eu())}}function hc(i){jl!==null&&jl.tag===0&&!(kr&6)&&Nf();var t=kr;kr|=1;var n=lo.transition,r=Wr;try{if(lo.transition=null,Wr=1,i)return i()}finally{Wr=r,lo.transition=n,kr=t,!(kr&6)&&eu()}}function rS(){Ps=Rf.current,fn(Rf)}function ec(i,t){i.finishedWork=null,i.finishedLanes=0;var n=i.timeoutHandle;if(n!==-1&&(i.timeoutHandle=-1,FB(n)),Un!==null)for(n=Un.return;n!==null;){var r=n;switch(Ow(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&By();break;case 3:$f(),fn(vs),fn(Oi),Ww();break;case 5:Vw(r);break;case 4:$f();break;case 13:fn(mn);break;case 19:fn(mn);break;case 10:Nw(r.type._context);break;case 22:case 23:rS()}n=n.return}if(ci=i,Un=i=Wl(i.current,null),vi=Ps=t,qn=0,fp=null,$w=o0=dc=0,ds=Ih=null,Xu!==null){for(t=0;t<Xu.length;t++)if(n=Xu[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Xu=null}return i}function CP(i,t){do{var n=Un;try{if(Uw(),dy.current=Xy,Wy){for(var r=vn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wy=!1}if(fc=0,ui=Yn=vn=null,Rh=!1,lp=0,Zw.current=null,n===null||n.return===null){qn=1,fp=t,Un=null;break}e:{var o=i,a=n.return,u=n,l=t;if(t=vi,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=u,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=EM(a);if(h!==null){h.flags&=-257,TM(h,a,u,o,t),h.mode&1&&MM(o,c,t),t=h,l=c;var m=t.updateQueue;if(m===null){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}else{if(!(t&1)){MM(o,c,t),nS();break e}l=Error(bt(426))}}else if(pn&&u.mode&1){var v=EM(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),TM(v,a,u,o,t),Bw(ed(l,u));break e}}o=l=ed(l,u),qn!==4&&(qn=2),Ih===null?Ih=[o]:Ih.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=fP(o,l,t);_M(o,g);break e;case 1:u=l;var _=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(zl===null||!zl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=dP(o,u,t);_M(o,b);break e}}o=o.return}while(o!==null)}IP(n)}catch(S){t=S,Un===n&&n!==null&&(Un=n=n.return);continue}break}while(!0)}function RP(){var i=Yy.current;return Yy.current=Xy,i===null?Xy:i}function nS(){(qn===0||qn===3||qn===2)&&(qn=4),ci===null||!(dc&268435455)&&!(o0&268435455)||Pl(ci,vi)}function Ky(i,t){var n=kr;kr|=2;var r=RP();(ci!==i||vi!==t)&&(Ra=null,ec(i,t));do try{uF();break}catch(s){CP(i,s)}while(!0);if(Uw(),kr=n,Yy.current=r,Un!==null)throw Error(bt(261));return ci=null,vi=0,qn}function uF(){for(;Un!==null;)PP(Un)}function cF(){for(;Un!==null&&!kO();)PP(Un)}function PP(i){var t=jP(i.alternate,i,Ps);i.memoizedProps=i.pendingProps,t===null?IP(i):Un=t,Zw.current=null}function IP(i){var t=i;do{var n=t.alternate;if(i=t.return,t.flags&32768){if(n=nF(n,t),n!==null){n.flags&=32767,Un=n;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{qn=6,Un=null;return}}else if(n=rF(n,t,Ps),n!==null){Un=n;return}if(t=t.sibling,t!==null){Un=t;return}Un=t=i}while(t!==null);qn===0&&(qn=5)}function Bu(i,t,n){var r=Wr,s=lo.transition;try{lo.transition=null,Wr=1,fF(i,t,n,r)}finally{lo.transition=s,Wr=r}return null}function fF(i,t,n,r){do Nf();while(jl!==null);if(kr&6)throw Error(bt(327));n=i.finishedWork;var s=i.finishedLanes;if(n===null)return null;if(i.finishedWork=null,i.finishedLanes=0,n===i.current)throw Error(bt(177));i.callbackNode=null,i.callbackPriority=0;var o=n.lanes|n.childLanes;if(WO(i,o),i===ci&&(Un=ci=null,vi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rg||(rg=!0,DP(Iy,function(){return Nf(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=lo.transition,lo.transition=null;var a=Wr;Wr=1;var u=kr;kr|=4,Zw.current=null,sF(i,n),MP(n,i),IB(eb),jy=!!$x,eb=$x=null,i.current=n,oF(n),OO(),kr=u,Wr=a,lo.transition=o}else i.current=n;if(rg&&(rg=!1,jl=i,Jy=s),o=i.pendingLanes,o===0&&(zl=null),UO(n.stateNode),xs(i,jn()),t!==null)for(r=i.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qy)throw qy=!1,i=xb,xb=null,i;return Jy&1&&i.tag!==0&&Nf(),o=i.pendingLanes,o&1?i===bb?Lh++:(Lh=0,bb=i):Lh=0,eu(),null}function Nf(){if(jl!==null){var i=f3(Jy),t=lo.transition,n=Wr;try{if(lo.transition=null,Wr=16>i?16:i,jl===null)var r=!1;else{if(i=jl,jl=null,Jy=0,kr&6)throw Error(bt(331));var s=kr;for(kr|=4,kt=i.current;kt!==null;){var o=kt,a=o.child;if(kt.flags&16){var u=o.deletions;if(u!==null){for(var l=0;l<u.length;l++){var c=u[l];for(kt=c;kt!==null;){var d=kt;switch(d.tag){case 0:case 11:case 15:Ph(8,d,o)}var p=d.child;if(p!==null)p.return=d,kt=p;else for(;kt!==null;){d=kt;var f=d.sibling,h=d.return;if(wP(d),d===c){kt=null;break}if(f!==null){f.return=h,kt=f;break}kt=h}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}kt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,kt=a;else e:for(;kt!==null;){if(o=kt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ph(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,kt=g;break e}kt=o.return}}var _=i.current;for(kt=_;kt!==null;){a=kt;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,kt=x;else e:for(a=_;kt!==null;){if(u=kt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:s0(9,u)}}catch(S){Mn(u,u.return,S)}if(u===a){kt=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,kt=b;break e}kt=u.return}}if(kr=s,eu(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Qv,i)}catch{}r=!0}return r}finally{Wr=n,lo.transition=t}}return!1}function NM(i,t,n){t=ed(n,t),t=fP(i,t,1),i=Hl(i,t,1),t=Zi(),i!==null&&(Op(i,1,t),xs(i,t))}function Mn(i,t,n){if(i.tag===3)NM(i,i,n);else for(;t!==null;){if(t.tag===3){NM(t,i,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zl===null||!zl.has(r))){i=ed(n,i),i=dP(t,i,1),t=Hl(t,i,1),i=Zi(),t!==null&&(Op(t,1,i),xs(t,i));break}}t=t.return}}function dF(i,t,n){var r=i.pingCache;r!==null&&r.delete(t),t=Zi(),i.pingedLanes|=i.suspendedLanes&n,ci===i&&(vi&n)===n&&(qn===4||qn===3&&(vi&130023424)===vi&&500>jn()-eS?ec(i,0):$w|=n),xs(i,t)}function LP(i,t){t===0&&(i.mode&1?(t=Xm,Xm<<=1,!(Xm&130023424)&&(Xm=4194304)):t=1);var n=Zi();i=Wa(i,t),i!==null&&(Op(i,t,n),xs(i,n))}function hF(i){var t=i.memoizedState,n=0;t!==null&&(n=t.retryLane),LP(i,n)}function pF(i,t){var n=0;switch(i.tag){case 13:var r=i.stateNode,s=i.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=i.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(t),LP(i,n)}var jP;jP=function(i,t,n){if(i!==null)if(i.memoizedProps!==t.pendingProps||vs.current)ps=!0;else{if(!(i.lanes&n)&&!(t.flags&128))return ps=!1,tF(i,t,n);ps=!!(i.flags&131072)}else ps=!1,pn&&t.flags&1048576&&B3(t,Ny,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;py(i,t),i=t.pendingProps;var s=Kf(t,Oi.current);Uf(t,n),s=Yw(null,t,r,i,s,n);var o=qw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_s(r)?(o=!0,Fy(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hw(t),s.updater=i0,t.stateNode=s,s._reactInternals=t,ub(t,r,i,n),t=db(null,t,r,!0,o,n)):(t.tag=0,pn&&o&&kw(t),Ji(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(py(i,t),i=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=gF(r),i=To(r,i),s){case 0:t=fb(null,t,r,i,n);break e;case 1:t=PM(null,t,r,i,n);break e;case 11:t=CM(null,t,r,i,n);break e;case 14:t=RM(null,t,r,To(r.type,i),n);break e}throw Error(bt(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:To(r,s),fb(i,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:To(r,s),PM(i,t,r,s,n);case 3:e:{if(gP(t),i===null)throw Error(bt(387));r=t.pendingProps,o=t.memoizedState,s=o.element,z3(i,t),zy(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ed(Error(bt(423)),t),t=IM(i,t,r,n,s);break e}else if(r!==s){s=ed(Error(bt(424)),t),t=IM(i,t,r,n,s);break e}else for(Ls=Gl(t.stateNode.containerInfo.firstChild),js=t,pn=!0,Po=null,n=G3(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qf(),r===s){t=Xa(i,t,n);break e}Ji(i,t,r,n)}t=t.child}return t;case 5:return V3(t),i===null&&ob(t),r=t.type,s=t.pendingProps,o=i!==null?i.memoizedProps:null,a=s.children,tb(r,s)?a=null:o!==null&&tb(r,o)&&(t.flags|=32),mP(i,t),Ji(i,t,a,n),t.child;case 6:return i===null&&ob(t),null;case 13:return yP(i,t,n);case 4:return zw(t,t.stateNode.containerInfo),r=t.pendingProps,i===null?t.child=Zf(t,null,r,n):Ji(i,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:To(r,s),CM(i,t,r,s,n);case 7:return Ji(i,t,t.pendingProps,n),t.child;case 8:return Ji(i,t,t.pendingProps.children,n),t.child;case 12:return Ji(i,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,nn(Gy,r._currentValue),r._currentValue=a,o!==null)if(Bo(o.value,a)){if(o.children===s.children&&!vs.current){t=Xa(i,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Na(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ab(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(bt(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),ab(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ji(i,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Uf(t,n),s=uo(s),r=r(s),t.flags|=1,Ji(i,t,r,n),t.child;case 14:return r=t.type,s=To(r,t.pendingProps),s=To(r.type,s),RM(i,t,r,s,n);case 15:return hP(i,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:To(r,s),py(i,t),t.tag=1,_s(r)?(i=!0,Fy(t)):i=!1,Uf(t,n),cP(t,r,s),ub(t,r,s,n),db(null,t,r,!0,i,n);case 19:return vP(i,t,n);case 22:return pP(i,t,n)}throw Error(bt(156,t.tag))};function DP(i,t){return a3(i,t)}function mF(i,t,n,r){this.tag=i,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(i,t,n,r){return new mF(i,t,n,r)}function iS(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gF(i){if(typeof i=="function")return iS(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Sw)return 11;if(i===Aw)return 14}return 2}function Wl(i,t){var n=i.alternate;return n===null?(n=so(i.tag,t,i.key,i.mode),n.elementType=i.elementType,n.type=i.type,n.stateNode=i.stateNode,n.alternate=i,i.alternate=n):(n.pendingProps=t,n.type=i.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=i.flags&14680064,n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,t=i.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=i.sibling,n.index=i.index,n.ref=i.ref,n}function yy(i,t,n,r,s,o){var a=2;if(r=i,typeof i=="function")iS(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case _f:return tc(n.children,s,o,t);case ww:a=8,s|=8;break;case jx:return i=so(12,n,t,s|2),i.elementType=jx,i.lanes=o,i;case Dx:return i=so(13,n,t,s),i.elementType=Dx,i.lanes=o,i;case kx:return i=so(19,n,t,s),i.elementType=kx,i.lanes=o,i;case VR:return a0(n,s,o,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case HR:a=10;break e;case zR:a=9;break e;case Sw:a=11;break e;case Aw:a=14;break e;case Tl:a=16,r=null;break e}throw Error(bt(130,i==null?i:typeof i,""))}return t=so(a,n,t,s),t.elementType=i,t.type=r,t.lanes=o,t}function tc(i,t,n,r){return i=so(7,i,r,t),i.lanes=n,i}function a0(i,t,n,r){return i=so(22,i,r,t),i.elementType=VR,i.lanes=n,i.stateNode={isHidden:!1},i}function m_(i,t,n){return i=so(6,i,null,t),i.lanes=n,i}function g_(i,t,n){return t=so(4,i.children!==null?i.children:[],i.key,t),t.lanes=n,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function yF(i,t,n,r,s){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K1(0),this.expirationTimes=K1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sS(i,t,n,r,s,o,a,u,l){return i=new yF(i,t,n,u,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=so(3,null,null,t),i.current=o,o.stateNode=i,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hw(o),i}function vF(i,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vf,key:r==null?null:""+r,children:i,containerInfo:t,implementation:n}}function kP(i){if(!i)return Jl;i=i._reactInternals;e:{if(Ac(i)!==i||i.tag!==1)throw Error(bt(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_s(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(i.tag===1){var n=i.type;if(_s(n))return k3(i,n,t)}return t}function OP(i,t,n,r,s,o,a,u,l){return i=sS(n,r,!0,i,s,o,a,u,l),i.context=kP(null),n=i.current,r=Zi(),s=Vl(n),o=Na(r,s),o.callback=t??null,Hl(n,o,s),i.current.lanes=s,Op(i,s,r),xs(i,r),i}function l0(i,t,n,r){var s=t.current,o=Zi(),a=Vl(s);return n=kP(n),t.context===null?t.context=n:t.pendingContext=n,t=Na(o,a),t.payload={element:i},r=r===void 0?null:r,r!==null&&(t.callback=r),i=Hl(s,t,a),i!==null&&(Oo(i,s,a,o),fy(i,s,a)),a}function Qy(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function GM(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var n=i.retryLane;i.retryLane=n!==0&&n<t?n:t}}function oS(i,t){GM(i,t),(i=i.alternate)&&GM(i,t)}function _F(){return null}var BP=typeof reportError=="function"?reportError:function(i){console.error(i)};function aS(i){this._internalRoot=i}u0.prototype.render=aS.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(bt(409));l0(i,t,null,null)};u0.prototype.unmount=aS.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;hc(function(){l0(null,i,null,null)}),t[Va]=null}};function u0(i){this._internalRoot=i}u0.prototype.unstable_scheduleHydration=function(i){if(i){var t=p3();i={blockedOn:null,target:i,priority:t};for(var n=0;n<Rl.length&&t!==0&&t<Rl[n].priority;n++);Rl.splice(n,0,i),n===0&&g3(i)}};function lS(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function HM(){}function xF(i,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=Qy(a);o.call(c)}}var a=OP(t,r,i,0,null,!1,!1,"",HM);return i._reactRootContainer=a,i[Va]=a.current,np(i.nodeType===8?i.parentNode:i),hc(),a}for(;s=i.lastChild;)i.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var c=Qy(l);u.call(c)}}var l=sS(i,0,!1,null,null,!1,!1,"",HM);return i._reactRootContainer=l,i[Va]=l.current,np(i.nodeType===8?i.parentNode:i),hc(function(){l0(t,l,n,r)}),l}function f0(i,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var u=s;s=function(){var l=Qy(a);u.call(l)}}l0(t,a,i,s)}else a=xF(n,t,i,s,r);return Qy(a)}d3=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var n=vh(t.pendingLanes);n!==0&&(Tw(t,n|1),xs(t,jn()),!(kr&6)&&(td=jn()+500,eu()))}break;case 13:hc(function(){var r=Wa(i,1);if(r!==null){var s=Zi();Oo(r,i,1,s)}}),oS(i,1)}};Cw=function(i){if(i.tag===13){var t=Wa(i,134217728);if(t!==null){var n=Zi();Oo(t,i,134217728,n)}oS(i,134217728)}};h3=function(i){if(i.tag===13){var t=Vl(i),n=Wa(i,t);if(n!==null){var r=Zi();Oo(n,i,t,r)}oS(i,t)}};p3=function(){return Wr};m3=function(i,t){var n=Wr;try{return Wr=i,t()}finally{Wr=n}};Wx=function(i,t,n){switch(t){case"input":if(Fx(i,n),t=n.name,n.type==="radio"&&t!=null){for(n=i;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==i&&r.form===i.form){var s=t0(r);if(!s)throw Error(bt(90));XR(r),Fx(r,s)}}}break;case"textarea":qR(i,n);break;case"select":t=n.value,t!=null&&kf(i,!!n.multiple,t,!1)}};t3=tS;r3=hc;var bF={usingClientEntryPoint:!1,Events:[Fp,Sf,t0,$R,e3,tS]},Nd={findFiberByHostInstance:Wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wF={bundleType:Nd.bundleType,version:Nd.version,rendererPackageName:Nd.rendererPackageName,rendererConfig:Nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=s3(i),i===null?null:i.stateNode},findFiberByHostInstance:Nd.findFiberByHostInstance||_F,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{Qv=ng.inject(wF),oa=ng}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bF;Bs.createPortal=function(i,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lS(t))throw Error(bt(200));return vF(i,t,null,n)};Bs.createRoot=function(i,t){if(!lS(i))throw Error(bt(299));var n=!1,r="",s=BP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sS(i,1,!1,null,null,n,!1,r,s),i[Va]=t.current,np(i.nodeType===8?i.parentNode:i),new aS(t)};Bs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(bt(188)):(i=Object.keys(i).join(","),Error(bt(268,i)));return i=s3(t),i=i===null?null:i.stateNode,i};Bs.flushSync=function(i){return hc(i)};Bs.hydrate=function(i,t,n){if(!c0(t))throw Error(bt(200));return f0(null,i,t,!0,n)};Bs.hydrateRoot=function(i,t,n){if(!lS(i))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=BP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=OP(t,null,i,1,n??null,s,!1,o,a),i[Va]=t.current,np(i),r)for(i=0;i<r.length;i++)n=r[i],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new u0(t)};Bs.render=function(i,t,n){if(!c0(t))throw Error(bt(200));return f0(null,i,t,!1,n)};Bs.unmountComponentAtNode=function(i){if(!c0(i))throw Error(bt(40));return i._reactRootContainer?(hc(function(){f0(null,null,i,!1,function(){i._reactRootContainer=null,i[Va]=null})}),!0):!1};Bs.unstable_batchedUpdates=tS;Bs.unstable_renderSubtreeIntoContainer=function(i,t,n,r){if(!c0(n))throw Error(bt(200));if(i==null||i._reactInternals===void 0)throw Error(bt(38));return f0(i,t,n,!1,r)};Bs.version="18.3.1-next-f1338f8080-20240426";function FP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FP)}catch(i){console.error(i)}}FP(),FR.exports=Bs;var SF=FR.exports,UP,zM=SF;UP=zM.createRoot,zM.hydrateRoot;const AF={Date:!0,RegExp:!0,String:!0,Number:!0};function NP(i,t,n={cyclesFix:!0},r=[]){var s,o;let a=[];const u=Array.isArray(i);for(const c in i){const d=i[c],p=u?+c:c;if(!(c in t)){a.push({type:"REMOVE",path:[p],oldValue:i[c]});continue}const f=t[c],h=typeof d=="object"&&typeof f=="object"&&Array.isArray(d)===Array.isArray(f);if(d&&f&&h&&!AF[(o=(s=Object.getPrototypeOf(d))==null?void 0:s.constructor)==null?void 0:o.name]&&(!n.cyclesFix||!r.includes(d))){const m=NP(d,f,n,n.cyclesFix?r.concat([d]):[]);a.push.apply(a,m.map(y=>(y.path.unshift(p),y)))}else d!==f&&!(Number.isNaN(d)&&Number.isNaN(f))&&!(h&&(isNaN(d)?d+""==f+"":+d==+f))&&a.push({path:[p],type:"CHANGE",value:f,oldValue:d})}const l=Array.isArray(t);for(const c in t)c in i||a.push({type:"CREATE",path:[l?+c:c],value:t[c]});return a}function MF(i,t){return NP(i,t).length===0}var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EF(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var GP={exports:{}},Gd={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM;function TF(){if(VM)return Gd;VM=1;var i=Ty,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,l,c){var d,p={},f=null,h=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(d in l)r.call(l,d)&&!o.hasOwnProperty(d)&&(p[d]=l[d]);if(u&&u.defaultProps)for(d in l=u.defaultProps,l)p[d]===void 0&&(p[d]=l[d]);return{$$typeof:t,type:u,key:f,ref:h,props:p,_owner:s.current}}return Gd.Fragment=n,Gd.jsx=a,Gd.jsxs=a,Gd}GP.exports=TF();var vy=GP.exports;const CF="react-p5-wrapper";function sg(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var HP={exports:{}};/*! p5.js v1.9.4 May 21, 2024 */(function(i,t){(function(n){i.exports=n()})(function(){var n;return function r(s,o,a){function u(d,p){if(!o[d]){if(!s[d]){var f=typeof sg=="function"&&sg;if(!p&&f)return f(d,!0);if(l)return l(d,!0);throw(p=new Error("Cannot find module '"+d+"'")).code="MODULE_NOT_FOUND",p}f=o[d]={exports:{}},s[d][0].call(f.exports,function(h){return u(s[d][1][h]||h)},f,f.exports,r,s,o,a)}return o[d].exports}for(var l=typeof sg=="function"&&sg,c=0;c<a.length;c++)u(a[c]);return u}({1:[function(r,s,o){o.byteLength=function(y){var y=f(y),m=y[0],y=y[1];return 3*(m+y)/4-y},o.toByteArray=function(h){var m,y,g=f(h),v=g[0],g=g[1],_=new l(function(S,T){return 3*(S+T)/4-T}(v,g)),x=0,b=0<g?v-4:v;for(y=0;y<b;y+=4)m=u[h.charCodeAt(y)]<<18|u[h.charCodeAt(y+1)]<<12|u[h.charCodeAt(y+2)]<<6|u[h.charCodeAt(y+3)],_[x++]=m>>16&255,_[x++]=m>>8&255,_[x++]=255&m;return g===2&&(m=u[h.charCodeAt(y)]<<2|u[h.charCodeAt(y+1)]>>4,_[x++]=255&m),g===1&&(m=u[h.charCodeAt(y)]<<10|u[h.charCodeAt(y+1)]<<4|u[h.charCodeAt(y+2)]>>2,_[x++]=m>>8&255,_[x++]=255&m),_},o.fromByteArray=function(h){for(var m,y=h.length,v=y%3,g=[],_=0,x=y-v;_<x;_+=16383)g.push(function(b,S,T){for(var M,R=[],L=S;L<T;L+=3)M=(b[L]<<16&16711680)+(b[L+1]<<8&65280)+(255&b[L+2]),R.push(function(P){return a[P>>18&63]+a[P>>12&63]+a[P>>6&63]+a[63&P]}(M));return R.join("")}(h,_,x<_+16383?x:_+16383));return v==1?(m=h[y-1],g.push(a[m>>2]+a[m<<4&63]+"==")):v==2&&(m=(h[y-2]<<8)+h[y-1],g.push(a[m>>10]+a[m>>4&63]+a[m<<2&63]+"=")),g.join("")};for(var a=[],u=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=c.length;d<p;++d)a[d]=c[d],u[c.charCodeAt(d)]=d;function f(h){var m=h.length;if(0<m%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=h.indexOf("="),m=(h=h===-1?m:h)===m?0:4-h%4,[h,m]}u[45]=62,u[95]=63},{}],2:[function(r,s,o){},{}],3:[function(r,s,o){},{}],4:[function(r,s,o){(function(f){var u=r("base64-js"),l=r("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,d=(o.Buffer=f,o.SlowBuffer=function(I){return+I!=I&&(I=0),f.alloc(+I)},o.INSPECT_MAX_BYTES=50,2147483647);function p(I){if(d<I)throw new RangeError('The value "'+I+'" is invalid for option "size"');return I=new Uint8Array(I),Object.setPrototypeOf(I,f.prototype),I}function f(I,O,H){if(typeof I!="number")return h(I,O,H);if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(I)}function h(I,O,H){if(typeof I=="string"){var q=I,Z=O;if(f.isEncoding(Z=typeof Z=="string"&&Z!==""?Z:"utf8"))return oe=0|_(q,Z),pe=p(oe),pe=(q=pe.write(q,Z))!==oe?pe.slice(0,q):pe;throw new TypeError("Unknown encoding: "+Z)}if(ArrayBuffer.isView(I))return v(I);if(I!=null){if(Y(I,ArrayBuffer)||I&&Y(I.buffer,ArrayBuffer)){var oe=I,q=O,pe=H;if(q<0||oe.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<q+(pe||0))throw new RangeError('"length" is outside of buffer bounds');return oe=q===void 0&&pe===void 0?new Uint8Array(oe):pe===void 0?new Uint8Array(oe,q):new Uint8Array(oe,q,pe),Object.setPrototypeOf(oe,f.prototype),oe}if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(Z=I.valueOf&&I.valueOf(),Z!=null&&Z!==I)return f.from(Z,O,H);var be=function(me){{var ce,te;if(f.isBuffer(me))return ce=0|g(me.length),(te=p(ce)).length!==0&&me.copy(te,0,0,ce),te}if(me.length!==void 0)return typeof me.length!="number"||J(me.length)?p(0):v(me);if(me.type==="Buffer"&&Array.isArray(me.data))return v(me.data)}(I);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return f.from(I[Symbol.toPrimitive]("string"),O,H)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function m(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function y(I){return m(I),p(I<0?0:0|g(I))}function v(I){for(var O=I.length<0?0:0|g(I.length),H=p(O),q=0;q<O;q+=1)H[q]=255&I[q];return H}function g(I){if(d<=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|I}function _(I,O){if(f.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Y(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);var H=I.length,q=2<arguments.length&&arguments[2]===!0;if(!q&&H===0)return 0;for(var Z=!1;;)switch(O){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return Q(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return V(I).length;default:if(Z)return q?-1:Q(I).length;O=(""+O).toLowerCase(),Z=!0}}function x(I,O,H){var q,Z=!1;if((O=O===void 0||O<0?0:O)>this.length||(H=H===void 0||H>this.length?this.length:H)<=0||(H>>>=0)<=(O>>>=0))return"";for(I=I||"utf8";;)switch(I){case"hex":var oe=this,we=O,pe=H,te=oe.length;(!pe||pe<0||te<pe)&&(pe=te);for(var be="",me=we=!we||we<0?0:we;me<pe;++me)be+=ie[oe[me]];return be;case"utf8":case"utf-8":return L(this,O,H);case"ascii":var ce=this,te=O,ue=H,ge="";ue=Math.min(ce.length,ue);for(var xe=te;xe<ue;++xe)ge+=String.fromCharCode(127&ce[xe]);return ge;case"latin1":case"binary":var Le=this,we=O,Ee=H,ae="";Ee=Math.min(Le.length,Ee);for(var ne=we;ne<Ee;++ne)ae+=String.fromCharCode(Le[ne]);return ae;case"base64":return Ae=this,q=H,(Be=O)===0&&q===Ae.length?u.fromByteArray(Ae):u.fromByteArray(Ae.slice(Be,q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Ae=O,Be=H,Fe=this.slice(Ae,Be),Oe="",Je=0;Je<Fe.length;Je+=2)Oe+=String.fromCharCode(Fe[Je]+256*Fe[Je+1]);return Oe;default:if(Z)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),Z=!0}}function b(I,O,H){var q=I[O];I[O]=I[H],I[H]=q}function S(I,O,H,q,Z){if(I.length===0)return-1;if(typeof H=="string"?(q=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),(H=(H=J(H=+H)?Z?0:I.length-1:H)<0?I.length+H:H)>=I.length){if(Z)return-1;H=I.length-1}else if(H<0){if(!Z)return-1;H=0}if(typeof O=="string"&&(O=f.from(O,q)),f.isBuffer(O))return O.length===0?-1:T(I,O,H,q,Z);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?(Z?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(I,O,H):T(I,[O],H,q,Z);throw new TypeError("val must be string, number or Buffer")}function T(I,O,H,q,Z){var oe=1,pe=I.length,be=O.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(I.length<2||O.length<2)return-1;pe/=oe=2,be/=2,H/=2}function me(xe,Le){return oe===1?xe[Le]:xe.readUInt16BE(Le*oe)}if(Z)for(var ce=-1,te=H;te<pe;te++)if(me(I,te)===me(O,ce===-1?0:te-ce)){if(te-(ce=ce===-1?te:ce)+1===be)return ce*oe}else ce!==-1&&(te-=te-ce),ce=-1;else for(te=H=pe<H+be?pe-be:H;0<=te;te--){for(var ue=!0,ge=0;ge<be;ge++)if(me(I,te+ge)!==me(O,ge)){ue=!1;break}if(ue)return te}return-1}function M(I,O,H,q){return W(function(Z){for(var oe=[],pe=0;pe<Z.length;++pe)oe.push(255&Z.charCodeAt(pe));return oe}(O),I,H,q)}function R(I,O,H,q){return W(function(Z,oe){for(var pe,be,me=[],ce=0;ce<Z.length&&!((oe-=2)<0);++ce)be=Z.charCodeAt(ce),pe=be>>8,be=be%256,me.push(be),me.push(pe);return me}(O,I.length-H),I,H,q)}function L(I,O,H){H=Math.min(I.length,H);for(var q=[],Z=O;Z<H;){var oe,pe,be,me,ce=I[Z],te=null,ue=239<ce?4:223<ce?3:191<ce?2:1;if(Z+ue<=H)switch(ue){case 1:ce<128&&(te=ce);break;case 2:(192&(oe=I[Z+1]))==128&&127<(me=(31&ce)<<6|63&oe)&&(te=me);break;case 3:oe=I[Z+1],pe=I[Z+2],(192&oe)==128&&(192&pe)==128&&2047<(me=(15&ce)<<12|(63&oe)<<6|63&pe)&&(me<55296||57343<me)&&(te=me);break;case 4:oe=I[Z+1],pe=I[Z+2],be=I[Z+3],(192&oe)==128&&(192&pe)==128&&(192&be)==128&&65535<(me=(15&ce)<<18|(63&oe)<<12|(63&pe)<<6|63&be)&&me<1114112&&(te=me)}te===null?(te=65533,ue=1):65535<te&&(te-=65536,q.push(te>>>10&1023|55296),te=56320|1023&te),q.push(te),Z+=ue}var ge=q,xe=ge.length;if(xe<=P)return String.fromCharCode.apply(String,ge);for(var Le="",we=0;we<xe;)Le+=String.fromCharCode.apply(String,ge.slice(we,we+=P));return Le}o.kMaxLength=d,(f.TYPED_ARRAY_SUPPORT=function(){try{var I=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(I,O),I.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=h,Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(I,O,H){return O=O,H=H,m(I=I),!(I<=0)&&O!==void 0?typeof H=="string"?p(I).fill(O,H):p(I).fill(O):p(I)},f.allocUnsafe=y,f.allocUnsafeSlow=y,f.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==f.prototype},f.compare=function(I,O){if(Y(I,Uint8Array)&&(I=f.from(I,I.offset,I.byteLength)),Y(O,Uint8Array)&&(O=f.from(O,O.offset,O.byteLength)),!f.isBuffer(I)||!f.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===O)return 0;for(var H=I.length,q=O.length,Z=0,oe=Math.min(H,q);Z<oe;++Z)if(I[Z]!==O[Z]){H=I[Z],q=O[Z];break}return H<q?-1:q<H?1:0},f.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(I,O){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return f.alloc(0);if(O===void 0)for(Z=O=0;Z<I.length;++Z)O+=I[Z].length;for(var H=f.allocUnsafe(O),q=0,Z=0;Z<I.length;++Z){var oe=I[Z];if(Y(oe,Uint8Array)&&(oe=f.from(oe)),!f.isBuffer(oe))throw new TypeError('"list" argument must be an Array of Buffers');oe.copy(H,q),q+=oe.length}return H},f.byteLength=_,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<I;O+=2)b(this,O,O+1);return this},f.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<I;O+=4)b(this,O,O+3),b(this,O+1,O+2);return this},f.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<I;O+=8)b(this,O,O+7),b(this,O+1,O+6),b(this,O+2,O+5),b(this,O+3,O+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?L(this,0,I):x.apply(this,arguments)},f.prototype.equals=function(I){if(f.isBuffer(I))return this===I||f.compare(this,I)===0;throw new TypeError("Argument must be a Buffer")},f.prototype.inspect=function(){var O="",I=o.INSPECT_MAX_BYTES,O=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim();return this.length>I&&(O+=" ... "),"<Buffer "+O+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(I,O,H,q,Z){if(Y(I,Uint8Array)&&(I=f.from(I,I.offset,I.byteLength)),!f.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(H===void 0&&(H=I?I.length:0),q===void 0&&(q=0),Z===void 0&&(Z=this.length),(O=O===void 0?0:O)<0||H>I.length||q<0||Z>this.length)throw new RangeError("out of range index");if(Z<=q&&H<=O)return 0;if(Z<=q)return-1;if(H<=O)return 1;if(this===I)return 0;for(var oe=(Z>>>=0)-(q>>>=0),pe=(H>>>=0)-(O>>>=0),be=Math.min(oe,pe),me=this.slice(q,Z),ce=I.slice(O,H),te=0;te<be;++te)if(me[te]!==ce[te]){oe=me[te],pe=ce[te];break}return oe<pe?-1:pe<oe?1:0},f.prototype.includes=function(I,O,H){return this.indexOf(I,O,H)!==-1},f.prototype.indexOf=function(I,O,H){return S(this,I,O,H,!0)},f.prototype.lastIndexOf=function(I,O,H){return S(this,I,O,H,!1)},f.prototype.write=function(I,O,H,q){if(O===void 0)q="utf8",H=this.length,O=0;else if(H===void 0&&typeof O=="string")q=O,H=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(H)?(H>>>=0,q===void 0&&(q="utf8")):(q=H,H=void 0)}var Z=this.length-O;if((H===void 0||Z<H)&&(H=Z),0<I.length&&(H<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");q=q||"utf8";for(var oe,pe,be,me=!1;;)switch(q){case"hex":var ce=this,te=I,ue=O,ge=H,xe=(ue=Number(ue)||0,ce.length-ue);(!ge||xe<(ge=Number(ge)))&&(ge=xe),(xe=te.length)/2<ge&&(ge=xe/2);for(var Le=0;Le<ge;++Le){var we=parseInt(te.substr(2*Le,2),16);if(J(we))return Le;ce[ue+Le]=we}return Le;case"utf8":case"utf-8":return xe=O,be=H,W(Q(I,(pe=this).length-xe),pe,xe,be);case"ascii":return M(this,I,O,H);case"latin1":case"binary":return M(this,I,O,H);case"base64":return pe=this,be=O,oe=H,W(V(I),pe,be,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,I,O,H);default:if(me)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),me=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(I,O,H){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(H<I+O)throw new RangeError("Trying to access beyond buffer length")}function k(I,O,H,q,Z,oe){if(!f.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z<O||O<oe)throw new RangeError('"value" argument is out of bounds');if(H+q>I.length)throw new RangeError("Index out of range")}function D(I,O,H,q){if(H+q>I.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function F(I,O,H,q,Z){return O=+O,H>>>=0,Z||D(I,0,H,4),l.write(I,O,H,q,23,4),H+4}function G(I,O,H,q,Z){return O=+O,H>>>=0,Z||D(I,0,H,8),l.write(I,O,H,q,52,8),H+8}f.prototype.slice=function(I,O){var H=this.length,H=((I=~~I)<0?(I+=H)<0&&(I=0):H<I&&(I=H),(O=O===void 0?H:~~O)<0?(O+=H)<0&&(O=0):H<O&&(O=H),O<I&&(O=I),this.subarray(I,O));return Object.setPrototypeOf(H,f.prototype),H},f.prototype.readUIntLE=function(I,O,H){I>>>=0,O>>>=0,H||C(I,O,this.length);for(var q=this[I],Z=1,oe=0;++oe<O&&(Z*=256);)q+=this[I+oe]*Z;return q},f.prototype.readUIntBE=function(I,O,H){I>>>=0,O>>>=0,H||C(I,O,this.length);for(var q=this[I+--O],Z=1;0<O&&(Z*=256);)q+=this[I+--O]*Z;return q},f.prototype.readUInt8=function(I,O){return I>>>=0,O||C(I,1,this.length),this[I]},f.prototype.readUInt16LE=function(I,O){return I>>>=0,O||C(I,2,this.length),this[I]|this[I+1]<<8},f.prototype.readUInt16BE=function(I,O){return I>>>=0,O||C(I,2,this.length),this[I]<<8|this[I+1]},f.prototype.readUInt32LE=function(I,O){return I>>>=0,O||C(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},f.prototype.readUInt32BE=function(I,O){return I>>>=0,O||C(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},f.prototype.readIntLE=function(I,O,H){I>>>=0,O>>>=0,H||C(I,O,this.length);for(var q=this[I],Z=1,oe=0;++oe<O&&(Z*=256);)q+=this[I+oe]*Z;return(Z*=128)<=q&&(q-=Math.pow(2,8*O)),q},f.prototype.readIntBE=function(I,O,H){I>>>=0,O>>>=0,H||C(I,O,this.length);for(var q=O,Z=1,oe=this[I+--q];0<q&&(Z*=256);)oe+=this[I+--q]*Z;return(Z*=128)<=oe&&(oe-=Math.pow(2,8*O)),oe},f.prototype.readInt8=function(I,O){return I>>>=0,O||C(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},f.prototype.readInt16LE=function(I,O){return I>>>=0,O||C(I,2,this.length),O=this[I]|this[I+1]<<8,32768&O?4294901760|O:O},f.prototype.readInt16BE=function(I,O){return I>>>=0,O||C(I,2,this.length),O=this[I+1]|this[I]<<8,32768&O?4294901760|O:O},f.prototype.readInt32LE=function(I,O){return I>>>=0,O||C(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},f.prototype.readInt32BE=function(I,O){return I>>>=0,O||C(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},f.prototype.readFloatLE=function(I,O){return I>>>=0,O||C(I,4,this.length),l.read(this,I,!0,23,4)},f.prototype.readFloatBE=function(I,O){return I>>>=0,O||C(I,4,this.length),l.read(this,I,!1,23,4)},f.prototype.readDoubleLE=function(I,O){return I>>>=0,O||C(I,8,this.length),l.read(this,I,!0,52,8)},f.prototype.readDoubleBE=function(I,O){return I>>>=0,O||C(I,8,this.length),l.read(this,I,!1,52,8)},f.prototype.writeUIntLE=function(I,O,H,q){I=+I,O>>>=0,H>>>=0,q||k(this,I,O,H,Math.pow(2,8*H)-1,0);var Z=1,oe=0;for(this[O]=255&I;++oe<H&&(Z*=256);)this[O+oe]=I/Z&255;return O+H},f.prototype.writeUIntBE=function(I,O,H,q){I=+I,O>>>=0,H>>>=0,q||k(this,I,O,H,Math.pow(2,8*H)-1,0);var Z=H-1,oe=1;for(this[O+Z]=255&I;0<=--Z&&(oe*=256);)this[O+Z]=I/oe&255;return O+H},f.prototype.writeUInt8=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,1,255,0),this[O]=255&I,O+1},f.prototype.writeUInt16LE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,2,65535,0),this[O]=255&I,this[O+1]=I>>>8,O+2},f.prototype.writeUInt16BE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,2,65535,0),this[O]=I>>>8,this[O+1]=255&I,O+2},f.prototype.writeUInt32LE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,4,4294967295,0),this[O+3]=I>>>24,this[O+2]=I>>>16,this[O+1]=I>>>8,this[O]=255&I,O+4},f.prototype.writeUInt32BE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,4,4294967295,0),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},f.prototype.writeIntLE=function(I,O,H,q){I=+I,O>>>=0,q||k(this,I,O,H,(q=Math.pow(2,8*H-1))-1,-q);var Z=0,oe=1,pe=0;for(this[O]=255&I;++Z<H&&(oe*=256);)I<0&&pe===0&&this[O+Z-1]!==0&&(pe=1),this[O+Z]=(I/oe>>0)-pe&255;return O+H},f.prototype.writeIntBE=function(I,O,H,q){I=+I,O>>>=0,q||k(this,I,O,H,(q=Math.pow(2,8*H-1))-1,-q);var Z=H-1,oe=1,pe=0;for(this[O+Z]=255&I;0<=--Z&&(oe*=256);)I<0&&pe===0&&this[O+Z+1]!==0&&(pe=1),this[O+Z]=(I/oe>>0)-pe&255;return O+H},f.prototype.writeInt8=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,1,127,-128),this[O]=255&(I=I<0?255+I+1:I),O+1},f.prototype.writeInt16LE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,2,32767,-32768),this[O]=255&I,this[O+1]=I>>>8,O+2},f.prototype.writeInt16BE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,2,32767,-32768),this[O]=I>>>8,this[O+1]=255&I,O+2},f.prototype.writeInt32LE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,4,2147483647,-2147483648),this[O]=255&I,this[O+1]=I>>>8,this[O+2]=I>>>16,this[O+3]=I>>>24,O+4},f.prototype.writeInt32BE=function(I,O,H){return I=+I,O>>>=0,H||k(this,I,O,4,2147483647,-2147483648),this[O]=(I=I<0?4294967295+I+1:I)>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},f.prototype.writeFloatLE=function(I,O,H){return F(this,I,O,!0,H)},f.prototype.writeFloatBE=function(I,O,H){return F(this,I,O,!1,H)},f.prototype.writeDoubleLE=function(I,O,H){return G(this,I,O,!0,H)},f.prototype.writeDoubleBE=function(I,O,H){return G(this,I,O,!1,H)},f.prototype.copy=function(I,O,H,q){if(!f.isBuffer(I))throw new TypeError("argument should be a Buffer");if(H=H||0,q||q===0||(q=this.length),O>=I.length&&(O=I.length),(q=0<q&&q<H?H:q)===H||I.length===0||this.length===0)return 0;if((O=O||0)<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length);var Z=(q=I.length-O<q-H?I.length-O+H:q)-H;if(this===I&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,H,q);else if(this===I&&H<O&&O<q)for(var oe=Z-1;0<=oe;--oe)I[oe+O]=this[oe+H];else Uint8Array.prototype.set.call(I,this.subarray(H,q),O);return Z},f.prototype.fill=function(I,O,H,q){if(typeof I=="string"){if(typeof O=="string"?(q=O,O=0,H=this.length):typeof H=="string"&&(q=H,H=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!f.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var Z;I.length===1&&(Z=I.charCodeAt(0),(q==="utf8"&&Z<128||q==="latin1")&&(I=Z))}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(O<0||this.length<O||this.length<H)throw new RangeError("Out of range index");var oe;if(!(H<=O))if(O>>>=0,H=H===void 0?this.length:H>>>0,typeof(I=I||0)=="number")for(oe=O;oe<H;++oe)this[oe]=I;else{var pe=f.isBuffer(I)?I:f.from(I,q),be=pe.length;if(be===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(oe=0;oe<H-O;++oe)this[oe+O]=pe[oe%be]}return this};var z=/[^+/0-9A-Za-z-_]/g;function Q(I,O){O=O||1/0;for(var H,q=I.length,Z=null,oe=[],pe=0;pe<q;++pe){if(55295<(H=I.charCodeAt(pe))&&H<57344){if(!Z){if(56319<H){-1<(O-=3)&&oe.push(239,191,189);continue}if(pe+1===q){-1<(O-=3)&&oe.push(239,191,189);continue}Z=H;continue}if(H<56320){-1<(O-=3)&&oe.push(239,191,189),Z=H;continue}H=65536+(Z-55296<<10|H-56320)}else Z&&-1<(O-=3)&&oe.push(239,191,189);if(Z=null,H<128){if(--O<0)break;oe.push(H)}else if(H<2048){if((O-=2)<0)break;oe.push(H>>6|192,63&H|128)}else if(H<65536){if((O-=3)<0)break;oe.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;oe.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return oe}function V(I){return u.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(I))}function W(I,O,H,q){for(var Z=0;Z<q&&!(Z+H>=O.length||Z>=I.length);++Z)O[Z+H]=I[Z];return Z}function Y(I,O){return I instanceof O||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===O.name}function J(I){return I!=I}var ie=function(){for(var I="0123456789abcdef",O=new Array(256),H=0;H<16;++H)for(var q=16*H,Z=0;Z<16;++Z)O[q+Z]=I[H]+I[Z];return O}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(r,s,o){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(u){if(a(u)||u===null)return u;throw TypeError("Can't set "+String(u)+" as a prototype")}},{"../internals/is-object":75}],7:[function(l,s,o){var a=l("../internals/well-known-symbol"),u=l("../internals/object-create"),l=l("../internals/object-define-property"),c=a("unscopables"),d=Array.prototype;d[c]==null&&l.f(d,c,{configurable:!0,value:u(null)}),s.exports=function(p){d[c][p]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(r,s,o){var a=r("../internals/string-multibyte").charAt;s.exports=function(u,l,c){return l+(c?a(u,l).length:1)}},{"../internals/string-multibyte":124}],9:[function(r,s,o){s.exports=function(a,u,l){if(a instanceof u)return a;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(u){if(a(u))return u;throw TypeError(String(u)+" is not an object")}},{"../internals/is-object":75}],11:[function(r,s,o){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,s,o){function a(G){return p(G)&&f(F,h(G))}var u,l=D("../internals/array-buffer-native"),c=D("../internals/descriptors"),d=D("../internals/global"),p=D("../internals/is-object"),f=D("../internals/has"),h=D("../internals/classof"),m=D("../internals/create-non-enumerable-property"),y=D("../internals/redefine"),v=D("../internals/object-define-property").f,g=D("../internals/object-get-prototype-of"),_=D("../internals/object-set-prototype-of"),P=D("../internals/well-known-symbol"),D=D("../internals/uid"),x=d.Int8Array,b=x&&x.prototype,S=d.Uint8ClampedArray,S=S&&S.prototype,T=x&&g(x),M=b&&g(b),R=Object.prototype,L=R.isPrototypeOf,P=P("toStringTag"),C=D("TYPED_ARRAY_TAG"),k=l&&!!_&&h(d.opera)!=="Opera",D=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(u in F)d[u]||(k=!1);if((!k||typeof T!="function"||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},k))for(u in F)d[u]&&_(d[u],T);if((!k||!M||M===R)&&(M=T.prototype,k))for(u in F)d[u]&&_(d[u].prototype,M);if(k&&g(S)!==M&&_(S,M),c&&!f(M,P))for(u in D=!0,v(M,P,{get:function(){return p(this)?this[C]:void 0}}),F)d[u]&&m(d[u],C,u);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:D&&C,aTypedArray:function(G){if(a(G))return G;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(G){if(_){if(L.call(T,G))return G}else for(var z in F)if(f(F,u)&&(z=d[z],z&&(G===z||L.call(z,G))))return G;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(G,z,Q){if(c){if(Q)for(var V in F)V=d[V],V&&f(V.prototype,G)&&delete V.prototype[G];M[G]&&!Q||y(M,G,!Q&&k&&b[G]||z)}},exportTypedArrayStaticMethod:function(G,z,Q){var V,W;if(c){if(_){if(Q)for(V in F)(W=d[V])&&f(W,G)&&delete W[G];if(T[G]&&!Q)return;try{return y(T,G,!Q&&k&&x[G]||z)}catch{}}for(V in F)!(W=d[V])||W[G]&&!Q||y(W,G,z)}},isView:function(G){return G=h(G),G==="DataView"||f(F,G)},isTypedArray:a,TypedArray:T,TypedArrayPrototype:M}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(H,s,o){function a(ue){return[255&ue]}function u(ue){return[255&ue,ue>>8&255]}function l(ue){return[255&ue,ue>>8&255,ue>>16&255,ue>>24&255]}function c(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function d(ue){return oe(ue,23,4)}function p(ue){return oe(ue,52,8)}function f(ue,ge){D(ue[Y],ge,{get:function(){return z(this)[ge]}})}function h(ae,ge,Ee,Le){if(Ee=R(Ee),ae=z(ae),Ee+ge>ae.byteLength)throw Z(J);var we=z(ae.buffer).bytes,Ee=Ee+ae.byteOffset,ae=we.slice(Ee,Ee+ge);return Le?ae:ae.reverse()}function m(ue,ge,xe,Le,we,Ee){if(xe=R(xe),ue=z(ue),xe+ge>ue.byteLength)throw Z(J);for(var ae=z(ue.buffer).bytes,ne=xe+ue.byteOffset,Ae=Le(+we),Be=0;Be<ge;Be++)ae[ne+Be]=Ae[Ee?Be:ge-Be-1]}var y=H("../internals/global"),v=H("../internals/descriptors"),g=H("../internals/array-buffer-native"),_=H("../internals/create-non-enumerable-property"),x=H("../internals/redefine-all"),b=H("../internals/fails"),S=H("../internals/an-instance"),T=H("../internals/to-integer"),M=H("../internals/to-length"),R=H("../internals/to-index"),L=H("../internals/ieee754"),P=H("../internals/object-get-prototype-of"),C=H("../internals/object-set-prototype-of"),k=H("../internals/object-get-own-property-names").f,D=H("../internals/object-define-property").f,F=H("../internals/array-fill"),G=H("../internals/set-to-string-tag"),H=H("../internals/internal-state"),z=H.get,Q=H.set,V="ArrayBuffer",W="DataView",Y="prototype",J="Wrong index",ie=y[V],I=ie,O=y[W],H=O&&O[Y],q=Object.prototype,Z=y.RangeError,oe=L.pack,pe=L.unpack;if(g){if(!b(function(){ie(1)})||!b(function(){new ie(-1)})||b(function(){return new ie,new ie(1.5),new ie(NaN),ie.name!=V})){for(var be,y=(I=function(xe){return S(this,I),new ie(R(xe))})[Y]=ie[Y],me=k(ie),ce=0;me.length>ce;)(be=me[ce++])in I||_(I,be,ie[be]);y.constructor=I}C&&P(H)!==q&&C(H,q);var L=new O(new I(2)),te=H.setInt8;L.setInt8(0,2147483648),L.setInt8(1,2147483649),!L.getInt8(0)&&L.getInt8(1)||x(H,{setInt8:function(ge,xe){te.call(this,ge,xe<<24>>24)},setUint8:function(ge,xe){te.call(this,ge,xe<<24>>24)}},{unsafe:!0})}else I=function(ue){S(this,I,V),ue=R(ue),Q(this,{bytes:F.call(new Array(ue),0),byteLength:ue}),v||(this.byteLength=ue)},O=function(ue,we,xe){S(this,O,W),S(ue,I,W);var Le=z(ue).byteLength,we=T(we);if(we<0||Le<we)throw Z("Wrong offset");if(Le<we+(xe=xe===void 0?Le-we:M(xe)))throw Z("Wrong length");Q(this,{buffer:ue,byteLength:xe,byteOffset:we}),v||(this.buffer=ue,this.byteLength=xe,this.byteOffset=we)},v&&(f(I,"byteLength"),f(O,"buffer"),f(O,"byteLength"),f(O,"byteOffset")),x(O[Y],{getInt8:function(ue){return h(this,1,ue)[0]<<24>>24},getUint8:function(ue){return h(this,1,ue)[0]},getInt16:function(ue){return ue=h(this,2,ue,1<arguments.length?arguments[1]:void 0),(ue[1]<<8|ue[0])<<16>>16},getUint16:function(ue){return ue=h(this,2,ue,1<arguments.length?arguments[1]:void 0),ue[1]<<8|ue[0]},getInt32:function(ue){return c(h(this,4,ue,1<arguments.length?arguments[1]:void 0))},getUint32:function(ue){return c(h(this,4,ue,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ue){return pe(h(this,4,ue,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ue){return pe(h(this,8,ue,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ue,ge){m(this,1,ue,a,ge)},setUint8:function(ue,ge){m(this,1,ue,a,ge)},setInt16:function(ue,ge){m(this,2,ue,u,ge,2<arguments.length?arguments[2]:void 0)},setUint16:function(ue,ge){m(this,2,ue,u,ge,2<arguments.length?arguments[2]:void 0)},setInt32:function(ue,ge){m(this,4,ue,l,ge,2<arguments.length?arguments[2]:void 0)},setUint32:function(ue,ge){m(this,4,ue,l,ge,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ue,ge){m(this,4,ue,d,ge,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ue,ge){m(this,8,ue,p,ge,2<arguments.length?arguments[2]:void 0)}});G(I,V),G(O,W),s.exports={ArrayBuffer:I,DataView:O}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(r,s,o){var a=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length"),c=Math.min;s.exports=[].copyWithin||function(v,p){var f=a(this),h=l(f.length),m=u(v,h),y=u(p,h),v=2<arguments.length?arguments[2]:void 0,g=c((v===void 0?h:u(v,h))-y,h-m),_=1;for(y<m&&m<y+g&&(_=-1,y+=g-1,m+=g-1);0<g--;)y in f?f[m]=f[y]:delete f[m],m+=_,y+=_;return f}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(r,s,o){var a=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length");s.exports=function(c){for(var d=a(this),p=l(d.length),h=arguments.length,f=u(1<h?arguments[1]:void 0,p),h=2<h?arguments[2]:void 0,m=h===void 0?p:u(h,p);f<m;)d[f++]=c;return d}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(l,s,o){var a=l("../internals/array-iteration").forEach,u=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),u=u("forEach"),l=l("forEach");s.exports=u&&l?[].forEach:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,o){var a=r("../internals/function-bind-context"),u=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),c=r("../internals/is-array-iterator-method"),d=r("../internals/to-length"),p=r("../internals/create-property"),f=r("../internals/get-iterator-method");s.exports=function(S){var m,y,v,g,_,x,b=u(S),S=typeof this=="function"?this:Array,T=arguments.length,M=1<T?arguments[1]:void 0,R=M!==void 0,L=f(b),P=0;if(R&&(M=a(M,2<T?arguments[2]:void 0,2)),L==null||S==Array&&c(L))for(y=new S(m=d(b.length));P<m;P++)x=R?M(b[P],P):b[P],p(y,P,x);else for(_=(g=L.call(b)).next,y=new S;!(v=_.call(g)).done;P++)x=R?l(g,M,[v.value,P],!0):v.value,p(y,P,x);return y.length=P,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(r,s,o){function a(d){return function(p,f,h){var m,y=u(p),v=l(y.length),g=c(h,v);if(d&&f!=f){for(;g<v;)if((m=y[g++])!=m)return!0}else for(;g<v;g++)if((d||g in y)&&y[g]===f)return d||g||0;return!d&&-1}}var u=r("../internals/to-indexed-object"),l=r("../internals/to-length"),c=r("../internals/to-absolute-index");s.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(r,s,o){function a(h){var m=h==1,y=h==2,v=h==3,g=h==4,_=h==6,x=h==5||_;return function(b,S,T,M){for(var R,L,P=c(b),C=l(P),k=u(S,T,3),D=d(C.length),F=0,S=M||p,G=m?S(b,D):y?S(b,0):void 0;F<D;F++)if((x||F in C)&&(L=k(R=C[F],F,P),h)){if(m)G[F]=L;else if(L)switch(h){case 3:return!0;case 5:return R;case 6:return F;case 2:f.call(G,R)}else if(g)return!1}return _?-1:v||g?g:G}}var u=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),c=r("../internals/to-object"),d=r("../internals/to-length"),p=r("../internals/array-species-create"),f=[].push;s.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(h,s,o){var a=h("../internals/to-indexed-object"),u=h("../internals/to-integer"),l=h("../internals/to-length"),f=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),c=Math.min,d=[].lastIndexOf,p=!!d&&1/[1].lastIndexOf(1,-0)<0,f=f("lastIndexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});s.exports=p||!f||!h?function(m){if(p)return d.apply(this,arguments)||0;var y=a(this),v=l(y.length),g=v-1;for((g=1<arguments.length?c(g,u(arguments[1])):g)<0&&(g=v+g);0<=g;g--)if(g in y&&y[g]===m)return g||0;return-1}:d},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(r,s,o){var a=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),c=u("species");s.exports=function(d){return 51<=l||!a(function(){var p=[];return(p.constructor={})[c]=function(){return{foo:1}},p[d](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(r,s,o){var a=r("../internals/fails");s.exports=function(u,l){var c=[][u];return!!c&&a(function(){c.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,s,o){function a(f){throw f}var u=r("../internals/descriptors"),l=r("../internals/fails"),c=r("../internals/has"),d=Object.defineProperty,p={};s.exports=function(f,h){var m,y,v,g;return c(p,f)?p[f]:(m=[][f],y=!!c(h=h||{},"ACCESSORS")&&h.ACCESSORS,v=c(h,0)?h[0]:a,g=c(h,1)?h[1]:void 0,p[f]=!!m&&!l(function(){if(y&&!u)return!0;var _={length:-1};y?d(_,1,{enumerable:!0,get:a}):_[1]=1,m.call(_,v,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(r,s,o){function a(p){return function(f,h,m,y){u(h);var v=l(f),g=c(v),_=d(v.length),x=p?_-1:0,b=p?-1:1;if(m<2)for(;;){if(x in g){y=g[x],x+=b;break}if(x+=b,p?x<0:_<=x)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=x:x<_;x+=b)x in g&&(y=h(y,g[x],x,v));return y}}var u=r("../internals/a-function"),l=r("../internals/to-object"),c=r("../internals/indexed-object"),d=r("../internals/to-length");s.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(r,s,o){var a=r("../internals/is-object"),u=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");s.exports=function(c,d){var p;return new((p=u(c)&&(typeof(p=c.constructor)=="function"&&(p===Array||u(p.prototype))||a(p)&&(p=p[l])===null)?void 0:p)===void 0?Array:p)(d===0?0:d)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(u,l,c,d){try{return d?l(a(c)[0],c[1]):l(c)}catch(p){throw d=u.return,d!==void 0&&a(d.call(u)),p}}},{"../internals/an-object":10}],27:[function(r,s,o){var a=r("../internals/well-known-symbol")("iterator"),u=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){u=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}s.exports=function(d,p){if(!p&&!u)return!1;var f=!1;try{var h={};h[a]=function(){return{next:function(){return{done:f=!0}}}},d(h)}catch{}return f}},{"../internals/well-known-symbol":149}],28:[function(r,s,o){var a={}.toString;s.exports=function(u){return a.call(u).slice(8,-1)}},{}],29:[function(r,s,o){var a=r("../internals/to-string-tag-support"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),c=u(function(){return arguments}())=="Arguments";s.exports=a?u:function(d){var p;return d===void 0?"Undefined":d===null?"Null":typeof(p=function(f,h){try{return f[h]}catch{}}(d=Object(d),l))=="string"?p:c?u(d):(p=u(d))=="Object"&&typeof d.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(v,s,o){var a=v("../internals/object-define-property").f,u=v("../internals/object-create"),l=v("../internals/redefine-all"),c=v("../internals/function-bind-context"),d=v("../internals/an-instance"),p=v("../internals/iterate"),f=v("../internals/define-iterator"),h=v("../internals/set-species"),m=v("../internals/descriptors"),y=v("../internals/internal-metadata").fastKey,v=v("../internals/internal-state"),g=v.set,_=v.getterFor;s.exports={getConstructor:function(x,b,S,T){function M(C,k,D){var F,G=P(C),z=R(C,k);return z?z.value=D:(G.last=z={index:F=y(k,!0),key:k,value:D,previous:k=G.last,next:void 0,removed:!1},G.first||(G.first=z),k&&(k.next=z),m?G.size++:C.size++,F!=="F"&&(G.index[F]=z)),C}function R(F,k){var D,F=P(F),G=y(k);if(G!=="F")return F.index[G];for(D=F.first;D;D=D.next)if(D.key==k)return D}var L=x(function(C,k){d(C,L,b),g(C,{type:b,index:u(null),first:void 0,last:void 0,size:0}),m||(C.size=0),k!=null&&p(k,C[T],C,S)}),P=_(b);return l(L.prototype,{clear:function(){for(var C=P(this),k=C.index,D=C.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete k[D.index],D=D.next;C.first=C.last=void 0,m?C.size=0:this.size=0},delete:function(G){var k,D,F=P(this),G=R(this,G);return G&&(k=G.next,D=G.previous,delete F.index[G.index],G.removed=!0,D&&(D.next=k),k&&(k.previous=D),F.first==G&&(F.first=k),F.last==G&&(F.last=D),m?F.size--:this.size--),!!G},forEach:function(C){for(var k,D=P(this),F=c(C,1<arguments.length?arguments[1]:void 0,3);k=k?k.next:D.first;)for(F(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(C){return!!R(this,C)}}),l(L.prototype,S?{get:function(C){return C=R(this,C),C&&C.value},set:function(C,k){return M(this,C===0?0:C,k)}}:{add:function(C){return M(this,C=C===0?0:C,C)}}),m&&a(L.prototype,"size",{get:function(){return P(this).size}}),L},setStrong:function(x,b,S){var T=b+" Iterator",M=_(b),R=_(T);f(x,b,function(L,P){g(this,{type:T,target:L,state:M(L),kind:P,last:void 0})},function(){for(var L=R(this),P=L.kind,C=L.last;C&&C.removed;)C=C.previous;return L.target&&(L.last=C=C?C.next:L.state.first)?P=="keys"?{value:C.key,done:!1}:P=="values"?{value:C.value,done:!1}:{value:[C.key,C.value],done:!1}:{value:L.target=void 0,done:!0}},S?"entries":"values",!S,!0),h(b)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(g,s,o){function a(M){return M.frozen||(M.frozen=new u)}function u(){this.entries=[]}function l(M,R){return b(M.entries,function(L){return L[0]===R})}var c=g("../internals/redefine-all"),d=g("../internals/internal-metadata").getWeakData,p=g("../internals/an-object"),f=g("../internals/is-object"),h=g("../internals/an-instance"),m=g("../internals/iterate"),y=g("../internals/array-iteration"),v=g("../internals/has"),g=g("../internals/internal-state"),_=g.set,x=g.getterFor,b=y.find,S=y.findIndex,T=0;u.prototype={get:function(M){if(M=l(this,M),M)return M[1]},has:function(M){return!!l(this,M)},set:function(M,R){var L=l(this,M);L?L[1]=R:this.entries.push([M,R])},delete:function(M){var R=S(this.entries,function(L){return L[0]===M});return~R&&this.entries.splice(R,1),!!~R}},s.exports={getConstructor:function(M,R,L,P){function C(F,G,z){var Q=D(F),V=d(p(G),!0);return V===!0?a(Q).set(G,z):V[Q.id]=z,F}var k=M(function(F,G){h(F,k,R),_(F,{type:R,id:T++,frozen:void 0}),G!=null&&m(G,F[P],F,L)}),D=x(R);return c(k.prototype,{delete:function(F){var G,z=D(this);return!!f(F)&&((G=d(F))===!0?a(z).delete(F):G&&v(G,z.id)&&delete G[z.id])},has:function(F){var G,z=D(this);return!!f(F)&&((G=d(F))===!0?a(z).has(F):G&&v(G,z.id))}}),c(k.prototype,L?{get:function(F){var G,z=D(this);if(f(F))return(G=d(F))===!0?a(z).get(F):G?G[z.id]:void 0},set:function(F,G){return C(this,F,G)}}:{add:function(F){return C(this,F,!0)}}),k}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/redefine"),d=r("../internals/internal-metadata"),p=r("../internals/iterate"),f=r("../internals/an-instance"),h=r("../internals/is-object"),m=r("../internals/fails"),y=r("../internals/check-correctness-of-iteration"),v=r("../internals/set-to-string-tag"),g=r("../internals/inherit-if-required");s.exports=function(_,x,b){function S(V){var W=G[V];c(G,V,V=="add"?function(Y){return W.call(this,Y===0?0:Y),this}:V=="delete"?function(Y){return!(k&&!h(Y))&&W.call(this,Y===0?0:Y)}:V=="get"?function(Y){return k&&!h(Y)?void 0:W.call(this,Y===0?0:Y)}:V=="has"?function(Y){return!(k&&!h(Y))&&W.call(this,Y===0?0:Y)}:function(Y,J){return W.call(this,Y===0?0:Y,J),this})}var T,M,R,L,P,C=_.indexOf("Map")!==-1,k=_.indexOf("Weak")!==-1,D=C?"set":"add",F=u[_],G=F&&F.prototype,z=F,Q={};return l(_,typeof F!="function"||!(k||G.forEach&&!m(function(){new F().entries().next()})))?(z=b.getConstructor(x,_,C,D),d.REQUIRED=!0):l(_,!0)&&(M=(T=new z)[D](k?{}:-0,1)!=T,R=m(function(){T.has(1)}),L=y(function(V){new F(V)}),P=!k&&m(function(){for(var V=new F,W=5;W--;)V[D](W,W);return!V.has(-0)}),L||(((z=x(function(V,W){return f(V,z,_),V=g(new F,V,z),W!=null&&p(W,V[D],V,C),V})).prototype=G).constructor=z),(R||P)&&(S("delete"),S("has"),C&&S("get")),(P||M)&&S(D),k&&G.clear&&delete G.clear),Q[_]=z,a({global:!0,forced:z!=F},Q),v(z,_),k||b.setStrong(z,_,C),z}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(r,s,o){var a=r("../internals/has"),u=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),c=r("../internals/object-define-property");s.exports=function(d,p){for(var f=u(p),h=c.f,m=l.f,y=0;y<f.length;y++){var v=f[y];a(d,v)||h(d,v,m(p,v))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(r,s,o){var a=r("../internals/well-known-symbol")("match");s.exports=function(u){var l=/./;try{"/./"[u](l)}catch{try{return l[a]=!1,"/./"[u](l)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(r,s,o){var a=r("../internals/require-object-coercible"),u=/"/g;s.exports=function(f,c,d,p){var f=String(a(f)),h="<"+c;return d!==""&&(h+=" "+d+'="'+String(p).replace(u,"&quot;")+'"'),h+">"+f+"</"+c+">"}},{"../internals/require-object-coercible":114}],37:[function(r,s,o){function a(){return this}var u=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),c=r("../internals/create-property-descriptor"),d=r("../internals/set-to-string-tag"),p=r("../internals/iterators");s.exports=function(f,h,m){return h+=" Iterator",f.prototype=l(u,{next:c(1,m)}),d(f,h,!1,!0),p[h]=a,f}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=a?function(c,d,p){return u.f(c,d,l(1,p))}:function(c,d,p){return c[d]=p,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(r,s,o){s.exports=function(a,u){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:u}}},{}],40:[function(r,s,o){var a=r("../internals/to-primitive"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=function(c,d,p){d=a(d),d in c?u.f(c,d,l(0,p)):c[d]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(g,s,o){function a(){return this}var u=g("../internals/export"),l=g("../internals/create-iterator-constructor"),c=g("../internals/object-get-prototype-of"),d=g("../internals/object-set-prototype-of"),p=g("../internals/set-to-string-tag"),f=g("../internals/create-non-enumerable-property"),h=g("../internals/redefine"),m=g("../internals/well-known-symbol"),y=g("../internals/is-pure"),v=g("../internals/iterators"),g=g("../internals/iterators-core"),_=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,b=m("iterator"),S="values",T="entries";s.exports=function(M,R,L,Q,C,k,D){l(L,R,Q);function F(I){if(I===C&&J)return J;if(!x&&I in W)return W[I];switch(I){case"keys":case S:case T:return function(){return new L(this,I)}}return function(){return new L(this)}}var G,z,Q=R+" Iterator",V=!1,W=M.prototype,Y=W[b]||W["@@iterator"]||C&&W[C],J=!x&&Y||F(C),ie=R=="Array"&&W.entries||Y;if(ie&&(ie=c(ie.call(new M)),_!==Object.prototype&&ie.next&&(y||c(ie)===_||(d?d(ie,_):typeof ie[b]!="function"&&f(ie,b,a)),p(ie,Q,!0,!0),y&&(v[Q]=a))),C==S&&Y&&Y.name!==S&&(V=!0,J=function(){return Y.call(this)}),y&&!D||W[b]===J||f(W,b,J),v[R]=J,C)if(G={values:F(S),keys:k?J:F("keys"),entries:F(T)},D)for(z in G)!x&&!V&&z in W||h(W,z,G[z]);else u({target:R,proto:!0,forced:x||V},G);return G}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(r,s,o){var a=r("../internals/path"),u=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),c=r("../internals/object-define-property").f;s.exports=function(d){var p=a.Symbol||(a.Symbol={});u(p,d)||c(p,d,{value:l.f(d)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(u,s,o){var a=u("../internals/global"),u=u("../internals/is-object"),l=a.document,c=u(l)&&u(l.createElement);s.exports=function(d){return c?l.createElement(d):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(r,s,o){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(l,s,o){var a,u,c=l("../internals/global"),l=l("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?u=(a=c.split("."))[0]+a[1]:l&&(!(a=l.match(/Edge\/(\d+)/))||74<=a[1])&&(a=l.match(/Chrome\/(\d+)/))&&(u=a[1]),s.exports=u&&+u},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(r,s,o){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,s,o){var a=r("../internals/global"),u=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),c=r("../internals/redefine"),d=r("../internals/set-global"),p=r("../internals/copy-constructor-properties"),f=r("../internals/is-forced");s.exports=function(h,m){var y,v,g,_=h.target,x=h.global,b=h.stat,S=x?a:b?a[_]||d(_,{}):(a[_]||{}).prototype;if(S)for(y in m){if(v=m[y],g=h.noTargetGet?(g=u(S,y))&&g.value:S[y],!f(x?y:_+(b?".":"#")+y,h.forced)&&g!==void 0){if(typeof v==typeof g)continue;p(v,g)}(h.sham||g&&g.sham)&&l(v,"sham",!0),c(S,y,v,h)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(r,s,o){s.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(m,s,o){m("../modules/es.regexp.exec");var a=m("../internals/redefine"),u=m("../internals/fails"),l=m("../internals/well-known-symbol"),c=m("../internals/regexp-exec"),d=m("../internals/create-non-enumerable-property"),p=l("species"),f=!u(function(){var g=/./;return g.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(g,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",m=l("replace"),y=!!/./[m]&&/./[m]("a","$0")==="",v=!u(function(){var _=/(?:)/,g=_.exec,_=(_.exec=function(){return g.apply(this,arguments)},"ab".split(_));return _.length!==2||_[0]!=="a"||_[1]!=="b"});s.exports=function(g,_,x,b){var S,T,M=l(g),R=!u(function(){var P={};return P[M]=function(){return 7},""[g](P)!=7}),L=R&&!u(function(){var P=!1,C=/a/;return g==="split"&&((C={constructor:{}}).constructor[p]=function(){return C},C.flags="",C[M]=/./[M]),C.exec=function(){return P=!0,null},C[M](""),!P});R&&L&&(g!=="replace"||f&&h&&!y)&&(g!=="split"||v)||(S=/./[M],x=(L=x(M,""[g],function(P,C,k,D,F){return C.exec===c?R&&!F?{done:!0,value:S.call(C,k,D)}:{done:!0,value:P.call(k,C,D)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],T=L[1],a(String.prototype,g,x),a(RegExp.prototype,M,_==2?function(P,C){return T.call(P,this,C)}:function(P){return T.call(P,this)})),b&&d(RegExp.prototype[M],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(r,s,o){function a(d,p,f,h,m,y,v,g){for(var _,x=m,b=0,S=!!v&&c(v,g,3);b<h;){if(b in f){if(_=S?S(f[b],b,p):f[b],0<y&&u(_))x=a(d,p,_,l(_.length),x,y-1)-1;else{if(9007199254740991<=x)throw TypeError("Exceed the acceptable array length");d[x]=_}x++}b++}return x}var u=r("../internals/is-array"),l=r("../internals/to-length"),c=r("../internals/function-bind-context");s.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(r,s,o){var a=r("../internals/a-function");s.exports=function(u,l,c){if(a(u),l===void 0)return u;switch(c){case 0:return function(){return u.call(l)};case 1:return function(d){return u.call(l,d)};case 2:return function(d,p){return u.call(l,d,p)};case 3:return function(d,p,f){return u.call(l,d,p,f)}}return function(){return u.apply(l,arguments)}}},{"../internals/a-function":5}],56:[function(r,s,o){var a=r("../internals/a-function"),u=r("../internals/is-object"),l=[].slice,c={};s.exports=Function.bind||function(d){var p=a(this),f=l.call(arguments,1),h=function(){var m=f.concat(l.call(arguments));if(this instanceof h){var y=p,v=m.length,g=m;if(!(v in c)){for(var _=[],x=0;x<v;x++)_[x]="a["+x+"]";c[v]=Function("C,a","return new C("+_.join(",")+")")}return c[v](y,g)}return p.apply(d,m)};return u(p.prototype)&&(h.prototype=p.prototype),h}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(r,s,o){function a(c){return typeof c=="function"?c:void 0}var u=r("../internals/path"),l=r("../internals/global");s.exports=function(c,d){return arguments.length<2?a(u[c])||a(l[c]):u[c]&&u[c][d]||l[c]&&l[c][d]}},{"../internals/global":60,"../internals/path":105}],58:[function(r,s,o){var a=r("../internals/classof"),u=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");s.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||u[a(c)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(r,s,o){var a=r("../internals/an-object"),u=r("../internals/get-iterator-method");s.exports=function(l){var c=u(l);if(typeof c!="function")throw TypeError(String(l)+" is not iterable");return a(c.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(r,s,o){(function(a){function u(l){return l&&l.Math==Math&&l}s.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(r,s,o){var a={}.hasOwnProperty;s.exports=function(u,l){return a.call(u,l)}},{}],62:[function(r,s,o){s.exports={}},{}],63:[function(r,s,o){var a=r("../internals/global");s.exports=function(u,l){var c=a.console;c&&c.error&&(arguments.length===1?c.error(u):c.error(u,l))}},{"../internals/global":60}],64:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("document","documentElement")},{"../internals/get-built-in":57}],65:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/document-create-element");s.exports=!a&&!u(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(r,s,o){var a=Math.abs,u=Math.pow,l=Math.floor,c=Math.log,d=Math.LN2;s.exports={pack:function(p,f,x){var m,y,v,g=new Array(x),_=8*x-f-1,x=(1<<_)-1,b=x>>1,S=f===23?u(2,-24)-u(2,-77):0,T=p<0||p===0&&1/p<0?1:0,M=0;for((p=a(p))!=p||p===1/0?(y=p!=p?1:0,m=x):(m=l(c(p)/d),p*(v=u(2,-m))<1&&(m--,v*=2),2<=(p+=1<=m+b?S/v:S*u(2,1-b))*v&&(m++,v/=2),x<=m+b?(y=0,m=x):1<=m+b?(y=(p*v-1)*u(2,f),m+=b):(y=p*u(2,b-1)*u(2,f),m=0));8<=f;g[M++]=255&y,y/=256,f-=8);for(m=m<<f|y,_+=f;0<_;g[M++]=255&m,m/=256,_-=8);return g[--M]|=128*T,g},unpack:function(p,f){var h,m=p.length,x=8*m-f-1,y=(1<<x)-1,v=y>>1,g=x-7,_=m-1,x=p[_--],b=127&x;for(x>>=7;0<g;b=256*b+p[_],_--,g-=8);for(h=b&(1<<-g)-1,b>>=-g,g+=f;0<g;h=256*h+p[_],_--,g-=8);if(b===0)b=1-v;else{if(b===y)return h?NaN:x?-1/0:1/0;h+=u(2,f),b-=v}return(x?-1:1)*h*u(2,b-f)}}},{}],67:[function(r,s,o){var a=r("../internals/fails"),u=r("../internals/classof-raw"),l="".split;s.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return u(c)=="String"?l.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(r,s,o){var a=r("../internals/is-object"),u=r("../internals/object-set-prototype-of");s.exports=function(l,c,d){return u&&typeof(c=c.constructor)=="function"&&c!==d&&a(c=c.prototype)&&c!==d.prototype&&u(l,c),l}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,s,o){var a=a("../internals/shared-store"),u=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(l){return u.call(l)}),s.exports=a.inspectSource},{"../internals/shared-store":120}],70:[function(r,s,o){function a(g){d(g,h,{value:{objectID:"O"+ ++m,weakData:{}}})}var u=r("../internals/hidden-keys"),l=r("../internals/is-object"),c=r("../internals/has"),d=r("../internals/object-define-property").f,p=r("../internals/uid"),f=r("../internals/freezing"),h=p("meta"),m=0,y=Object.isExtensible||function(){return!0},v=s.exports={REQUIRED:!1,fastKey:function(g,_){if(!l(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!c(g,h)){if(!y(g))return"F";if(!_)return"E";a(g)}return g[h].objectID},getWeakData:function(g,_){if(!c(g,h)){if(!y(g))return!0;if(!_)return!1;a(g)}return g[h].weakData},onFreeze:function(g){return f&&v.REQUIRED&&y(g)&&!c(g,h)&&a(g),g}};u[h]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(x,s,o){var a,u,l,c,d,p,f,h,m=x("../internals/native-weak-map"),b=x("../internals/global"),y=x("../internals/is-object"),v=x("../internals/create-non-enumerable-property"),g=x("../internals/has"),_=x("../internals/shared-key"),x=x("../internals/hidden-keys"),b=b.WeakMap;f=m?(a=new b,u=a.get,l=a.has,c=a.set,d=function(S,T){return c.call(a,S,T),T},p=function(S){return u.call(a,S)||{}},function(S){return l.call(a,S)}):(x[h=_("state")]=!0,d=function(S,T){return v(S,h,T),T},p=function(S){return g(S,h)?S[h]:{}},function(S){return g(S,h)}),s.exports={set:d,get:p,has:f,enforce:function(S){return f(S)?p(S):d(S,{})},getterFor:function(S){return function(T){if(y(T)&&(T=p(T)).type===S)return T;throw TypeError("Incompatible receiver, "+S+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(r,s,o){var a=r("../internals/well-known-symbol"),u=r("../internals/iterators"),l=a("iterator"),c=Array.prototype;s.exports=function(d){return d!==void 0&&(u.Array===d||c[l]===d)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=Array.isArray||function(u){return a(u)=="Array"}},{"../internals/classof-raw":28}],74:[function(r,s,o){function a(h,m){return(h=d[c(h)])==f||h!=p&&(typeof m=="function"?u(m):!!m)}var u=r("../internals/fails"),l=/#|\.prototype\./,c=a.normalize=function(h){return String(h).replace(l,".").toLowerCase()},d=a.data={},p=a.NATIVE="N",f=a.POLYFILL="P";s.exports=a},{"../internals/fails":51}],75:[function(r,s,o){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(r,s,o){s.exports=!1},{}],77:[function(r,s,o){var a=r("../internals/is-object"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");s.exports=function(c){var d;return a(c)&&((d=c[l])!==void 0?!!d:u(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(r,s,o){function a(h,m){this.stopped=h,this.result=m}var u=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),c=r("../internals/to-length"),d=r("../internals/function-bind-context"),p=r("../internals/get-iterator-method"),f=r("../internals/call-with-safe-iteration-closing");(s.exports=function(h,m,y,v,g){var _,x,b,S,T,M,R=d(m,y,v?2:1);if(g)_=h;else{if(typeof(m=p(h))!="function")throw TypeError("Target is not iterable");if(l(m)){for(x=0,b=c(h.length);x<b;x++)if((S=v?R(u(M=h[x])[0],M[1]):R(h[x]))&&S instanceof a)return S;return new a(!1)}_=m.call(h)}for(T=_.next;!(M=T.call(_)).done;)if(typeof(S=f(_,R,M.value,v))=="object"&&S&&S instanceof a)return S;return new a(!1)}).stop=function(h){return new a(!0,h)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(p,s,o){var a,u,l=p("../internals/object-get-prototype-of"),c=p("../internals/create-non-enumerable-property"),d=p("../internals/has"),f=p("../internals/well-known-symbol"),p=p("../internals/is-pure"),f=f("iterator"),h=!1;[].keys&&("next"in(u=[].keys())?(l=l(l(u)))!==Object.prototype&&(a=l):h=!0),a==null&&(a={}),p||d(a,f)||c(a,f,function(){return this}),s.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(r,s,o){s.exports={}},{}],81:[function(r,s,o){s.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(v,s,o){var a,u,l,c,d,p,f,h,m=v("../internals/global"),T=v("../internals/object-get-own-property-descriptor").f,S=v("../internals/classof-raw"),y=v("../internals/task").set,v=v("../internals/engine-is-ios"),g=m.MutationObserver||m.WebKitMutationObserver,_=m.process,x=m.Promise,b=S(_)=="process",S=T(m,"queueMicrotask"),T=S&&S.value;T||(a=function(){var M,R;for(b&&(M=_.domain)&&M.exit();u;){R=u.fn,u=u.next;try{R()}catch(L){throw u?c():l=void 0,L}}l=void 0,M&&M.enter()},c=b?function(){_.nextTick(a)}:g&&!v?(d=!0,p=document.createTextNode(""),new g(a).observe(p,{characterData:!0}),function(){p.data=d=!d}):x&&x.resolve?(f=x.resolve(void 0),h=f.then,function(){h.call(f,a)}):function(){y.call(m,a)}),s.exports=T||function(M){M={fn:M,next:void 0},l&&(l.next=M),u||(u=M,c()),l=M}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(r,s,o){r=r("../internals/global"),s.exports=r.Promise},{"../internals/global":60}],84:[function(r,s,o){r=r("../internals/fails"),s.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(r,s,o){var a=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),c=u("iterator");s.exports=!a(function(){var d=new URL("b?a=1&b=2&c=3","http://a"),p=d.searchParams,f="";return d.pathname="c%20d",p.forEach(function(h,m){p.delete("b"),f+=m+h}),l&&!d.toJSON||!p.sort||d.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||f!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(a,s,o){var u=a("../internals/global"),a=a("../internals/inspect-source"),u=u.WeakMap;s.exports=typeof u=="function"&&/native code/.test(a(u))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(r,s,o){function a(l){var c,d;this.promise=new l(function(p,f){if(c!==void 0||d!==void 0)throw TypeError("Bad Promise constructor");c=p,d=f}),this.resolve=u(c),this.reject=u(d)}var u=r("../internals/a-function");s.exports.f=function(l){return new a(l)}},{"../internals/a-function":5}],88:[function(r,s,o){var a=r("../internals/is-regexp");s.exports=function(u){if(a(u))throw TypeError("The method doesn't accept regular expressions");return u}},{"../internals/is-regexp":77}],89:[function(r,s,o){var a=r("../internals/global").isFinite;s.exports=Number.isFinite||function(u){return typeof u=="number"&&a(u)}},{"../internals/global":60}],90:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/object-keys"),c=r("../internals/object-get-own-property-symbols"),d=r("../internals/object-property-is-enumerable"),p=r("../internals/to-object"),f=r("../internals/indexed-object"),h=Object.assign,m=Object.defineProperty;s.exports=!h||u(function(){var y,v,g,_;return!(!a||h({b:1},h(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(v={},_="abcdefghijklmnopqrst",(y={})[g=Symbol()]=7,_.split("").forEach(function(x){v[x]=x}),h({},y)[g]!=7||l(h({},v)).join("")!=_)})?function(y,v){for(var g=p(y),_=arguments.length,x=1,b=c.f,S=d.f;x<_;)for(var T,M=f(arguments[x++]),R=b?l(M).concat(b(M)):l(M),L=R.length,P=0;P<L;)T=R[P++],a&&!S.call(M,T)||(g[T]=M[T]);return g}:h},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(m,s,o){function a(){}var u,l=m("../internals/an-object"),c=m("../internals/object-define-properties"),d=m("../internals/enum-bug-keys"),p=m("../internals/hidden-keys"),f=m("../internals/html"),h=m("../internals/document-create-element"),m=m("../internals/shared-key"),y="prototype",v="script",g=m("IE_PROTO"),_=function(b){return"<"+v+">"+b+"</"+v+">"},x=function(){try{u=document.domain&&new ActiveXObject("htmlfile")}catch{}x=u?((b=u).write(_("")),b.close(),S=b.parentWindow.Object,b=null,S):(b=h("iframe"),S="java"+v+":",b.style.display="none",f.appendChild(b),b.src=String(S),(S=b.contentWindow.document).open(),S.write(_("document.F=Object")),S.close(),S.F);for(var b,S,T=d.length;T--;)delete x[y][d[T]];return x()};p[g]=!0,s.exports=Object.create||function(b,S){var T;return b!==null?(a[y]=l(b),T=new a,a[y]=null,T[g]=b):T=x(),S===void 0?T:c(T,S)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/an-object"),c=r("../internals/object-keys");s.exports=a?Object.defineProperties:function(d,p){l(d);for(var f,h=c(p),m=h.length,y=0;y<m;)u.f(d,f=h[y++],p[f]);return d}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),c=r("../internals/to-primitive"),d=Object.defineProperty;o.f=a?d:function(p,f,h){if(l(p),f=c(f,!0),l(h),u)try{return d(p,f,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(p[f]=h.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),c=r("../internals/to-indexed-object"),d=r("../internals/to-primitive"),p=r("../internals/has"),f=r("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;o.f=a?h:function(m,y){if(m=c(m),y=d(y,!0),f)try{return h(m,y)}catch{}if(p(m,y))return l(!u.f.call(m,y),m[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(r,s,o){var a=r("../internals/to-indexed-object"),u=r("../internals/object-get-own-property-names").f,l={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(d){if(!c||l.call(d)!="[object Window]")return u(a(d));try{return u(d)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(r,s,o){var a=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(l){return a(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(r,s,o){o.f=Object.getOwnPropertySymbols},{}],98:[function(c,s,o){var a=c("../internals/has"),u=c("../internals/to-object"),l=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),d=l("IE_PROTO"),p=Object.prototype;s.exports=c?Object.getPrototypeOf:function(f){return f=u(f),a(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?p:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(r,s,o){var a=r("../internals/has"),u=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,c=r("../internals/hidden-keys");s.exports=function(d,p){var f,h=u(d),m=0,y=[];for(f in h)!a(c,f)&&a(h,f)&&y.push(f);for(;p.length>m;)!a(h,f=p[m++])||~l(y,f)||y.push(f);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(r,s,o){var a=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys");s.exports=Object.keys||function(l){return a(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(r,s,o){var a={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l=u&&!a.call({1:2},1);o.f=l?function(c){return c=u(this,c),!!c&&c.enumerable}:a},{}],102:[function(r,s,o){var a=r("../internals/an-object"),u=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,c=!1,d={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(d,[]),c=d instanceof Array}catch{}return function(p,f){return a(p),u(f),c?l.call(p,f):p.__proto__=f,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(r,s,o){var a=r("../internals/to-string-tag-support"),u=r("../internals/classof");s.exports=a?{}.toString:function(){return"[object "+u(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(r,s,o){var a=r("../internals/get-built-in"),u=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),c=r("../internals/an-object");s.exports=a("Reflect","ownKeys")||function(d){var p=u.f(c(d)),f=l.f;return f?p.concat(f(d)):p}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(r,s,o){r=r("../internals/global"),s.exports=r},{"../internals/global":60}],106:[function(r,s,o){s.exports=function(a){try{return{error:!1,value:a()}}catch(u){return{error:!0,value:u}}}},{}],107:[function(r,s,o){var a=r("../internals/an-object"),u=r("../internals/is-object"),l=r("../internals/new-promise-capability");s.exports=function(c,d){return a(c),u(d)&&d.constructor===c?d:((0,(c=l.f(c)).resolve)(d),c.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(r,s,o){var a=r("../internals/redefine");s.exports=function(u,l,c){for(var d in l)a(u,d,l[d],c);return u}},{"../internals/redefine":109}],109:[function(p,s,o){var a=p("../internals/global"),u=p("../internals/create-non-enumerable-property"),l=p("../internals/has"),c=p("../internals/set-global"),d=p("../internals/inspect-source"),p=p("../internals/internal-state"),f=p.get,h=p.enforce,m=String(String).split("String");(s.exports=function(y,v,g,S){var x=!!S&&!!S.unsafe,b=!!S&&!!S.enumerable,S=!!S&&!!S.noTargetGet;typeof g=="function"&&(typeof v!="string"||l(g,"name")||u(g,"name",v),h(g).source=m.join(typeof v=="string"?v:"")),y===a?b?y[v]=g:c(v,g):(x?!S&&y[v]&&(b=!0):delete y[v],b?y[v]=g:u(y,v,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||d(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(r,s,o){var a=r("./classof-raw"),u=r("./regexp-exec");s.exports=function(l,c){var d=l.exec;if(typeof d=="function"){if(d=d.call(l,c),typeof d!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return d}if(a(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return u.call(l,c)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(c,s,o){var a,u,l=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),d=RegExp.prototype.exec,p=String.prototype.replace,f=d,h=(a=/a/,u=/b*/g,d.call(a,"a"),d.call(u,"a"),a.lastIndex!==0||u.lastIndex!==0),m=c.UNSUPPORTED_Y||c.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;s.exports=f=h||y||m?function(v){var g,_,x,b,S=this,T=m&&S.sticky,M=l.call(S),R=S.source,L=0,P=v;return T&&((M=M.replace("y","")).indexOf("g")===-1&&(M+="g"),P=String(v).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&v[S.lastIndex-1]!==`
`)&&(R="(?: "+R+")",P=" "+P,L++),_=new RegExp("^(?:"+R+")",M)),y&&(_=new RegExp("^"+R+"$(?!\\s)",M)),h&&(g=S.lastIndex),x=d.call(T?_:S,P),T?x?(x.input=x.input.slice(L),x[0]=x[0].slice(L),x.index=S.lastIndex,S.lastIndex+=x[0].length):S.lastIndex=0:h&&x&&(S.lastIndex=S.global?x.index+x[0].length:g),y&&x&&1<x.length&&p.call(x[0],_,function(){for(b=1;b<arguments.length-2;b++)arguments[b]===void 0&&(x[b]=void 0)}),x}:f},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(){var u=a(this),l="";return u.global&&(l+="g"),u.ignoreCase&&(l+="i"),u.multiline&&(l+="m"),u.dotAll&&(l+="s"),u.unicode&&(l+="u"),u.sticky&&(l+="y"),l}},{"../internals/an-object":10}],113:[function(r,s,o){r=r("./fails");function a(u,l){return RegExp(u,l)}o.UNSUPPORTED_Y=r(function(){var u=a("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),o.BROKEN_CARET=r(function(){var u=a("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},{"./fails":51}],114:[function(r,s,o){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],115:[function(r,s,o){s.exports=Object.is||function(a,u){return a===u?a!==0||1/a==1/u:a!=a&&u!=u}},{}],116:[function(r,s,o){var a=r("../internals/global"),u=r("../internals/create-non-enumerable-property");s.exports=function(l,c){try{u(a,l,c)}catch{a[l]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(r,s,o){var a=r("../internals/get-built-in"),u=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),c=r("../internals/descriptors"),d=l("species");s.exports=function(f){var f=a(f),h=u.f;c&&f&&!f[d]&&h(f,d,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(r,s,o){var a=r("../internals/object-define-property").f,u=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");s.exports=function(c,d,p){c&&!u(c=p?c:c.prototype,l)&&a(c,l,{configurable:!0,value:d})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(r,s,o){var a=r("../internals/shared"),u=r("../internals/uid"),l=a("keys");s.exports=function(c){return l[c]||(l[c]=u(c))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(a,s,o){var l=a("../internals/global"),a=a("../internals/set-global"),u="__core-js_shared__",l=l[u]||a(u,{});s.exports=l},{"../internals/global":60,"../internals/set-global":116}],121:[function(r,s,o){var a=r("../internals/is-pure"),u=r("../internals/shared-store");(s.exports=function(l,c){return u[l]||(u[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(r,s,o){var a=r("../internals/an-object"),u=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");s.exports=function(p,d){var p=a(p).constructor;return p===void 0||(p=a(p)[l])==null?d:u(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(r,s,o){var a=r("../internals/fails");s.exports=function(u){return a(function(){var l=""[u]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],124:[function(r,s,o){function a(c){return function(h,m){var f,h=String(l(h)),m=u(m),y=h.length;return m<0||y<=m?c?"":void 0:(f=h.charCodeAt(m))<55296||56319<f||m+1===y||(y=h.charCodeAt(m+1))<56320||57343<y?c?h.charAt(m):f:c?h.slice(m,m+2):y-56320+(f-55296<<10)+65536}}var u=r("../internals/to-integer"),l=r("../internals/require-object-coercible");s.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],126:[function(r,s,o){function a(p){return function(y,_,g){var y=String(c(y)),v=y.length,g=g===void 0?" ":String(g),_=u(_);return _<=v||g==""?y:((v=l.call(g,d((_=_-v)/g.length))).length>_&&(v=v.slice(0,_)),p?y+v:v+y)}}var u=r("../internals/to-length"),l=r("../internals/string-repeat"),c=r("../internals/require-object-coercible"),d=Math.ceil;s.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(r,s,o){function a(x){return x+22+75*(x<26)}function u(x){var b,S=[],T=(x=function(Y){for(var J=[],ie=0,I=Y.length;ie<I;){var O,H=Y.charCodeAt(ie++);55296<=H&&H<=56319&&ie<I?(64512&(O=Y.charCodeAt(ie++)))==56320?J.push(((1023&H)<<10)+(1023&O)+65536):(J.push(H),ie--):J.push(H)}return J}(x)).length,M=128,R=0,L=72;for(D=0;D<x.length;D++)(b=x[D])<128&&S.push(_(b));var P=S.length,C=P;for(P&&S.push("-");C<T;){for(var k=l,D=0;D<x.length;D++)M<=(b=x[D])&&b<k&&(k=b);var F=C+1;if(k-M>g((l-R)/F))throw RangeError(y);for(R+=(k-M)*F,M=k,D=0;D<x.length;D++){if((b=x[D])<M&&++R>l)throw RangeError(y);if(b==M){for(var G=R,z=c;;z+=c){var Q=z<=L?1:L+d<=z?d:z-L;if(G<Q)break;var V=G-Q,W=c-Q;S.push(_(a(Q+V%W))),G=g(V/W)}S.push(_(a(G))),L=function(Y,J,ie){var I=0;for(Y=ie?g(Y/f):Y>>1,Y+=g(Y/J);v*d>>1<Y;I+=c)Y=g(Y/v);return g(I+(v+1)*Y/(Y+p))}(R,F,C==P),R=0,++C}}++R,++M}return S.join("")}var l=2147483647,c=36,d=26,p=38,f=700,h=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",v=c-1,g=Math.floor,_=String.fromCharCode;s.exports=function(x){for(var b,S=[],T=x.toLowerCase().replace(m,".").split("."),M=0;M<T.length;M++)b=T[M],S.push(h.test(b)?"xn--"+u(b):b);return S.join(".")}},{}],128:[function(r,s,o){var a=r("../internals/to-integer"),u=r("../internals/require-object-coercible");s.exports="".repeat||function(l){var c=String(u(this)),d="",p=a(l);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(c+=c))1&p&&(d+=c);return d}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(r,s,o){var a=r("../internals/fails"),u=r("../internals/whitespaces");s.exports=function(l){return a(function(){return!!u[l]()||""[l]()!=""||u[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(l,s,o){function a(p){return function(f){return f=String(u(f)),1&p&&(f=f.replace(c,"")),f=2&p?f.replace(d,""):f}}var u=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",c=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$");s.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(v,s,o){function a(C){return function(){P(C)}}function u(C){P(C.data)}function l(C){d.postMessage(C+"",g.protocol+"//"+g.host)}var c,d=v("../internals/global"),p=v("../internals/fails"),f=v("../internals/classof-raw"),h=v("../internals/function-bind-context"),m=v("../internals/html"),y=v("../internals/document-create-element"),v=v("../internals/engine-is-ios"),g=d.location,_=d.setImmediate,x=d.clearImmediate,b=d.process,S=d.MessageChannel,T=d.Dispatch,M=0,R={},L="onreadystatechange",P=function(C){var k;R.hasOwnProperty(C)&&(k=R[C],delete R[C],k())};_&&x||(_=function(C){for(var k=[],D=1;D<arguments.length;)k.push(arguments[D++]);return R[++M]=function(){(typeof C=="function"?C:Function(C)).apply(void 0,k)},c(M),M},x=function(C){delete R[C]},f(b)=="process"?c=function(C){b.nextTick(a(C))}:T&&T.now?c=function(C){T.now(a(C))}:S&&!v?(v=(f=new S).port2,f.port1.onmessage=u,c=h(v.postMessage,v,1)):!d.addEventListener||typeof postMessage!="function"||d.importScripts||p(l)||g.protocol==="file:"?c=L in y("script")?function(C){m.appendChild(y("script"))[L]=function(){m.removeChild(this),P(C)}}:function(C){setTimeout(a(C),0)}:(c=l,d.addEventListener("message",u,!1))),s.exports={set:_,clear:x}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=function(u){if(typeof u!="number"&&a(u)!="Number")throw TypeError("Incorrect invocation");return+u}},{"../internals/classof-raw":28}],133:[function(r,s,o){var a=r("../internals/to-integer"),u=Math.max,l=Math.min;s.exports=function(c,d){return c=a(c),c<0?u(c+d,0):l(c,d)}},{"../internals/to-integer":136}],134:[function(r,s,o){var a=r("../internals/to-integer"),u=r("../internals/to-length");s.exports=function(c){if(c===void 0)return 0;var c=a(c),d=u(c);if(c!==d)throw RangeError("Wrong length or index");return d}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(r,s,o){var a=r("../internals/indexed-object"),u=r("../internals/require-object-coercible");s.exports=function(l){return a(u(l))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(r,s,o){var a=Math.ceil,u=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(0<l?u:a)(l)}},{}],137:[function(r,s,o){var a=r("../internals/to-integer"),u=Math.min;s.exports=function(l){return 0<l?u(a(l),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(r,s,o){var a=r("../internals/require-object-coercible");s.exports=function(u){return Object(a(u))}},{"../internals/require-object-coercible":114}],139:[function(r,s,o){var a=r("../internals/to-positive-integer");s.exports=function(u,l){if(u=a(u),u%l)throw RangeError("Wrong offset");return u}},{"../internals/to-positive-integer":140}],140:[function(r,s,o){var a=r("../internals/to-integer");s.exports=function(u){if(u=a(u),u<0)throw RangeError("The argument can't be less than 0");return u}},{"../internals/to-integer":136}],141:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(u,l){if(!a(u))return u;var c,d;if(l&&typeof(c=u.toString)=="function"&&!a(d=c.call(u))||typeof(c=u.valueOf)=="function"&&!a(d=c.call(u))||!l&&typeof(c=u.toString)=="function"&&!a(d=c.call(u)))return d;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(r,s,o){var a={};a[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(r,s,o){function a(we,Ee){for(var ae=0,ne=Ee.length,Ae=new(ue(we))(ne);ae<ne;)Ae[ae]=Ee[ae++];return Ae}function u(we,Ee){O(we,Ee,{get:function(){return ie(this)[Ee]}})}function l(we){return we instanceof oe||(we=P(we))=="ArrayBuffer"||we=="SharedArrayBuffer"}function c(we,Ee){return ge(we)&&typeof Ee!="symbol"&&Ee in we&&String(+Ee)==String(Ee)}function d(we,Ee){return c(we,Ee=R(Ee,!0))?x(2,we[Ee]):H(we,Ee)}function p(we,Ee,ae){return!(c(we,Ee=R(Ee,!0))&&C(ae)&&L(ae,"value"))||L(ae,"get")||L(ae,"set")||ae.configurable||L(ae,"writable")&&!ae.writable||L(ae,"enumerable")&&!ae.enumerable?O(we,Ee,ae):(we[Ee]=ae.value,we)}var f=r("../internals/export"),h=r("../internals/global"),m=r("../internals/descriptors"),y=r("../internals/typed-array-constructors-require-wrappers"),v=r("../internals/array-buffer-view-core"),g=r("../internals/array-buffer"),_=r("../internals/an-instance"),x=r("../internals/create-property-descriptor"),b=r("../internals/create-non-enumerable-property"),S=r("../internals/to-length"),T=r("../internals/to-index"),M=r("../internals/to-offset"),R=r("../internals/to-primitive"),L=r("../internals/has"),P=r("../internals/classof"),C=r("../internals/is-object"),k=r("../internals/object-create"),D=r("../internals/object-set-prototype-of"),F=r("../internals/object-get-own-property-names").f,G=r("../internals/typed-array-from"),z=r("../internals/array-iteration").forEach,Q=r("../internals/set-species"),V=r("../internals/object-define-property"),W=r("../internals/object-get-own-property-descriptor"),Y=r("../internals/internal-state"),J=r("../internals/inherit-if-required"),ie=Y.get,I=Y.set,O=V.f,H=W.f,q=Math.round,Z=h.RangeError,oe=g.ArrayBuffer,pe=g.DataView,be=v.NATIVE_ARRAY_BUFFER_VIEWS,me=v.TYPED_ARRAY_TAG,ce=v.TypedArray,te=v.TypedArrayPrototype,ue=v.aTypedArrayConstructor,ge=v.isTypedArray,xe="BYTES_PER_ELEMENT",Le="Wrong length";m?(be||(W.f=d,V.f=p,u(te,"buffer"),u(te,"byteOffset"),u(te,"byteLength"),u(te,"length")),f({target:"Object",stat:!0,forced:!be},{getOwnPropertyDescriptor:d,defineProperty:p}),s.exports=function(Se,Ee,ae){function ne(Re,le){O(Re,le,{get:function(){var de=this,ee=le;return(de=ie(de)).view[Fe](ee*Ae+de.byteOffset,!0)},set:function(de){var ee=this,he=le;ee=ie(ee),ae&&(de=(de=q(de))<0?0:255<de?255:255&de),ee.view[Oe](he*Ae+ee.byteOffset,de,!0)},enumerable:!0})}var Ae=Se.match(/\d+$/)[0]/8,Be=Se+(ae?"Clamped":"")+"Array",Fe="get"+Se,Oe="set"+Se,Je=h[Be],Ve=Je,Se=Ve&&Ve.prototype,We={};be?y&&(Ve=Ee(function(Re,le,de,ee){return _(Re,Ve,Be),J(C(le)?l(le)?ee!==void 0?new Je(le,M(de,Ae),ee):de!==void 0?new Je(le,M(de,Ae)):new Je(le):ge(le)?a(Ve,le):G.call(Ve,le):new Je(T(le)),Re,Ve)}),D&&D(Ve,ce),z(F(Je),function(Re){Re in Ve||b(Ve,Re,Je[Re])}),Ve.prototype=Se):(Ve=Ee(function(Re,le,de,ee){_(Re,Ve,Be);var he,Pe,ye=0,De=0;if(C(le)){if(!l(le))return ge(le)?a(Ve,le):G.call(Ve,le);var Me=le,De=M(de,Ae),de=le.byteLength;if(ee===void 0){if(de%Ae||(he=de-De)<0)throw Z(Le)}else if(de<(he=S(ee)*Ae)+De)throw Z(Le);Pe=he/Ae}else Pe=T(le),Me=new oe(he=Pe*Ae);for(I(Re,{buffer:Me,byteOffset:De,byteLength:he,length:Pe,view:new pe(Me)});ye<Pe;)ne(Re,ye++)}),D&&D(Ve,ce),Se=Ve.prototype=k(te)),Se.constructor!==Ve&&b(Se,"constructor",Ve),me&&b(Se,me,Be),We[Be]=Ve,f({global:!0,forced:Ve!=Je,sham:!be},We),xe in Ve||b(Ve,xe,Ae),xe in Se||b(Se,xe,Ae),Q(Be)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(c,s,o){var a=c("../internals/global"),u=c("../internals/fails"),l=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,d=a.ArrayBuffer,p=a.Int8Array;s.exports=!c||!u(function(){p(1)})||!u(function(){new p(-1)})||!l(function(f){new p,new p(null),new p(1.5),new p(f)},!0)||u(function(){return new p(new d(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(r,s,o){var a=r("../internals/to-object"),u=r("../internals/to-length"),l=r("../internals/get-iterator-method"),c=r("../internals/is-array-iterator-method"),d=r("../internals/function-bind-context"),p=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(f){var h,m,y,v,g,_,x=a(f),b=arguments.length,S=1<b?arguments[1]:void 0,T=S!==void 0,M=l(x);if(M!=null&&!c(M))for(_=(g=M.call(x)).next,x=[];!(v=_.call(g)).done;)x.push(v.value);for(T&&2<b&&(S=d(S,arguments[2],2)),m=u(x.length),y=new(p(this))(m),h=0;h<m;h++)y[h]=T?S(x[h],h):x[h];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(r,s,o){var a=0,u=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+u).toString(36)}},{}],147:[function(r,s,o){r=r("../internals/native-symbol"),s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(r,s,o){r=r("../internals/well-known-symbol"),o.f=r},{"../internals/well-known-symbol":149}],149:[function(p,s,o){var a=p("../internals/global"),u=p("../internals/shared"),l=p("../internals/has"),c=p("../internals/uid"),d=p("../internals/native-symbol"),p=p("../internals/use-symbol-as-uid"),f=u("wks"),h=a.Symbol,m=p?h:h&&h.withoutSetter||c;s.exports=function(y){return l(f,y)||(d&&l(h,y)?f[y]=h[y]:f[y]=m("Symbol."+y)),f[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(r,s,o){s.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],151:[function(l,s,o){var a=l("../internals/export"),u=l("../internals/global"),d=l("../internals/array-buffer"),l=l("../internals/set-species"),c="ArrayBuffer",d=d[c];a({global:!0,forced:u[c]!==d},{ArrayBuffer:d}),l(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(x,s,o){var a=x("../internals/export"),u=x("../internals/fails"),l=x("../internals/is-array"),c=x("../internals/is-object"),d=x("../internals/to-object"),p=x("../internals/to-length"),f=x("../internals/create-property"),h=x("../internals/array-species-create"),m=x("../internals/array-method-has-species-support"),_=x("../internals/well-known-symbol"),x=x("../internals/engine-v8-version"),y=_("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",_=51<=x||!u(function(){var b=[];return b[y]=!1,b.concat()[0]!==b}),x=m("concat");a({target:"Array",proto:!0,forced:!_||!x},{concat:function(b){for(var S,T,M,R,L,P=d(this),C=h(P,0),k=0,D=-1,F=arguments.length;D<F;D++)if(L=void 0,!c(R=M=D===-1?P:arguments[D])||((L=R[y])!==void 0?!L:!l(R))){if(v<=k)throw TypeError(g);f(C,k++,M)}else{if(T=p(M.length),v<k+T)throw TypeError(g);for(S=0;S<T;S++,k++)S in M&&f(C,k,M[S])}return C.length=k,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(l,s,o){var a=l("../internals/export"),u=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:u}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(c,s,o){var a=c("../internals/export"),u=c("../internals/array-iteration").every,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("every"),c=c("every");a({target:"Array",proto:!0,forced:!l||!c},{every:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(l,s,o){var a=l("../internals/export"),u=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:u}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(c,s,o){var a=c("../internals/export"),u=c("../internals/array-iteration").filter,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("filter"),c=c("filter");a({target:"Array",proto:!0,forced:!l||!c},{filter:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(p,s,o){var a=p("../internals/export"),u=p("../internals/array-iteration").findIndex,l=p("../internals/add-to-unscopables"),p=p("../internals/array-method-uses-to-length"),c="findIndex",d=!0,p=p(c);c in[]&&Array(1)[c](function(){d=!1}),a({target:"Array",proto:!0,forced:d||!p},{findIndex:function(f){return u(this,f,1<arguments.length?arguments[1]:void 0)}}),l(c)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/flatten-into-array"),l=r("../internals/to-object"),c=r("../internals/to-length"),d=r("../internals/a-function"),p=r("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(f){var h,m=l(this),y=c(m.length);return d(f),(h=p(m,0)).length=u(h,m,m,y,0,1,f,1<arguments.length?arguments[1]:void 0),h}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/flatten-into-array"),l=r("../internals/to-object"),c=r("../internals/to-length"),d=r("../internals/to-integer"),p=r("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var f=arguments.length?arguments[0]:void 0,h=l(this),m=c(h.length),y=p(h,0);return y.length=u(y,h,h,m,0,f===void 0?1:d(f)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(u,s,o){var a=u("../internals/export"),u=u("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=u},{forEach:u})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/array-from");a({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:u})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return u(this,c,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(p,s,o){var a=p("../internals/export"),u=p("../internals/array-includes").indexOf,d=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,d=d("indexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!d||!p},{indexOf:function(f){return c?l.apply(this,arguments)||0:u(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(d,s,o){var a=d("../internals/to-indexed-object"),u=d("../internals/add-to-unscopables"),l=d("../internals/iterators"),c=d("../internals/internal-state"),d=d("../internals/define-iterator"),p="Array Iterator",f=c.set,h=c.getterFor(p);s.exports=d(Array,"Array",function(m,y){f(this,{type:p,target:a(m),index:0,kind:y})},function(){var m=h(this),y=m.target,v=m.kind,g=m.index++;return!y||g>=y.length?{value:m.target=void 0,done:!0}:v=="keys"?{value:g,done:!1}:v=="values"?{value:y[g],done:!1}:{value:[g,y[g]],done:!1}},"values"),l.Arguments=l.Array,u("keys"),u("values"),u("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(d,s,o){var a=d("../internals/export"),c=d("../internals/indexed-object"),u=d("../internals/to-indexed-object"),d=d("../internals/array-method-is-strict"),l=[].join,c=c!=Object,d=d("join",",");a({target:"Array",proto:!0,forced:c||!d},{join:function(p){return l.call(u(this),p===void 0?",":p)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(u,s,o){var a=u("../internals/export"),u=u("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:u!==[].lastIndexOf},{lastIndexOf:u})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(c,s,o){var a=c("../internals/export"),u=c("../internals/array-iteration").map,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("map"),c=c("map");a({target:"Array",proto:!0,forced:!l||!c},{map:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(y,s,o){var a=y("../internals/export"),u=y("../internals/is-object"),l=y("../internals/is-array"),c=y("../internals/to-absolute-index"),d=y("../internals/to-length"),p=y("../internals/to-indexed-object"),f=y("../internals/create-property"),h=y("../internals/well-known-symbol"),m=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),m=m("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),v=h("species"),g=[].slice,_=Math.max;a({target:"Array",proto:!0,forced:!m||!y},{slice:function(x,b){var S,T,M,R=p(this),L=d(R.length),P=c(x,L),C=c(b===void 0?L:b,L);if(l(R)&&((S=typeof(S=R.constructor)=="function"&&(S===Array||l(S.prototype))||u(S)&&(S=S[v])===null?void 0:S)===Array||S===void 0))return g.call(R,P,C);for(T=new(S===void 0?Array:S)(_(C-P,0)),M=0;P<C;P++,M++)P in R&&f(T,M,R[P]);return T.length=M,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(c,s,o){var a=c("../internals/export"),u=c("../internals/array-iteration").some,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("some"),c=c("some");a({target:"Array",proto:!0,forced:!l||!c},{some:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(m,s,o){var a=m("../internals/export"),u=m("../internals/to-absolute-index"),l=m("../internals/to-integer"),c=m("../internals/to-length"),d=m("../internals/to-object"),p=m("../internals/array-species-create"),f=m("../internals/create-property"),h=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),h=h("splice"),m=m("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,v=Math.min;a({target:"Array",proto:!0,forced:!h||!m},{splice:function(k,_){var x,b,S,T,M,R,L=d(this),P=c(L.length),C=u(k,P),k=arguments.length;if(k===0?x=b=0:b=k===1?(x=0,P-C):(x=k-2,v(y(l(_),0),P-C)),9007199254740991<P+x-b)throw TypeError("Maximum allowed length exceeded");for(S=p(L,b),T=0;T<b;T++)(M=C+T)in L&&f(S,T,L[M]);if(x<(S.length=b)){for(T=C;T<P-b;T++)R=T+x,(M=T+b)in L?L[R]=L[M]:delete L[R];for(T=P;P-b+x<T;T--)delete L[T-1]}else if(b<x)for(T=P-b;C<T;T--)R=T+x-1,(M=T+b-1)in L?L[R]=L[M]:delete L[R];for(T=0;T<x;T++)L[T+C]=arguments[T+2];return L.length=P-b+x,S}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(r,s,o){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(r,s,o){r("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(u,s,o){var a=u("../internals/descriptors"),u=u("../internals/object-define-property").f,l=Function.prototype,c=l.toString,d=/^\s*function ([^ (]*)/;!a||"name"in l||u(l,"name",{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(u,s,o){var a=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=a("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(a,s,o){var a=a("../internals/export"),u=Math.hypot,l=Math.abs,c=Math.sqrt;a({target:"Math",stat:!0,forced:!!u&&u(1/0,NaN)!==1/0},{hypot:function(d,p){for(var f,h,m=0,y=0,v=arguments.length,g=0;y<v;)g<(f=l(arguments[y++]))?(m=m*(h=g/f)*h+1,g=f):m+=0<f?(h=f/g)*h:f;return g===1/0?1/0:g*c(m)}})},{"../internals/export":50}],176:[function(a,s,o){var a=a("../internals/export"),u=Math.log,l=Math.LN2;a({target:"Math",stat:!0},{log2:function(c){return u(c)/l}})},{"../internals/export":50}],177:[function(r,s,o){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(r,s,o){function a(D){var F,G,z,Q,V,W,Y,J=m(D,!1);if(typeof J=="string"&&2<J.length){if((D=(J=b(J)).charCodeAt(0))===43||D===45){if((F=J.charCodeAt(2))===88||F===120)return NaN}else if(D===48){switch(J.charCodeAt(1)){case 66:case 98:G=2,z=49;break;case 79:case 111:G=8,z=55;break;default:return+J}for(V=(Q=J.slice(2)).length,W=0;W<V;W++)if((Y=Q.charCodeAt(W))<48||z<Y)return NaN;return parseInt(Q,G)}}return+J}var u=r("../internals/descriptors"),l=r("../internals/global"),c=r("../internals/is-forced"),d=r("../internals/redefine"),p=r("../internals/has"),f=r("../internals/classof-raw"),h=r("../internals/inherit-if-required"),m=r("../internals/to-primitive"),y=r("../internals/fails"),v=r("../internals/object-create"),g=r("../internals/object-get-own-property-names").f,_=r("../internals/object-get-own-property-descriptor").f,x=r("../internals/object-define-property").f,b=r("../internals/string-trim").trim,S="Number",T=l[S],M=T.prototype,R=f(v(M))==S;if(c(S,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var L,P=function(F){var F=arguments.length<1?0:F,G=this;return G instanceof P&&(R?y(function(){M.valueOf.call(G)}):f(G)!=S)?h(new T(a(F)),G,P):a(F)},C=u?g(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;C.length>k;k++)p(T,L=C[k])&&!p(P,L)&&x(P,L,_(T,L));(P.prototype=M).constructor=P,d(l,S,P)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(r,s,o){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(p,s,o){function a(m,y,v){return y===0?v:y%2==1?a(m,y-1,v*m):a(m*m,y/2,v)}var u=p("../internals/export"),l=p("../internals/to-integer"),c=p("../internals/this-number-value"),d=p("../internals/string-repeat"),p=p("../internals/fails"),f=1 .toFixed,h=Math.floor;u({target:"Number",proto:!0,forced:f&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!p(function(){f.call({})})},{toFixed:function(S){function y(L,P){for(var C=-1,k=P;++C<6;)k+=L*T[C],T[C]=k%1e7,k=h(k/1e7)}function v(L){for(var P=6,C=0;0<=--P;)C+=T[P],T[P]=h(C/L),C=C%L*1e7}function g(){for(var L,P=6,C="";0<=--P;)C===""&&P!==0&&T[P]===0||(L=String(T[P]),C=C===""?L:C+d.call("0",7-L.length)+L);return C}var _,x,b=c(this),S=l(S),T=[0,0,0,0,0,0],M="",R="0";if(S<0||20<S)throw RangeError("Incorrect fraction digits");if(b!=b)return"NaN";if(b<=-1e21||1e21<=b)return String(b);if(b<0&&(M="-",b=-b),1e-21<b)if(b=(_=function(L){for(var P=0,C=L;4096<=C;)P+=12,C/=4096;for(;2<=C;)P+=1,C/=2;return P}(b*a(2,69,1))-69)<0?b*a(2,-_,1):b/a(2,_,1),b*=4503599627370496,0<(_=52-_)){for(y(0,b),x=S;7<=x;)y(1e7,0),x-=7;for(y(a(10,x,1),0),x=_-1;23<=x;)v(1<<23),x-=23;v(1<<x),y(1,1),v(2),R=g()}else y(0,b),y(1<<-_,0),R=g()+d.call("0",S);return R=0<S?M+((b=R.length)<=S?"0."+d.call("0",S-b)+R:R.slice(0,b-S)+"."+R.slice(b-S)):M+R}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(u,s,o){var a=u("../internals/export"),u=u("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==u},{assign:u})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/iterate"),l=r("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(c){var d={};return u(c,function(p,f){l(d,p,f)},void 0,!0),d}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(c,s,o){var a=c("../internals/export"),d=c("../internals/fails"),u=c("../internals/to-indexed-object"),l=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),d=d(function(){l(1)});a({target:"Object",stat:!0,forced:!c||d,sham:!c},{getOwnPropertyDescriptor:function(p,f){return l(u(p),f)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(l,s,o){var a=l("../internals/export"),u=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:u(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(d,s,o){var a=d("../internals/export"),u=d("../internals/fails"),l=d("../internals/to-object"),c=d("../internals/object-get-prototype-of"),d=d("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:u(function(){c(1)}),sham:!d},{getPrototypeOf:function(p){return c(l(p))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/to-object"),l=r("../internals/object-keys");a({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(c){return l(u(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(l,s,o){var a=l("../internals/to-string-tag-support"),u=l("../internals/redefine"),l=l("../internals/object-to-string");a||u(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(ae,s,o){var a,u,l,c,d=ae("../internals/export"),p=ae("../internals/is-pure"),f=ae("../internals/global"),h=ae("../internals/get-built-in"),m=ae("../internals/native-promise-constructor"),y=ae("../internals/redefine"),v=ae("../internals/redefine-all"),g=ae("../internals/set-to-string-tag"),_=ae("../internals/set-species"),x=ae("../internals/is-object"),b=ae("../internals/a-function"),S=ae("../internals/an-instance"),T=ae("../internals/classof-raw"),M=ae("../internals/inspect-source"),R=ae("../internals/iterate"),L=ae("../internals/check-correctness-of-iteration"),P=ae("../internals/species-constructor"),C=ae("../internals/task").set,k=ae("../internals/microtask"),D=ae("../internals/promise-resolve"),F=ae("../internals/host-report-errors"),G=ae("../internals/new-promise-capability"),z=ae("../internals/perform"),Q=ae("../internals/internal-state"),V=ae("../internals/is-forced"),ne=ae("../internals/well-known-symbol"),W=ae("../internals/engine-v8-version"),Y=ne("species"),J="Promise",ie=Q.get,I=Q.set,O=Q.getterFor(J),H=m,q=f.TypeError,Z=f.document,oe=f.process,pe=h("fetch"),be=G.f,me=be,ce=T(oe)=="process",te=!!(Z&&Z.createEvent&&f.dispatchEvent),ue="unhandledrejection",ge="rejectionhandled",xe=1,Le=2,we=1,Ee=2,ae=V(J,function(){var We,Re;return M(H)===String(H)&&(W===66||!ce&&typeof PromiseRejectionEvent!="function")?!0:!(!p||H.prototype.finally)||!(51<=W&&/native code/.test(H))&&(Re=function(le){le(function(){},function(){})},((We=H.resolve(1)).constructor={})[Y]=Re,!(We.then(function(){})instanceof Re))}),ne=ae||!L(function(We){H.all(We).catch(function(){})}),Ae=function(We){var Re;return!(!x(We)||typeof(Re=We.then)!="function")&&Re},Be=function(We,Re,le){var de;Re.notified||(Re.notified=!0,de=Re.reactions,k(function(){for(var ee,he,Pe=Re.value,ye=Re.state==xe,De=0;de.length>De;){var Me,qe,ke,Ye=de[De++],dt=ye?Ye.ok:Ye.fail,at=Ye.resolve,ct=Ye.reject,xt=Ye.domain;try{dt?(ye||(Re.rejection===Ee&&function(_t,vt){C.call(f,function(){ce?oe.emit("rejectionHandled",_t):Fe(ge,_t,vt.value)})}(We,Re),Re.rejection=we),dt===!0?Me=Pe:(xt&&xt.enter(),Me=dt(Pe),xt&&(xt.exit(),ke=!0)),Me===Ye.promise?ct(q("Promise-chain cycle")):(qe=Ae(Me))?qe.call(Me,at,ct):at(Me)):ct(Pe)}catch(_t){xt&&!ke&&xt.exit(),ct(_t)}}Re.reactions=[],Re.notified=!1,le&&!Re.rejection&&(ee=We,he=Re,C.call(f,function(){var _t=he.value,vt=Oe(he);if(vt&&(vt=z(function(){ce?oe.emit("unhandledRejection",_t,ee):Fe(ue,ee,_t)}),he.rejection=ce||Oe(he)?Ee:we,vt.error))throw vt.value}))}))},Fe=function(We,Re,le){var de;te?((de=Z.createEvent("Event")).promise=Re,de.reason=le,de.initEvent(We,!1,!0),f.dispatchEvent(de)):de={promise:Re,reason:le},(Re=f["on"+We])?Re(de):We===ue&&F("Unhandled promise rejection",le)},Oe=function(We){return We.rejection!==we&&!We.parent},Je=function(We,Re,le,de){return function(ee){We(Re,le,ee,de)}},Ve=function(We,Re,le,de){Re.done||(Re.done=!0,(Re=de||Re).value=le,Re.state=Le,Be(We,Re,!0))},Se=function(We,Re,le,de){if(!Re.done){Re.done=!0,de&&(Re=de);try{if(We===le)throw q("Promise can't be resolved itself");var ee=Ae(le);ee?k(function(){var he={done:!1};try{ee.call(le,Je(Se,We,he,Re),Je(Ve,We,he,Re))}catch(Pe){Ve(We,he,Pe,Re)}}):(Re.value=le,Re.state=xe,Be(We,Re,!1))}catch(he){Ve(We,{done:!1},he,Re)}}};ae&&(H=function(We){S(this,H,J),b(We),a.call(this);var Re=ie(this);try{We(Je(Se,this,Re),Je(Ve,this,Re))}catch(le){Ve(this,Re,le)}},(a=function(We){I(this,{type:J,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(H.prototype,{then:function(We,Re){var le=O(this),de=be(P(this,H));return de.ok=typeof We!="function"||We,de.fail=typeof Re=="function"&&Re,de.domain=ce?oe.domain:void 0,le.parent=!0,le.reactions.push(de),le.state!=0&&Be(this,le,!1),de.promise},catch:function(We){return this.then(void 0,We)}}),u=function(){var We=new a,Re=ie(We);this.promise=We,this.resolve=Je(Se,We,Re),this.reject=Je(Ve,We,Re)},G.f=be=function(We){return We===H||We===l?new u:me(We)},p||typeof m!="function"||(c=m.prototype.then,y(m.prototype,"then",function(We,Re){var le=this;return new H(function(de,ee){c.call(le,de,ee)}).then(We,Re)},{unsafe:!0}),typeof pe=="function"&&d({global:!0,enumerable:!0,forced:!0},{fetch:function(We){return D(H,pe.apply(f,arguments))}}))),d({global:!0,wrap:!0,forced:ae},{Promise:H}),g(H,J,!1,!0),_(J),l=h(J),d({target:J,stat:!0,forced:ae},{reject:function(We){var Re=be(this);return Re.reject.call(void 0,We),Re.promise}}),d({target:J,stat:!0,forced:p||ae},{resolve:function(We){return D(p&&this===l?H:this,We)}}),d({target:J,stat:!0,forced:ne},{all:function(We){var Re=this,le=be(Re),de=le.resolve,ee=le.reject,he=z(function(){var Pe=b(Re.resolve),ye=[],De=0,Me=1;R(We,function(qe){var ke=De++,Ye=!1;ye.push(void 0),Me++,Pe.call(Re,qe).then(function(dt){Ye||(Ye=!0,ye[ke]=dt,--Me||de(ye))},ee)}),--Me||de(ye)});return he.error&&ee(he.value),le.promise},race:function(We){var Re=this,le=be(Re),de=le.reject,ee=z(function(){var he=b(Re.resolve);R(We,function(Pe){he.call(Re,Pe).then(le.resolve,de)})});return ee.error&&de(ee.value),le.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(f,s,o){var a=f("../internals/export"),v=f("../internals/get-built-in"),u=f("../internals/a-function"),l=f("../internals/an-object"),c=f("../internals/is-object"),d=f("../internals/object-create"),p=f("../internals/function-bind"),f=f("../internals/fails"),h=v("Reflect","construct"),m=f(function(){function g(){}return!(h(function(){},[],g)instanceof g)}),y=!f(function(){h(function(){})}),v=m||y;a({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(g,_){u(g),l(_);var x=arguments.length<3?g:u(arguments[2]);if(y&&!m)return h(g,_,x);if(g==x){switch(_.length){case 0:return new g;case 1:return new g(_[0]);case 2:return new g(_[0],_[1]);case 3:return new g(_[0],_[1],_[2]);case 4:return new g(_[0],_[1],_[2],_[3])}var b=[null];return b.push.apply(b,_),new(p.apply(g,b))}return b=x.prototype,x=d(c(b)?b:Object.prototype),b=Function.apply.call(g,x,_),c(b)?b:x}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/is-object"),l=r("../internals/an-object"),c=r("../internals/has"),d=r("../internals/object-get-own-property-descriptor"),p=r("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function f(h,m){var y,v=arguments.length<3?h:arguments[2];return l(h)===v?h[m]:(y=d.f(h,m))?c(y,"value")?y.value:y.get===void 0?void 0:y.get.call(v):u(y=p(h))?f(y,m,v):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(r,s,o){var a=r("../internals/descriptors"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/inherit-if-required"),d=r("../internals/object-define-property").f,p=r("../internals/object-get-own-property-names").f,f=r("../internals/is-regexp"),h=r("../internals/regexp-flags"),m=r("../internals/regexp-sticky-helpers"),y=r("../internals/redefine"),v=r("../internals/fails"),g=r("../internals/internal-state").set,_=r("../internals/set-species"),x=r("../internals/well-known-symbol")("match"),b=u.RegExp,S=b.prototype,T=/a/g,M=/a/g,R=new b(T)!==T,L=m.UNSUPPORTED_Y;if(a&&l("RegExp",!R||L||v(function(){return M[x]=!1,b(T)!=T||b(M)==M||b(T,"i")!="/a/i"}))){for(var P=function(D,F){var G,z=this instanceof P,Q=f(D),V=F===void 0;return!z&&Q&&D.constructor===P&&V?D:(R?Q&&!V&&(D=D.source):D instanceof P&&(V&&(F=h.call(D)),D=D.source),L&&(G=!!F&&-1<F.indexOf("y"))&&(F=F.replace(/y/g,"")),Q=c(R?new b(D,F):b(D,F),z?this:S,P),L&&G&&g(Q,{sticky:G}),Q)},C=p(b),k=0;C.length>k;)(function(D){D in P||d(P,D,{configurable:!0,get:function(){return b[D]},set:function(F){b[D]=F}})})(C[k++]);(S.constructor=P).prototype=S,y(u,"RegExp",P)}_("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(u,s,o){var a=u("../internals/export"),u=u("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==u},{exec:u})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(c,s,o){var a=c("../internals/redefine"),u=c("../internals/an-object"),f=c("../internals/fails"),l=c("../internals/regexp-flags"),c="toString",d=RegExp.prototype,p=d[c],f=f(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),h=p.name!=c;(f||h)&&a(RegExp.prototype,c,function(){var m=u(this),y=String(m.source),v=m.flags;return"/"+y+"/"+String(v===void 0&&m instanceof RegExp&&!("flags"in d)?l.call(m):v)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(u,s,o){var a=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=a("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(p,s,o){var a=p("../internals/export"),u=p("../internals/object-get-own-property-descriptor").f,l=p("../internals/to-length"),c=p("../internals/not-a-regexp"),d=p("../internals/require-object-coercible"),m=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),f="".endsWith,h=Math.min,m=m("endsWith");a({target:"String",proto:!0,forced:!!(p||m||!(a=u(String.prototype,"endsWith"))||a.writable)&&!m},{endsWith:function(y){var v=String(d(this)),g=(c(y),1<arguments.length?arguments[1]:void 0),_=l(v.length),g=g===void 0?_:h(l(g),_),_=String(y);return f?f.call(v,_,g):v.slice(g-_.length,g)===_}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(l(this)).indexOf(u(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(l,s,o){var a=l("../internals/string-multibyte").charAt,u=l("../internals/internal-state"),l=l("../internals/define-iterator"),c="String Iterator",d=u.set,p=u.getterFor(c);l(String,"String",function(f){d(this,{type:c,string:String(f),index:0})},function(){var f=p(this),h=f.string,m=f.index;return m>=h.length?{value:void 0,done:!0}:(h=a(h,m),f.index+=h.length,{value:h,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-length"),c=r("../internals/require-object-coercible"),d=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract");a("match",1,function(f,h,m){return[function(y){var v=c(this),g=y==null?void 0:y[f];return g!==void 0?g.call(y,v):new RegExp(y)[f](String(v))},function(y){var v=m(h,y,this);if(v.done)return v.value;var g=u(y),_=String(this);if(!g.global)return p(g,_);for(var x=g.unicode,b=[],S=g.lastIndex=0;(T=p(g,_))!==null;){var T=String(T[0]);(b[S]=T)===""&&(g.lastIndex=d(_,l(g.lastIndex),x)),S++}return S===0?null:b}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/string-pad").start;a({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(l){return u(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(r,s,o){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-object"),c=r("../internals/to-length"),d=r("../internals/to-integer"),p=r("../internals/require-object-coercible"),f=r("../internals/advance-string-index"),h=r("../internals/regexp-exec-abstract"),m=Math.max,y=Math.min,v=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g;a("replace",2,function(x,b,S,T){var M=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,R=T.REPLACE_KEEPS_$0,L=M?"$":"$0";return[function(P,C){var k=p(this),D=P==null?void 0:P[x];return D!==void 0?D.call(P,k,C):b.call(String(k),P,C)},function(P,C){if(!M&&R||typeof C=="string"&&C.indexOf(L)===-1){var k=S(b,P,this,C);if(k.done)return k.value}for(var D,F=u(P),G=String(this),z=typeof C=="function",Q=(z||(C=String(C)),F.global),V=(Q&&(D=F.unicode,F.lastIndex=0),[]);(I=h(F,G))!==null&&(V.push(I),Q);)String(I[0])===""&&(F.lastIndex=f(G,c(F.lastIndex),D));for(var W,Y="",J=0,ie=0;ie<V.length;ie++){for(var I=V[ie],O=String(I[0]),H=m(y(d(I.index),G.length),0),q=[],Z=1;Z<I.length;Z++)q.push((W=I[Z])===void 0?W:String(W));var oe=I.groups,pe=z?(pe=[O].concat(q,H,G),oe!==void 0&&pe.push(oe),String(C.apply(void 0,pe))):function(be,me,ce,te,ue,ge){var xe=ce+be.length,Le=te.length,we=_;return ue!==void 0&&(ue=l(ue),we=g),b.call(ge,we,function(Ee,ae){var ne;switch(ae.charAt(0)){case"$":return"$";case"&":return be;case"`":return me.slice(0,ce);case"'":return me.slice(xe);case"<":ne=ue[ae.slice(1,-1)];break;default:var Ae,Be=+ae;if(Be==0)return Ee;if(Le<Be)return(Ae=v(Be/10))!==0&&Ae<=Le?te[Ae-1]===void 0?ae.charAt(1):te[Ae-1]+ae.charAt(1):Ee;ne=te[Be-1]}return ne===void 0?"":ne})}(O,G,H,q,oe,C);J<=H&&(Y+=G.slice(J,H)+pe,J=H+O.length)}return Y+G.slice(J)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/require-object-coercible"),c=r("../internals/same-value"),d=r("../internals/regexp-exec-abstract");a("search",1,function(p,f,h){return[function(m){var y=l(this),v=m==null?void 0:m[p];return v!==void 0?v.call(m,y):new RegExp(m)[p](String(y))},function(m){var y,v=h(f,m,this);return v.done?v.value:(v=u(m),m=String(this),y=v.lastIndex,c(y,0)||(v.lastIndex=0),m=d(v,m),c(v.lastIndex,y)||(v.lastIndex=y),m===null?-1:m.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(y,s,o){var a=y("../internals/fix-regexp-well-known-symbol-logic"),u=y("../internals/is-regexp"),l=y("../internals/an-object"),c=y("../internals/require-object-coercible"),d=y("../internals/species-constructor"),p=y("../internals/advance-string-index"),f=y("../internals/to-length"),h=y("../internals/regexp-exec-abstract"),m=y("../internals/regexp-exec"),y=y("../internals/fails"),v=[].push,g=Math.min,_=4294967295,x=!y(function(){return!RegExp(_,"y")});a("split",2,function(b,S,T){var M="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(R,L){var P=String(c(this)),C=L===void 0?_:L>>>0;if(C==0)return[];if(R===void 0)return[P];if(!u(R))return S.call(P,R,C);for(var k,D,F,G=[],L=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(R.sticky?"y":""),z=0,Q=new RegExp(R.source,L+"g");(k=m.call(Q,P))&&!(z<(D=Q.lastIndex)&&(G.push(P.slice(z,k.index)),1<k.length&&k.index<P.length&&v.apply(G,k.slice(1)),F=k[0].length,z=D,G.length>=C));)Q.lastIndex===k.index&&Q.lastIndex++;return z===P.length?!F&&Q.test("")||G.push(""):G.push(P.slice(z)),G.length>C?G.slice(0,C):G}:"0".split(void 0,0).length?function(R,L){return R===void 0&&L===0?[]:S.call(this,R,L)}:S;return[function(R,L){var P=c(this),C=R==null?void 0:R[b];return C!==void 0?C.call(R,P,L):M.call(String(P),R,L)},function(k,L){var P=T(M,k,this,L,M!==S);if(P.done)return P.value;var P=l(k),C=String(this),k=d(P,RegExp),D=P.unicode,F=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(x?"y":"g"),G=new k(x?P:"^(?:"+P.source+")",F),z=L===void 0?_:L>>>0;if(z==0)return[];if(C.length===0)return h(G,C)===null?[C]:[];for(var Q=0,V=0,W=[];V<C.length;){G.lastIndex=x?V:0;var Y,J=h(G,x?C:C.slice(V));if(J===null||(Y=g(f(G.lastIndex+(x?0:V)),C.length))===Q)V=p(C,V,D);else{if(W.push(C.slice(Q,V)),W.length===z)return W;for(var ie=1;ie<=J.length-1;ie++)if(W.push(J[ie]),W.length===z)return W;V=Q=Y}}return W.push(C.slice(Q)),W}]},!x)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(p,s,o){var a=p("../internals/export"),u=p("../internals/object-get-own-property-descriptor").f,l=p("../internals/to-length"),c=p("../internals/not-a-regexp"),d=p("../internals/require-object-coercible"),m=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),f="".startsWith,h=Math.min,m=m("startsWith");a({target:"String",proto:!0,forced:!!(p||m||!(a=u(String.prototype,"startsWith"))||a.writable)&&!m},{startsWith:function(_){var v=String(d(this)),g=(c(_),l(h(1<arguments.length?arguments[1]:void 0,v.length))),_=String(_);return f?f.call(v,_,g):v.slice(g,g+_.length)===_}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/create-html");a({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return u(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(r,s,o){var a=r("../internals/export"),u=r("../internals/string-trim").trim;a({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return u(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(g,s,o){var a,u,l,c,d,p=g("../internals/export"),f=g("../internals/descriptors"),h=g("../internals/global"),m=g("../internals/has"),y=g("../internals/is-object"),v=g("../internals/object-define-property").f,g=g("../internals/copy-constructor-properties"),_=h.Symbol;!f||typeof _!="function"||"description"in _.prototype&&_().description===void 0||(a={},g(u=function(){var x=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),b=this instanceof u?new _(x):x===void 0?_():_(x);return x===""&&(a[b]=!0),b},_),(h=u.prototype=_.prototype).constructor=u,l=h.toString,c=String(_("test"))=="Symbol(test)",d=/^Symbol\((.*)\)[^)]+$/,v(h,"description",{configurable:!0,get:function(){var x=y(this)?this.valueOf():this,b=l.call(x);return m(a,x)?"":(x=c?b.slice(7,-1):b.replace(d,"$1"))===""?void 0:x}}),p({global:!0,forced:!0},{Symbol:u}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(r,s,o){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(me,s,o){function a(ee,he){var Pe=ne[ee]=P(ge[be]);return ce(Pe,{type:pe,tag:ee,description:he}),m||(Pe.description=he),Pe}function u(ee,ye){S(ee);var Pe=M(ye),ye=C(Pe).concat(de(Pe));return Z(ye,function(De){m&&!le.call(Pe,De)||Re(ee,De,Pe[De])}),ee}function l(ye,De){var Pe,ye=M(ye),De=R(De,!0);if(ye!==ue||!_(ne,De)||_(Ae,De))return!(Pe=Le(ye,De))||!_(ne,De)||_(ye,oe)&&ye[oe][De]||(Pe.enumerable=!0),Pe}function c(he){var he=Ee(M(he)),Pe=[];return Z(he,function(ye){_(ne,ye)||_(J,ye)||Pe.push(ye)}),Pe}var d=me("../internals/export"),p=me("../internals/global"),f=me("../internals/get-built-in"),h=me("../internals/is-pure"),m=me("../internals/descriptors"),y=me("../internals/native-symbol"),v=me("../internals/use-symbol-as-uid"),g=me("../internals/fails"),_=me("../internals/has"),x=me("../internals/is-array"),b=me("../internals/is-object"),S=me("../internals/an-object"),T=me("../internals/to-object"),M=me("../internals/to-indexed-object"),R=me("../internals/to-primitive"),L=me("../internals/create-property-descriptor"),P=me("../internals/object-create"),C=me("../internals/object-keys"),k=me("../internals/object-get-own-property-names"),D=me("../internals/object-get-own-property-names-external"),F=me("../internals/object-get-own-property-symbols"),G=me("../internals/object-get-own-property-descriptor"),z=me("../internals/object-define-property"),Q=me("../internals/object-property-is-enumerable"),V=me("../internals/create-non-enumerable-property"),W=me("../internals/redefine"),Y=me("../internals/shared"),Oe=me("../internals/shared-key"),J=me("../internals/hidden-keys"),ie=me("../internals/uid"),I=me("../internals/well-known-symbol"),O=me("../internals/well-known-symbol-wrapped"),H=me("../internals/define-well-known-symbol"),q=me("../internals/set-to-string-tag"),Je=me("../internals/internal-state"),Z=me("../internals/array-iteration").forEach,oe=Oe("hidden"),pe="Symbol",be="prototype",me=I("toPrimitive"),ce=Je.set,te=Je.getterFor(pe),ue=Object[be],ge=p.Symbol,xe=f("JSON","stringify"),Le=G.f,we=z.f,Ee=D.f,ae=Q.f,ne=Y("symbols"),Ae=Y("op-symbols"),Be=Y("string-to-symbol-registry"),Fe=Y("symbol-to-string-registry"),Oe=Y("wks"),Je=p.QObject,Ve=!Je||!Je[be]||!Je[be].findChild,Se=m&&g(function(){return P(we({},"a",{get:function(){return we(this,"a",{value:7}).a}})).a!=7})?function(ee,he,Pe){var ye=Le(ue,he);ye&&delete ue[he],we(ee,he,Pe),ye&&ee!==ue&&we(ue,he,ye)}:we,We=v?function(ee){return typeof ee=="symbol"}:function(ee){return Object(ee)instanceof ge},Re=function(ee,he,Pe){return ee===ue&&Re(Ae,he,Pe),S(ee),he=R(he,!0),S(Pe),(_(ne,he)?(Pe.enumerable?(_(ee,oe)&&ee[oe][he]&&(ee[oe][he]=!1),Pe=P(Pe,{enumerable:L(0,!1)})):(_(ee,oe)||we(ee,oe,L(1,{})),ee[oe][he]=!0),Se):we)(ee,he,Pe)},le=function(he){var he=R(he,!0),Pe=ae.call(this,he);return!(this===ue&&_(ne,he)&&!_(Ae,he))&&(!(Pe||!_(this,he)||!_(ne,he)||_(this,oe)&&this[oe][he])||Pe)},de=function(Pe){var he=Pe===ue,Pe=Ee(he?Ae:M(Pe)),ye=[];return Z(Pe,function(De){!_(ne,De)||he&&!_(ue,De)||ye.push(ne[De])}),ye};y||(W((ge=function(){if(this instanceof ge)throw TypeError("Symbol is not a constructor");var ee=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,he=ie(ee),Pe=function(ye){this===ue&&Pe.call(Ae,ye),_(this,oe)&&_(this[oe],he)&&(this[oe][he]=!1),Se(this,he,L(1,ye))};return m&&Ve&&Se(ue,he,{configurable:!0,set:Pe}),a(he,ee)})[be],"toString",function(){return te(this).tag}),W(ge,"withoutSetter",function(ee){return a(ie(ee),ee)}),Q.f=le,z.f=Re,G.f=l,k.f=D.f=c,F.f=de,O.f=function(ee){return a(I(ee),ee)},m&&(we(ge[be],"description",{configurable:!0,get:function(){return te(this).description}}),h||W(ue,"propertyIsEnumerable",le,{unsafe:!0}))),d({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:ge}),Z(C(Oe),function(ee){H(ee)}),d({target:pe,stat:!0,forced:!y},{for:function(Pe){var he,Pe=String(Pe);return _(Be,Pe)?Be[Pe]:(he=ge(Pe),Be[Pe]=he,Fe[he]=Pe,he)},keyFor:function(ee){if(!We(ee))throw TypeError(ee+" is not a symbol");if(_(Fe,ee))return Fe[ee]},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),d({target:"Object",stat:!0,forced:!y,sham:!m},{create:function(ee,he){return he===void 0?P(ee):u(P(ee),he)},defineProperty:Re,defineProperties:u,getOwnPropertyDescriptor:l}),d({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:c,getOwnPropertySymbols:de}),d({target:"Object",stat:!0,forced:g(function(){F.f(1)})},{getOwnPropertySymbols:function(ee){return F.f(T(ee))}}),xe&&d({target:"JSON",stat:!0,forced:!y||g(function(){var ee=ge();return xe([ee])!="[null]"||xe({a:ee})!="{}"||xe(Object(ee))!="{}"})},{stringify:function(ee,he,Pe){for(var ye,De=[ee],Me=1;Me<arguments.length;)De.push(arguments[Me++]);if((b(ye=he)||ee!==void 0)&&!We(ee))return x(he)||(he=function(qe,ke){if(typeof ye=="function"&&(ke=ye.call(this,qe,ke)),!We(ke))return ke}),De[1]=he,xe.apply(null,De)}}),ge[be][me]||V(ge[be],me,ge[be].valueOf),q(ge,pe),J[oe]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-copy-within"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(c,d){return u.call(l(this),c,d,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").every,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-fill"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),c=a.aTypedArray,d=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(p){for(var f=u(c(this),p,1<arguments.length?arguments[1]:void 0),p=l(this,this.constructor),h=0,m=f.length,y=new(d(p))(m);h<m;)y[h]=f[h++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").findIndex,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").find,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(r,s,o){r("../internals/typed-array-constructor")("Float32",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],217:[function(r,s,o){r("../internals/typed-array-constructor")("Float64",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],218:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").forEach,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(c){u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").includes,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").indexOf,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(r,s,o){r("../internals/typed-array-constructor")("Int16",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],222:[function(r,s,o){r("../internals/typed-array-constructor")("Int32",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],223:[function(u,s,o){function a(){return l.call(p(this))}var m=u("../internals/global"),h=u("../internals/array-buffer-view-core"),f=u("../modules/es.array.iterator"),u=u("../internals/well-known-symbol")("iterator"),m=m.Uint8Array,l=f.values,c=f.keys,d=f.entries,p=h.aTypedArray,f=h.exportTypedArrayMethod,h=m&&m.prototype[u],m=!!h&&(h.name=="values"||h.name==null);f("entries",function(){return d.call(p(this))}),f("keys",function(){return c.call(p(this))}),f("values",a,!m),f(u,a,!m)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(u,s,o){var u=u("../internals/array-buffer-view-core"),a=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].join;u("join",function(c){return l.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-last-index-of"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),c=a.aTypedArray,d=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(p){return u(c(this),p,1<arguments.length?arguments[1]:void 0,function(f,h){return new(d(l(f,f.constructor)))(h)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").right,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").left,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(u,s,o){var u=u("../internals/array-buffer-view-core"),a=u.aTypedArray,u=u.exportTypedArrayMethod,l=Math.floor;u("reverse",function(){for(var c,d=a(this).length,p=l(d/2),f=0;f<p;)c=this[f],this[f++]=this[--d],this[d]=c;return this})},{"../internals/array-buffer-view-core":12}],230:[function(d,s,o){var a=d("../internals/array-buffer-view-core"),u=d("../internals/to-length"),l=d("../internals/to-offset"),c=d("../internals/to-object"),d=d("../internals/fails"),p=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(f){p(this);var h=l(1<arguments.length?arguments[1]:void 0,1),m=this.length,y=c(f),v=u(y.length),g=0;if(m<v+h)throw RangeError("Wrong length");for(;g<v;)this[h+g]=y[g++]},d(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(u,s,o){var d=u("../internals/array-buffer-view-core"),a=u("../internals/species-constructor"),u=u("../internals/fails"),l=d.aTypedArray,c=d.aTypedArrayConstructor,d=d.exportTypedArrayMethod,p=[].slice;d("slice",function(f,h){for(var m=p.call(l(this),f,h),f=a(this,this.constructor),y=0,v=m.length,g=new(c(f))(v);y<v;)g[y]=m[y++];return g},u(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").some,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(u,s,o){var u=u("../internals/array-buffer-view-core"),a=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].sort;u("sort",function(c){return l.call(a(this),c)})},{"../internals/array-buffer-view-core":12}],234:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),u=r("../internals/to-length"),l=r("../internals/to-absolute-index"),c=r("../internals/species-constructor"),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(y,f){var h=d(this),m=h.length,y=l(y,m);return new(c(h,h.constructor))(h.buffer,h.byteOffset+y*h.BYTES_PER_ELEMENT,u((f===void 0?m:l(f,m))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(u,s,o){var d=u("../internals/global"),a=u("../internals/array-buffer-view-core"),u=u("../internals/fails"),l=d.Int8Array,c=a.aTypedArray,d=a.exportTypedArrayMethod,p=[].toLocaleString,f=[].slice,h=!!l&&u(function(){p.call(new l(1))});d("toLocaleString",function(){return p.apply(h?f.call(c(this)):c(this),arguments)},u(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!u(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(u,s,o){var a=u("../internals/array-buffer-view-core").exportTypedArrayMethod,d=u("../internals/fails"),u=u("../internals/global").Uint8Array,u=u&&u.prototype||{},l=[].toString,c=[].join,d=(d(function(){l.call({})})&&(l=function(){return c.call(this)}),u.toString!=l);a("toString",l,d)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(r,s,o){r("../internals/typed-array-constructor")("Uint16",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],238:[function(r,s,o){r("../internals/typed-array-constructor")("Uint32",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],239:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(u,l,c){return a(this,u,l,c)}})},{"../internals/typed-array-constructor":143}],240:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(u,l,c){return a(this,u,l,c)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(_,S,o){function a(T){return function(){return T(this,arguments.length?arguments[0]:void 0)}}var u,l,c,d,p,x=_("../internals/global"),f=_("../internals/redefine-all"),h=_("../internals/internal-metadata"),m=_("../internals/collection"),y=_("../internals/collection-weak"),v=_("../internals/is-object"),g=_("../internals/internal-state").enforce,_=_("../internals/native-weak-map"),x=!x.ActiveXObject&&"ActiveXObject"in x,b=Object.isExtensible,S=S.exports=m("WeakMap",a,y);_&&x&&(u=y.getConstructor(a,"WeakMap",!0),h.REQUIRED=!0,m=S.prototype,l=m.delete,c=m.has,d=m.get,p=m.set,f(m,{delete:function(T){var M;return v(T)&&!b(T)?((M=g(this)).frozen||(M.frozen=new u),l.call(this,T)||M.frozen.delete(T)):l.call(this,T)},has:function(T){var M;return v(T)&&!b(T)?((M=g(this)).frozen||(M.frozen=new u),c.call(this,T)||M.frozen.has(T)):c.call(this,T)},get:function(T){var M;return!v(T)||b(T)||((M=g(this)).frozen||(M.frozen=new u),c.call(this,T))?d.call(this,T):M.frozen.get(T)},set:function(T,M){var R;return!v(T)||b(T)||((R=g(this)).frozen||(R.frozen=new u),c.call(this,T))?p.call(this,T,M):R.frozen.set(T,M),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(r,s,o){var a,u=r("../internals/global"),l=r("../internals/dom-iterables"),c=r("../internals/array-for-each"),d=r("../internals/create-non-enumerable-property");for(a in l){var p=u[a],p=p&&p.prototype;if(p&&p.forEach!==c)try{d(p,"forEach",c)}catch{p.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(p,s,o){var a,u=p("../internals/global"),l=p("../internals/dom-iterables"),c=p("../modules/es.array.iterator"),d=p("../internals/create-non-enumerable-property"),p=p("../internals/well-known-symbol"),f=p("iterator"),h=p("toStringTag"),m=c.values;for(a in l){var y=u[a],v=y&&y.prototype;if(v){if(v[f]!==m)try{d(v,f,m)}catch{v[f]=m}if(v[h]||d(v,h,a),l[a]){for(var g in c)if(v[g]!==c[g])try{d(v,g,c[g])}catch{v[g]=c[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(oe,s,o){oe("../modules/es.array.iterator");function a(pe){try{return decodeURIComponent(pe)}catch{return pe}}function u(pe){return H[pe]}function l(pe){return encodeURIComponent(pe).replace(O,u)}function c(pe){this.entries.length=0,q(this.entries,pe)}function d(pe,be){if(pe<be)throw TypeError("Not enough arguments")}function p(){x(this,p,z);var pe,be,me,ce,te,ue,ge,xe,Le=0<arguments.length?arguments[0]:void 0,we=[];if(V(this,{type:z,entries:we,updateURL:function(){},updateSearchParams:c}),Le!==void 0)if(R(Le))if(typeof(pe=k(Le))=="function")for(me=(be=pe.call(Le)).next;!(ce=me.call(be)).done;){if((ue=(te=(ce=C(M(ce.value))).next).call(ce)).done||(ge=te.call(ce)).done||!te.call(ce).done)throw TypeError("Expected sequence with length 2");we.push({key:ue.value+"",value:ge.value+""})}else for(xe in Le)b(Le,xe)&&we.push({key:xe,value:Le[xe]+""});else q(we,typeof Le=="string"?Le.charAt(0)==="?"?Le.slice(1):Le:Le+"")}var f=oe("../internals/export"),G=oe("../internals/get-built-in"),h=oe("../internals/native-url"),m=oe("../internals/redefine"),y=oe("../internals/redefine-all"),v=oe("../internals/set-to-string-tag"),g=oe("../internals/create-iterator-constructor"),_=oe("../internals/internal-state"),x=oe("../internals/an-instance"),b=oe("../internals/has"),S=oe("../internals/function-bind-context"),T=oe("../internals/classof"),M=oe("../internals/an-object"),R=oe("../internals/is-object"),L=oe("../internals/object-create"),P=oe("../internals/create-property-descriptor"),C=oe("../internals/get-iterator"),k=oe("../internals/get-iterator-method"),oe=oe("../internals/well-known-symbol"),D=G("fetch"),F=G("Headers"),G=oe("iterator"),z="URLSearchParams",Q=z+"Iterator",V=_.set,W=_.getterFor(z),Y=_.getterFor(Q),J=/\+/g,ie=Array(4),I=function(pe){var be,me=pe.replace(J," "),ce=4;try{return decodeURIComponent(me)}catch{for(;ce;)me=me.replace((be=ce--,ie[be-1]||(ie[be-1]=RegExp("((?:%[\\da-f]{2}){"+be+"})","gi"))),a);return me}},O=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=function(pe,be){if(be)for(var me,ce=be.split("&"),te=0;te<ce.length;)(me=ce[te++]).length&&(me=me.split("="),pe.push({key:I(me.shift()),value:I(me.join("="))}))},Z=g(function(pe,be){V(this,{type:Q,iterator:C(W(pe).entries),kind:be})},"Iterator",function(){var be=Y(this),pe=be.kind,be=be.iterator.next(),me=be.value;return be.done||(be.value=pe==="keys"?me.key:pe==="values"?me.value:[me.key,me.value]),be}),oe=p.prototype;y(oe,{append:function(pe,be){d(arguments.length,2);var me=W(this);me.entries.push({key:pe+"",value:be+""}),me.updateURL()},delete:function(pe){d(arguments.length,1);for(var be=W(this),me=be.entries,ce=pe+"",te=0;te<me.length;)me[te].key===ce?me.splice(te,1):te++;be.updateURL()},get:function(pe){d(arguments.length,1);for(var be=W(this).entries,me=pe+"",ce=0;ce<be.length;ce++)if(be[ce].key===me)return be[ce].value;return null},getAll:function(pe){d(arguments.length,1);for(var be=W(this).entries,me=pe+"",ce=[],te=0;te<be.length;te++)be[te].key===me&&ce.push(be[te].value);return ce},has:function(pe){d(arguments.length,1);for(var be=W(this).entries,me=pe+"",ce=0;ce<be.length;)if(be[ce++].key===me)return!0;return!1},set:function(pe,be){d(arguments.length,1);for(var me,ce=W(this),te=ce.entries,ue=!1,ge=pe+"",xe=be+"",Le=0;Le<te.length;Le++)(me=te[Le]).key===ge&&(ue?te.splice(Le--,1):(ue=!0,me.value=xe));ue||te.push({key:ge,value:xe}),ce.updateURL()},sort:function(){for(var pe,be,me=W(this),ce=me.entries,te=ce.slice(),ue=ce.length=0;ue<te.length;ue++){for(pe=te[ue],be=0;be<ue;be++)if(ce[be].key>pe.key){ce.splice(be,0,pe);break}be===ue&&ce.push(pe)}me.updateURL()},forEach:function(pe){for(var be,me=W(this).entries,ce=S(pe,1<arguments.length?arguments[1]:void 0,3),te=0;te<me.length;)ce((be=me[te++]).value,be.key,this)},keys:function(){return new Z(this,"keys")},values:function(){return new Z(this,"values")},entries:function(){return new Z(this,"entries")}},{enumerable:!0}),m(oe,G,oe.entries),m(oe,"toString",function(){for(var pe,be=W(this).entries,me=[],ce=0;ce<be.length;)pe=be[ce++],me.push(l(pe.key)+"="+l(pe.value));return me.join("&")},{enumerable:!0}),v(p,z),f({global:!0,forced:!h},{URLSearchParams:p}),h||typeof D!="function"||typeof F!="function"||f({global:!0,enumerable:!0,forced:!0},{fetch:function(te){var be,me,ce,te=[te];return 1<arguments.length&&(R(be=arguments[1])&&(me=be.body,T(me)===z&&((ce=be.headers?new F(be.headers):new F).has("content-type")||ce.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),be=L(be,{body:P(0,String(me)),headers:P(0,ce)}))),te.push(be)),D.apply(this,te)}}),s.exports={URLSearchParams:p,getState:W}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(C,s,o){C("../modules/es.string.iterator");function a(Ge){var ve,He,ze,et;if(typeof Ge=="number"){for(ve=[],He=0;He<4;He++)ve.unshift(Ge%256),Ge=Q(Ge/256);return ve.join(".")}if(typeof Ge!="object")return Ge;for(ve="",ze=ge(Ge),He=0;He<8;He++)et&&Ge[He]===0||(et=et&&!1,ze===He?(ve+=He?":":"::",et=!0):(ve+=Ge[He].toString(16),He<7&&(ve+=":")));return"["+ve+"]"}function u(Ge){return!Ge.host||Ge.cannotBeABaseURL||Ge.scheme=="file"}function l(Ge,ve,He,ze){var et,je,gt,ot=He||We,st=0,ut="",Pt=!1,Tt=!1,At=!1;for(He||(Ge.scheme="",Ge.username="",Ge.password="",Ge.host=null,Ge.port=null,Ge.path=[],Ge.query=null,Ge.fragment=null,Ge.cannotBeABaseURL=!1,ve=ve.replace(ce,"")),ve=ve.replace(te,""),et=T(ve);st<=et.length;){switch(je=et[st],ot){case We:if(!je||!I.test(je)){if(He)return Y;ot=le;continue}ut+=je.toLowerCase(),ot=Re;break;case Re:if(je&&(O.test(je)||je=="+"||je=="-"||je=="."))ut+=je.toLowerCase();else{if(je!=":"){if(He)return Y;ut="",ot=le,st=0;continue}if(He&&(Ae(Ge)!=b(ne,ut)||ut=="file"&&(Be(Ge)||Ge.port!==null)||Ge.scheme=="file"&&!Ge.host))return;if(Ge.scheme=ut,He)return void(Ae(Ge)&&ne[Ge.scheme]==Ge.port&&(Ge.port=null));ut="",Ge.scheme=="file"?ot=dt:Ae(Ge)&&ze&&ze.scheme==Ge.scheme?ot=de:Ae(Ge)?ot=ye:et[st+1]=="/"?(ot=ee,st++):(Ge.cannotBeABaseURL=!0,Ge.path.push(""),ot=vt)}break;case le:if(!ze||ze.cannotBeABaseURL&&je!="#")return Y;if(ze.cannotBeABaseURL&&je=="#"){Ge.scheme=ze.scheme,Ge.path=ze.path.slice(),Ge.query=ze.query,Ge.fragment="",Ge.cannotBeABaseURL=!0,ot=qt;break}ot=ze.scheme=="file"?dt:he;continue;case de:if(je!="/"||et[st+1]!="/"){ot=he;continue}ot=De,st++;break;case ee:if(je=="/"){ot=Me;break}ot=_t;continue;case he:if(Ge.scheme=ze.scheme,je==p)Ge.username=ze.username,Ge.password=ze.password,Ge.host=ze.host,Ge.port=ze.port,Ge.path=ze.path.slice(),Ge.query=ze.query;else if(je=="/"||je=="\\"&&Ae(Ge))ot=Pe;else if(je=="?")Ge.username=ze.username,Ge.password=ze.password,Ge.host=ze.host,Ge.port=ze.port,Ge.path=ze.path.slice(),Ge.query="",ot=Bt;else{if(je!="#"){Ge.username=ze.username,Ge.password=ze.password,Ge.host=ze.host,Ge.port=ze.port,Ge.path=ze.path.slice(),Ge.path.pop(),ot=_t;continue}Ge.username=ze.username,Ge.password=ze.password,Ge.host=ze.host,Ge.port=ze.port,Ge.path=ze.path.slice(),Ge.query=ze.query,Ge.fragment="",ot=qt}break;case Pe:if(!Ae(Ge)||je!="/"&&je!="\\"){if(je!="/"){Ge.username=ze.username,Ge.password=ze.password,Ge.host=ze.host,Ge.port=ze.port,ot=_t;continue}ot=Me}else ot=De;break;case ye:if(ot=De,je!="/"||ut.charAt(st+1)!="/")continue;st++;break;case De:if(je=="/"||je=="\\")break;ot=Me;continue;case Me:if(je=="@"){Pt&&(ut="%40"+ut);for(var Pt=!0,Kt=T(ut),ir=0;ir<Kt.length;ir++){var rr=Kt[ir];rr!=":"||At?(rr=ae(rr,Ee),At?Ge.password+=rr:Ge.username+=rr):At=!0}ut=""}else if(je==p||je=="/"||je=="?"||je=="#"||je=="\\"&&Ae(Ge)){if(Pt&&ut=="")return W;st-=T(ut).length+1,ut="",ot=qe}else ut+=je;break;case qe:case ke:if(He&&Ge.scheme=="file"){ot=ct;continue}if(je!=":"||Tt){if(je==p||je=="/"||je=="?"||je=="#"||je=="\\"&&Ae(Ge)){if(Ae(Ge)&&ut=="")return J;if(He&&ut==""&&(Be(Ge)||Ge.port!==null))return;if(gt=ue(Ge,ut))return gt;if(ut="",ot=xt,He)return;continue}je=="["?Tt=!0:je=="]"&&(Tt=!1),ut+=je}else{if(ut=="")return J;if(gt=ue(Ge,ut))return gt;if(ut="",ot=Ye,He==ke)return}break;case Ye:if(!H.test(je)){if(je==p||je=="/"||je=="?"||je=="#"||je=="\\"&&Ae(Ge)||He){if(ut!=""){var Qt=parseInt(ut,10);if(65535<Qt)return ie;Ge.port=Ae(Ge)&&Qt===ne[Ge.scheme]?null:Qt,ut=""}if(He)return;ot=xt;continue}return ie}ut+=je;break;case dt:if(Ge.scheme="file",je=="/"||je=="\\")ot=at;else{if(!ze||ze.scheme!="file"){ot=_t;continue}if(je==p)Ge.host=ze.host,Ge.path=ze.path.slice(),Ge.query=ze.query;else if(je=="?")Ge.host=ze.host,Ge.path=ze.path.slice(),Ge.query="",ot=Bt;else{if(je!="#"){Oe(et.slice(st).join(""))||(Ge.host=ze.host,Ge.path=ze.path.slice(),Je(Ge)),ot=_t;continue}Ge.host=ze.host,Ge.path=ze.path.slice(),Ge.query=ze.query,Ge.fragment="",ot=qt}}break;case at:if(je=="/"||je=="\\"){ot=ct;break}ze&&ze.scheme=="file"&&!Oe(et.slice(st).join(""))&&(Fe(ze.path[0],!0)?Ge.path.push(ze.path[0]):Ge.host=ze.host),ot=_t;continue;case ct:if(je==p||je=="/"||je=="\\"||je=="?"||je=="#"){if(!He&&Fe(ut))ot=_t;else{if(ut==""){if(Ge.host="",He)return}else{if(gt=ue(Ge,ut))return gt;if(Ge.host=="localhost"&&(Ge.host=""),He)return;ut=""}ot=xt}continue}ut+=je;break;case xt:if(Ae(Ge)){if(ot=_t,je!="/"&&je!="\\")continue}else if(He||je!="?")if(He||je!="#"){if(je!=p&&(ot=_t,je!="/"))continue}else Ge.fragment="",ot=qt;else Ge.query="",ot=Bt;break;case _t:if(je==p||je=="/"||je=="\\"&&Ae(Ge)||!He&&(je=="?"||je=="#")){if(Se(ut)?(Je(Ge),je=="/"||je=="\\"&&Ae(Ge)||Ge.path.push("")):Ve(ut)?je=="/"||je=="\\"&&Ae(Ge)||Ge.path.push(""):(Ge.scheme=="file"&&!Ge.path.length&&Fe(ut)&&(Ge.host&&(Ge.host=""),ut=ut.charAt(0)+":"),Ge.path.push(ut)),ut="",Ge.scheme=="file"&&(je==p||je=="?"||je=="#"))for(;1<Ge.path.length&&Ge.path[0]==="";)Ge.path.shift();je=="?"?(Ge.query="",ot=Bt):je=="#"&&(Ge.fragment="",ot=qt)}else ut+=ae(je,we);break;case vt:je=="?"?(Ge.query="",ot=Bt):je=="#"?(Ge.fragment="",ot=qt):je!=p&&(Ge.path[0]+=ae(je,xe));break;case Bt:He||je!="#"?je!=p&&(je=="'"&&Ae(Ge)?Ge.query+="%27":Ge.query+=je=="#"?"%23":ae(je,xe)):(Ge.fragment="",ot=qt);break;case qt:je!=p&&(Ge.fragment+=ae(je,Le))}st++}}function c(je){var ve,He,ze=x(this,c,"URL"),et=1<arguments.length?arguments[1]:void 0,je=String(je),gt=G(ze,{type:"URL"});if(et!==void 0){if(et instanceof c)ve=z(et);else if(He=l(ve={},String(et)))throw TypeError(He)}if(He=l(gt,je,null,ve))throw TypeError(He);var ot=gt.searchParams=new D;(et=F(ot)).updateSearchParams(gt.query),et.updateURL=function(){gt.query=String(ot)||null},y||(ze.href=tr.call(ze),ze.origin=Jt.call(ze),ze.protocol=Lr.call(ze),ze.username=Cr.call(ze),ze.password=dr.call(ze),ze.host=Mr.call(ze),ze.hostname=Dn.call(ze),ze.port=Xr.call(ze),ze.pathname=ei.call(ze),ze.search=Ns.call(ze),ze.searchParams=Ss.call(ze),ze.hash=po.call(ze))}function d(Ge,ve){return{get:Ge,set:ve,configurable:!0,enumerable:!0}}var p,f,h,m=C("../internals/export"),y=C("../internals/descriptors"),v=C("../internals/native-url"),Wt=C("../internals/global"),g=C("../internals/object-define-properties"),_=C("../internals/redefine"),x=C("../internals/an-instance"),b=C("../internals/has"),S=C("../internals/object-assign"),T=C("../internals/array-from"),M=C("../internals/string-multibyte").codeAt,R=C("../internals/string-punycode-to-ascii"),L=C("../internals/set-to-string-tag"),P=C("../modules/web.url-search-params"),C=C("../internals/internal-state"),k=Wt.URL,D=P.URLSearchParams,F=P.getState,G=C.set,z=C.getterFor("URL"),Q=Math.floor,V=Math.pow,W="Invalid authority",Y="Invalid scheme",J="Invalid host",ie="Invalid port",I=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,H=/\d/,q=/^(0x|0X)/,Z=/^[0-7]+$/,oe=/^\d+$/,pe=/^[\dA-Fa-f]+$/,be=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,me=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ce=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,te=/[\u0009\u000A\u000D]/g,ue=function(Ge,ve){var He,ze,et;if(ve.charAt(0)=="[")return ve.charAt(ve.length-1)=="]"&&(He=function(je){var gt=[0,0,0,0,0,0,0,0],ot=0,st=null,ut=0,Pt,Tt,At,Kt,ir,rr,Qt,Et=function(){return je.charAt(ut)};if(Et()==":"){if(je.charAt(1)!=":")return;ut+=2,ot++,st=ot}for(;Et();){if(ot==8)return;if(Et()==":"){if(st!==null)return;ut++,ot++,st=ot;continue}for(Pt=Tt=0;Tt<4&&pe.test(Et());)Pt=Pt*16+parseInt(Et(),16),ut++,Tt++;if(Et()=="."){if(Tt==0||(ut-=Tt,ot>6))return;for(At=0;Et();){if(Kt=null,At>0)if(Et()=="."&&At<4)ut++;else return;if(!H.test(Et()))return;for(;H.test(Et());){if(ir=parseInt(Et(),10),Kt===null)Kt=ir;else{if(Kt==0)return;Kt=Kt*10+ir}if(Kt>255)return;ut++}gt[ot]=gt[ot]*256+Kt,At++,(At==2||At==4)&&ot++}if(At!=4)return;break}else if(Et()==":"){if(ut++,!Et())return}else if(Et())return;gt[ot++]=Pt}if(st!==null)for(rr=ot-st,ot=7;ot!=0&&rr>0;)Qt=gt[ot],gt[ot--]=gt[st+rr-1],gt[st+--rr]=Qt;else if(ot!=8)return;return gt}(ve.slice(1,-1)))?void(Ge.host=He):J;if(Ae(Ge))return ve=R(ve),be.test(ve)||(He=function(je){var gt=je.split("."),ot,st,ut,Pt,Tt,At,Kt;if(gt.length&&gt[gt.length-1]==""&&gt.pop(),(ot=gt.length)>4)return je;for(st=[],ut=0;ut<ot;ut++){if(Pt=gt[ut],Pt=="")return je;if(Tt=10,Pt.length>1&&Pt.charAt(0)=="0"&&(Tt=q.test(Pt)?16:8,Pt=Pt.slice(Tt==8?1:2)),Pt==="")At=0;else{if(!(Tt==10?oe:Tt==8?Z:pe).test(Pt))return je;At=parseInt(Pt,Tt)}st.push(At)}for(ut=0;ut<ot;ut++)if(At=st[ut],ut==ot-1){if(At>=V(256,5-ot))return null}else if(At>255)return null;for(Kt=st.pop(),ut=0;ut<st.length;ut++)Kt+=st[ut]*V(256,3-ut);return Kt}(ve))===null?J:void(Ge.host=He);if(me.test(ve))return J;for(He="",ze=T(ve),et=0;et<ze.length;et++)He+=ae(ze[et],xe);Ge.host=He},ge=function(Ge){for(var ve=null,He=1,ze=null,et=0,je=0;je<8;je++)Ge[je]!==0?(He<et&&(ve=ze,He=et),ze=null,et=0):(ze===null&&(ze=je),++et);return He<et&&(ve=ze,He=et),ve},xe={},Le=S({},xe,{" ":1,'"':1,"<":1,">":1,"`":1}),we=S({},Le,{"#":1,"?":1,"{":1,"}":1}),Ee=S({},we,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ae=function(Ge,ve){var He=M(Ge,0);return 32<He&&He<127&&!b(ve,Ge)?Ge:encodeURIComponent(Ge)},ne={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ae=function(Ge){return b(ne,Ge.scheme)},Be=function(Ge){return Ge.username!=""||Ge.password!=""},Fe=function(Ge,ve){return Ge.length==2&&I.test(Ge.charAt(0))&&((Ge=Ge.charAt(1))==":"||!ve&&Ge=="|")},Oe=function(Ge){return 1<Ge.length&&Fe(Ge.slice(0,2))&&(Ge.length==2||(Ge=Ge.charAt(2))==="/"||Ge==="\\"||Ge==="?"||Ge==="#")},Je=function(Ge){var ve=Ge.path,He=ve.length;!He||Ge.scheme=="file"&&He==1&&Fe(ve[0],!0)||ve.pop()},Ve=function(Ge){return Ge==="."||Ge.toLowerCase()==="%2e"},Se=function(Ge){return(Ge=Ge.toLowerCase())===".."||Ge==="%2e."||Ge===".%2e"||Ge==="%2e%2e"},We={},Re={},le={},de={},ee={},he={},Pe={},ye={},De={},Me={},qe={},ke={},Ye={},dt={},at={},ct={},xt={},_t={},vt={},Bt={},qt={},Wt=c.prototype,tr=function(){var Ge=z(this),ve=Ge.scheme,He=Ge.username,ze=Ge.password,et=Ge.host,je=Ge.port,gt=Ge.path,ot=Ge.query,st=Ge.fragment,ut=ve+":";return et!==null?(ut+="//",Be(Ge)&&(ut+=He+(ze?":"+ze:"")+"@"),ut+=a(et),je!==null&&(ut+=":"+je)):ve=="file"&&(ut+="//"),ut+=Ge.cannotBeABaseURL?gt[0]:gt.length?"/"+gt.join("/"):"",ot!==null&&(ut+="?"+ot),st!==null&&(ut+="#"+st),ut},Jt=function(){var Ge=z(this),ve=Ge.scheme,He=Ge.port;if(ve=="blob")try{return new URL(ve.path[0]).origin}catch{return"null"}return ve!="file"&&Ae(Ge)?ve+"://"+a(Ge.host)+(He!==null?":"+He:""):"null"},Lr=function(){return z(this).scheme+":"},Cr=function(){return z(this).username},dr=function(){return z(this).password},Mr=function(){var ve=z(this),Ge=ve.host,ve=ve.port;return Ge===null?"":ve===null?a(Ge):a(Ge)+":"+ve},Dn=function(){var Ge=z(this).host;return Ge===null?"":a(Ge)},Xr=function(){var Ge=z(this).port;return Ge===null?"":String(Ge)},ei=function(){var Ge=z(this),ve=Ge.path;return Ge.cannotBeABaseURL?ve[0]:ve.length?"/"+ve.join("/"):""},Ns=function(){var Ge=z(this).query;return Ge?"?"+Ge:""},Ss=function(){return z(this).searchParams},po=function(){var Ge=z(this).fragment;return Ge?"#"+Ge:""};y&&g(Wt,{href:d(tr,function(He){var ve=z(this),He=String(He),He=l(ve,He);if(He)throw TypeError(He);F(ve.searchParams).updateSearchParams(ve.query)}),origin:d(Jt),protocol:d(Lr,function(Ge){var ve=z(this);l(ve,String(Ge)+":",We)}),username:d(Cr,function(Ge){var ve=z(this),He=T(String(Ge));if(!u(ve)){ve.username="";for(var ze=0;ze<He.length;ze++)ve.username+=ae(He[ze],Ee)}}),password:d(dr,function(Ge){var ve=z(this),He=T(String(Ge));if(!u(ve)){ve.password="";for(var ze=0;ze<He.length;ze++)ve.password+=ae(He[ze],Ee)}}),host:d(Mr,function(Ge){var ve=z(this);ve.cannotBeABaseURL||l(ve,String(Ge),qe)}),hostname:d(Dn,function(Ge){var ve=z(this);ve.cannotBeABaseURL||l(ve,String(Ge),ke)}),port:d(Xr,function(Ge){var ve=z(this);u(ve)||((Ge=String(Ge))==""?ve.port=null:l(ve,Ge,Ye))}),pathname:d(ei,function(Ge){var ve=z(this);ve.cannotBeABaseURL||(ve.path=[],l(ve,Ge+"",xt))}),search:d(Ns,function(Ge){var ve=z(this);(Ge=String(Ge))==""?ve.query=null:(Ge.charAt(0)=="?"&&(Ge=Ge.slice(1)),ve.query="",l(ve,Ge,Bt)),F(ve.searchParams).updateSearchParams(ve.query)}),searchParams:d(Ss),hash:d(po,function(Ge){var ve=z(this);(Ge=String(Ge))==""?ve.fragment=null:(Ge.charAt(0)=="#"&&(Ge=Ge.slice(1)),ve.fragment="",l(ve,Ge,qt))})}),_(Wt,"toJSON",function(){return tr.call(this)},{enumerable:!0}),_(Wt,"toString",function(){return tr.call(this)},{enumerable:!0}),k&&(f=k.createObjectURL,h=k.revokeObjectURL,f&&_(c,"createObjectURL",function(Ge){return f.apply(k,arguments)}),h&&_(c,"revokeObjectURL",function(Ge){return h.apply(k,arguments)})),L(c,"URL"),m({global:!0,forced:!v,sham:!y},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(r,s,o){s.exports=r("./").polyfill()},{"./":247}],247:[function(r,s,o){(function(a,u){var l,c;l=this,c=function(){function d(ue){return typeof ue=="function"}var p=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},f=0,h=void 0,m=void 0,y=function(ue,ge){S[f]=ue,S[f+1]=ge,(f+=2)===2&&(m?m(T):D())},v=typeof window<"u"?window:void 0,g=v||{},g=g.MutationObserver||g.WebKitMutationObserver,_=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var ue=setTimeout;return function(){return ue(T,1)}}var S=new Array(1e3);function T(){for(var ue=0;ue<f;ue+=2)(0,S[ue])(S[ue+1]),S[ue]=void 0,S[ue+1]=void 0;f=0}function M(){try{var ue=Function("return this")().require("vertx");return(h=ue.runOnLoop||ue.runOnContext)!==void 0?function(){h(T)}:b()}catch{return b()}}var R,L,P,D=void 0;function C(ue,ge){var xe,Le=this,we=new this.constructor(G),Ee=(we[F]===void 0&&pe(we),Le._state);return Ee?(xe=arguments[Ee-1],y(function(){return Z(Ee,we,xe,Le._result)})):H(Le,we,ue,ge),we}function k(ue){var ge;return ue&&typeof ue=="object"&&ue.constructor===this?ue:(J(ge=new this(G),ue),ge)}var D=_?function(){return a.nextTick(T)}:g?(L=0,_=new g(T),P=document.createTextNode(""),_.observe(P,{characterData:!0}),function(){P.data=L=++L%2}):x?((R=new MessageChannel).port1.onmessage=T,function(){return R.port2.postMessage(0)}):(v===void 0&&typeof r=="function"?M:b)(),F=Math.random().toString(36).substring(2);function G(){}var z=void 0,Q=1,V=2;function W(ue,ge,xe){y(function(Le){var we=!1,Ee=function(ae,ne,Ae,Be){try{ae.call(ne,Ae,Be)}catch(Fe){return Fe}}(xe,ge,function(ae){we||(we=!0,(ge!==ae?J:I)(Le,ae))},function(ae){we||(we=!0,O(Le,ae))},Le._label);!we&&Ee&&(we=!0,O(Le,Ee))},ue)}function Y(ue,ge,xe){var Le,we;ge.constructor===ue.constructor&&xe===C&&ge.constructor.resolve===k?(Le=ue,(we=ge)._state===Q?I(Le,we._result):we._state===V?O(Le,we._result):H(we,void 0,function(Ee){return J(Le,Ee)},function(Ee){return O(Le,Ee)})):xe!==void 0&&d(xe)?W(ue,ge,xe):I(ue,ge)}function J(ue,ge){if(ue===ge)O(ue,new TypeError("You cannot resolve a promise with itself"));else if(xe=typeof ge,ge===null||xe!="object"&&xe!="function")I(ue,ge);else{xe=void 0;try{xe=ge.then}catch(Le){return void O(ue,Le)}Y(ue,ge,xe)}var xe}function ie(ue){ue._onerror&&ue._onerror(ue._result),q(ue)}function I(ue,ge){ue._state===z&&(ue._result=ge,ue._state=Q,ue._subscribers.length!==0&&y(q,ue))}function O(ue,ge){ue._state===z&&(ue._state=V,ue._result=ge,y(ie,ue))}function H(ue,ge,xe,Le){var we=ue._subscribers,Ee=we.length;ue._onerror=null,we[Ee]=ge,we[Ee+Q]=xe,we[Ee+V]=Le,Ee===0&&ue._state&&y(q,ue)}function q(ue){var ge=ue._subscribers,xe=ue._state;if(ge.length!==0){for(var Le,we=void 0,Ee=ue._result,ae=0;ae<ge.length;ae+=3)Le=ge[ae],we=ge[ae+xe],Le?Z(xe,Le,we,Ee):we(Ee);ue._subscribers.length=0}}function Z(ue,ge,xe,Le){var we=d(xe),Ee=void 0,ae=void 0,ne=!0;if(we){try{Ee=xe(Le)}catch(Ae){ne=!1,ae=Ae}if(ge===Ee)return void O(ge,new TypeError("A promises callback cannot return that same promise."))}else Ee=Le;ge._state===z&&(we&&ne?J(ge,Ee):ne===!1?O(ge,ae):ue===Q?I(ge,Ee):ue===V&&O(ge,Ee))}var oe=0;function pe(ue){ue[F]=oe++,ue._state=void 0,ue._result=void 0,ue._subscribers=[]}me.prototype._enumerate=function(ue){for(var ge=0;this._state===z&&ge<ue.length;ge++)this._eachEntry(ue[ge],ge)},me.prototype._eachEntry=function(ue,ge){var xe=this._instanceConstructor,Le=xe.resolve;if(Le===k){var we,Ee=void 0,ae=void 0,ne=!1;try{Ee=ue.then}catch(Ae){ne=!0,ae=Ae}Ee===C&&ue._state!==z?this._settledAt(ue._state,ge,ue._result):typeof Ee!="function"?(this._remaining--,this._result[ge]=ue):xe===ce?(we=new xe(G),ne?O(we,ae):Y(we,ue,Ee),this._willSettleAt(we,ge)):this._willSettleAt(new xe(function(Ae){return Ae(ue)}),ge)}else this._willSettleAt(Le(ue),ge)},me.prototype._settledAt=function(ue,ge,xe){var Le=this.promise;Le._state===z&&(this._remaining--,ue===V?O(Le,xe):this._result[ge]=xe),this._remaining===0&&I(Le,this._result)},me.prototype._willSettleAt=function(ue,ge){var xe=this;H(ue,void 0,function(Le){return xe._settledAt(Q,ge,Le)},function(Le){return xe._settledAt(V,ge,Le)})};var be=me;function me(ue,ge){this._instanceConstructor=ue,this.promise=new ue(G),this.promise[F]||pe(this.promise),p(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ge),this._remaining!==0)||I(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}te.prototype.catch=function(ue){return this.then(null,ue)},te.prototype.finally=function(ue){var ge=this.constructor;return d(ue)?this.then(function(xe){return ge.resolve(ue()).then(function(){return xe})},function(xe){return ge.resolve(ue()).then(function(){throw xe})}):this.then(ue,ue)};var ce=te;function te(ue){if(this[F]=oe++,this._result=this._state=void 0,this._subscribers=[],G!==ue){if(typeof ue!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof te))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ge=this;try{ue(function(xe){J(ge,xe)},function(xe){O(ge,xe)})}catch(xe){O(ge,xe)}}}return ce.prototype.then=C,ce.all=function(ue){return new be(this,ue).promise},ce.race=function(ue){var ge=this;return p(ue)?new ge(function(xe,Le){for(var we=ue.length,Ee=0;Ee<we;Ee++)ge.resolve(ue[Ee]).then(xe,Le)}):new ge(function(xe,Le){return Le(new TypeError("You must pass an array to race."))})},ce.resolve=k,ce.reject=function(ue){var ge=new this(G);return O(ge,ue),ge},ce._setScheduler=function(ue){m=ue},ce._setAsap=function(ue){y=ue},ce._asap=y,ce.polyfill=function(){var ue=void 0;if(u!==void 0)ue=u;else if(typeof self<"u")ue=self;else try{ue=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ge=ue.Promise;if(ge){var xe=null;try{xe=Object.prototype.toString.call(ge.resolve())}catch{}if(xe==="[object Promise]"&&!ge.cast)return}ue.Promise=ce},ce.Promise=ce},typeof o=="object"&&s!==void 0?s.exports=c():l.ES6Promise=c()}).call(this,r("_process"),typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(r,s,o){var a,u;a=this,u=function(l,c){var d=5e3,p="callback";function f(m){try{delete window[m]}catch{window[m]=void 0}}function h(m){m=document.getElementById(m),m&&document.getElementsByTagName("head")[0].removeChild(m)}c.exports=function(m){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=m,g=y.timeout||d,_=y.jsonpCallback||p,x=void 0;return new Promise(function(b,S){var T=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),M=_+"_"+T,R=(window[T]=function(L){b({ok:!0,json:function(){return Promise.resolve(L)}}),x&&clearTimeout(x),h(M),f(T)},v+=v.indexOf("?")===-1?"?":"&",document.createElement("script"));R.setAttribute("src",""+v+_+"="+T),y.charset&&R.setAttribute("charset",y.charset),R.id=M,document.getElementsByTagName("head")[0].appendChild(R),x=setTimeout(function(){S(new Error("JSONP request to "+m+" timed out")),f(T),h(M),window[T]=function(){f(T)}},g),R.onerror=function(){S(new Error("JSONP request to "+m+" failed")),f(T),h(M),x&&clearTimeout(x)}})}},o!==void 0&&s!==void 0?u(0,s):(u(u={exports:{}},u),a.fetchJsonp=u.exports)},{}],249:[function(r,s,o){var a=function(u){var l,c,d,p,f,h,m,y,v,g,_;if(!(u===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return _=u.document,l=function(){return u.URL||u.webkitURL||u},c=_.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in c,p=/constructor/i.test(u.HTMLElement)||u.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(x){(u.setImmediate||u.setTimeout)(function(){throw x},0)},m=4e4,y=function(x){setTimeout(function(){typeof x=="string"?l().revokeObjectURL(x):x.remove()},m)},v=function(x){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\uFEFF",x],{type:x.type}):x},_=(g=function(x,b,L){L||(x=v(x));var T,M,R=this,L=x.type==="application/octet-stream",P=function(){for(var C=R,k="writestart progress write writeend".split(" "),D=void 0,F=(k=[].concat(k)).length;F--;){var G=C["on"+k[F]];if(typeof G=="function")try{G.call(C,D||C)}catch(z){h(z)}}};R.readyState=R.INIT,d?(T=l().createObjectURL(x),setTimeout(function(){var C,k;c.href=T,c.download=b,C=c,k=new MouseEvent("click"),C.dispatchEvent(k),P(),y(T),R.readyState=R.DONE})):(f||L&&p)&&u.FileReader?((M=new FileReader).onloadend=function(){var C=f?M.result:M.result.replace(/^data:[^;]*;/,"data:attachment/file;");u.open(C,"_blank")||(u.location.href=C),C=void 0,R.readyState=R.DONE,P()},M.readAsDataURL(x),R.readyState=R.INIT):(T=T||l().createObjectURL(x),!L&&u.open(T,"_blank")||(u.location.href=T),R.readyState=R.DONE,P(),y(T))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(x,b,S){return b=b||x.name||"download",S||(x=v(x)),navigator.msSaveOrOpenBlob(x,b)}:(_.abort=function(){},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,function(x,b,S){return new g(x,b||x.name||"download",S)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=a:n!=null},{}],250:[function(r,s,o){var a,u=Object.defineProperty,l=(u(o,"__esModule",{value:!0}),o),c={GIFEncoder:()=>P,applyPalette:()=>function(z,Q,V="rgb565"){if(!z||!z.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(z instanceof Uint8Array||z instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Q.length)throw new Error("applyPalette() only works with 256 colors or less");const W=new Uint32Array(z.buffer),Y=W.length,J=V==="rgb444"?4096:65536,ie=new Uint8Array(Y),I=new Array(J);if(V==="rgba4444")for(let te=0;te<Y;te++){var Z=W[te],O=Z>>24&255,H=Z>>16&255,q=Z>>8&255,Z=255&Z,oe=y(Z,q,H,O),oe=oe in I?I[oe]:I[oe]=function(ue,ge,xe,Le,we){let Ee=0,ae=1e100;for(let Fe=0;Fe<we.length;Fe++){var ne,Ae=we[Fe],Be=M(Ae[3]-Le);Be>ae||(ne=Ae[0],(Be+=M(ne-ue))>ae||(ne=Ae[1],(Be+=M(ne-ge))>ae||(ne=Ae[2],(Be+=M(ne-xe))>ae||(ae=Be,Ee=Fe))))}return Ee}(Z,q,H,O,Q);ie[te]=oe}else{const te=V==="rgb444"?v:m;for(let ue=0;ue<Y;ue++){var me=W[ue],pe=me>>16&255,be=me>>8&255,me=255&me,ce=te(me,be,pe),ce=ce in I?I[ce]:I[ce]=function(ge,xe,Le,we){let Ee=0,ae=1e100;for(let Fe=0;Fe<we.length;Fe++){var ne,Ae=we[Fe],Be=M(Ae[0]-ge);Be>ae||(ne=Ae[1],(Be+=M(ne-xe))>ae||(ne=Ae[2],(Be+=M(ne-Le))>ae||(ae=Be,Ee=Fe)))}return Ee}(me,be,pe,Q);ie[ue]=ce}}return ie},default:()=>G,nearestColor:()=>function(z,Q,V=S){return z[R(z,Q,V)]},nearestColorIndex:()=>R,nearestColorIndexWithDistance:()=>L,prequantize:()=>function(z,{roundRGB:Q=5,roundAlpha:V=10,oneBitAlpha:W=null}={}){const Y=new Uint32Array(z.buffer);for(let H=0;H<Y.length;H++){var O=Y[H];let q=O>>24&255;var J,ie=O>>16&255,I=O>>8&255,O=255&O;q=T(q,V),W&&(J=typeof W=="number"?W:127,q=q<=J?0:255),O=T(O,Q),I=T(I,Q),ie=T(ie,Q),Y[H]=q<<24|ie<<16|I<<8|O<<0}},quantize:()=>function(z,Q,V={}){var{format:W="rgb565",clearAlpha:Y=!0,clearAlphaColor:J=0,clearAlphaThreshold:ie=0,oneBitAlpha:I=!1}=V;if(!z||!z.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(z instanceof Uint8Array||z instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");z=new Uint32Array(z.buffer);let O=V.useSqrt!==!1;const H=W==="rgba4444",q=function(Oe,Je){const Ve=Je==="rgb444"?4096:65536,Se=new Array(Ve),We=Oe.length;if(Je==="rgba4444")for(let at=0;at<We;++at){var ee=Oe[at],Re=ee>>24&255,le=ee>>16&255,de=ee>>8&255,ee=255&ee,he=y(ee,de,le,Re);let ct=he in Se?Se[he]:Se[he]=b();ct.rc+=ee,ct.gc+=de,ct.bc+=le,ct.ac+=Re,ct.cnt++}else if(Je==="rgb444")for(let at=0;at<We;++at){var De=Oe[at],Pe=De>>16&255,ye=De>>8&255,De=255&De,Me=v(De,ye,Pe);let ct=Me in Se?Se[Me]:Se[Me]=b();ct.rc+=De,ct.gc+=ye,ct.bc+=Pe,ct.cnt++}else for(let at=0;at<We;++at){var Ye=Oe[at],qe=Ye>>16&255,ke=Ye>>8&255,Ye=255&Ye,dt=m(Ye,ke,qe);let ct=dt in Se?Se[dt]:Se[dt]=b();ct.rc+=Ye,ct.gc+=ke,ct.bc+=qe,ct.cnt++}return Se}(z,W),Z=q.length,oe=Z-1,pe=new Uint32Array(Z+1);for(var be=0,me=0;me<Z;++me){const Oe=q[me];Oe!=null&&(Ae=1/Oe.cnt,H&&(Oe.ac*=Ae),Oe.rc*=Ae,Oe.gc*=Ae,Oe.bc*=Ae,q[be++]=Oe)}_(Q)/be<.022&&(O=!1);for(var ce,te,ue,me=0;me<be-1;++me)q[me].fw=me+1,q[me+1].bk=me,O&&(q[me].cnt=Math.sqrt(q[me].cnt));for(O&&(q[me].cnt=Math.sqrt(q[me].cnt)),me=0;me<be;++me){x(q,me);var ge=q[me].err;for(te=++pe[0];1<te&&(ue=te>>1,!(q[ce=pe[ue]].err<=ge));te=ue)pe[te]=ce;pe[te]=me}var xe,Le=be-Q;for(me=0;me<Le;){for(;;){var we=pe[1];if((xe=q[we]).tm>=xe.mtm&&q[xe.nn].mtm<=xe.tm)break;for(xe.mtm==oe?we=pe[1]=pe[pe[0]--]:(x(q,we),xe.tm=me),ge=q[we].err,te=1;(ue=te+te)<=pe[0]&&(ue<pe[0]&&q[pe[ue]].err>q[pe[ue+1]].err&&ue++,!(ge<=q[ce=pe[ue]].err));te=ue)pe[te]=ce;pe[te]=we}var Ee=q[xe.nn],ae=xe.cnt,ne=Ee.cnt,Ae=1/(ae+ne);H&&(xe.ac=Ae*(ae*xe.ac+ne*Ee.ac)),xe.rc=Ae*(ae*xe.rc+ne*Ee.rc),xe.gc=Ae*(ae*xe.gc+ne*Ee.gc),xe.bc=Ae*(ae*xe.bc+ne*Ee.bc),xe.cnt+=Ee.cnt,xe.mtm=++me,q[Ee.bk].fw=Ee.fw,q[Ee.fw].bk=Ee.bk,Ee.mtm=oe}let Be=[];for(me=0;;0){let Oe=g(Math.round(q[me].rc),0,255),Je=g(Math.round(q[me].gc),0,255),Ve=g(Math.round(q[me].bc),0,255),Se=255;H&&(Se=g(Math.round(q[me].ac),0,255),I&&(Fe=typeof I=="number"?I:127,Se=Se<=Fe?0:255),Y&&Se<=ie&&(Oe=Je=Ve=J,Se=0));var Fe=H?[Oe,Je,Ve,Se]:[Oe,Je,Ve];if(function(We,Re){for(let ee=0;ee<We.length;ee++){var de=We[ee],le=de[0]===Re[0]&&de[1]===Re[1]&&de[2]===Re[2],de=!(4<=de.length&&4<=Re.length)||de[3]===Re[3];if(le&&de)return!0}return!1}(Be,Fe)||Be.push(Fe),(me=q[me].fw)==0)break}return Be},snapColorsToPalette:()=>function(z,Q,V=5){if(z.length&&Q.length){var W=z.map(O=>O.slice(0,3)),Y=V*V,J=z[0].length;for(let O=0;O<Q.length;O++){let H=Q[O];H=H.length<J?[H[0],H[1],H[2],255]:H.length>J?H.slice(0,3):H.slice();var I=L(W,H.slice(0,3),S),ie=I[0],I=I[1];0<I&&I<=Y&&(z[ie]=H)}}}};for(a in c)u(l,a,{get:c[a],enumerable:!0});var d={trailer:59};function p(z=256){let Q=0,V=new Uint8Array(z);return{get buffer(){return V.buffer},reset(){Q=0},bytesView(){return V.subarray(0,Q)},bytes(){return V.slice(0,Q)},writeByte(Y){W(Q+1),V[Q]=Y,Q++},writeBytes(Y,J=0,ie=Y.length){W(Q+ie);for(let I=0;I<ie;I++)V[Q++]=Y[I+J]},writeBytesView(Y,J=0,ie=Y.byteLength){W(Q+ie),V.set(Y.subarray(J,J+ie),Q),Q+=ie}};function W(Y){var J=V.length;if(!(Y<=J)){Y=Math.max(Y,J*(J<1048576?2:1.125)>>>0),J!=0&&(Y=Math.max(Y,256));const ie=V;V=new Uint8Array(Y),0<Q&&V.set(ie.subarray(0,Q),0)}}}var f=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],h=function(z,Q,V,H,Y=p(512),J=new Uint8Array(256),ie=new Int32Array(5003),I=new Int32Array(5003)){var O=ie.length,H=Math.max(2,H);J.fill(0),I.fill(0),ie.fill(-1);let q=0,Z=0;var oe=H+1;const pe=oe;let be=!1,me=pe,ce=(1<<me)-1;var te=1<<oe-1;const ue=1+te;let ge=2+te,xe=0,Le=V[0],we=0;for(let Fe=O;Fe<65536;Fe*=2)++we;we=8-we,Y.writeByte(H),Be(te);var Ee=V.length;for(let Fe=1;Fe<Ee;Fe++)e:{var ae=V[Fe],ne=(ae<<12)+Le;let Oe=ae<<we^Le;if(ie[Oe]===ne)Le=I[Oe];else{for(var Ae=Oe===0?1:O-Oe;0<=ie[Oe];)if((Oe-=Ae)<0&&(Oe+=O),ie[Oe]===ne){Le=I[Oe];break e}Be(Le),Le=ae,ge<4096?(I[Oe]=ge++,ie[Oe]=ne):(ie.fill(-1),ge=2+te,be=!0,Be(te))}}return Be(Le),Be(ue),Y.writeByte(0),Y.bytesView();function Be(Fe){for(q&=f[Z],0<Z?q|=Fe<<Z:q=Fe,Z+=me;8<=Z;)J[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(J,0,xe),xe=0),q>>=8,Z-=8;if((ge>ce||be)&&(be?(me=pe,ce=(1<<me)-1,be=!1):(++me,ce=me===12?1<<me:(1<<me)-1)),Fe==ue){for(;0<Z;)J[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(J,0,xe),xe=0),q>>=8,Z-=8;0<xe&&(Y.writeByte(xe),Y.writeBytesView(J,0,xe),xe=0)}}};function m(z,Q,V){return z<<8&63488|Q<<2&992|V>>3}function y(z,Q,V,W){return z>>4|240&Q|(240&V)<<4|(240&W)<<8}function v(z,Q,V){return z>>4<<8|240&Q|V>>4}function g(z,Q,V){return z<Q?Q:V<z?V:z}function _(z){return z*z}function x(z,Q,V){var W=0,Y=1e100;const J=z[Q];for(var ie=J.cnt,I=J.ac,O=J.rc,H=J.gc,q=J.bc,Z=J.fw;Z!=0;Z=z[Z].fw){var oe,pe=z[Z],be=pe.cnt,be=ie*be/(ie+be);Y<=be||(oe=0,Y<=(oe+=be*_(pe.rc-O))||Y<=(oe+=be*_(pe.gc-H))||Y<=(oe+=be*_(pe.bc-q))||(Y=oe,W=Z))}J.err=Y,J.nn=W}function b(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function S(z,Q){for(var V=0,W=0;W<z.length;W++){var Y=z[W]-Q[W];V+=Y*Y}return V}function T(z,Q){return 1<Q?Math.round(z/Q)*Q:z}function M(z){return z*z}function R(z,Q,V=S){let W=1/0,Y=-1;for(let ie=0;ie<z.length;ie++){var J=V(Q,z[ie]);J<W&&(W=J,Y=ie)}return Y}function L(z,Q,V=S){let W=1/0,Y=-1;for(let ie=0;ie<z.length;ie++){var J=V(Q,z[ie]);J<W&&(W=J,Y=ie)}return[Y,W]}function P(z={}){const{initialCapacity:Q=4096,auto:V=!0}=z,W=p(Q),Y=new Uint8Array(256),J=new Int32Array(5003),ie=new Int32Array(5003);let I=!1;return{reset(){W.reset(),I=!1},finish(){W.writeByte(d.trailer)},bytes(){return W.bytes()},bytesView(){return W.bytesView()},get buffer(){return W.buffer},get stream(){return W},writeHeader:O,writeFrame(H,q,Z,Le={}){var{transparent:pe=!1,transparentIndex:be=0,delay:Ae=0,palette:me=null,repeat:Ee=0,colorDepth:ce=8,dispose:te=-1}=Le;let ue=!1;if(V?I||(ue=!0,O(),I=!0):ue=!!Le.first,q=Math.max(0,Math.floor(q)),Z=Math.max(0,Math.floor(Z)),ue){if(!me)throw new Error("First frame must include a { palette } option");var[Le,ae,xe,ne,we=8]=[W,q,Z,me,ce];ne=F(ne.length)-1,we=128|we-1<<4|ne,k(Le,ae),k(Le,xe),Le.writeBytes([we,0,0]),C(W,me),0<=Ee&&(ne=W,ae=Ee,ne.writeByte(33),ne.writeByte(255),ne.writeByte(11),D(ne,"NETSCAPE2.0"),ne.writeByte(3),ne.writeByte(1),k(ne,ae),ne.writeByte(0))}var ge,xe=Math.round(Ae/10),Le=W,we=te,Ee=xe,ae=pe,ne=be,Ae=(Le.writeByte(33),Le.writeByte(249),Le.writeByte(4),ne<0&&(ne=0,ae=!1),ae=ae?(ge=1,2):ge=0,0<=we&&(ae=7&we),ae<<=2,Le.writeByte(0|ae|ge),k(Le,Ee),Le.writeByte(ne||0),Le.writeByte(0),!!me&&!ue);te=W,pe=q,be=Z,ge=Ae?me:null,te.writeByte(44),k(te,0),k(te,0),k(te,pe),k(te,be),ge?(pe=F(ge.length)-1,te.writeByte(128|pe)):te.writeByte(0),Ae&&C(W,me),[Ee,Le,be,pe,te=8,Ae,me,H]=[W,H,q,Z,ce,Y,J,ie],h(be,pe,Le,te,Ee,Ae,me,H)}};function O(){D(W,"GIF89a")}}function C(z,Q){var V=1<<F(Q.length);for(let W=0;W<V;W++){let Y=[0,0,0];W<Q.length&&(Y=Q[W]),z.writeByte(Y[0]),z.writeByte(Y[1]),z.writeByte(Y[2])}}function k(z,Q){z.writeByte(255&Q),z.writeByte(Q>>8&255)}function D(z,Q){for(var V=0;V<Q.length;V++)z.writeByte(Q.charCodeAt(V))}function F(z){return Math.max(Math.ceil(Math.log2(z)),1)}var G=P},{}],251:[function(r,s,o){o.read=function(a,u,l,c,x){var p,f,h=8*x-c-1,m=(1<<h)-1,y=m>>1,v=-7,g=l?x-1:0,_=l?-1:1,x=a[u+g];for(g+=_,p=x&(1<<-v)-1,x>>=-v,v+=h;0<v;p=256*p+a[u+g],g+=_,v-=8);for(f=p&(1<<-v)-1,p>>=-v,v+=c;0<v;f=256*f+a[u+g],g+=_,v-=8);if(p===0)p=1-y;else{if(p===m)return f?NaN:1/0*(x?-1:1);f+=Math.pow(2,c),p-=y}return(x?-1:1)*f*Math.pow(2,p-c)},o.write=function(a,u,l,c,d,b){var f,h,m=8*b-d-1,y=(1<<m)-1,v=y>>1,g=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=c?0:b-1,x=c?1:-1,b=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(h=isNaN(u)?1:0,f=y):(f=Math.floor(Math.log(u)/Math.LN2),u*(c=Math.pow(2,-f))<1&&(f--,c*=2),2<=(u+=1<=f+v?g/c:g*Math.pow(2,1-v))*c&&(f++,c/=2),y<=f+v?(h=0,f=y):1<=f+v?(h=(u*c-1)*Math.pow(2,d),f+=v):(h=u*Math.pow(2,v-1)*Math.pow(2,d),f=0));8<=d;a[l+_]=255&h,_+=x,h/=256,d-=8);for(f=f<<d|h,m+=d;0<m;a[l+_]=255&f,_+=x,f/=256,m-=8);a[l+_-x]|=128*b}},{}],252:[function(r,s,o){var a;function u(le,de){return le.b===de.b&&le.a===de.a}function l(le,de){return le.b<de.b||le.b===de.b&&le.a<=de.a}function c(le,de,ee){var he=de.b-le.b,Pe=ee.b-de.b;return 0<he+Pe?he<Pe?de.a-le.a+he/(he+Pe)*(le.a-ee.a):de.a-ee.a+Pe/(he+Pe)*(ee.a-le.a):0}function d(le,de,ee){var he=de.b-le.b,Pe=ee.b-de.b;return 0<he+Pe?(de.a-ee.a)*he+(de.a-le.a)*Pe:0}function p(le,de){return le.a<de.a||le.a===de.a&&le.b<=de.b}function f(le,de,ee){var he=de.a-le.a,Pe=ee.a-de.a;return 0<he+Pe?he<Pe?de.b-le.b+he/(he+Pe)*(le.b-ee.b):de.b-ee.b+Pe/(he+Pe)*(ee.b-le.b):0}function h(le,de,ee){var he=de.a-le.a,Pe=ee.a-de.a;return 0<he+Pe?(de.b-ee.b)*he+(de.b-le.b)*Pe:0}function m(le,de,ee,he){return(le=le<0?0:le)<=(ee=ee<0?0:ee)?ee===0?(de+he)/2:de+le/(le+ee)*(he-de):he+ee/(le+ee)*(de-he)}function y(le){var de=b(le.b);return T(de,le.c),T(de.b,le.c),M(de,le.a),de}function v(le,de){var ee=!1,he=!1;le!==de&&(de.a!==le.a&&(he=!0,L(de.a,le.a)),de.d!==le.d&&(ee=!0,P(de.d,le.d)),S(de,le),he||(T(de,le.a),le.a.c=le),ee||(M(de,le.d),le.d.a=le))}function g(le){var de=le.b,ee=!1;le.d!==le.b.d&&(ee=!0,P(le.d,le.b.d)),le.c===le?L(le.a,null):(le.b.d.a=le.b.e,le.a.c=le.c,S(le,le.b.e),ee||M(le,le.d)),de.c===de?(L(de.a,null),P(de.d,null)):(le.d.a=de.b.e,de.a.c=de.c,S(de,de.b.e)),R(le)}function _(le){var de=b(le),ee=de.b;return S(de,le.e),de.a=le.b.a,T(ee,de.a),de.d=ee.d=le.d,de=de.b,S(le.b,le.b.b.e),S(le.b,de),le.b.a=de.a,de.b.a.c=de.b,de.b.d=le.b.d,de.f=le.f,de.b.f=le.b.f,de}function x(le,de){var ee=!1,he=b(le),Pe=he.b;return de.d!==le.d&&(ee=!0,P(de.d,le.d)),S(he,le.e),S(Pe,de),he.a=le.b.a,Pe.a=de.a,he.d=Pe.d=le.d,le.d.a=Pe,ee||M(he,le.d),he}function b(le){var de=new xe,ee=new xe,he=le.b.h;return(((ee.h=he).b.h=de).h=le).b.h=ee,de.b=ee,((de.c=de).e=ee).b=de,(ee.c=ee).e=de}function S(le,de){var ee=le.c,he=de.c;ee.b.e=de,(he.b.e=le).c=he,de.c=ee}function T(le,de){var ee=de.f,he=new we(de,ee);for(ee.e=he,ee=(de.f=he).c=le;ee.a=he,(ee=ee.c)!==le;);}function M(le,de){var ee=de.d,he=new ge(de,ee);for(ee.b=he,(de.d=he).a=le,he.c=de.c,ee=le;ee.d=he,(ee=ee.e)!==le;);}function R(le){var de=le.h;le=le.b.h,(de.b.h=le).b.h=de}function L(le,de){for(var ee=le.c,he=ee;he.a=de,(he=he.c)!==ee;);ee=le.f,((he=le.e).f=ee).e=he}function P(le,de){for(var ee=le.a,he=ee;he.d=de,(he=he.e)!==ee;);ee=le.d,((he=le.b).d=ee).b=he}function C(le){var de=0;return Math.abs(le[1])>Math.abs(le[0])&&(de=1),de=Math.abs(le[2])>Math.abs(le[de])?2:de}function k(le,de){le.f+=de.f,le.b.f+=de.b.f}function D(le,de,ee){return le=le.a,de=de.a,ee=ee.a,de.b.a===le?ee.b.a===le?l(de.a,ee.a)?d(ee.b.a,de.a,ee.a)<=0:0<=d(de.b.a,ee.a,de.a):d(ee.b.a,le,ee.a)<=0:ee.b.a===le?0<=d(de.b.a,le,de.a):(de=c(de.b.a,le,de.a),(le=c(ee.b.a,le,ee.a))<=de)}function F(le){le.a.i=null;var de=le.e;de.a.c=de.c,de.c.a=de.a,le.e=null}function G(le,de){g(le.a),le.c=!1,(le.a=de).i=le}function z(le){for(var de=le.a.a;(le=Re(le)).a.a===de;);return le.c&&(G(le,de=x(We(le).a.b,le.a.e)),le=Re(le)),le}function Q(le,de,ee){var he=new Se;return he.a=ee,he.e=be(le.f,de.e,he),ee.i=he}function V(le,de){switch(le.s){case 100130:return(1&de)!=0;case 100131:return de!==0;case 100132:return 0<de;case 100133:return de<0;case 100134:return 2<=de||de<=-2}return!1}function W(le){var de=le.a,ee=de.d;ee.c=le.d,ee.a=de,F(le)}function Y(le,de,ee){for(de=(le=de).a;le!==ee;){le.c=!1;var he=We(le),Pe=he.a;if(Pe.a!==de.a){if(!he.c){W(le);break}G(he,Pe=x(de.c.b,Pe.b))}de.c!==Pe&&(v(Pe.b.e,Pe),v(de,Pe)),W(le),de=he.a,le=he}return de}function J(le,de,ee,he,Pe,ye){for(var De=!0;Q(le,de,ee.b),(ee=ee.c)!==he;);for(Pe===null&&(Pe=We(de).a.b.c);(ee=(he=We(de)).a.b).a===Pe.a;)ee.c!==Pe&&(v(ee.b.e,ee),v(Pe.b.e,ee)),he.f=de.f-ee.f,he.d=V(le,he.f),de.b=!0,!De&&H(le,de)&&(k(ee,Pe),F(de),g(Pe)),De=!1,de=he,Pe=ee;de.b=!0,ye&&Z(le,de)}function ie(le,de,ee,he,Pe){var ye=[de.g[0],de.g[1],de.g[2]];de.d=null,de.d=le.o&&le.o(ye,ee,he,le.c)||null,de.d===null&&(Pe?le.n||(ue(le,100156),le.n=!0):de.d=ee[0])}function I(le,de,ee){var he=[null,null,null,null];he[0]=de.a.d,he[1]=ee.a.d,ie(le,de.a,he,[.5,.5,0,0],!1),v(de,ee)}function O(le,de,ee,he,Pe){var ye=Math.abs(de.b-le.b)+Math.abs(de.a-le.a),De=Math.abs(ee.b-le.b)+Math.abs(ee.a-le.a),Me=Pe+1;he[Pe]=.5*De/(ye+De),he[Me]=.5*ye/(ye+De),le.g[0]+=he[Pe]*de.g[0]+he[Me]*ee.g[0],le.g[1]+=he[Pe]*de.g[1]+he[Me]*ee.g[1],le.g[2]+=he[Pe]*de.g[2]+he[Me]*ee.g[2]}function H(le,de){var ee=We(de),he=de.a,Pe=ee.a;if(l(he.a,Pe.a)){if(0<d(Pe.b.a,he.a,Pe.a))return;if(u(he.a,Pe.a)){if(he.a!==Pe.a){var ee=le.e,ye=he.a.h;if(0<=ye){var De=(ee=ee.b).d,Me=ee.e,qe=ee.c,ke=qe[ye];De[ke]=De[ee.a],(qe[De[ke]]=ke)<=--ee.a&&(ke<=1||l(Me[De[ke>>1]],Me[De[ke]])?Je:Ve)(ee,ke),Me[ye]=null,qe[ye]=ee.b,ee.b=ye}else for(ee.c[-(ye+1)]=null;0<ee.a&&ee.c[ee.d[ee.a-1]]===null;)--ee.a;I(le,Pe.b.e,he)}}else _(Pe.b),v(he,Pe.b.e),de.b=ee.b=!0}else{if(d(he.b.a,Pe.a,he.a)<0)return;Re(de).b=de.b=!0,_(he.b),v(Pe.b.e,he)}return 1}function q(le,de){var ee=We(de),he=de.a,Pe=ee.a,ye=he.a,De=Pe.a,Me=he.b.a,qe=Pe.b.a,ke=new we;if(d(Me,le.a,ye),d(qe,le.a,De),!(ye===De||Math.min(ye.a,Me.a)>Math.max(De.a,qe.a))){if(l(ye,De)){if(0<d(qe,ye,De))return}else if(d(Me,De,ye)<0)return;var Ye,dt,at=Me,ct=ye,xt=qe,_t=De;if(l(at,ct)||(Ye=at,at=ct,ct=Ye),l(xt,_t)||(Ye=xt,xt=_t,_t=Ye),l(at,xt)||(Ye=at,at=xt,xt=Ye,Ye=ct,ct=_t,_t=Ye),l(xt,ct)?l(ct,_t)?((Ye=c(at,xt,ct))+(dt=c(xt,ct,_t))<0&&(Ye=-Ye,dt=-dt),ke.b=m(Ye,xt.b,dt,ct.b)):((Ye=d(at,xt,ct))+(dt=-d(at,_t,ct))<0&&(Ye=-Ye,dt=-dt),ke.b=m(Ye,xt.b,dt,_t.b)):ke.b=(xt.b+ct.b)/2,p(at,ct)||(Ye=at,at=ct,ct=Ye),p(xt,_t)||(Ye=xt,xt=_t,_t=Ye),p(at,xt)||(Ye=at,at=xt,xt=Ye,Ye=ct,ct=_t,_t=Ye),p(xt,ct)?p(ct,_t)?((Ye=f(at,xt,ct))+(dt=f(xt,ct,_t))<0&&(Ye=-Ye,dt=-dt),ke.a=m(Ye,xt.a,dt,ct.a)):((Ye=h(at,xt,ct))+(dt=-h(at,_t,ct))<0&&(Ye=-Ye,dt=-dt),ke.a=m(Ye,xt.a,dt,_t.a)):ke.a=(xt.a+ct.a)/2,l(ke,le.a)&&(ke.b=le.a.b,ke.a=le.a.a),at=l(ye,De)?ye:De,l(at,ke)&&(ke.b=at.b,ke.a=at.a),u(ke,ye)||u(ke,De))return H(le,de),0;if(!u(Me,le.a)&&0<=d(Me,le.a,ke)||!u(qe,le.a)&&d(qe,le.a,ke)<=0){if(qe===le.a)_(he.b),v(Pe.b,he),he=We(de=z(de)).a,Y(le,We(de),ee),J(le,de,he.b.e,he,he,!0);else{if(Me!==le.a)return 0<=d(Me,le.a,ke)&&(Re(de).b=de.b=!0,_(he.b),he.a.b=le.a.b,he.a.a=le.a.a),void(d(qe,le.a,ke)<=0&&(de.b=ee.b=!0,_(Pe.b),Pe.a.b=le.a.b,Pe.a.a=le.a.a));for(_(Pe.b),v(he.e,Pe.b.e),De=(ye=ee=de).a.b.a;(ye=Re(ye)).a.b.a===De;);ye=We(de=ye).a.b.c,ee.a=Pe.b.e,J(le,de,(Pe=Y(le,ee,null)).c,he.b.c,ye,!0)}return 1}_(he.b),_(Pe.b),v(Pe.b.e,he),he.a.b=ke.b,he.a.a=ke.a,he.a.h=ae(le.e,he.a),he=he.a,Pe=[0,0,0,0],ke=[ye.d,Me.d,De.d,qe.d],he.g[0]=he.g[1]=he.g[2]=0,O(he,ye,Me,Pe,0),O(he,De,qe,Pe,2),ie(le,he,ke,Pe,!0),Re(de).b=de.b=ee.b=!0}}function Z(le,de){for(var ee=We(de);;){for(;ee.b;)ee=We(de=ee);if(!de.b&&((de=Re(ee=de))===null||!de.b))break;de.b=!1;var he=de.a,Pe=ee.a;if(ye=he.b.a!==Pe.b.a)e:{var ye,De=We(ye=de),Me=ye.a,qe=De.a,ke=void 0;if(l(Me.b.a,qe.b.a)){if(d(Me.b.a,qe.b.a,Me.a)<0){ye=!1;break e}Re(ye).b=ye.b=!0,ke=_(Me),v(qe.b,ke),ke.d.c=ye.d}else{if(0<d(qe.b.a,Me.b.a,qe.a)){ye=!1;break e}ye.b=De.b=!0,ke=_(qe),v(Me.e,qe.b),ke.b.d.c=ye.d}ye=!0}if(ye&&(ee.c?(F(ee),g(Pe),Pe=(ee=We(de)).a):de.c&&(F(de),g(he),he=(de=Re(ee)).a)),he.a!==Pe.a){if(he.b.a===Pe.b.a||de.c||ee.c||he.b.a!==le.a&&Pe.b.a!==le.a)H(le,de);else if(q(le,de))break}he.a===Pe.a&&he.b.a===Pe.b.a&&(k(Pe,he),F(de),g(he),de=Re(ee))}}function oe(le,de){var ee=new Se,he=y(le.b);he.a.b=4e150,he.a.a=de,he.b.a.b=-4e150,he.b.a.a=de,le.a=he.b.a,ee.a=he,ee.f=0,ee.d=!1,ee.c=!1,ee.h=!0,ee.b=!1,he=be(he=le.f,he.a,ee),ee.e=he}function pe(le){this.a=new me,this.b=le,this.c=D}function be(le,de,ee){for(;(de=de.c).b!==null&&!le.c(le.b,de.b,ee););return le=new me(ee,de.a,de),de.a.c=le,de.a=le}function me(le,de,ee){this.b=le||null,this.a=de||this,this.c=ee||this}function ce(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function te(le,de){if(le.d!==de)for(;le.d!==de;)if(le.d<de)switch(le.d){case 0:ue(le,100151),le.u(null);break;case 1:ue(le,100152),le.t()}else switch(le.d){case 2:ue(le,100154),le.v();break;case 1:ue(le,100153),le.w()}}function ue(le,de){le.p&&le.p(de,le.c)}function ge(le,de){this.b=le||this,this.d=de||this,this.a=null,this.c=!1}function xe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Le(){this.c=new we,this.a=new ge,this.b=new xe,this.d=new xe,this.b.b=this.d,this.d.b=this.b}function we(le,de){this.e=le||this,this.f=de||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ee(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ae}function ae(le,de){var ee,he,Pe;return le.e?(2*(he=++(ee=le.b).a)>ee.f&&(ee.f*=2,ee.c=Be(ee.c,ee.f+1)),ee.b===0?Pe=he:(Pe=ee.b,ee.b=ee.c[ee.b]),ee.e[Pe]=de,ee.c[Pe]=he,ee.d[he]=Pe,ee.h&&Ve(ee,he),Pe):(ee=le.a++,le.c[ee]=de,-(ee+1))}function ne(le){if(le.a===0)return Oe(le.b);var de=le.c[le.d[le.a-1]];if(le.b.a!==0&&l(Fe(le.b),de))return Oe(le.b);for(;--le.a,0<le.a&&le.c[le.d[le.a-1]]===null;);return de}function Ae(){this.d=Be([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Be(le,de){for(var ee=Array(de),he=0;he<le.length;he++)ee[he]=le[he];for(;he<de;he++)ee[he]=0;return ee}function Fe(le){return le.e[le.d[1]]}function Oe(le){var de=le.d,ee=le.e,he=le.c,Pe=de[1],ye=ee[Pe];return 0<le.a&&(de[1]=de[le.a],he[de[1]]=1,ee[Pe]=null,he[Pe]=le.b,le.b=Pe,0<--le.a&&Je(le,1)),ye}function Je(le,de){for(var ee=le.d,he=le.e,Pe=le.c,ye=de,De=ee[ye];;){var Me=ye<<1,qe=(Me<le.a&&l(he[ee[Me+1]],he[ee[Me]])&&(Me+=1),ee[Me]);if(Me>le.a||l(he[De],he[qe])){Pe[ee[ye]=De]=ye;break}Pe[ee[ye]=qe]=ye,ye=Me}}function Ve(le,de){for(var ee=le.d,he=le.e,Pe=le.c,ye=de,De=ee[ye];;){var Me=ye>>1,qe=ee[Me];if(Me==0||l(he[qe],he[De])){Pe[ee[ye]=De]=ye;break}Pe[ee[ye]=qe]=ye,ye=Me}}function Se(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function We(le){return le.e.c.b}function Re(le){return le.e.a.b}(a=ce.prototype).x=function(){te(this,0)},a.B=function(le,de){switch(le){case 100142:return;case 100140:switch(de){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=de)}break;case 100141:return void(this.m=!!de);default:return void ue(this,100900)}ue(this,100901)},a.y=function(le){switch(le){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ue(this,100900)}return!1},a.A=function(le,de,ee){this.j[0]=le,this.j[1]=de,this.j[2]=ee},a.z=function(le,de){var ee=de||null;switch(le){case 100100:case 100106:this.h=ee;break;case 100104:case 100110:this.l=ee;break;case 100101:case 100107:this.k=ee;break;case 100102:case 100108:this.i=ee;break;case 100103:case 100109:this.p=ee;break;case 100105:case 100111:this.o=ee;break;case 100112:this.r=ee;break;default:ue(this,100900)}},a.C=function(le,de){var ee=!1,he=[0,0,0];te(this,2);for(var Pe=0;Pe<3;++Pe){var ye=le[Pe];ye<-1e150&&(ye=-1e150,ee=!0),1e150<ye&&(ye=1e150,ee=!0),he[Pe]=ye}ee&&ue(this,100155),(ee=this.q)===null?v(ee=y(this.b),ee.b):(_(ee),ee=ee.e),ee.a.d=de,ee.a.g[0]=he[0],ee.a.g[1]=he[1],ee.a.g[2]=he[2],ee.f=1,ee.b.f=-1,this.q=ee},a.u=function(le){te(this,0),this.d=1,this.b=new Le,this.c=le},a.t=function(){te(this,1),this.d=2,this.q=null},a.v=function(){te(this,2),this.d=1},a.w=function(){te(this,1),this.d=0;var le,de,ee=this.j[0],he=this.j[1],Pe=this.j[2],ye=!1,De=[ee,he,Pe];if(ee===0&&he===0&&Pe===0){for(var he=[-2e150,-2e150,-2e150],Me=[2e150,2e150,2e150],Pe=[],qe=[],ee=(ye=this.b.c).e;ee!==ye;ee=ee.e)for(var ke=0;ke<3;++ke){var Ye=ee.g[ke];Ye<Me[ke]&&(Me[ke]=Ye,qe[ke]=ee),Ye>he[ke]&&(he[ke]=Ye,Pe[ke]=ee)}if(he[1]-Me[1]>he[ee=0]-Me[0]&&(ee=1),Me[ee=he[2]-Me[2]>he[ee]-Me[ee]?2:ee]>=he[ee])De[0]=0,De[1]=0,De[2]=1;else{for(Me=qe[ee],Pe=Pe[ee],qe=[he=0,0,0],Me=[Me.g[0]-Pe.g[0],Me.g[1]-Pe.g[1],Me.g[2]-Pe.g[2]],ke=[0,0,0],ee=ye.e;ee!==ye;ee=ee.e)ke[0]=ee.g[0]-Pe.g[0],ke[1]=ee.g[1]-Pe.g[1],ke[2]=ee.g[2]-Pe.g[2],qe[0]=Me[1]*ke[2]-Me[2]*ke[1],qe[1]=Me[2]*ke[0]-Me[0]*ke[2],qe[2]=Me[0]*ke[1]-Me[1]*ke[0],he<(Ye=qe[0]*qe[0]+qe[1]*qe[1]+qe[2]*qe[2])&&(he=Ye,De[0]=qe[0],De[1]=qe[1],De[2]=qe[2]);he<=0&&(De[0]=De[1]=De[2]=0,De[C(Me)]=1)}ye=!0}for(qe=C(De),ee=this.b.c,he=(qe+1)%3,Pe=(qe+2)%3,qe=0<De[qe]?1:-1,De=ee.e;De!==ee;De=De.e)De.b=De.g[he],De.a=qe*De.g[Pe];if(ye){for(De=0,ee=(ye=this.b.a).b;ee!==ye;ee=ee.b)if(!((he=ee.a).f<=0))for(;De+=(he.a.b-he.b.a.b)*(he.a.a+he.b.a.a),(he=he.e)!==ee.a;);if(De<0)for(ye=(De=this.b.c).e;ye!==De;ye=ye.e)ye.a=-ye.a}for(this.n=!1,De=this.b.b,ee=De.h;ee!==De;ee=ye)ye=ee.h,he=ee.e,u(ee.a,ee.b.a)&&ee.e.e!==ee&&(I(this,he,ee),g(ee),he=(ee=he).e),he.e===ee&&(he!==ee&&(he!==ye&&he!==ye.b||(ye=ye.h),g(he)),ee!==ye&&ee!==ye.b||(ye=ye.h),g(ee));for(this.e=De=new Ee,ye=this.b.c,ee=ye.e;ee!==ye;ee=ee.e)ee.h=ae(De,ee);var dt=De;dt.d=[];for(var at=0;at<dt.a;at++)dt.d[at]=at;dt.d.sort(function(_t){return function(vt,Bt){return l(_t[vt],_t[Bt])?1:-1}}(dt.c)),dt.e=!0;for(var ct=dt.b,xt=ct.a;1<=xt;--xt)Je(ct,xt);for(ct.h=!0,this.f=new pe(this),oe(this,-4e150),oe(this,4e150);(De=ne(this.e))!==null;){for(;;){e:if((ee=this.e).a===0)ye=Fe(ee.b);else if(ye=ee.c[ee.d[ee.a-1]],ee.b.a!==0&&l(ee=Fe(ee.b),ye)){ye=ee;break e}if(ye===null||!u(ye,De))break;ye=ne(this.e),I(this,De.c,ye.c)}(function _t(vt,Bt){for(var qt,Wt=(vt.a=Bt).c;Wt.i===null;)if((Wt=Wt.c)===Bt.c){var Wt=vt,tr=Bt;(dr=new Se).a=tr.c.b;for(var Mr=(Jt=Wt.f).a;(Mr=Mr.a).b!==null&&!Jt.c(Jt.b,dr,Mr.b););var Jt,Lr,Cr=We(Jt=Mr.b),dr=Jt.a,Mr=Cr.a;return void(d(dr.b.a,tr,dr.a)===0?u((dr=Jt.a).a,tr)||u(dr.b.a,tr)||(_(dr.b),Jt.c&&(g(dr.c),Jt.c=!1),v(tr.c,dr),_t(Wt,tr)):(Lr=l(Mr.b.a,dr.b.a)?Jt:Cr,Cr=void 0,Jt.d||Lr.c?(Cr=Lr===Jt?x(tr.c.b,dr.e):x(Mr.b.c.b,tr.c).b,Lr.c?G(Lr,Cr):((Jt=Q(dr=Wt,Jt,Cr)).f=Re(Jt).f+Jt.a.f,Jt.d=V(dr,Jt.f)),_t(Wt,tr)):J(Wt,Jt,tr.c,tr.c,null,!0)))}Jt=(dr=We(Wt=z(Wt.i))).a,(dr=Y(vt,dr,null)).c===Jt?(dr=(Jt=dr).c,Mr=We(Wt),Cr=Wt.a,Lr=Mr.a,qt=!1,Cr.b.a!==Lr.b.a&&q(vt,Wt),u(Cr.a,vt.a)&&(v(dr.b.e,Cr),dr=We(Wt=z(Wt)).a,Y(vt,We(Wt),Mr),qt=!0),u(Lr.a,vt.a)&&(v(Jt,Lr.b.e),Jt=Y(vt,Mr,null),qt=!0),qt?J(vt,Wt,Jt.c,dr,dr,!0):(tr=l(Lr.a,Cr.a)?Lr.b.e:Cr,J(vt,Wt,tr=x(Jt.c.b,tr),tr.c,tr.c,!1),tr.b.i.c=!0,Z(vt,Wt))):J(vt,Wt,dr.c,Jt,Jt,!0)})(this,De)}for(this.a=this.f.a.a.b.a.a,De=0;(ye=this.f.a.a.b)!==null;)ye.h||++De,F(ye);for(this.f=null,(De=this.e).b=null,De.d=null,this.e=De.c=null,De=this.b,ee=De.a.b;ee!==De.a;ee=ye)ye=ee.b,(ee=ee.a).e.e===ee&&(k(ee.c,ee),g(ee));if(!this.n){if(De=this.b,this.m)for(ee=De.b.h;ee!==De.b;ee=ye)ye=ee.h,ee.b.d.c!==ee.d.c?ee.f=ee.d.c?1:-1:g(ee);else for(ee=De.a.b;ee!==De.a;ee=ye)if(ye=ee.b,ee.c){for(ee=ee.a;l(ee.b.a,ee.a);ee=ee.c.b);for(;l(ee.a,ee.b.a);ee=ee.e);for(he=ee.c.b,Pe=void 0;ee.e!==he;)if(l(ee.b.a,he.a)){for(;he.e!==ee&&(l((de=he.e).b.a,de.a)||d(he.a,he.b.a,he.e.b.a)<=0);)he=(Pe=x(he.e,he)).b;he=he.c.b}else{for(;he.e!==ee&&(l((le=ee.c.b).a,le.b.a)||0<=d(ee.b.a,ee.a,ee.c.b.a));)ee=(Pe=x(ee,ee.c.b)).b;ee=ee.e}for(;he.e.e!==ee;)Pe=x(he.e,he),he=Pe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(ye=(De=this.b).a.b;ye!==De.a;ye=ye.b)if(ye.c){for(this.h&&this.h(2,this.c),ee=ye.a;this.k&&this.k(ee.a.d,this.c),(ee=ee.e)!==ye.a;);this.i&&this.i(this.c)}}else{for(De=this.b,ye=!!this.l,ee=!1,he=-1,Pe=De.a.d;Pe!==De.a;Pe=Pe.d)if(Pe.c)for(ee||(this.h&&this.h(4,this.c),ee=!0),qe=Pe.a;ye&&(Me=qe.b.d.c?0:1,he!==Me&&(he=Me,this.l&&this.l(!!he,this.c))),this.k&&this.k(qe.a.d,this.c),(qe=qe.e)!==Pe.a;);ee&&this.i&&this.i(this.c)}if(this.r){for(De=this.b,ee=De.a.b;ee!==De.a;ee=ye)if(ye=ee.b,!ee.c){for(Pe=(he=ee.a).e,qe=void 0;Pe=(qe=Pe).e,(qe.d=null)===qe.b.d&&(qe.c===qe?L(qe.a,null):(qe.a.c=qe.c,S(qe,qe.b.e)),(Me=qe.b).c===Me?L(Me.a,null):(Me.a.c=Me.c,S(Me,Me.b.e)),R(qe)),qe!==he;);he=ee.d,((ee=ee.b).d=he).b=ee}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ce,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ce.prototype.gluDeleteTess=ce.prototype.x,ce.prototype.gluTessProperty=ce.prototype.B,ce.prototype.gluGetTessProperty=ce.prototype.y,ce.prototype.gluTessNormal=ce.prototype.A,ce.prototype.gluTessCallback=ce.prototype.z,ce.prototype.gluTessVertex=ce.prototype.C,ce.prototype.gluTessBeginPolygon=ce.prototype.u,ce.prototype.gluTessBeginContour=ce.prototype.t,ce.prototype.gluTessEndContour=ce.prototype.v,ce.prototype.gluTessEndPolygon=ce.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],253:[function(r,s,o){function a(l,c,d,p){var f=0,h=(p=p===void 0?{}:p).loop===void 0?null:p.loop,m=p.palette===void 0?null:p.palette;if(c<=0||d<=0||65535<c||65535<d)throw new Error("Width/Height invalid.");function y(M){if(M=M.length,M<2||256<M||M&M-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return M}l[f++]=71,l[f++]=73,l[f++]=70,l[f++]=56,l[f++]=57,l[f++]=97;var v=0,g=0;if(m!==null){for(var _=y(m);_>>=1;)++v;if(_=1<<v,--v,p.background!==void 0){if(_<=(g=p.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(l[f++]=255&c,l[f++]=c>>8&255,l[f++]=255&d,l[f++]=d>>8&255,l[f++]=(m!==null?128:0)|v,l[f++]=g,l[f++]=0,m!==null)for(var x=0,b=m.length;x<b;++x){var S=m[x];l[f++]=S>>16&255,l[f++]=S>>8&255,l[f++]=255&S}if(h!==null){if(h<0||65535<h)throw new Error("Loop count invalid.");l[f++]=33,l[f++]=255,l[f++]=11,l[f++]=78,l[f++]=69,l[f++]=84,l[f++]=83,l[f++]=67,l[f++]=65,l[f++]=80,l[f++]=69,l[f++]=50,l[f++]=46,l[f++]=48,l[f++]=3,l[f++]=1,l[f++]=255&h,l[f++]=h>>8&255,l[f++]=0}var T=!1;this.addFrame=function(M,R,L,P,C,k){if(T===!0&&(--f,T=!1),k=k===void 0?{}:k,M<0||R<0||65535<M||65535<R)throw new Error("x/y invalid.");if(L<=0||P<=0||65535<L||65535<P)throw new Error("Width/Height invalid.");if(C.length<L*P)throw new Error("Not enough pixels for the frame size.");var D=!0,F=k.palette;if(F==null&&(D=!1,F=m),F==null)throw new Error("Must supply either a local or global palette.");for(var z=y(F),G=0;z>>=1;)++G;var z=1<<G,Q=k.delay===void 0?0:k.delay,V=k.disposal===void 0?0:k.disposal;if(V<0||3<V)throw new Error("Disposal out of range.");var W=!1,Y=0;if(k.transparent!==void 0&&k.transparent!==null&&(W=!0,(Y=k.transparent)<0||z<=Y))throw new Error("Transparent color index.");if(V===0&&!W&&Q===0||(l[f++]=33,l[f++]=249,l[f++]=4,l[f++]=V<<2|(W===!0?1:0),l[f++]=255&Q,l[f++]=Q>>8&255,l[f++]=Y,l[f++]=0),l[f++]=44,l[f++]=255&M,l[f++]=M>>8&255,l[f++]=255&R,l[f++]=R>>8&255,l[f++]=255&L,l[f++]=L>>8&255,l[f++]=255&P,l[f++]=P>>8&255,l[f++]=D===!0?128|G-1:0,D===!0)for(var J=0,ie=F.length;J<ie;++J){var I=F[J];l[f++]=I>>16&255,l[f++]=I>>8&255,l[f++]=255&I}return f=function(O,H,q,Z){O[H++]=q;var oe=H++,pe=1<<q,be=pe-1,me=1+pe,ce=1+me,te=q+1,ue=0,ge=0;function xe(Oe){for(;Oe<=ue;)O[H++]=255&ge,ge>>=8,ue-=8,H===oe+256&&(O[oe]=255,oe=H++)}function Le(Oe){ge|=Oe<<ue,ue+=te,xe(8)}var we=Z[0]&be,Ee={};Le(pe);for(var ae=1,ne=Z.length;ae<ne;++ae){var Ae=Z[ae]&be,Be=we<<8|Ae,Fe=Ee[Be];if(Fe===void 0){for(ge|=we<<ue,ue+=te;8<=ue;)O[H++]=255&ge,ge>>=8,ue-=8,H===oe+256&&(O[oe]=255,oe=H++);ce===4096?(Le(pe),ce=1+me,te=q+1,Ee={}):(1<<te<=ce&&++te,Ee[Be]=ce++),we=Ae}else we=Fe}return Le(we),Le(me),xe(1),oe+1===H?O[oe]=0:(O[oe]=H-oe-1,O[H++]=0),H}(l,f,G<2?2:G,C)},this.end=function(){return T===!1&&(l[f++]=59,T=!0),f},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(M){l=M},this.getOutputBufferPosition=function(){return f},this.setOutputBufferPosition=function(M){f=M}}function u(l,c,d,p){for(var f=l[c++],h=1<<f,m=1+h,y=1+m,v=f+1,g=(1<<v)-1,_=0,x=0,b=0,S=l[c++],T=new Int32Array(4096),M=null;;){for(;_<16&&S!==0;)x|=l[c++]<<_,_+=8,S===1?S=l[c++]:--S;if(_<v)break;var R=x&g;if(x>>=v,_-=v,R==h)y=1+m,g=(1<<(v=f+1))-1,M=null;else{if(R==m)break;for(var L=R<y?R:M,P=0,C=L;h<C;)C=T[C]>>8,++P;var k=C;if(p<b+P+(L!==R?1:0))return void console.log("Warning, gif stream longer than expected.");d[b++]=k;var D=b+=P;for(L!==R&&(d[b++]=k),C=L;P--;)C=T[C],d[--D]=255&C,C>>=8;M!==null&&y<4096&&(T[y++]=M<<8|k,g+1<=y&&v<12&&(++v,g=g<<1|1)),M=R}}b!==p&&console.log("Warning, gif stream shorter than expected.")}try{o.GifWriter=a,o.GifReader=function(l){var c=0;if(l[c++]!==71||l[c++]!==73||l[c++]!==70||l[c++]!==56||(l[c++]+1&253)!=56||l[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var d=l[c++]|l[c++]<<8,p=l[c++]|l[c++]<<8,f=l[c++],h=1<<1+(7&f),m=(l[c++],l[c++],null),y=null,v=(f>>7&&(m=c,c+=3*(y=h)),!0),g=[],_=0,x=null,b=0,S=null;for(this.width=d,this.height=p;v&&c<l.length;)switch(l[c++]){case 33:switch(l[c++]){case 255:if(l[c]!==11||l[c+1]==78&&l[c+2]==69&&l[c+3]==84&&l[c+4]==83&&l[c+5]==67&&l[c+6]==65&&l[c+7]==80&&l[c+8]==69&&l[c+9]==50&&l[c+10]==46&&l[c+11]==48&&l[c+12]==3&&l[c+13]==1&&l[c+16]==0)c+=14,S=l[c++]|l[c++]<<8,c++;else for(c+=12;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;case 249:if(l[c++]!==4||l[c+4]!==0)throw new Error("Invalid graphics extension block.");var T=l[c++],_=l[c++]|l[c++]<<8,x=l[c++];!(1&T)&&(x=null),b=T>>2&7,c++;break;case 254:for(;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;default:throw new Error("Unknown graphic control label: 0x"+l[c-1].toString(16))}break;case 44:var M,R=l[c++]|l[c++]<<8,L=l[c++]|l[c++]<<8,P=l[c++]|l[c++]<<8,C=l[c++]|l[c++]<<8,Q=l[c++],k=Q>>6&1,D=1<<1+(7&Q),F=m,G=y,z=!1,Q=(Q>>7&&(z=!0,F=c,c+=3*(G=D)),c);for(c++;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}g.push({x:R,y:L,width:P,height:C,has_local_palette:z,palette_offset:F,palette_size:G,data_offset:Q,data_length:c-Q,transparent_index:x,interlaced:!!k,delay:_,disposal:b});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+l[c-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return S},this.frameInfo=function(V){if(V<0||V>=g.length)throw new Error("Frame index out of range.");return g[V]},this.decodeAndBlitFrameBGRA=function(V,W){for(var V=this.frameInfo(V),Y=V.width*V.height,J=new Uint8Array(Y),ie=(u(l,V.data_offset,J,Y),V.palette_offset),I=V.transparent_index,O=(I===null&&(I=256),V.width),H=d-O,q=O,Z=4*(V.y*d+V.x),oe=4*((V.y+V.height)*d+V.x),pe=Z,be=4*H,me=(V.interlaced===!0&&(be+=4*d*7),8),ce=0,te=J.length;ce<te;++ce){var ue,ge,xe=J[ce];q===0&&(q=O,oe<=(pe+=be)&&(be=4*H+4*d*(me-1),pe=Z+(O+H)*(me<<1),me>>=1)),xe===I?pe+=4:(ue=l[ie+3*xe],ge=l[ie+3*xe+1],xe=l[ie+3*xe+2],W[pe++]=xe,W[pe++]=ge,W[pe++]=ue,W[pe++]=255),--q}},this.decodeAndBlitFrameRGBA=function(V,W){for(var V=this.frameInfo(V),Y=V.width*V.height,J=new Uint8Array(Y),ie=(u(l,V.data_offset,J,Y),V.palette_offset),I=V.transparent_index,O=(I===null&&(I=256),V.width),H=d-O,q=O,Z=4*(V.y*d+V.x),oe=4*((V.y+V.height)*d+V.x),pe=Z,be=4*H,me=(V.interlaced===!0&&(be+=4*d*7),8),ce=0,te=J.length;ce<te;++ce){var ue,ge,xe=J[ce];q===0&&(q=O,oe<=(pe+=be)&&(be=4*H+4*d*(me-1),pe=Z+(O+H)*(me<<1),me>>=1)),xe===I?pe+=4:(ue=l[ie+3*xe],ge=l[ie+3*xe+1],xe=l[ie+3*xe+2],W[pe++]=ue,W[pe++]=ge,W[pe++]=xe,W[pe++]=255),--q}}}}catch{}},{}],254:[function(r,s,o){(function(a){var u,l;u=this,l=function(c){function d(K){if(this==null)throw TypeError();var j,B=String(this),N=B.length,K=K?Number(K):0;if(!((K=K!=K?0:K)<0||N<=K))return 55296<=(j=B.charCodeAt(K))&&j<=56319&&K+1<N&&56320<=(N=B.charCodeAt(K+1))&&N<=57343?1024*(j-55296)+N-56320+65536:j}String.prototype.codePointAt||((p=function(){try{var E={},j=Object.defineProperty,B=j(E,E,E)&&j}catch{}return B}())?p(String.prototype,"codePointAt",{value:d,configurable:!0,writable:!0}):String.prototype.codePointAt=d);var p,f=0,h=-3;function m(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(E,j){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=j,this.destLen=0,this.ltree=new m,this.dtree=new m}var v=new m,g=new m,_=new Uint8Array(30),x=new Uint16Array(30),b=new Uint8Array(30),S=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new m,R=new Uint8Array(320);function L(E,j,B,N){for(var K,re=0;re<B;++re)E[re]=0;for(re=0;re<30-B;++re)E[re+B]=re/B|0;for(K=N,re=0;re<30;++re)j[re]=K,K+=1<<E[re]}var P=new Uint16Array(16);function C(E,j,B,N){for(var K,re=0;re<16;++re)E.table[re]=0;for(re=0;re<N;++re)E.table[j[B+re]]++;for(re=K=E.table[0]=0;re<16;++re)P[re]=K,K+=E.table[re];for(re=0;re<N;++re)j[B+re]&&(E.trans[P[j[B+re]]++]=re)}function k(E,j,B){if(!j)return B;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var N=E.tag&65535>>>16-j;return E.tag>>>=j,E.bitcount-=j,N+B}function D(E,j){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var B=0,N=0,K=0,re=E.tag;N=2*N+(1&re),re>>>=1,B+=j.table[++K],0<=(N-=j.table[K]););return E.tag=re,E.bitcount-=K,j.trans[B+N]}function F(E,j,B){for(;;){var N=D(E,j);if(N===256)return f;if(N<256)E.dest[E.destLen++]=N;else for(var K,re=k(E,_[N-=257],x[N]),N=D(E,B),se=K=E.destLen-k(E,b[N],S[N]);se<K+re;++se)E.dest[E.destLen++]=E.dest[se]}}for(var G=v,z=g,Q=0;Q<7;++Q)G.table[Q]=0;for(G.table[7]=24,G.table[8]=152,G.table[9]=112,Q=0;Q<24;++Q)G.trans[Q]=256+Q;for(Q=0;Q<144;++Q)G.trans[24+Q]=Q;for(Q=0;Q<8;++Q)G.trans[168+Q]=280+Q;for(Q=0;Q<112;++Q)G.trans[176+Q]=144+Q;for(Q=0;Q<5;++Q)z.table[Q]=0;for(z.table[5]=32,Q=0;Q<32;++Q)z.trans[Q]=Q;L(_,x,4,3),L(b,S,2,1),_[28]=0,x[28]=258;var V=function(E,j){var B,N,K,re=new y(E,j);do{switch(K=void 0,(N=re).bitcount--||(N.tag=N.source[N.sourceIndex++],N.bitcount=7),K=1&N.tag,N.tag>>>=1,N=K,k(re,2,0)){case 0:B=function(rt){for(var Ft,Zt;8<rt.bitcount;)rt.sourceIndex--,rt.bitcount-=8;if((Ft=256*rt.source[rt.sourceIndex+1]+rt.source[rt.sourceIndex])!==(65535&~(256*rt.source[rt.sourceIndex+3]+rt.source[rt.sourceIndex+2])))return h;for(rt.sourceIndex+=4,Zt=Ft;Zt;--Zt)rt.dest[rt.destLen++]=rt.source[rt.sourceIndex++];return rt.bitcount=0,f}(re);break;case 1:B=F(re,v,g);break;case 2:ft=it=yt=nt=se=Ue=Ke=Ze=Xe=Te=Ie=_e=void 0;for(var se,_e=re,Ie=re.ltree,Te=re.dtree,Xe=k(_e,5,257),Ze=k(_e,5,1),Ke=k(_e,4,4),Ue=0;Ue<19;++Ue)R[Ue]=0;for(Ue=0;Ue<Ke;++Ue){var yt=k(_e,3,0);R[T[Ue]]=yt}for(C(M,R,0,19),se=0;se<Xe+Ze;){var it=D(_e,M);switch(it){case 16:for(var ft=R[se-1],nt=k(_e,2,3);nt;--nt)R[se++]=ft;break;case 17:for(nt=k(_e,3,3);nt;--nt)R[se++]=0;break;case 18:for(nt=k(_e,7,11);nt;--nt)R[se++]=0;break;default:R[se++]=it}}C(Ie,R,0,Xe),C(Te,R,Xe,Ze),B=F(re,re.ltree,re.dtree);break;default:B=h}if(B!==f)throw new Error("Data error")}while(!N);return re.destLen<re.dest.length?typeof re.dest.slice=="function"?re.dest.slice(0,re.destLen):re.dest.subarray(0,re.destLen):re.dest};function W(E,j,B,N,K){return Math.pow(1-K,3)*E+3*Math.pow(1-K,2)*K*j+3*(1-K)*Math.pow(K,2)*B+Math.pow(K,3)*N}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function J(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ie(E){throw new Error(E)}function I(E,j){E||ie(j)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(E,j){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof j=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))},Y.prototype.addX=function(E){this.addPoint(E,null)},Y.prototype.addY=function(E){this.addPoint(null,E)},Y.prototype.addBezier=function(E,j,B,N,K,re,se,_e){var Ie=[E,j],Te=[B,N],Xe=[K,re],Ze=[se,_e];this.addPoint(E,j),this.addPoint(se,_e);for(var Ke=0;Ke<=1;Ke++){var Ue,yt=6*Ie[Ke]-12*Te[Ke]+6*Xe[Ke],it=-3*Ie[Ke]+9*Te[Ke]-9*Xe[Ke]+3*Ze[Ke],ft=3*Te[Ke]-3*Ie[Ke];it==0?yt==0||0<(Ue=-ft/yt)&&Ue<1&&(Ke===0&&this.addX(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],Ue)),Ke===1&&this.addY(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],Ue))):(Ue=Math.pow(yt,2)-4*ft*it)<0||(0<(ft=(-yt+Math.sqrt(Ue))/(2*it))&&ft<1&&(Ke===0&&this.addX(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],ft)),Ke===1&&this.addY(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],ft))),0<(ft=(-yt-Math.sqrt(Ue))/(2*it))&&ft<1&&(Ke===0&&this.addX(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],ft)),Ke===1&&this.addY(W(Ie[Ke],Te[Ke],Xe[Ke],Ze[Ke],ft))))}},Y.prototype.addQuad=function(E,j,B,N,K,re){B=E+2/3*(B-E),N=j+2/3*(N-j),this.addBezier(E,j,B,N,B+1/3*(K-E),N+1/3*(re-j),K,re)},J.prototype.moveTo=function(E,j){this.commands.push({type:"M",x:E,y:j})},J.prototype.lineTo=function(E,j){this.commands.push({type:"L",x:E,y:j})},J.prototype.curveTo=J.prototype.bezierCurveTo=function(E,j,B,N,K,re){this.commands.push({type:"C",x1:E,y1:j,x2:B,y2:N,x:K,y:re})},J.prototype.quadTo=J.prototype.quadraticCurveTo=function(E,j,B,N){this.commands.push({type:"Q",x1:E,y1:j,x:B,y:N})},J.prototype.close=J.prototype.closePath=function(){this.commands.push({type:"Z"})},J.prototype.extend=function(E){var j;if(E.commands)E=E.commands;else if(E instanceof Y)return j=E,this.moveTo(j.x1,j.y1),this.lineTo(j.x2,j.y1),this.lineTo(j.x2,j.y2),this.lineTo(j.x1,j.y2),void this.close();Array.prototype.push.apply(this.commands,E)},J.prototype.getBoundingBox=function(){for(var E=new Y,j=0,B=0,N=0,K=0,re=0;re<this.commands.length;re++){var se=this.commands[re];switch(se.type){case"M":E.addPoint(se.x,se.y),j=N=se.x,B=K=se.y;break;case"L":E.addPoint(se.x,se.y),N=se.x,K=se.y;break;case"Q":E.addQuad(N,K,se.x1,se.y1,se.x,se.y),N=se.x,K=se.y;break;case"C":E.addBezier(N,K,se.x1,se.y1,se.x2,se.y2,se.x,se.y),N=se.x,K=se.y;break;case"Z":N=j,K=B;break;default:throw new Error("Unexpected path command "+se.type)}}return E.isEmpty()&&E.addPoint(0,0),E},J.prototype.draw=function(E){E.beginPath();for(var j=0;j<this.commands.length;j+=1){var B=this.commands[j];B.type==="M"?E.moveTo(B.x,B.y):B.type==="L"?E.lineTo(B.x,B.y):B.type==="C"?E.bezierCurveTo(B.x1,B.y1,B.x2,B.y2,B.x,B.y):B.type==="Q"?E.quadraticCurveTo(B.x1,B.y1,B.x,B.y):B.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},J.prototype.toPathData=function(E){function j(){for(var re=arguments,se="",_e=0;_e<arguments.length;_e+=1){var Ie=re[_e];0<=Ie&&0<_e&&(se+=" "),se+=(Ie=Ie,Math.round(Ie)===Ie?""+Math.round(Ie):Ie.toFixed(E))}return se}E=E!==void 0?E:2;for(var B="",N=0;N<this.commands.length;N+=1){var K=this.commands[N];K.type==="M"?B+="M"+j(K.x,K.y):K.type==="L"?B+="L"+j(K.x,K.y):K.type==="C"?B+="C"+j(K.x1,K.y1,K.x2,K.y2,K.x,K.y):K.type==="Q"?B+="Q"+j(K.x1,K.y1,K.x,K.y):K.type==="Z"&&(B+="Z")}return B},J.prototype.toSVG=function(E){var j=(j='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?j+=' fill="none"':j+=' fill="'+this.fill+'"'),this.stroke&&(j+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),j+="/>"},J.prototype.toDOMElement=function(j){var j=this.toPathData(j),B=document.createElementNS("http://www.w3.org/2000/svg","path");return B.setAttribute("d",j),B};var O={fail:ie,argument:I,assert:I},H={},q={},Z={};function oe(E){return function(){return E}}q.BYTE=function(E){return O.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},Z.BYTE=oe(1),q.CHAR=function(E){return[E.charCodeAt(0)]},Z.CHAR=oe(1),q.CHARARRAY=function(E){for(var j=[],B=0;B<E.length;B+=1)j[B]=E.charCodeAt(B);return j},Z.CHARARRAY=function(E){return E.length},q.USHORT=function(E){return[E>>8&255,255&E]},Z.USHORT=oe(2),q.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},Z.SHORT=oe(2),q.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},Z.UINT24=oe(3),q.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},Z.ULONG=oe(4),q.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},Z.LONG=oe(4),q.FIXED=q.ULONG,Z.FIXED=Z.ULONG,q.FWORD=q.SHORT,Z.FWORD=Z.SHORT,q.UFWORD=q.USHORT,Z.UFWORD=Z.USHORT,q.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},Z.LONGDATETIME=oe(8),q.TAG=function(E){return O.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},Z.TAG=oe(4),q.Card8=q.BYTE,Z.Card8=Z.BYTE,q.Card16=q.USHORT,Z.Card16=Z.USHORT,q.OffSize=q.BYTE,Z.OffSize=Z.BYTE,q.SID=q.USHORT,Z.SID=Z.USHORT,q.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?q.NUMBER16(E):q.NUMBER32(E)},Z.NUMBER=function(E){return q.NUMBER(E).length},q.NUMBER16=function(E){return[28,E>>8&255,255&E]},Z.NUMBER16=oe(3),q.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},Z.NUMBER32=oe(5),q.REAL=function(E){for(var j=E.toString(),B=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(j),N=(B&&(B=parseFloat("1e"+((B[2]?+B[2]:0)+B[1].length)),j=(Math.round(E*B)/B).toString()),""),K=0,re=j.length;K<re;K+=1){var se=j[K];N+=se==="e"?j[++K]==="-"?"c":"b":se==="."?"a":se==="-"?"e":se}for(var _e=[30],Ie=0,Te=(N+=1&N.length?"f":"ff").length;Ie<Te;Ie+=2)_e.push(parseInt(N.substr(Ie,2),16));return _e},Z.REAL=function(E){return q.REAL(E).length},q.NAME=q.CHARARRAY,Z.NAME=Z.CHARARRAY,q.STRING=q.CHARARRAY,Z.STRING=Z.CHARARRAY,H.UTF8=function(E,j,B){for(var N=[],K=B,re=0;re<K;re++,j+=1)N[re]=E.getUint8(j);return String.fromCharCode.apply(null,N)},H.UTF16=function(E,j,B){for(var N=[],K=B/2,re=0;re<K;re++,j+=2)N[re]=E.getUint16(j);return String.fromCharCode.apply(null,N)},q.UTF16=function(E){for(var j=[],B=0;B<E.length;B+=1){var N=E.charCodeAt(B);j[j.length]=N>>8&255,j[j.length]=255&N}return j},Z.UTF16=function(E){return 2*E.length};var pe,be={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},me=(H.MACSTRING=function(E,j,B,N){var K=be[N];if(K!==void 0){for(var re="",se=0;se<B;se++){var _e=E.getUint8(j+se);re+=_e<=127?String.fromCharCode(_e):K[127&_e]}return re}},typeof WeakMap=="function"&&new WeakMap);function ce(E){return-128<=E&&E<=127}q.MACSTRING=function(E,j){var B=function(se){if(!pe)for(var _e in pe={},be)pe[_e]=new String(_e);var Ie=pe[se];if(Ie!==void 0){if(me){var Te=me.get(Ie);if(Te!==void 0)return Te}var Xe=be[se];if(Xe!==void 0){for(var Ze={},Ke=0;Ke<Xe.length;Ke++)Ze[Xe.charCodeAt(Ke)]=Ke+128;return me&&me.set(Ie,Ze),Ze}}}(j);if(B!==void 0){for(var N=[],K=0;K<E.length;K++){var re=E.charCodeAt(K);if(128<=re&&(re=B[re])===void 0)return;N[K]=re}return N}},Z.MACSTRING=function(E,j){return E=q.MACSTRING(E,j),E!==void 0?E.length:0},q.VARDELTAS=function(E){for(var N=0,j=[];N<E.length;)var B=E[N],N=(B===0?function(K,re,se){for(var _e=0,Ie=K.length;re<Ie&&_e<64&&K[re]===0;)++re,++_e;return se.push(128|_e-1),re}:-128<=B&&B<=127?function(K,re,se){for(var _e=0,Ie=K.length,Te=re;Te<Ie&&_e<64;){var Xe=K[Te];if(!ce(Xe)||Xe===0&&Te+1<Ie&&K[Te+1]===0)break;++Te,++_e}se.push(_e-1);for(var Ze=re;Ze<Te;++Ze)se.push(K[Ze]+256&255);return Te}:function(K,re,se){for(var _e=0,Ie=K.length,Te=re;Te<Ie&&_e<64;){var Xe=K[Te];if(Xe===0||ce(Xe)&&Te+1<Ie&&ce(K[Te+1]))break;++Te,++_e}se.push(64|_e-1);for(var Ze=re;Ze<Te;++Ze){var Ke=K[Ze];se.push(Ke+65536>>8&255,Ke+256&255)}return Te})(E,N,j);return j},q.INDEX=function(E){for(var j=1,B=[j],N=[],K=0;K<E.length;K+=1){var re=q.OBJECT(E[K]);Array.prototype.push.apply(N,re),j+=re.length,B.push(j)}if(N.length===0)return[0,0];for(var se=[],_e=1+Math.floor(Math.log(j)/Math.log(2))/8|0,Ie=[void 0,q.BYTE,q.USHORT,q.UINT24,q.ULONG][_e],Te=0;Te<B.length;Te+=1){var Xe=Ie(B[Te]);Array.prototype.push.apply(se,Xe)}return Array.prototype.concat(q.Card16(E.length),q.OffSize(_e),se,N)},Z.INDEX=function(E){return q.INDEX(E).length},q.DICT=function(E){for(var j=[],B=Object.keys(E),N=B.length,K=0;K<N;K+=1){var re=parseInt(B[K],0),se=E[re];j=(j=j.concat(q.OPERAND(se.value,se.type))).concat(q.OPERATOR(re))}return j},Z.DICT=function(E){return q.DICT(E).length},q.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},q.OPERAND=function(E,j){var B=[];if(Array.isArray(j))for(var N=0;N<j.length;N+=1)O.argument(E.length===j.length,"Not enough arguments given for type"+j),B=B.concat(q.OPERAND(E[N],j[N]));else if(j==="SID")B=B.concat(q.NUMBER(E));else if(j==="offset")B=B.concat(q.NUMBER32(E));else if(j==="number")B=B.concat(q.NUMBER(E));else{if(j!=="real")throw new Error("Unknown operand type "+j);B=B.concat(q.REAL(E))}return B},q.OP=q.BYTE,Z.OP=Z.BYTE;var te=typeof WeakMap=="function"&&new WeakMap;function ue(E,j,B){for(var N=0;N<j.length;N+=1){var K=j[N];this[K.name]=K.value}if(this.tableName=E,this.fields=j,B)for(var re=Object.keys(B),se=0;se<re.length;se+=1){var _e=re[se],Ie=B[_e];this[_e]!==void 0&&(this[_e]=Ie)}}function ge(E,j,B){B===void 0&&(B=j.length);var N=new Array(j.length+1);N[0]={name:E+"Count",type:"USHORT",value:B};for(var K=0;K<j.length;K++)N[K+1]={name:E+K,type:"USHORT",value:j[K]};return N}function xe(E,j,B){var N=j.length,K=new Array(N+1);K[0]={name:E+"Count",type:"USHORT",value:N};for(var re=0;re<N;re++)K[re+1]={name:E+re,type:"TABLE",value:B(j[re],re)};return K}function Le(E,j,B){var N=j.length,K=[];K[0]={name:E+"Count",type:"USHORT",value:N};for(var re=0;re<N;re++)K=K.concat(B(j[re],re));return K}function we(E){E.format===1?ue.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ge("glyph",E.glyphs))):O.assert(!1,"Can't create coverage table format 2 yet.")}function Ee(E){ue.call(this,"scriptListTable",Le("scriptRecord",E,function(j,B){var N=j.script,K=N.defaultLangSys;return O.assert(!!K,"Unable to write GSUB: script "+j.tag+" has no default language system."),[{name:"scriptTag"+B,type:"TAG",value:j.tag},{name:"script"+B,type:"TABLE",value:new ue("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ue("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:K.reqFeatureIndex}].concat(ge("featureIndex",K.featureIndexes)))}].concat(Le("langSys",N.langSysRecords,function(re,se){var _e=re.langSys;return[{name:"langSysTag"+se,type:"TAG",value:re.tag},{name:"langSys"+se,type:"TABLE",value:new ue("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:_e.reqFeatureIndex}].concat(ge("featureIndex",_e.featureIndexes)))}]})))}]}))}function ae(E){ue.call(this,"featureListTable",Le("featureRecord",E,function(j,B){var N=j.feature;return[{name:"featureTag"+B,type:"TAG",value:j.tag},{name:"feature"+B,type:"TABLE",value:new ue("featureTable",[{name:"featureParams",type:"USHORT",value:N.featureParams}].concat(ge("lookupListIndex",N.lookupListIndexes)))}]}))}function ne(E,j){ue.call(this,"lookupListTable",xe("lookup",E,function(B){var N=j[B.lookupType];return O.assert(!!N,"Unable to write GSUB lookup type "+B.lookupType+" tables."),new ue("lookupTable",[{name:"lookupType",type:"USHORT",value:B.lookupType},{name:"lookupFlag",type:"USHORT",value:B.lookupFlag}].concat(xe("subtable",B.subtables,N)))}))}q.CHARSTRING=function(E){if(te){var j=te.get(E);if(j!==void 0)return j}for(var re=[],B=E.length,N=0;N<B;N+=1)var K=E[N],re=re.concat(q[K.type](K.value));return te&&te.set(E,re),re},Z.CHARSTRING=function(E){return q.CHARSTRING(E).length},q.OBJECT=function(E){var j=q[E.type];return O.argument(j!==void 0,"No encoding function for type "+E.type),j(E.value)},Z.OBJECT=function(E){var j=Z[E.type];return O.argument(j!==void 0,"No sizeOf function for type "+E.type),j(E.value)},q.TABLE=function(E){for(var j=[],B=E.fields.length,N=[],K=[],re=0;re<B;re+=1){var se=E.fields[re],Ie=q[se.type],_e=(O.argument(Ie!==void 0,"No encoding function for field type "+se.type+" ("+se.name+")"),E[se.name]),Ie=Ie(_e=_e===void 0?se.value:_e);se.type==="TABLE"?(K.push(j.length),j=j.concat([0,0]),N.push(Ie)):j=j.concat(Ie)}for(var Te=0;Te<N.length;Te+=1){var Xe=K[Te],Ze=j.length;O.argument(Ze<65536,"Table "+E.tableName+" too big."),j[Xe]=Ze>>8,j[Xe+1]=255&Ze,j=j.concat(N[Te])}return j},Z.TABLE=function(E){for(var j=0,B=E.fields.length,N=0;N<B;N+=1){var K=E.fields[N],re=Z[K.type],se=(O.argument(re!==void 0,"No sizeOf function for field type "+K.type+" ("+K.name+")"),E[K.name]);j+=re(se=se===void 0?K.value:se),K.type==="TABLE"&&(j+=2)}return j},q.RECORD=q.TABLE,Z.RECORD=Z.TABLE,q.LITERAL=function(E){return E},Z.LITERAL=function(E){return E.length},ue.prototype.encode=function(){return q.TABLE(this)},ue.prototype.sizeOf=function(){return Z.TABLE(this)};var Ae={Table:ue,Record:ue,Coverage:(we.prototype=Object.create(ue.prototype)).constructor=we,ScriptList:(Ee.prototype=Object.create(ue.prototype)).constructor=Ee,FeatureList:(ae.prototype=Object.create(ue.prototype)).constructor=ae,LookupList:(ne.prototype=Object.create(ue.prototype)).constructor=ne,ushortList:ge,tableList:xe,recordList:Le};function Be(E,j){return E.getUint8(j)}function Fe(E,j){return E.getUint16(j,!1)}function Oe(E,j){return E.getUint32(j,!1)}function Je(E,j){return E.getInt16(j,!1)+E.getUint16(j+2,!1)/65535}var Ve={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Se(E,j){this.data=E,this.offset=j,this.relativeOffset=0}Se.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Se.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Se.prototype.parseCard8=Se.prototype.parseByte,Se.prototype.parseCard16=Se.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Se.prototype.parseSID=Se.prototype.parseUShort,Se.prototype.parseOffset16=Se.prototype.parseUShort,Se.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Se.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},Se.prototype.parseOffset32=Se.prototype.parseULong=function(){var E=Oe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Se.prototype.parseFixed=function(){var E=Je(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Se.prototype.parseString=function(E){var j=this.data,B=this.offset+this.relativeOffset,N="";this.relativeOffset+=E;for(var K=0;K<E;K++)N+=String.fromCharCode(j.getUint8(B+K));return N},Se.prototype.parseTag=function(){return this.parseString(4)},Se.prototype.parseLongDateTime=function(){var E=Oe(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},Se.prototype.parseVersion=function(E){var j=Fe(this.data,this.offset+this.relativeOffset),B=Fe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,j+B/(E=E===void 0?4096:E)/10},Se.prototype.skip=function(E,j){this.relativeOffset+=Ve[E]*(j=j===void 0?1:j)},Se.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var j=new Array(E),B=this.data,N=this.offset+this.relativeOffset,K=0;K<E;K++)j[K]=B.getUint32(N),N+=4;return this.relativeOffset+=4*E,j},Se.prototype.parseOffset16List=Se.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var j=new Array(E),B=this.data,N=this.offset+this.relativeOffset,K=0;K<E;K++)j[K]=B.getUint16(N),N+=2;return this.relativeOffset+=2*E,j},Se.prototype.parseShortList=function(E){for(var j=new Array(E),B=this.data,N=this.offset+this.relativeOffset,K=0;K<E;K++)j[K]=B.getInt16(N),N+=2;return this.relativeOffset+=2*E,j},Se.prototype.parseByteList=function(E){for(var j=new Array(E),B=this.data,N=this.offset+this.relativeOffset,K=0;K<E;K++)j[K]=B.getUint8(N++);return this.relativeOffset+=E,j},Se.prototype.parseList=function(E,j){j||(j=E,E=this.parseUShort());for(var B=new Array(E),N=0;N<E;N++)B[N]=j.call(this);return B},Se.prototype.parseList32=function(E,j){j||(j=E,E=this.parseULong());for(var B=new Array(E),N=0;N<E;N++)B[N]=j.call(this);return B},Se.prototype.parseRecordList=function(E,j){j||(j=E,E=this.parseUShort());for(var B=new Array(E),N=Object.keys(j),K=0;K<E;K++){for(var re={},se=0;se<N.length;se++){var _e=N[se],Ie=j[_e];re[_e]=Ie.call(this)}B[K]=re}return B},Se.prototype.parseRecordList32=function(E,j){j||(j=E,E=this.parseULong());for(var B=new Array(E),N=Object.keys(j),K=0;K<E;K++){for(var re={},se=0;se<N.length;se++){var _e=N[se],Ie=j[_e];re[_e]=Ie.call(this)}B[K]=re}return B},Se.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var j=Object.keys(E),B={},N=0;N<j.length;N++){var K=j[N],re=E[K];B[K]=re.call(this)}return B},Se.prototype.parseValueRecord=function(E){var j;if((E=E===void 0?this.parseUShort():E)!==0)return j={},1&E&&(j.xPlacement=this.parseShort()),2&E&&(j.yPlacement=this.parseShort()),4&E&&(j.xAdvance=this.parseShort()),8&E&&(j.yAdvance=this.parseShort()),16&E&&(j.xPlaDevice=void 0,this.parseShort()),32&E&&(j.yPlaDevice=void 0,this.parseShort()),64&E&&(j.xAdvDevice=void 0,this.parseShort()),128&E&&(j.yAdvDevice=void 0,this.parseShort()),j},Se.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),j=this.parseUShort(),B=new Array(j),N=0;N<j;N++)B[N]=this.parseValueRecord(E);return B},Se.prototype.parsePointer=function(E){var j=this.parseOffset16();if(0<j)return new Se(this.data,this.offset+j).parseStruct(E)},Se.prototype.parsePointer32=function(E){var j=this.parseOffset32();if(0<j)return new Se(this.data,this.offset+j).parseStruct(E)},Se.prototype.parseListOfLists=function(E){for(var j=this.parseOffset16List(),B=j.length,N=this.relativeOffset,K=new Array(B),re=0;re<B;re++){var se=j[re];if(se===0)K[re]=void 0;else if(this.relativeOffset=se,E){for(var _e=this.parseOffset16List(),Ie=new Array(_e.length),Te=0;Te<_e.length;Te++)this.relativeOffset=se+_e[Te],Ie[Te]=E.call(this);K[re]=Ie}else K[re]=this.parseUShortList()}return this.relativeOffset=N,K},Se.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,j=this.parseUShort(),B=this.parseUShort();if(j===1)return{format:1,glyphs:this.parseUShortList(B)};if(j!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var N=new Array(B),K=0;K<B;K++)N[K]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:N}},Se.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,j=this.parseUShort();if(j===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(j===2)return{format:2,ranges:this.parseRecordList({start:Se.uShort,end:Se.uShort,classId:Se.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},Se.list=function(E,j){return function(){return this.parseList(E,j)}},Se.list32=function(E,j){return function(){return this.parseList32(E,j)}},Se.recordList=function(E,j){return function(){return this.parseRecordList(E,j)}},Se.recordList32=function(E,j){return function(){return this.parseRecordList32(E,j)}},Se.pointer=function(E){return function(){return this.parsePointer(E)}},Se.pointer32=function(E){return function(){return this.parsePointer32(E)}},Se.tag=Se.prototype.parseTag,Se.byte=Se.prototype.parseByte,Se.uShort=Se.offset16=Se.prototype.parseUShort,Se.uShortList=Se.prototype.parseUShortList,Se.uLong=Se.offset32=Se.prototype.parseULong,Se.uLongList=Se.prototype.parseULongList,Se.struct=Se.prototype.parseStruct,Se.coverage=Se.prototype.parseCoverage,Se.classDef=Se.prototype.parseClassDef;var We={reserved:Se.uShort,reqFeatureIndex:Se.uShort,featureIndexes:Se.uShortList},Re=(Se.prototype.parseScriptList=function(){return this.parsePointer(Se.recordList({tag:Se.tag,script:Se.pointer({defaultLangSys:Se.pointer(We),langSysRecords:Se.recordList({tag:Se.tag,langSys:Se.pointer(We)})})}))||[]},Se.prototype.parseFeatureList=function(){return this.parsePointer(Se.recordList({tag:Se.tag,feature:Se.pointer({featureParams:Se.offset16,lookupListIndexes:Se.uShortList})}))||[]},Se.prototype.parseLookupList=function(E){return this.parsePointer(Se.list(Se.pointer(function(){var j=this.parseUShort(),B=(O.argument(1<=j&&j<=9,"GPOS/GSUB lookup type "+j+" unknown."),this.parseUShort()),N=16&B;return{lookupType:j,lookupFlag:B,subtables:this.parseList(Se.pointer(E[j])),markFilteringSet:N?this.parseUShort():void 0}})))||[]},Se.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),j=this.parseUShort();return O.argument(E===1&&j<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Se.offset32,featureTableSubstitutionOffset:Se.offset32})})||[]},{getByte:Be,getCard8:Be,getUShort:Fe,getCard16:Fe,getShort:function(E,j){return E.getInt16(j,!1)},getULong:Oe,getFixed:Je,getTag:function(E,j){for(var B="",N=j;N<j+4;N+=1)B+=String.fromCharCode(E.getInt8(N));return B},getOffset:function(E,j,B){for(var N=0,K=0;K<B;K+=1)N=(N<<=8)+E.getUint8(j+K);return N},getBytes:function(E,j,B){for(var N=[],K=j;K<B;K+=1)N.push(E.getUint8(K));return N},bytesToString:function(E){for(var j="",B=0;B<E.length;B+=1)j+=String.fromCharCode(E[B]);return j},Parser:Se}),le={parse:function(E,j){for(var B={},N=(B.version=Re.getUShort(E,j),O.argument(B.version===0,"cmap table version should be 0."),B.numTables=Re.getUShort(E,j+2),-1),K=B.numTables-1;0<=K;--K){var re=Re.getUShort(E,j+4+8*K),se=Re.getUShort(E,j+4+8*K+2);if(re===3&&(se===0||se===1||se===10)||re===0&&(se===0||se===1||se===2||se===3||se===4)){N=Re.getULong(E,j+4+8*K+4);break}}if(N===-1)throw new Error("No valid cmap sub-tables found.");var _e=new Re.Parser(E,j+N);if(B.format=_e.parseUShort(),B.format===12){var Ie,Te=B,Xe=_e;Xe.parseUShort(),Te.length=Xe.parseULong(),Te.language=Xe.parseULong(),Te.groupCount=Ie=Xe.parseULong(),Te.glyphIndexMap={};for(var Ze=0;Ze<Ie;Ze+=1)for(var Ke=Xe.parseULong(),Ue=Xe.parseULong(),yt=Xe.parseULong(),it=Ke;it<=Ue;it+=1)Te.glyphIndexMap[it]=yt,yt++}else{if(B.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+B.format+").");var ft=B,nt=E,rt=j,Ft=N;ft.length=_e.parseUShort(),ft.language=_e.parseUShort(),ft.segCount=Zt=_e.parseUShort()>>1,_e.skip("uShort",3),ft.glyphIndexMap={};for(var Zt,Ut=new Re.Parser(nt,rt+Ft+14),Ht=new Re.Parser(nt,rt+Ft+16+2*Zt),ar=new Re.Parser(nt,rt+Ft+16+4*Zt),Dr=new Re.Parser(nt,rt+Ft+16+6*Zt),un=rt+Ft+16+8*Zt,en=0;en<Zt-1;en+=1)for(var zr=void 0,bn=Ut.parseUShort(),si=Ht.parseUShort(),xr=ar.parseShort(),Vr=Dr.parseUShort(),Er=si;Er<=bn;Er+=1)Vr!==0?(un=(un=Dr.offset+Dr.relativeOffset-2)+Vr+2*(Er-si),(zr=Re.getUShort(nt,un))!==0&&(zr=zr+xr&65535)):zr=Er+xr&65535,ft.glyphIndexMap[Er]=zr}return B},make:function(E){for(var j=!0,B=E.length-1;0<B;--B)if(65535<E.get(B).unicode){console.log("Adding CMAP format 12 (needed!)"),j=!1;break}var N,K,re=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:j?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:j?12:20}],se=(re=(re=j?re:re.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Ae.Table("cmap",re));for(se.segments=[],B=0;B<E.length;B+=1){for(var _e=E.get(B),Ie=0;Ie<_e.unicodes.length;Ie+=1)N=_e.unicodes[Ie],K=B,se.segments.push({end:N,start:N,delta:-(N-K),offset:0,glyphIndex:K});se.segments=se.segments.sort(function(rt,Ft){return rt.start-Ft.start})}se.segments.push({end:65535,start:65535,delta:1,offset:0});var Te=se.segments.length,Xe=0,Ze=[],Ke=[],Ue=[],yt=[],it=[],ft=[];for(B=0;B<Te;B+=1){var nt=se.segments[B];nt.end<=65535&&nt.start<=65535?(Ze=Ze.concat({name:"end_"+B,type:"USHORT",value:nt.end}),Ke=Ke.concat({name:"start_"+B,type:"USHORT",value:nt.start}),Ue=Ue.concat({name:"idDelta_"+B,type:"SHORT",value:nt.delta}),yt=yt.concat({name:"idRangeOffset_"+B,type:"USHORT",value:nt.offset}),nt.glyphId!==void 0&&(it=it.concat({name:"glyph_"+B,type:"USHORT",value:nt.glyphId}))):Xe+=1,j||nt.glyphIndex===void 0||(ft=(ft=(ft=ft.concat({name:"cmap12Start_"+B,type:"ULONG",value:nt.start})).concat({name:"cmap12End_"+B,type:"ULONG",value:nt.end})).concat({name:"cmap12Glyph_"+B,type:"ULONG",value:nt.glyphIndex}))}return se.segCountX2=2*(Te-Xe),se.searchRange=2*Math.pow(2,Math.floor(Math.log(Te-Xe)/Math.log(2))),se.entrySelector=Math.log(se.searchRange/2)/Math.log(2),se.rangeShift=se.segCountX2-se.searchRange,se.fields=se.fields.concat(Ze),se.fields.push({name:"reservedPad",type:"USHORT",value:0}),se.fields=se.fields.concat(Ke),se.fields=se.fields.concat(Ue),se.fields=se.fields.concat(yt),se.fields=se.fields.concat(it),se.cmap4Length=14+2*Ze.length+2+2*Ke.length+2*Ue.length+2*yt.length+2*it.length,j||(re=16+4*ft.length,se.cmap12Offset=20+se.cmap4Length,se.fields=se.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:re},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ft.length/3}]),se.fields=se.fields.concat(ft)),se}},de=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ee=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ye(E){this.font=E}function De(E){this.cmap=E}function Me(E,j){this.encoding=E,this.charset=j}function qe(E){switch(E.version){case 1:this.names=Pe.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var j=0;j<E.numberOfGlyphs;j++)E.glyphNameIndex[j]<Pe.length?this.names[j]=Pe[E.glyphNameIndex[j]]:this.names[j]=E.names[E.glyphNameIndex[j]-Pe.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var B=0;B<E.numberOfGlyphs;B++)this.names[B]=Pe[B+E.glyphNameIndex[B]];break;default:this.names=[]}}ye.prototype.charToGlyphIndex=function(E){var j=E.codePointAt(0),B=this.font.glyphs;if(B){for(var N=0;N<B.length;N+=1)for(var K=B.get(N),re=0;re<K.unicodes.length;re+=1)if(K.unicodes[re]===j)return N}return null},De.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},Me.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},qe.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},qe.prototype.glyphIndexToName=function(E){return this.names[E]};var ke={line:function(E,j,B,N,K){E.beginPath(),E.moveTo(j,B),E.lineTo(N,K),E.stroke()}};function Ye(E){this.bindConstructorValues(E)}function dt(E,j,B){Object.defineProperty(E,j,{get:function(){return E.path,E[B]},set:function(N){E[B]=N},enumerable:!0,configurable:!0})}function at(E,j){if(this.font=E,this.glyphs={},Array.isArray(j))for(var B=0;B<j.length;B++)this.glyphs[B]=j[B];this.length=j&&j.length||0}Ye.prototype.bindConstructorValues=function(E){var j;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,j=E||new J,{configurable:!0,get:function(){return j=typeof j=="function"?j():j},set:function(B){j=B}}))},Ye.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},Ye.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ye.prototype.getPath=function(E,j,B,N,K){E=E!==void 0?E:0,j=j!==void 0?j:0,B=B!==void 0?B:72;for(var re,se,_e=(N=N||{}).xScale,Ie=N.yScale,Te=((re=N.hinting&&K&&K.hinting?this.path&&K.hinting.exec(this,B):re)?(se=K.hinting.getCommands(re),E=Math.round(E),j=Math.round(j),_e=Ie=1):(se=this.path.commands,N=1/this.path.unitsPerEm*B,_e===void 0&&(_e=N),Ie===void 0&&(Ie=N)),new J),Xe=0;Xe<se.length;Xe+=1){var Ze=se[Xe];Ze.type==="M"?Te.moveTo(E+Ze.x*_e,j+-Ze.y*Ie):Ze.type==="L"?Te.lineTo(E+Ze.x*_e,j+-Ze.y*Ie):Ze.type==="Q"?Te.quadraticCurveTo(E+Ze.x1*_e,j+-Ze.y1*Ie,E+Ze.x*_e,j+-Ze.y*Ie):Ze.type==="C"?Te.curveTo(E+Ze.x1*_e,j+-Ze.y1*Ie,E+Ze.x2*_e,j+-Ze.y2*Ie,E+Ze.x*_e,j+-Ze.y*Ie):Ze.type==="Z"&&Te.closePath()}return Te},Ye.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],j=[],B=0;B<this.points.length;B+=1){var N=this.points[B];j.push(N),N.lastPointOfContour&&(E.push(j),j=[])}return O.argument(j.length===0,"There are still points left in the current contour."),E},Ye.prototype.getMetrics=function(){for(var E=this.path.commands,j=[],B=[],N=0;N<E.length;N+=1){var K=E[N];K.type!=="Z"&&(j.push(K.x),B.push(K.y)),K.type!=="Q"&&K.type!=="C"||(j.push(K.x1),B.push(K.y1)),K.type==="C"&&(j.push(K.x2),B.push(K.y2))}var re={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,B),leftSideBearing:this.leftSideBearing};return isFinite(re.xMin)||(re.xMin=0),isFinite(re.xMax)||(re.xMax=this.advanceWidth),isFinite(re.yMin)||(re.yMin=0),isFinite(re.yMax)||(re.yMax=0),re.rightSideBearing=this.advanceWidth-re.leftSideBearing-(re.xMax-re.xMin),re},Ye.prototype.draw=function(E,j,B,N,K){this.getPath(j,B,N,K).draw(E)},Ye.prototype.drawPoints=function(E,j,B,N){function K(Xe,Ze,Ke,Ue){var yt=2*Math.PI;E.beginPath();for(var it=0;it<Xe.length;it+=1)E.moveTo(Ze+Xe[it].x*Ue,Ke+Xe[it].y*Ue),E.arc(Ze+Xe[it].x*Ue,Ke+Xe[it].y*Ue,2,0,yt,!1);E.closePath(),E.fill()}j=j!==void 0?j:0,B=B!==void 0?B:0;for(var N=1/this.path.unitsPerEm*(N=N!==void 0?N:24),re=[],se=[],_e=this.path,Ie=0;Ie<_e.commands.length;Ie+=1){var Te=_e.commands[Ie];Te.x!==void 0&&re.push({x:Te.x,y:-Te.y}),Te.x1!==void 0&&se.push({x:Te.x1,y:-Te.y1}),Te.x2!==void 0&&se.push({x:Te.x2,y:-Te.y2})}E.fillStyle="blue",K(re,j,B,N),E.fillStyle="red",K(se,j,B,N)},Ye.prototype.drawMetrics=function(E,j,B,N){j=j!==void 0?j:0,B=B!==void 0?B:0,N=1/this.path.unitsPerEm*(N=N!==void 0?N:24),E.lineWidth=1,E.strokeStyle="black",ke.line(E,j,-1e4,j,1e4),ke.line(E,-1e4,B,1e4,B);var K=this.xMin||0,re=this.yMin||0,se=this.xMax||0,_e=this.yMax||0,Ie=this.advanceWidth||0;E.strokeStyle="blue",ke.line(E,j+K*N,-1e4,j+K*N,1e4),ke.line(E,j+se*N,-1e4,j+se*N,1e4),ke.line(E,-1e4,B+-re*N,1e4,B+-re*N),ke.line(E,-1e4,B+-_e*N,1e4,B+-_e*N),E.strokeStyle="green",ke.line(E,j+Ie*N,-1e4,j+Ie*N,1e4)},at.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},at.prototype.push=function(E,j){this.glyphs[E]=j,this.length++};var ct={GlyphSet:at,glyphLoader:function(E,j){return new Ye({index:j,font:E})},ttfGlyphLoader:function(E,j,B,N,K,re){return function(){var se=new Ye({index:j,font:E});return se.path=function(){B(se,N,K);var _e=re(E.glyphs,se);return _e.unitsPerEm=E.unitsPerEm,_e},dt(se,"xMin","_xMin"),dt(se,"xMax","_xMax"),dt(se,"yMin","_yMin"),dt(se,"yMax","_yMax"),se}},cffGlyphLoader:function(E,j,B,N){return function(){var K=new Ye({index:j,font:E});return K.path=function(){var re=B(E,K,N);return re.unitsPerEm=E.unitsPerEm,re},K}}};function xt(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function _t(E,j,B){var N,K=[],re=[],se=Re.getCard16(E,j);if(se!==0){for(var _e=Re.getByte(E,j+2),Ie=j+(se+1)*_e+2,Te=j+3,Xe=0;Xe<se+1;Xe+=1)K.push(Re.getOffset(E,Te,_e)),Te+=_e;N=Ie+K[se]}else N=j+2;for(var Ze=0;Ze<K.length-1;Ze+=1){var Ke=Re.getBytes(E,Ie+K[Ze],Ie+K[Ze+1]);B&&(Ke=B(Ke)),re.push(Ke)}return{objects:re,startOffset:j,endOffset:N}}function vt(E,j){if(j===28)return E.parseByte()<<8|E.parseByte();if(j===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(j===30){for(var B=E,N="",K=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var se=B.parseByte(),re=se>>4,se=15&se;if(re==15||(N+=K[re],se==15))break;N+=K[se]}return parseFloat(N)}if(32<=j&&j<=246)return j-139;if(247<=j&&j<=250)return 256*(j-247)+E.parseByte()+108;if(251<=j&&j<=254)return 256*-(j-251)-E.parseByte()-108;throw new Error("Invalid b0 "+j)}function Bt(E,j,B){var N=new Re.Parser(E,j=j!==void 0?j:0),K=[],re=[];for(B=B!==void 0?B:E.length;N.relativeOffset<B;){var se=N.parseByte();se<=21?(se===12&&(se=1200+N.parseByte()),K.push([se,re]),re=[]):re.push(vt(N,se))}for(var _e=K,Ie={},Te=0;Te<_e.length;Te+=1){var Xe=_e[Te][0],Ze=_e[Te][1],Ke=void 0,Ke=Ze.length===1?Ze[0]:Ze;if(Ie.hasOwnProperty(Xe)&&!isNaN(Ie[Xe]))throw new Error("Object "+Ie+" already has key "+Xe);Ie[Xe]=Ke}return Ie}function qt(E,j){return j=j<=390?de[j]:E[j-391]}function Wt(E,j,B){for(var N,K={},re=0;re<j.length;re+=1){var se=j[re];if(Array.isArray(se.type)){var _e=[];_e.length=se.type.length;for(var Ie=0;Ie<se.type.length;Ie++)(N=E[se.op]!==void 0?E[se.op][Ie]:void 0)===void 0&&(N=se.value!==void 0&&se.value[Ie]!==void 0?se.value[Ie]:null),se.type[Ie]==="SID"&&(N=qt(B,N)),_e[Ie]=N;K[se.name]=_e}else(N=E[se.op])===void 0&&(N=se.value!==void 0?se.value:null),se.type==="SID"&&(N=qt(B,N)),K[se.name]=N}return K}var tr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Jt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Lr(E,j,B,N){return Wt(Bt(E,j,B),Jt,N)}function Cr(E,j,B,N){for(var K=[],re=0;re<B.length;re+=1){var se=new DataView(new Uint8Array(B[re]).buffer),se=(_e=N,Wt(Bt(se,0,se.byteLength),tr,_e)),_e=(se._subrs=[],se._subrsBias=0,se.private[0]),Ie=se.private[1];_e!==0&&Ie!==0&&(_e=Lr(E,Ie+j,_e,N),se._defaultWidthX=_e.defaultWidthX,se._nominalWidthX=_e.nominalWidthX,_e.subrs!==0&&(Ie=_t(E,Ie+_e.subrs+j),se._subrs=Ie.objects,se._subrsBias=xt(se._subrs)),se._privateDict=_e),K.push(se)}return K}function dr(E,j,B){var N,K,re,se,_e,Ie,Te,Xe,Ze,Ke=new J,Ue=[],yt=0,it=!1,ft=!1,nt=0,rt=0,Ft=(Ze=(E.isCIDFont?(_e=E.tables.cff.topDict._fdSelect[j.index],_e=E.tables.cff.topDict._fdArray[_e],Ie=_e._subrs,Te=_e._subrsBias,Xe=_e._defaultWidthX,_e):(Ie=E.tables.cff.topDict._subrs,Te=E.tables.cff.topDict._subrsBias,Xe=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,Xe);function Zt(Ht,ar){ft&&Ke.closePath(),Ke.moveTo(Ht,ar),ft=!0}function Ut(){Ue.length%2==0||it||(Ft=Ue.shift()+Ze),yt+=Ue.length>>1,Ue.length=0,it=!0}return function Ht(ar){for(var Dr,un,en,zr,bn,si,xr,Vr,Er,Wn,Jr,gr,Nr=0;Nr<ar.length;){var wn=ar[Nr];switch(Nr+=1,wn){case 1:case 3:Ut();break;case 4:1<Ue.length&&!it&&(Ft=Ue.shift()+Ze,it=!0),rt+=Ue.pop(),Zt(nt,rt);break;case 5:for(;0<Ue.length;)nt+=Ue.shift(),rt+=Ue.shift(),Ke.lineTo(nt,rt);break;case 6:for(;0<Ue.length&&(nt+=Ue.shift(),Ke.lineTo(nt,rt),Ue.length!==0);)rt+=Ue.shift(),Ke.lineTo(nt,rt);break;case 7:for(;0<Ue.length&&(rt+=Ue.shift(),Ke.lineTo(nt,rt),Ue.length!==0);)nt+=Ue.shift(),Ke.lineTo(nt,rt);break;case 8:for(;0<Ue.length;)N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se+Ue.shift(),Ke.curveTo(N,K,re,se,nt,rt);break;case 10:bn=Ue.pop()+Te,(si=Ie[bn])&&Ht(si);break;case 11:return;case 12:switch(wn=ar[Nr],Nr+=1,wn){case 35:N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),xr=re+Ue.shift(),Vr=se+Ue.shift(),Er=xr+Ue.shift(),Wn=Vr+Ue.shift(),Jr=Er+Ue.shift(),gr=Wn+Ue.shift(),nt=Jr+Ue.shift(),rt=gr+Ue.shift(),Ue.shift(),Ke.curveTo(N,K,re,se,xr,Vr),Ke.curveTo(Er,Wn,Jr,gr,nt,rt);break;case 34:N=nt+Ue.shift(),K=rt,re=N+Ue.shift(),se=K+Ue.shift(),xr=re+Ue.shift(),Vr=se,Er=xr+Ue.shift(),Wn=se,Jr=Er+Ue.shift(),gr=rt,nt=Jr+Ue.shift(),Ke.curveTo(N,K,re,se,xr,Vr),Ke.curveTo(Er,Wn,Jr,gr,nt,rt);break;case 36:N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),xr=re+Ue.shift(),Vr=se,Er=xr+Ue.shift(),Wn=se,Jr=Er+Ue.shift(),gr=Wn+Ue.shift(),nt=Jr+Ue.shift(),Ke.curveTo(N,K,re,se,xr,Vr),Ke.curveTo(Er,Wn,Jr,gr,nt,rt);break;case 37:N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),xr=re+Ue.shift(),Vr=se+Ue.shift(),Er=xr+Ue.shift(),Wn=Vr+Ue.shift(),Jr=Er+Ue.shift(),gr=Wn+Ue.shift(),Math.abs(Jr-nt)>Math.abs(gr-rt)?nt=Jr+Ue.shift():rt=gr+Ue.shift(),Ke.curveTo(N,K,re,se,xr,Vr),Ke.curveTo(Er,Wn,Jr,gr,nt,rt);break;default:console.log("Glyph "+j.index+": unknown operator 1200"+wn),Ue.length=0}break;case 14:0<Ue.length&&!it&&(Ft=Ue.shift()+Ze,it=!0),ft&&(Ke.closePath(),ft=!1);break;case 18:Ut();break;case 19:case 20:Ut(),Nr+=yt+7>>3;break;case 21:2<Ue.length&&!it&&(Ft=Ue.shift()+Ze,it=!0),rt+=Ue.pop(),Zt(nt+=Ue.pop(),rt);break;case 22:1<Ue.length&&!it&&(Ft=Ue.shift()+Ze,it=!0),Zt(nt+=Ue.pop(),rt);break;case 23:Ut();break;case 24:for(;2<Ue.length;)N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se+Ue.shift(),Ke.curveTo(N,K,re,se,nt,rt);nt+=Ue.shift(),rt+=Ue.shift(),Ke.lineTo(nt,rt);break;case 25:for(;6<Ue.length;)nt+=Ue.shift(),rt+=Ue.shift(),Ke.lineTo(nt,rt);N=nt+Ue.shift(),K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se+Ue.shift(),Ke.curveTo(N,K,re,se,nt,rt);break;case 26:for(Ue.length%2&&(nt+=Ue.shift());0<Ue.length;)N=nt,K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re,rt=se+Ue.shift(),Ke.curveTo(N,K,re,se,nt,rt);break;case 27:for(Ue.length%2&&(rt+=Ue.shift());0<Ue.length;)N=nt+Ue.shift(),K=rt,re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se,Ke.curveTo(N,K,re,se,nt,rt);break;case 28:Dr=ar[Nr],un=ar[Nr+1],Ue.push((Dr<<24|un<<16)>>16),Nr+=2;break;case 29:bn=Ue.pop()+E.gsubrsBias,(si=E.gsubrs[bn])&&Ht(si);break;case 30:for(;0<Ue.length&&(N=nt,K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se+(Ue.length===1?Ue.shift():0),Ke.curveTo(N,K,re,se,nt,rt),Ue.length!==0);)N=nt+Ue.shift(),K=rt,re=N+Ue.shift(),se=K+Ue.shift(),rt=se+Ue.shift(),nt=re+(Ue.length===1?Ue.shift():0),Ke.curveTo(N,K,re,se,nt,rt);break;case 31:for(;0<Ue.length&&(N=nt+Ue.shift(),K=rt,re=N+Ue.shift(),se=K+Ue.shift(),rt=se+Ue.shift(),nt=re+(Ue.length===1?Ue.shift():0),Ke.curveTo(N,K,re,se,nt,rt),Ue.length!==0);)N=nt,K=rt+Ue.shift(),re=N+Ue.shift(),se=K+Ue.shift(),nt=re+Ue.shift(),rt=se+(Ue.length===1?Ue.shift():0),Ke.curveTo(N,K,re,se,nt,rt);break;default:wn<32?console.log("Glyph "+j.index+": unknown operator "+wn):wn<247?Ue.push(wn-139):wn<251?(Dr=ar[Nr],Nr+=1,Ue.push(256*(wn-247)+Dr+108)):wn<255?(Dr=ar[Nr],Nr+=1,Ue.push(256*-(wn-251)-Dr-108)):(Dr=ar[Nr],un=ar[Nr+1],en=ar[Nr+2],zr=ar[Nr+3],Nr+=4,Ue.push((Dr<<24|un<<16|en<<8|zr)/65536))}}}(B),j.advanceWidth=Ft,Ke}function Mr(E,j){var B,N=de.indexOf(E);return 0<=N&&(B=N),0<=(N=j.indexOf(E))?B=N+de.length:(B=de.length+j.length,j.push(E)),B}function Dn(E,j,B){for(var N={},K=0;K<E.length;K+=1){var re=E[K],se=j[re.name];se===void 0||function _e(Ie,Te){if(Ie===Te)return 1;if(Array.isArray(Ie)&&Array.isArray(Te)&&Ie.length===Te.length){for(var Xe=0;Xe<Ie.length;Xe+=1)if(!_e(Ie[Xe],Te[Xe]))return;return 1}}(se,re.value)||(re.type==="SID"&&(se=Mr(se,B)),N[re.op]={name:re.name,type:re.type,value:se})}return N}function Xr(E,j){var B=new Ae.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return B.dict=Dn(tr,E,j),B}function ei(E){var j=new Ae.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return j.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],j}function Ns(E){for(var j=new Ae.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),B=0;B<E.length;B+=1){var N=E.get(B),K=function(re){for(var se=[],_e=re.path,Ie=(se.push({name:"width",type:"NUMBER",value:re.advanceWidth}),0),Te=0,Xe=0;Xe<_e.commands.length;Xe+=1){var Ze,Ke,Ue,yt,it=void 0,ft=void 0,nt=_e.commands[Xe];(nt=nt.type==="Q"?{type:"C",x:nt.x,y:nt.y,x1:1/3*Ie+2/3*nt.x1,y1:1/3*Te+2/3*nt.y1,x2:1/3*nt.x+2/3*nt.x1,y2:1/3*nt.y+2/3*nt.y1}:nt).type==="M"?(it=Math.round(nt.x-Ie),ft=Math.round(nt.y-Te),se.push({name:"dx",type:"NUMBER",value:it}),se.push({name:"dy",type:"NUMBER",value:ft}),se.push({name:"rmoveto",type:"OP",value:21}),Ie=Math.round(nt.x),Te=Math.round(nt.y)):nt.type==="L"?(it=Math.round(nt.x-Ie),ft=Math.round(nt.y-Te),se.push({name:"dx",type:"NUMBER",value:it}),se.push({name:"dy",type:"NUMBER",value:ft}),se.push({name:"rlineto",type:"OP",value:5}),Ie=Math.round(nt.x),Te=Math.round(nt.y)):nt.type==="C"&&(Ze=Math.round(nt.x1-Ie),Ke=Math.round(nt.y1-Te),Ue=Math.round(nt.x2-nt.x1),yt=Math.round(nt.y2-nt.y1),it=Math.round(nt.x-nt.x2),ft=Math.round(nt.y-nt.y2),se.push({name:"dx1",type:"NUMBER",value:Ze}),se.push({name:"dy1",type:"NUMBER",value:Ke}),se.push({name:"dx2",type:"NUMBER",value:Ue}),se.push({name:"dy2",type:"NUMBER",value:yt}),se.push({name:"dx",type:"NUMBER",value:it}),se.push({name:"dy",type:"NUMBER",value:ft}),se.push({name:"rrcurveto",type:"OP",value:8}),Ie=Math.round(nt.x),Te=Math.round(nt.y))}return se.push({name:"endchar",type:"OP",value:14}),se}(N);j.charStrings.push({name:N.name,type:"CHARSTRING",value:K})}return j}var Ss={parse:function(E,j,B){B.tables.cff={},_e=E,N=j,(K={}).formatMajor=Re.getCard8(_e,N),K.formatMinor=Re.getCard8(_e,N+1),K.size=Re.getCard8(_e,N+2),K.offsetSize=Re.getCard8(_e,N+3),K.startOffset=N,K.endOffset=N+4;var _e=_t(E,K.endOffset,Re.bytesToString),N=_t(E,_e.endOffset),K=_t(E,N.endOffset,Re.bytesToString),_e=_t(E,K.endOffset);if(B.gsubrs=_e.objects,B.gsubrsBias=xt(B.gsubrs),(_e=Cr(E,j,N.objects,K.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+_e.length);if(N=_e[0],(B.tables.cff.topDict=N)._privateDict&&(B.defaultWidthX=N._privateDict.defaultWidthX,B.nominalWidthX=N._privateDict.nominalWidthX),N.ros[0]!==void 0&&N.ros[1]!==void 0&&(B.isCIDFont=!0),B.isCIDFont){var _e=N.fdArray,re=N.fdSelect;if(_e===0||re===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");_e=Cr(E,j,_t(E,_e+=j).objects,K.objects),N._fdArray=_e,N._fdSelect=function(Ke,Ue,yt,it){var ft,nt=[],rt=new Re.Parser(Ke,Ue);if((Ke=rt.parseCard8())===0)for(var Ft=0;Ft<yt;Ft++){if(it<=(ft=rt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ft+" (FD count "+it+")");nt.push(ft)}else{if(Ke!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ke);var Zt,Ut=rt.parseCard16(),Ht=rt.parseCard16();if(Ht!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ht);for(var ar=0;ar<Ut;ar++){if(ft=rt.parseCard8(),Zt=rt.parseCard16(),it<=ft)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ft+" (FD count "+it+")");if(yt<Zt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Zt);for(;Ht<Zt;Ht++)nt.push(ft);Ht=Zt}if(Zt!==yt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Zt)}return nt}(E,re+=j,B.numGlyphs,_e.length)}var re=j+N.private[1],_e=Lr(E,re,N.private[0],K.objects),se=(B.defaultWidthX=_e.defaultWidthX,B.nominalWidthX=_e.nominalWidthX,_e.subrs!==0?(re=_t(E,re+_e.subrs),B.subrs=re.objects,B.subrsBias=xt(B.subrs)):(B.subrs=[],B.subrsBias=0),_t(E,j+N.charStrings)),_e=(B.nGlyphs=se.objects.length,function(Xe,Ze,Ke,Ue){var yt=new Re.Parser(Xe,Ze),it=(--Ke,[".notdef"]);if((Xe=yt.parseCard8())===0)for(var ft=0;ft<Ke;ft+=1)nt=yt.parseSID(),it.push(qt(Ue,nt));else if(Xe===1)for(;it.length<=Ke;)for(var nt=yt.parseSID(),rt=yt.parseCard8(),Ft=0;Ft<=rt;Ft+=1)it.push(qt(Ue,nt)),nt+=1;else{if(Xe!==2)throw new Error("Unknown charset format "+Xe);for(;it.length<=Ke;){nt=yt.parseSID(),rt=yt.parseCard16();for(var Zt=0;Zt<=rt;Zt+=1)it.push(qt(Ue,nt)),nt+=1}}return it}(E,j+N.charset,B.nGlyphs,K.objects));N.encoding===0?B.cffEncoding=new Me(ee,_e):N.encoding===1?B.cffEncoding=new Me(he,_e):B.cffEncoding=function(Xe,Ze,Ke){var Ue={},yt=new Re.Parser(Xe,Ze);if((Xe=yt.parseCard8())===0)for(var it=yt.parseCard8(),ft=0;ft<it;ft+=1)Ue[rt=yt.parseCard8()]=ft;else{if(Xe!==1)throw new Error("Unknown encoding format "+Xe);for(var nt=yt.parseCard8(),rt=1,Ft=0;Ft<nt;Ft+=1)for(var Zt=yt.parseCard8(),Ut=yt.parseCard8(),Ht=Zt;Ht<=Zt+Ut;Ht+=1)Ue[Ht]=rt,rt+=1}return new Me(Ue,Ke)}(E,j+N.encoding,_e),B.encoding=B.encoding||B.cffEncoding,B.glyphs=new ct.GlyphSet(B);for(var Ie=0;Ie<B.nGlyphs;Ie+=1){var Te=se.objects[Ie];B.glyphs.push(Ie,ct.cffGlyphLoader(B,Ie,dr,Te))}},make:function(E,Xe){for(var B,N=new Ae.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),K=1/Xe.unitsPerEm,K={version:Xe.version,fullName:Xe.fullName,familyName:Xe.familyName,weight:Xe.weightName,fontBBox:Xe.fontBBox||[0,0,0,0],fontMatrix:[K,0,0,K,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},re=[],se=1;se<E.length;se+=1)B=E.get(se),re.push(B.name);var _e,Ie,Te=[],Xe=(N.header=new Ae.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),N.nameIndex=function(Ke){var Ue=new Ae.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ue.names=[];for(var yt=0;yt<Ke.length;yt+=1)Ue.names.push({name:"name_"+yt,type:"NAME",value:Ke[yt]});return Ue}([Xe.postScriptName]),Xr(K,Te)),Ze=(N.topDictIndex=ei(Xe),N.globalSubrIndex=new Ae.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),N.charsets=function(Ke,Ue){for(var yt=new Ae.Record("Charsets",[{name:"format",type:"Card8",value:0}]),it=0;it<Ke.length;it+=1){var ft=Mr(Ke[it],Ue);yt.fields.push({name:"glyph_"+it,type:"SID",value:ft})}return yt}(re,Te),N.charStringsIndex=Ns(E),N.privateDict=(Ze={},_e=Te,(Ie=new Ae.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Dn(Jt,Ze,_e),Ie),N.stringIndex=function(Ke){var Ue=new Ae.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ue.strings=[];for(var yt=0;yt<Ke.length;yt+=1)Ue.strings.push({name:"string_"+yt,type:"STRING",value:Ke[yt]});return Ue}(Te),N.header.sizeOf()+N.nameIndex.sizeOf()+N.topDictIndex.sizeOf()+N.stringIndex.sizeOf()+N.globalSubrIndex.sizeOf());return K.charset=Ze,K.encoding=0,K.charStrings=K.charset+N.charsets.sizeOf(),K.private[1]=K.charStrings+N.charStringsIndex.sizeOf(),Xe=Xr(K,Te),N.topDictIndex=ei(Xe),N}},po={parse:function(N,j){var B={},N=new Re.Parser(N,j);return B.version=N.parseVersion(),B.fontRevision=Math.round(1e3*N.parseFixed())/1e3,B.checkSumAdjustment=N.parseULong(),B.magicNumber=N.parseULong(),O.argument(B.magicNumber===1594834165,"Font header has wrong magic number."),B.flags=N.parseUShort(),B.unitsPerEm=N.parseUShort(),B.created=N.parseLongDateTime(),B.modified=N.parseLongDateTime(),B.xMin=N.parseShort(),B.yMin=N.parseShort(),B.xMax=N.parseShort(),B.yMax=N.parseShort(),B.macStyle=N.parseUShort(),B.lowestRecPPEM=N.parseUShort(),B.fontDirectionHint=N.parseShort(),B.indexToLocFormat=N.parseShort(),B.glyphDataFormat=N.parseShort(),B},make:function(E){var j=Math.round(new Date().getTime()/1e3)+2082844800,B=j;return E.createdTimestamp&&(B=E.createdTimestamp+2082844800),new Ae.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:B},{name:"modified",type:"LONGDATETIME",value:j},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},Ge={parse:function(N,j){var B={},N=new Re.Parser(N,j);return B.version=N.parseVersion(),B.ascender=N.parseShort(),B.descender=N.parseShort(),B.lineGap=N.parseShort(),B.advanceWidthMax=N.parseUShort(),B.minLeftSideBearing=N.parseShort(),B.minRightSideBearing=N.parseShort(),B.xMaxExtent=N.parseShort(),B.caretSlopeRise=N.parseShort(),B.caretSlopeRun=N.parseShort(),B.caretOffset=N.parseShort(),N.relativeOffset+=8,B.metricDataFormat=N.parseShort(),B.numberOfHMetrics=N.parseUShort(),B},make:function(E){return new Ae.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},ve={parse:function(E,j,B,N,K){for(var re,se,_e=new Re.Parser(E,j),Ie=0;Ie<N;Ie+=1){Ie<B&&(re=_e.parseUShort(),se=_e.parseShort());var Te=K.get(Ie);Te.advanceWidth=re,Te.leftSideBearing=se}},make:function(E){for(var j=new Ae.Table("hmtx",[]),B=0;B<E.length;B+=1){var K=E.get(B),N=K.advanceWidth||0,K=K.leftSideBearing||0;j.fields.push({name:"advanceWidth_"+B,type:"USHORT",value:N}),j.fields.push({name:"leftSideBearing_"+B,type:"SHORT",value:K})}return j}},He={make:function(E){for(var j=new Ae.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),B="",N=12+4*E.length,K=0;K<E.length;++K){var re=B.indexOf(E[K]);re<0&&(re=B.length,B+=E[K]),j.fields.push({name:"offset "+K,type:"USHORT",value:N+re}),j.fields.push({name:"length "+K,type:"USHORT",value:E[K].length})}return j.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),j},parse:function(E,j){for(var B=new Re.Parser(E,j),N=B.parseULong(),K=(O.argument(N===1,"Unsupported ltag table version."),B.skip("uLong",1),B.parseULong()),re=[],se=0;se<K;se++){for(var _e="",Ie=j+B.parseUShort(),Te=B.parseUShort(),Xe=Ie;Xe<Ie+Te;++Xe)_e+=String.fromCharCode(E.getInt8(Xe));re.push(_e)}return re}},ze={parse:function(N,j){var B={},N=new Re.Parser(N,j);return B.version=N.parseVersion(),B.numGlyphs=N.parseUShort(),B.version===1&&(B.maxPoints=N.parseUShort(),B.maxContours=N.parseUShort(),B.maxCompositePoints=N.parseUShort(),B.maxCompositeContours=N.parseUShort(),B.maxZones=N.parseUShort(),B.maxTwilightPoints=N.parseUShort(),B.maxStorage=N.parseUShort(),B.maxFunctionDefs=N.parseUShort(),B.maxInstructionDefs=N.parseUShort(),B.maxStackElements=N.parseUShort(),B.maxSizeOfInstructions=N.parseUShort(),B.maxComponentElements=N.parseUShort(),B.maxComponentDepth=N.parseUShort()),B},make:function(E){return new Ae.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},et=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],je={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},gt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ot={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},st="utf-16",ut={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Pt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Tt(E,j,B){switch(E){case 0:return st;case 1:return Pt[B]||ut[j];case 3:if(j===1||j===10)return st}}function At(E){var j,B={};for(j in E)B[E[j]]=parseInt(j);return B}function Kt(E,j,B,N,K,re){return new Ae.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:j},{name:"languageID",type:"USHORT",value:B},{name:"nameID",type:"USHORT",value:N},{name:"length",type:"USHORT",value:K},{name:"offset",type:"USHORT",value:re}])}function ir(E,j){if((B=function(re,se){var _e=re.length,Ie=se.length-_e+1;e:for(var Te=0;Te<Ie;Te++)for(;Te<Ie;Te++){for(var Xe=0;Xe<_e;Xe++)if(se[Te+Xe]!==re[Xe])continue e;return Te}return-1}(E,j))<0)for(var B=j.length,N=0,K=E.length;N<K;++N)j.push(E[N]);return B}var rr={parse:function(E,j,B){for(var N={},K=new Re.Parser(E,j),j=K.parseUShort(),re=K.parseUShort(),se=K.offset+K.parseUShort(),_e=0;_e<re;_e++){var yt=K.parseUShort(),Ie=K.parseUShort(),Te=K.parseUShort(),Xe=K.parseUShort(),Xe=et[Xe]||Xe,Ze=K.parseUShort(),Ke=K.parseUShort(),Ue=function(ft,nt,rt){switch(ft){case 0:if(nt===65535)return"und";if(rt)return rt[nt];break;case 1:return je[nt];case 3:return ot[nt]}}(yt,Te,B),yt=Tt(yt,Ie,Te);yt!==void 0&&Ue!==void 0&&(Ie=void 0,(Ie=yt===st?H.UTF16(E,se+Ke,Ze):H.MACSTRING(E,se+Ke,Ze,yt))&&((Te=(Te=N[Xe])===void 0?N[Xe]={}:Te)[Ue]=Ie))}return j===1&&K.parseUShort(),N},make:function(E,j){var B,N=[],K={},re=At(et);for(B in E){var se=re[B];if(se===void 0&&(se=B),Ke=parseInt(se),isNaN(Ke))throw new Error('Name table entry "'+B+'" does not exist, see nameTableNames for complete list.');K[Ke]=E[B],N.push(Ke)}for(var _e=At(je),Ie=At(ot),Te=[],Xe=[],Ze=0;Ze<N.length;Ze++){var Ke,Ue,yt=K[Ke=N[Ze]];for(Ue in yt){var it=yt[Ue],Zt=1,ft=_e[Ue],nt=gt[ft],rt=Tt(Zt,nt,ft),rt=q.MACSTRING(it,rt),Ft=(rt===void 0&&(Zt=0,(ft=j.indexOf(Ue))<0&&(ft=j.length,j.push(Ue)),nt=4,rt=q.UTF16(it)),ir(rt,Xe)),Zt=(Te.push(Kt(Zt,nt,ft,Ke,rt.length,Ft)),Ie[Ue]);Zt!==void 0&&(ft=ir(nt=q.UTF16(it),Xe),Te.push(Kt(3,1,Zt,Ke,nt.length,ft)))}}Te.sort(function(ar,Dr){return ar.platformID-Dr.platformID||ar.encodingID-Dr.encodingID||ar.languageID-Dr.languageID||ar.nameID-Dr.nameID});for(var Ut=new Ae.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Te.length},{name:"stringOffset",type:"USHORT",value:6+12*Te.length}]),Ht=0;Ht<Te.length;Ht++)Ut.fields.push({name:"record_"+Ht,type:"RECORD",value:Te[Ht]});return Ut.fields.push({name:"strings",type:"LITERAL",value:Xe}),Ut}},Qt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Et={parse:function(E,j){var B={},N=new Re.Parser(E,j);B.version=N.parseUShort(),B.xAvgCharWidth=N.parseShort(),B.usWeightClass=N.parseUShort(),B.usWidthClass=N.parseUShort(),B.fsType=N.parseUShort(),B.ySubscriptXSize=N.parseShort(),B.ySubscriptYSize=N.parseShort(),B.ySubscriptXOffset=N.parseShort(),B.ySubscriptYOffset=N.parseShort(),B.ySuperscriptXSize=N.parseShort(),B.ySuperscriptYSize=N.parseShort(),B.ySuperscriptXOffset=N.parseShort(),B.ySuperscriptYOffset=N.parseShort(),B.yStrikeoutSize=N.parseShort(),B.yStrikeoutPosition=N.parseShort(),B.sFamilyClass=N.parseShort(),B.panose=[];for(var K=0;K<10;K++)B.panose[K]=N.parseByte();return B.ulUnicodeRange1=N.parseULong(),B.ulUnicodeRange2=N.parseULong(),B.ulUnicodeRange3=N.parseULong(),B.ulUnicodeRange4=N.parseULong(),B.achVendID=String.fromCharCode(N.parseByte(),N.parseByte(),N.parseByte(),N.parseByte()),B.fsSelection=N.parseUShort(),B.usFirstCharIndex=N.parseUShort(),B.usLastCharIndex=N.parseUShort(),B.sTypoAscender=N.parseShort(),B.sTypoDescender=N.parseShort(),B.sTypoLineGap=N.parseShort(),B.usWinAscent=N.parseUShort(),B.usWinDescent=N.parseUShort(),1<=B.version&&(B.ulCodePageRange1=N.parseULong(),B.ulCodePageRange2=N.parseULong()),2<=B.version&&(B.sxHeight=N.parseShort(),B.sCapHeight=N.parseShort(),B.usDefaultChar=N.parseUShort(),B.usBreakChar=N.parseUShort(),B.usMaxContent=N.parseUShort()),B},make:function(E){return new Ae.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:Qt,getUnicodeRange:function(E){for(var j=0;j<Qt.length;j+=1){var B=Qt[j];if(E>=B.begin&&E<B.end)return j}return-1}},jt={parse:function(E,j){var B={},N=new Re.Parser(E,j);switch(B.version=N.parseVersion(),B.italicAngle=N.parseFixed(),B.underlinePosition=N.parseShort(),B.underlineThickness=N.parseShort(),B.isFixedPitch=N.parseULong(),B.minMemType42=N.parseULong(),B.maxMemType42=N.parseULong(),B.minMemType1=N.parseULong(),B.maxMemType1=N.parseULong(),B.version){case 1:B.names=Pe.slice();break;case 2:B.numberOfGlyphs=N.parseUShort(),B.glyphNameIndex=new Array(B.numberOfGlyphs);for(var K=0;K<B.numberOfGlyphs;K++)B.glyphNameIndex[K]=N.parseUShort();B.names=[];for(var re,se=0;se<B.numberOfGlyphs;se++)B.glyphNameIndex[se]>=Pe.length&&(re=N.parseChar(),B.names.push(N.parseString(re)));break;case 2.5:B.numberOfGlyphs=N.parseUShort(),B.offset=new Array(B.numberOfGlyphs);for(var _e=0;_e<B.numberOfGlyphs;_e++)B.offset[_e]=N.parseChar()}return B},make:function(){return new Ae.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},nr=new Array(9),Yt=(nr[1]=function(){var E=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(Se.coverage),deltaGlyphId:this.parseUShort()}:j===2?{substFormat:2,coverage:this.parsePointer(Se.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},nr[2]=function(){var E=this.parseUShort();return O.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Se.coverage),sequences:this.parseListOfLists()}},nr[3]=function(){var E=this.parseUShort();return O.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Se.coverage),alternateSets:this.parseListOfLists()}},nr[4]=function(){var E=this.parseUShort();return O.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Se.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Se.uShort,lookupListIndex:Se.uShort});nr[5]=function(){var E,j,B=this.offset+this.relativeOffset,N=this.parseUShort();return N===1?{substFormat:N,coverage:this.parsePointer(Se.coverage),ruleSets:this.parseListOfLists(function(){var K=this.parseUShort(),re=this.parseUShort();return{input:this.parseUShortList(K-1),lookupRecords:this.parseRecordList(re,Yt)}})}:N===2?{substFormat:N,coverage:this.parsePointer(Se.coverage),classDef:this.parsePointer(Se.classDef),classSets:this.parseListOfLists(function(){var K=this.parseUShort(),re=this.parseUShort();return{classes:this.parseUShortList(K-1),lookupRecords:this.parseRecordList(re,Yt)}})}:N===3?(E=this.parseUShort(),j=this.parseUShort(),{substFormat:N,coverages:this.parseList(E,Se.pointer(Se.coverage)),lookupRecords:this.parseRecordList(j,Yt)}):void O.assert(!1,"0x"+B.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},nr[6]=function(){var E=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(Se.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yt)}})}:j===2?{substFormat:2,coverage:this.parsePointer(Se.coverage),backtrackClassDef:this.parsePointer(Se.classDef),inputClassDef:this.parsePointer(Se.classDef),lookaheadClassDef:this.parsePointer(Se.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yt)}})}:j===3?{substFormat:3,backtrackCoverage:this.parseList(Se.pointer(Se.coverage)),inputCoverage:this.parseList(Se.pointer(Se.coverage)),lookaheadCoverage:this.parseList(Se.pointer(Se.coverage)),lookupRecords:this.parseRecordList(Yt)}:void O.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},nr[7]=function(){var E=this.parseUShort(),E=(O.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),j=new Se(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:nr[E].call(j)}},nr[8]=function(){var E=this.parseUShort();return O.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Se.coverage),backtrackCoverage:this.parseList(Se.pointer(Se.coverage)),lookaheadCoverage:this.parseList(Se.pointer(Se.coverage)),substitutes:this.parseUShortList()}};var qr=new Array(9);qr[1]=function(E){return E.substFormat===1?new Ae.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ae.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new Ae.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ae.Coverage(E.coverage)}].concat(Ae.ushortList("substitute",E.substitute)))},qr[3]=function(E){return O.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ae.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ae.Coverage(E.coverage)}].concat(Ae.tableList("altSet",E.alternateSets,function(j){return new Ae.Table("alternateSetTable",Ae.ushortList("alternate",j))})))},qr[4]=function(E){return O.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ae.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ae.Coverage(E.coverage)}].concat(Ae.tableList("ligSet",E.ligatureSets,function(j){return new Ae.Table("ligatureSetTable",Ae.tableList("ligature",j,function(B){return new Ae.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:B.ligGlyph}].concat(Ae.ushortList("component",B.components,B.components.length+1)))}))})))};var xn={parse:function(E,j){return j=(E=new Se(E,j=j||0)).parseVersion(1),O.argument(j===1||j===1.1,"Unsupported GSUB table version."),j===1?{version:j,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(nr)}:{version:j,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(nr),variations:E.parseFeatureVariationsList()}},make:function(E){return new Ae.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ae.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Ae.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Ae.LookupList(E.lookups,qr)}])}},Rr={parse:function(E,j){for(var B=new Re.Parser(E,j),N=B.parseULong(),K=(O.argument(N===1,"Unsupported META table version."),B.parseULong(),B.parseULong(),B.parseULong()),re={},se=0;se<K;se++){var _e=B.parseTag(),Te=B.parseULong(),Ie=B.parseULong(),Te=H.UTF8(E,j+Te,Ie);re[_e]=Te}return re},make:function(E){var j,B=Object.keys(E).length,N="",K=16+12*B,re=new Ae.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:K},{name:"numTags",type:"ULONG",value:B}]);for(j in E){var se=N.length;N+=E[j],re.fields.push({name:"tag "+j,type:"TAG",value:j}),re.fields.push({name:"offset "+j,type:"ULONG",value:K+se}),re.fields.push({name:"length "+j,type:"ULONG",value:E[j].length})}return re.fields.push({name:"stringPool",type:"CHARARRAY",value:N}),re}};function ti(E){return Math.log(E)/Math.log(2)|0}function Or(E){for(;E.length%4!=0;)E.push(0);for(var j=0,B=0;B<E.length;B+=4)j+=(E[B]<<24)+(E[B+1]<<16)+(E[B+2]<<8)+E[B+3];return j%=Math.pow(2,32)}function ri(E,j,B,N){return new Ae.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:j!==void 0?j:0},{name:"offset",type:"ULONG",value:B!==void 0?B:0},{name:"length",type:"ULONG",value:N!==void 0?N:0}])}function Fi(E){for(var j=new Ae.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),B=(j.tables=E,j.numTables=E.length,Math.pow(2,ti(j.numTables))),N=(j.searchRange=16*B,j.entrySelector=ti(B),j.rangeShift=16*j.numTables-j.searchRange,[]),K=[],re=j.sizeOf()+ri().sizeOf()*j.numTables;re%4!=0;)re+=1,K.push({name:"padding",type:"BYTE",value:0});for(var se=0;se<E.length;se+=1){var _e=E[se],Ie=(O.argument(_e.tableName.length===4,"Table name"+_e.tableName+" is invalid."),_e.sizeOf()),Te=ri(_e.tableName,Or(_e.encode()),re,Ie);for(N.push({name:Te.tag+" Table Record",type:"RECORD",value:Te}),K.push({name:_e.tableName+" table",type:"RECORD",value:_e}),re+=Ie,O.argument(!isNaN(re),"Something went wrong calculating the offset.");re%4!=0;)re+=1,K.push({name:"padding",type:"BYTE",value:0})}return N.sort(function(Xe,Ze){return Xe.value.tag>Ze.value.tag?1:-1}),j.fields=j.fields.concat(N),j.fields=j.fields.concat(K),j}function Hr(E,j,B){for(var N=0;N<j.length;N+=1){var K=E.charToGlyphIndex(j[N]);if(0<K)return E.glyphs.get(K).getMetrics()}return B}var zn={make:Fi,fontToTable:function(E){for(var j,B=[],N=[],K=[],re=[],se=[],_e=[],Ie=[],Te=0,Xe=0,Ze=0,Ke=0,Ue=0,yt=0;yt<E.glyphs.length;yt+=1){var it=E.glyphs.get(yt),ft=0|it.unicode;if(isNaN(it.advanceWidth))throw new Error("Glyph "+it.name+" ("+yt+"): advanceWidth is not a number.");(ft<j||j===void 0)&&0<ft&&(j=ft),Te<ft&&(Te=ft);var ft=Et.getUnicodeRange(ft);if(ft<32)Xe|=1<<ft;else if(ft<64)Ze|=1<<ft-32;else if(ft<96)Ke|=1<<ft-64;else{if(!(ft<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ue|=1<<ft-96}it.name!==".notdef"&&(ft=it.getMetrics(),B.push(ft.xMin),N.push(ft.yMin),K.push(ft.xMax),re.push(ft.yMax),_e.push(ft.leftSideBearing),Ie.push(ft.rightSideBearing),se.push(it.advanceWidth))}var nt,rt={xMin:Math.min.apply(null,B),yMin:Math.min.apply(null,N),xMax:Math.max.apply(null,K),yMax:Math.max.apply(null,re),advanceWidthMax:Math.max.apply(null,se),advanceWidthAvg:function(wn){for(var _a=0,bo=0;bo<wn.length;bo+=1)_a+=wn[bo];return _a/wn.length}(se),minLeftSideBearing:Math.min.apply(null,_e),maxLeftSideBearing:Math.max.apply(null,_e),minRightSideBearing:Math.min.apply(null,Ie)},Ft=(rt.ascender=E.ascender,rt.descender=E.descender,po.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:rt.xMin,yMin:rt.yMin,xMax:rt.xMax,yMax:rt.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),Zt=Ge.make({ascender:rt.ascender,descender:rt.descender,advanceWidthMax:rt.advanceWidthMax,minLeftSideBearing:rt.minLeftSideBearing,minRightSideBearing:rt.minRightSideBearing,xMaxExtent:rt.maxLeftSideBearing+(rt.xMax-rt.xMin),numberOfHMetrics:E.glyphs.length}),Ut=ze.make(E.glyphs.length),Ht=Et.make({xAvgCharWidth:Math.round(rt.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:j,usLastCharIndex:Te,ulUnicodeRange1:Xe,ulUnicodeRange2:Ze,ulUnicodeRange3:Ke,ulUnicodeRange4:Ue,fsSelection:E.tables.os2.fsSelection,sTypoAscender:rt.ascender,sTypoDescender:rt.descender,sTypoLineGap:0,usWinAscent:rt.yMax,usWinDescent:Math.abs(rt.yMin),ulCodePageRange1:1,sxHeight:Hr(E,"xyvw",{yMax:Math.round(rt.ascender/2)}).yMax,sCapHeight:Hr(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",rt).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),ar=ve.make(E.glyphs),Dr=le.make(E.glyphs),Vr=E.getEnglishName("fontFamily"),Er=E.getEnglishName("fontSubfamily"),xr=Vr+" "+Er,un=(un=E.getEnglishName("postScriptName"))||Vr.replace(/\s/g,"")+"-"+Er,en={};for(nt in E.names)en[nt]=E.names[nt];en.uniqueID||(en.uniqueID={en:E.getEnglishName("manufacturer")+":"+xr}),en.postScriptName||(en.postScriptName={en:un}),en.preferredFamily||(en.preferredFamily=E.names.fontFamily),en.preferredSubfamily||(en.preferredSubfamily=E.names.fontSubfamily);var bn=[],zr=rr.make(en,bn),bn=0<bn.length?He.make(bn):void 0,si=jt.make(),xr=Ss.make(E.glyphs,{version:E.getEnglishName("version"),fullName:xr,familyName:Vr,weightName:Er,postScriptName:un,unitsPerEm:E.unitsPerEm,fontBBox:[0,rt.yMin,rt.ascender,rt.advanceWidthMax]}),Vr=E.metas&&0<Object.keys(E.metas).length?Rr.make(E.metas):void 0,Er=[Ft,Zt,Ut,Ht,zr,Dr,si,xr,ar];bn&&Er.push(bn),E.tables.gsub&&Er.push(xn.make(E.tables.gsub)),Vr&&Er.push(Vr);for(var Wn=Or((un=Fi(Er)).encode()),Jr=un.fields,gr=!1,Nr=0;Nr<Jr.length;Nr+=1)if(Jr[Nr].name==="head table"){Jr[Nr].value.checkSumAdjustment=2981146554-Wn,gr=!0;break}if(gr)return un;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Or};function Gs(E,j){for(var B=0,N=E.length-1;B<=N;){var K=B+N>>>1,re=E[K].tag;if(re===j)return K;re<j?B=1+K:N=K-1}return-B-1}function As(E,j){for(var B=0,N=E.length-1;B<=N;){var K=B+N>>>1,re=E[K];if(re===j)return K;re<j?B=1+K:N=K-1}return-B-1}function ou(E,j){for(var B=0,N=E.length-1;B<=N;){var K,re=B+N>>>1,se=(K=E[re]).start;if(se===j)return K;se<j?B=1+re:N=re-1}if(0<B)return j>(K=E[B-1]).end?0:K}function ns(E,j){this.font=E,this.tableName=j}function is(E){ns.call(this,E,"gpos")}function kn(E){ns.call(this,E,"gsub")}function Xo(E,j,B){for(var N=E.subtables,K=0;K<N.length;K++){var re=N[K];if(re.substFormat===j)return re}if(B)return N.push(B),B}function au(E){for(var j=new ArrayBuffer(E.length),B=new Uint8Array(j),N=0;N<E.length;++N)B[N]=E[N];return j}function Hs(E,j){if(!E)throw j}function zs(E,j,B,N,K){var re=0<(j&N)?(re=E.parseByte(),B+(re=j&K?re:-re)):0<(j&K)?B:B+E.parseShort();return re}function nl(E,j,B){var N,K=new Re.Parser(j,B);if(E.numberOfContours=K.parseShort(),E._xMin=K.parseShort(),E._yMin=K.parseShort(),E._xMax=K.parseShort(),E._yMax=K.parseShort(),0<E.numberOfContours){for(var re=E.endPointIndices=[],se=0;se<E.numberOfContours;se+=1)re.push(K.parseUShort());E.instructionLength=K.parseUShort(),E.instructions=[];for(var _e=0;_e<E.instructionLength;_e+=1)E.instructions.push(K.parseByte());for(var Ie=re[re.length-1]+1,Te=[],Xe=0;Xe<Ie;Xe+=1)if(N=K.parseByte(),Te.push(N),0<(8&N))for(var Ze=K.parseByte(),Ke=0;Ke<Ze;Ke+=1)Te.push(N),Xe+=1;if(O.argument(Te.length===Ie,"Bad flags."),0<re.length){var Ue,yt=[];if(0<Ie){for(var it=0;it<Ie;it+=1)N=Te[it],(Ue={}).onCurve=!!(1&N),Ue.lastPointOfContour=0<=re.indexOf(it),yt.push(Ue);for(var ft=0,nt=0;nt<Ie;nt+=1)N=Te[nt],(Ue=yt[nt]).x=zs(K,N,ft,2,16),ft=Ue.x;for(var rt=0,Ft=0;Ft<Ie;Ft+=1)N=Te[Ft],(Ue=yt[Ft]).y=zs(K,N,rt,4,32),rt=Ue.y}E.points=yt}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var Zt=!0;Zt;){Te=K.parseUShort();var Ut={glyphIndex:K.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Te)?0<(2&Te)?(Ut.dx=K.parseShort(),Ut.dy=K.parseShort()):Ut.matchedPoints=[K.parseUShort(),K.parseUShort()]:0<(2&Te)?(Ut.dx=K.parseChar(),Ut.dy=K.parseChar()):Ut.matchedPoints=[K.parseByte(),K.parseByte()],0<(8&Te)?Ut.xScale=Ut.yScale=K.parseF2Dot14():0<(64&Te)?(Ut.xScale=K.parseF2Dot14(),Ut.yScale=K.parseF2Dot14()):0<(128&Te)&&(Ut.xScale=K.parseF2Dot14(),Ut.scale01=K.parseF2Dot14(),Ut.scale10=K.parseF2Dot14(),Ut.yScale=K.parseF2Dot14()),E.components.push(Ut),Zt=!!(32&Te)}if(256&Te){E.instructionLength=K.parseUShort(),E.instructions=[];for(var Ht=0;Ht<E.instructionLength;Ht+=1)E.instructions.push(K.parseByte())}}}function ss(E,j){for(var B=[],N=0;N<E.length;N+=1){var K=E[N],K={x:j.xScale*K.x+j.scale01*K.y+j.dx,y:j.scale10*K.x+j.yScale*K.y+j.dy,onCurve:K.onCurve,lastPointOfContour:K.lastPointOfContour};B.push(K)}return B}function mo(E){var j=new J;if(E)for(var B=function(Ze){for(var Ke=[],Ue=[],yt=0;yt<Ze.length;yt+=1){var it=Ze[yt];Ue.push(it),it.lastPointOfContour&&(Ke.push(Ue),Ue=[])}return O.argument(Ue.length===0,"There are still points left in the current contour."),Ke}(E),N=0;N<B.length;++N){var K,re=B[N],se=re[re.length-1],_e=re[0];se.onCurve?j.moveTo(se.x,se.y):_e.onCurve?j.moveTo(_e.x,_e.y):(K={x:.5*(se.x+_e.x),y:.5*(se.y+_e.y)},j.moveTo(K.x,K.y));for(var Ie=0;Ie<re.length;++Ie){var Te,Xe=se,se=_e,_e=re[(Ie+1)%re.length];se.onCurve?j.lineTo(se.x,se.y):(Te=_e,Xe.onCurve||(se.x,Xe.x,se.y,Xe.y),_e.onCurve||(Te={x:.5*(se.x+_e.x),y:.5*(se.y+_e.y)}),j.quadraticCurveTo(se.x,se.y,Te.x,Te.y))}j.closePath()}return j}function Vs(E,j){if(j.isComposite)for(var B=0;B<j.components.length;B+=1){var N=j.components[B],K=E.get(N.glyphIndex);if(K.getPath(),K.points){var re=void 0;if(N.matchedPoints===void 0)re=ss(K.points,N);else{if(N.matchedPoints[0]>j.points.length-1||N.matchedPoints[1]>K.points.length-1)throw Error("Matched points out of range in "+j.name);var se=j.points[N.matchedPoints[0]],_e=K.points[N.matchedPoints[1]],N={xScale:N.xScale,scale01:N.scale01,scale10:N.scale10,yScale:N.yScale,dx:0,dy:0},_e=ss([_e],N)[0];N.dx=se.x-_e.x,N.dy=se.y-_e.y,re=ss(K.points,N)}j.points=j.points.concat(re)}}return mo(j.points)}(is.prototype=ns.prototype={searchTag:Gs,binSearch:As,getTable:function(E){var j=this.font.tables[this.tableName];return j=!j&&E?this.font.tables[this.tableName]=this.createDefaultTable():j},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(j){return j.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var j=!1,B=0;B<E.scripts.length;B++){var N=E.scripts[B].tag;if(N==="DFLT")return N;N==="latn"&&(j=!0)}return j?"latn":void 0}},getScriptTable:function(E,j){var B,N=this.getTable(j);if(N)return B=N.scripts,0<=(N=Gs(N.scripts,E=E||"DFLT"))?B[N].script:j?(B.splice(-1-N,0,j={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),j.script):void 0},getLangSysTable:function(K,j,B){var N,K=this.getScriptTable(K,B);if(K)return j&&j!=="dflt"&&j!=="DFLT"?0<=(N=Gs(K.langSysRecords,j))?K.langSysRecords[N].langSys:B?(K.langSysRecords.splice(-1-N,0,B={tag:j,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),B.langSys):void 0:K.defaultLangSys},getFeatureTable:function(E,j,B,N){if(E=this.getLangSysTable(E,j,N),E){for(var K,re=E.featureIndexes,se=this.font.tables[this.tableName].features,_e=0;_e<re.length;_e++)if((K=se[re[_e]]).tag===B)return K.feature;if(N)return j=se.length,O.assert(j===0||B>=se[j-1].tag,"Features must be added in alphabetical order."),se.push(K={tag:B,feature:{params:0,lookupListIndexes:[]}}),re.push(j),K.feature}},getLookupTables:function(re,j,B,N,K){var re=this.getFeatureTable(re,j,B,K),se=[];if(re){for(var _e,Ie=re.lookupListIndexes,Te=this.font.tables[this.tableName].lookups,Xe=0;Xe<Ie.length;Xe++)(_e=Te[Ie[Xe]]).lookupType===N&&se.push(_e);if(se.length===0&&K)return j=Te.length,Te.push(_e={lookupType:N,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Ie.push(j),[_e]}return se},getGlyphClass:function(E,j){switch(E.format){case 1:return E.startGlyph<=j&&j<E.startGlyph+E.classes.length?E.classes[j-E.startGlyph]:0;case 2:var B=ou(E.ranges,j);return B?B.classId:0}},getCoverageIndex:function(E,j){switch(E.format){case 1:var B=As(E.glyphs,j);return 0<=B?B:-1;case 2:return B=ou(E.ranges,j),B?B.index+j-B.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var j=[],B=E.ranges,N=0;N<B.length;N++)for(var K=B[N],re=K.start,se=K.end,_e=re;_e<=se;_e++)j.push(_e);return j}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},is.prototype.getKerningValue=function(E,j,B){for(var N=0;N<E.length;N++)for(var K=E[N].subtables,re=0;re<K.length;re++){var se=K[re],_e=this.getCoverageIndex(se.coverage,j);if(!(_e<0))switch(se.posFormat){case 1:for(var Ie=se.pairSets[_e],Te=0;Te<Ie.length;Te++){var Xe=Ie[Te];if(Xe.secondGlyph===B)return Xe.value1&&Xe.value1.xAdvance||0}break;case 2:var Ke=this.getGlyphClass(se.classDef1,j),Ze=this.getGlyphClass(se.classDef2,B),Ke=se.classRecords[Ke][Ze];return Ke.value1&&Ke.value1.xAdvance||0}}return 0},is.prototype.getKerningTables=function(E,j){if(this.font.tables.gpos)return this.getLookupTables(E,j,"kern",2)},(kn.prototype=ns.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},kn.prototype.getSingle=function(E,j,B){for(var N=[],K=this.getLookupTables(j,B,E,1),re=0;re<K.length;re++)for(var se=K[re].subtables,_e=0;_e<se.length;_e++){var Ie=se[_e],Te=this.expandCoverage(Ie.coverage),Xe=void 0;if(Ie.substFormat===1)for(var Ze=Ie.deltaGlyphId,Xe=0;Xe<Te.length;Xe++){var Ke=Te[Xe];N.push({sub:Ke,by:Ke+Ze})}else{var Ue=Ie.substitute;for(Xe=0;Xe<Te.length;Xe++)N.push({sub:Te[Xe],by:Ue[Xe]})}}return N},kn.prototype.getAlternates=function(E,j,B){for(var N=[],K=this.getLookupTables(j,B,E,3),re=0;re<K.length;re++)for(var se=K[re].subtables,_e=0;_e<se.length;_e++)for(var Ie=se[_e],Te=this.expandCoverage(Ie.coverage),Xe=Ie.alternateSets,Ze=0;Ze<Te.length;Ze++)N.push({sub:Te[Ze],by:Xe[Ze]});return N},kn.prototype.getLigatures=function(E,j,B){for(var N=[],K=this.getLookupTables(j,B,E,4),re=0;re<K.length;re++)for(var se=K[re].subtables,_e=0;_e<se.length;_e++)for(var Ie=se[_e],Te=this.expandCoverage(Ie.coverage),Xe=Ie.ligatureSets,Ze=0;Ze<Te.length;Ze++)for(var Ke=Te[Ze],Ue=Xe[Ze],yt=0;yt<Ue.length;yt++){var it=Ue[yt];N.push({sub:[Ke].concat(it.components),by:it.ligGlyph})}return N},kn.prototype.addSingle=function(E,j,B,N){B=Xo(this.getLookupTables(B,N,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),O.assert(B.coverage.format===1,"Ligature: unable to modify coverage table format "+B.coverage.format),N=j.sub,E=this.binSearch(B.coverage.glyphs,N),E<0&&(B.coverage.glyphs.splice(E=-1-E,0,N),B.substitute.splice(E,0,0)),B.substitute[E]=j.by},kn.prototype.addAlternate=function(E,j,B,N){B=Xo(this.getLookupTables(B,N,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),O.assert(B.coverage.format===1,"Ligature: unable to modify coverage table format "+B.coverage.format),N=j.sub,E=this.binSearch(B.coverage.glyphs,N),E<0&&(B.coverage.glyphs.splice(E=-1-E,0,N),B.alternateSets.splice(E,0,0)),B.alternateSets[E]=j.by},kn.prototype.addLigature=function(re,Ie,_e,K){var _e=this.getLookupTables(_e,K,re,4,!0)[0],K=_e.subtables[0],re=(K||(_e.subtables[0]=K={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),O.assert(K.coverage.format===1,"Ligature: unable to modify coverage table format "+K.coverage.format),Ie.sub[0]),se=Ie.sub.slice(1),_e={ligGlyph:Ie.by,components:se},Ie=this.binSearch(K.coverage.glyphs,re);if(0<=Ie){for(var Te=K.ligatureSets[Ie],Xe=0;Xe<Te.length;Xe++)if(function(Ze,Ke){var Ue=Ze.length;if(Ue===Ke.length){for(var yt=0;yt<Ue;yt++)if(Ze[yt]!==Ke[yt])return;return 1}}(Te[Xe].components,se))return;Te.push(_e)}else K.coverage.glyphs.splice(Ie=-1-Ie,0,re),K.ligatureSets.splice(Ie,0,[_e])},kn.prototype.getFeature=function(E,j,B){if(/ss\d\d/.test(E))return this.getSingle(E,j,B);switch(E){case"aalt":case"salt":return this.getSingle(E,j,B).concat(this.getAlternates(E,j,B));case"dlig":case"liga":case"rlig":return this.getLigatures(E,j,B)}},kn.prototype.add=function(E,j,B,N){if(/ss\d\d/.test(E))return this.addSingle(E,j,B,N);switch(E){case"aalt":case"salt":return typeof j.by=="number"?this.addSingle(E,j,B,N):this.addAlternate(E,j,B,N);case"dlig":case"liga":case"rlig":return this.addLigature(E,j,B,N)}};var mr={getPath:mo,parse:function(E,j,B,N){for(var K=new ct.GlyphSet(N),re=0;re<B.length-1;re+=1){var se=B[re];se!==B[re+1]?K.push(re,ct.ttfGlyphLoader(N,re,nl,E,j+se,Vs)):K.push(re,ct.glyphLoader(N,re))}return K}};function il(E){this.font=E,this.getCommands=function(j){return mr.getPath(j).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function go(E){return E}function pa(E){return Math.sign(E)*Math.round(Math.abs(E))}function lu(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function kc(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function an(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function ma(E){return Math.sign(E)*Math.floor(Math.abs(E))}function uu(E){var j=this.srPeriod,B=this.srPhase,N=1;return E<0&&(E=-E,N=-1),E+=this.srThreshold-B,E=Math.trunc(E/j)*j,(E+=B)<0?B*N:E*N}var Zr={x:1,y:0,axis:"x",distance:function(E,j,B,N){return(B?E.xo:E.x)-(N?j.xo:j.x)},interpolate:function(E,j,B,N){var K,re,se,_e,Ie,Te,Xe;if(!N||N===this)return K=E.xo-j.xo,re=E.xo-B.xo,Ie=j.x-j.xo,Te=B.x-B.xo,(Xe=(se=Math.abs(K))+(_e=Math.abs(re)))===0?void(E.x=E.xo+(Ie+Te)/2):void(E.x=E.xo+(Ie*_e+Te*se)/Xe);K=N.distance(E,j,!0,!0),re=N.distance(E,B,!0,!0),Ie=N.distance(j,j,!1,!0),Te=N.distance(B,B,!1,!0),(Xe=(se=Math.abs(K))+(_e=Math.abs(re)))===0?Zr.setRelative(E,E,(Ie+Te)/2,N,!0):Zr.setRelative(E,E,(Ie*_e+Te*se)/Xe,N,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,j,B,N,K){var re,se;N&&N!==this?(re=K?j.xo:j.x,se=K?j.yo:j.y,re+=B*N.x,se+=B*N.y,E.x=re+(E.y-se)/N.normalSlope):E.x=(K?j.xo:j.x)+B},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Ui={x:0,y:1,axis:"y",distance:function(E,j,B,N){return(B?E.yo:E.y)-(N?j.yo:j.y)},interpolate:function(E,j,B,N){var K,re,se,_e,Ie,Te,Xe;if(!N||N===this)return K=E.yo-j.yo,re=E.yo-B.yo,Ie=j.y-j.yo,Te=B.y-B.yo,(Xe=(se=Math.abs(K))+(_e=Math.abs(re)))===0?void(E.y=E.yo+(Ie+Te)/2):void(E.y=E.yo+(Ie*_e+Te*se)/Xe);K=N.distance(E,j,!0,!0),re=N.distance(E,B,!0,!0),Ie=N.distance(j,j,!1,!0),Te=N.distance(B,B,!1,!0),(Xe=(se=Math.abs(K))+(_e=Math.abs(re)))===0?Ui.setRelative(E,E,(Ie+Te)/2,N,!0):Ui.setRelative(E,E,(Ie*_e+Te*se)/Xe,N,!0)},normalSlope:0,setRelative:function(E,j,B,N,K){var re,se;N&&N!==this?(re=K?j.xo:j.x,se=K?j.yo:j.y,re+=B*N.x,se+=B*N.y,E.y=se+N.normalSlope*(E.x-re)):E.y=(K?j.yo:j.y)+B},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function Ms(E,j){this.x=E,this.y=j,this.axis=void 0,this.slope=j/E,this.normalSlope=-E/j,Object.freeze(this)}function Vn(E,j){var B=Math.sqrt(E*E+j*j);return j/=B,(E/=B)===1&&j===0?Zr:E===0&&j===1?Ui:new Ms(E,j)}function Ni(E,j,B,N){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*j)/64,this.lastPointOfContour=B,this.onCurve=N,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Zr),Object.freeze(Ui),Ms.prototype.distance=function(E,j,B,N){return this.x*Zr.distance(E,j,B,N)+this.y*Ui.distance(E,j,B,N)},Ms.prototype.interpolate=function(E,K,re,N){var se=N.distance(E,K,!0,!0),_e=N.distance(E,re,!0,!0),K=N.distance(K,K,!1,!0),re=N.distance(re,re,!1,!0),se=Math.abs(se),_e=Math.abs(_e),Ie=se+_e;Ie===0?this.setRelative(E,E,(K+re)/2,N,!0):this.setRelative(E,E,(K*_e+re*se)/Ie,N,!0)},Ms.prototype.setRelative=function(E,re,Ie,Te,_e){var se=_e?re.xo:re.x,_e=_e?re.yo:re.y,re=se+Ie*(Te=Te||this).x,se=_e+Ie*Te.y,_e=Te.normalSlope,Ie=this.slope,Te=E.x,Xe=E.y;E.x=(Ie*Te-_e*re+se-Xe)/(Ie-_e),E.y=Ie*(E.x-Te)+Xe},Ms.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},Ni.prototype.nextTouched=function(E){for(var j=this.nextPointOnContour;!E.touched(j)&&j!==this;)j=j.nextPointOnContour;return j},Ni.prototype.prevTouched=function(E){for(var j=this.prevPointOnContour;!E.touched(j)&&j!==this;)j=j.prevPointOnContour;return j};var Yo=Object.freeze(new Ni(0,0)),Gi={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function hn(E,j){switch(this.env=E,this.stack=[],this.prog=j,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Zr,this.round=pa}}function Hi(E){for(var j=E.tZone=new Array(E.gZone.length),B=0;B<j.length;B++)j[B]=new Ni(0,0)}function zi(E,j){var B,N=E.prog,K=E.ip,re=1;do if((B=N[++K])===88)re++;else if(B===89)re--;else if(B===64)K+=N[K+1]+1;else if(B===65)K+=2*N[K+1]+1;else if(176<=B&&B<=183)K+=B-176+1;else if(184<=B&&B<=191)K+=2*(B-184+1);else if(j&&re===1&&B===27)break;while(0<re);E.ip=K}function sl(E,j){c.DEBUG&&console.log(j.step,"SVTCA["+E.axis+"]"),j.fv=j.pv=j.dpv=E}function ol(E,j){c.DEBUG&&console.log(j.step,"SPVTCA["+E.axis+"]"),j.pv=j.dpv=E}function di(E,j){c.DEBUG&&console.log(j.step,"SFVTCA["+E.axis+"]"),j.fv=E}function qo(E,j){var B,K=j.stack,N=K.pop(),K=K.pop(),re=j.z2[N],se=j.z1[K];c.DEBUG&&console.log("SPVTL["+E+"]",N,K),N=E?(B=re.y-se.y,se.x-re.x):(B=se.x-re.x,se.y-re.y),j.pv=j.dpv=Vn(B,N)}function Jo(E,j){var B,K=j.stack,N=K.pop(),K=K.pop(),re=j.z2[N],se=j.z1[K];c.DEBUG&&console.log("SFVTL["+E+"]",N,K),N=E?(B=re.y-se.y,se.x-re.x):(B=se.x-re.x,se.y-re.y),j.fv=Vn(B,N)}function yo(E){c.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function ni(E,j){var B=j.stack.pop(),N=j.z0[B],K=j.fv,re=j.pv,se=(c.DEBUG&&console.log(j.step,"MDAP["+E+"]",B),re.distance(N,Yo));E&&(se=j.round(se)),K.setRelative(N,Yo,se,re),K.touch(N),j.rp0=j.rp1=B}function Rn(E,j){var B,N,K,re=j.z2,se=re.length-2;c.DEBUG&&console.log(j.step,"IUP["+E.axis+"]");for(var _e=0;_e<se;_e++)B=re[_e],E.touched(B)||(N=B.prevTouched(E))!==B&&(N===(K=B.nextTouched(E))&&E.setRelative(B,B,E.distance(N,N,!1,!0),E,!0),E.interpolate(B,N,K,E))}function ga(E,j){for(var B=j.stack,N=E?j.rp1:j.rp2,K=(E?j.z0:j.z1)[N],re=j.fv,se=j.pv,_e=j.loop,Ie=j.z2;_e--;){var Te=B.pop(),Xe=Ie[Te],Ze=se.distance(K,K,!1,!0);re.setRelative(Xe,Xe,Ze,se),re.touch(Xe),c.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-_e)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",Te)}j.loop=1}function os(E,j){for(var B=j.stack,se=E?j.rp1:j.rp2,N=(E?j.z0:j.z1)[se],K=j.fv,re=j.pv,se=B.pop(),_e=j.z2[j.contours[se]],Ie=_e,Te=(c.DEBUG&&console.log(j.step,"SHC["+E+"]",se),re.distance(N,N,!1,!0));Ie!==N&&K.setRelative(Ie,Ie,Te,re),(Ie=Ie.nextPointOnContour)!==_e;);}function vo(E,j){var B,N,_e=j.stack,K=E?j.rp1:j.rp2,K=(E?j.z0:j.z1)[K],re=j.fv,se=j.pv,_e=_e.pop();switch(c.DEBUG&&console.log(j.step,"SHZ["+E+"]",_e),_e){case 0:B=j.tZone;break;case 1:B=j.gZone;break;default:throw new Error("Invalid zone")}for(var Ie=se.distance(K,K,!1,!0),Te=B.length-2,Xe=0;Xe<Te;Xe++)N=B[Xe],re.setRelative(N,N,Ie,se)}function ya(E,j){var N=j.stack,B=N.pop()/64,N=N.pop(),K=j.z1[N],re=j.z0[j.rp0],se=j.fv,_e=j.pv;se.setRelative(K,re,B,_e),se.touch(K),c.DEBUG&&console.log(j.step,"MSIRP["+E+"]",B,N),j.rp1=j.rp0,j.rp2=N,E&&(j.rp0=N)}function cu(E,j){var B=j.stack,_e=B.pop(),B=B.pop(),N=j.z0[B],K=j.fv,re=j.pv,se=j.cvt[_e],_e=(c.DEBUG&&console.log(j.step,"MIAP["+E+"]",_e,"(",se,")",B),re.distance(N,Yo));E&&(Math.abs(_e-se)<j.cvCutIn&&(_e=se),_e=j.round(_e)),K.setRelative(N,Yo,_e,re),j.zp0===0&&(N.xo=N.x,N.yo=N.y),K.touch(N),j.rp0=j.rp1=B}function Pn(E,j){var B=j.stack,N=B.pop(),K=j.z2[N];c.DEBUG&&console.log(j.step,"GC["+E+"]",N),B.push(64*j.dpv.distance(K,Yo,E,!1))}function ii(E,j){var N=j.stack,B=N.pop(),N=N.pop(),K=j.z1[B],re=j.z0[N],re=j.dpv.distance(re,K,E,E);c.DEBUG&&console.log(j.step,"MD["+E+"]",B,N,"->",re),j.stack.push(Math.round(64*re))}function ln(E,j){var B=j.stack,N=B.pop(),K=j.fv,re=j.pv,se=j.ppem,_e=j.deltaBase+16*(E-1),Ie=j.deltaShift,Te=j.z0;c.DEBUG&&console.log(j.step,"DELTAP["+E+"]",N,B);for(var Xe=0;Xe<N;Xe++){var Ze=B.pop(),Ke=B.pop();_e+((240&Ke)>>4)===se&&(0<=(Ke=(15&Ke)-8)&&Ke++,c.DEBUG&&console.log(j.step,"DELTAPFIX",Ze,"by",Ke*Ie),Ze=Te[Ze],K.setRelative(Ze,Ze,Ke*Ie,re))}}function $r(E,j){var B=j.stack,N=B.pop();c.DEBUG&&console.log(j.step,"ROUND[]"),B.push(64*j.round(N/64))}function hi(E,j){var B=j.stack,N=B.pop(),K=j.ppem,re=j.deltaBase+16*(E-1),se=j.deltaShift;c.DEBUG&&console.log(j.step,"DELTAC["+E+"]",N,B);for(var _e=0;_e<N;_e++){var Ie=B.pop(),Te=B.pop();re+((240&Te)>>4)===K&&(0<=(Te=(15&Te)-8)&&Te++,Te=Te*se,c.DEBUG&&console.log(j.step,"DELTACFIX",Ie,"by",Te),j.cvt[Ie]+=Te)}}function _o(E,j){var B,K=j.stack,N=K.pop(),K=K.pop(),re=j.z2[N],se=j.z1[K];c.DEBUG&&console.log(j.step,"SDPVTL["+E+"]",N,K),N=E?(B=re.y-se.y,se.x-re.x):(B=se.x-re.x,se.y-re.y),j.dpv=Vn(B,N)}function Ws(E,j){var B=j.stack,N=j.prog,K=j.ip;c.DEBUG&&console.log(j.step,"PUSHB["+E+"]");for(var re=0;re<E;re++)B.push(N[++K]);j.ip=K}function xo(E,j){var B=j.ip,N=j.prog,K=j.stack;c.DEBUG&&console.log(j.ip,"PUSHW["+E+"]");for(var re=0;re<E;re++){var se=N[++B]<<8|N[++B];32768&se&&(se=-(1+(65535^se))),K.push(se)}j.ip=B}function It(E,j,B,N,K,re){var se,_e,Te=re.stack,Ie=E&&Te.pop(),Te=Te.pop(),Xe=re.rp0,Xe=re.z0[Xe],Ze=re.z1[Te],Ke=re.minDis,Ue=re.fv,yt=re.dpv,it=se=yt.distance(Ze,Xe,!0,!0),ft=0<=it?1:-1;it=Math.abs(it),E&&(_e=re.cvt[Ie],N&&Math.abs(it-_e)<re.cvCutIn&&(it=_e)),B&&it<Ke&&(it=Ke),N&&(it=re.round(it)),Ue.setRelative(Ze,Xe,ft*it,yt),Ue.touch(Ze),c.DEBUG&&console.log(re.step,(E?"MIRP[":"MDRP[")+(j?"M":"m")+(B?">":"_")+(N?"R":"_")+(K===0?"Gr":K===1?"Bl":K===2?"Wh":"")+"]",E?Ie+"("+re.cvt[Ie]+","+_e+")":"",Te,"(d =",se,"->",ft*it,")"),re.rp1=re.rp0,re.rp2=Te,j&&(re.rp0=Te)}il.prototype.exec=function(E,j){if(typeof j!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var B=this.font,N=this._prepState;if(!N||N.ppem!==j){var K=this._fpgmState;if(!K){hn.prototype=Gi,(K=this._fpgmState=new hn("fpgm",B.tables.fpgm)).funcs=[],K.font=B,c.DEBUG&&(console.log("---EXEC FPGM---"),K.step=-1);try{va(K)}catch(Te){return console.log("Hinting error in FPGM:"+Te),void(this._errorState=3)}}hn.prototype=K,(N=this._prepState=new hn("prep",B.tables.prep)).ppem=j;var re=B.tables.cvt;if(re)for(var se=N.cvt=new Array(re.length),_e=j/B.unitsPerEm,Ie=0;Ie<re.length;Ie++)se[Ie]=re[Ie]*_e;else N.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),N.step=-1);try{va(N)}catch(Te){this._errorState<2&&console.log("Hinting error in PREP:"+Te),this._errorState=2}}if(!(1<this._errorState))try{return Ko(E,N)}catch(Te){this._errorState<1&&(console.log("Hinting error:"+Te),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Ko=function(E,j){var B=j.ppem/j.font.unitsPerEm,N=B,K=E.components;if(hn.prototype=j,K){for(var re=j.font,se=[],_e=[],Ie=0;Ie<K.length;Ie++){var Te=K[Ie],Xe=re.glyphs.get(Te.glyphIndex),Ze=new hn("glyf",Xe.instructions);c.DEBUG&&(console.log("---EXEC COMP "+Ie+"---"),Ze.step=-1),fu(Xe,Ze,B,N);for(var Ke=Math.round(Te.dx*B),Ue=Math.round(Te.dy*N),yt=Ze.gZone,it=Ze.contours,ft=0;ft<yt.length;ft++){var nt=yt[ft];nt.xTouched=nt.yTouched=!1,nt.xo=nt.x=nt.x+Ke,nt.yo=nt.y=nt.y+Ue}var rt=se.length;se.push.apply(se,yt);for(var Ft=0;Ft<it.length;Ft++)_e.push(it[Ft]+rt)}E.instructions&&!Ze.inhibitGridFit&&((Ze=new hn("glyf",E.instructions)).gZone=Ze.z0=Ze.z1=Ze.z2=se,Ze.contours=_e,se.push(new Ni(0,0),new Ni(Math.round(E.advanceWidth*B),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),Ze.step=-1),va(Ze),se.length-=2)}else Ze=new hn("glyf",E.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),Ze.step=-1),fu(E,Ze,B,N),se=Ze.gZone;return se},fu=function(E,j,B,N){for(var K,re,se,_e=E.points||[],Ie=_e.length,Te=j.gZone=j.z0=j.z1=j.z2=[],Xe=j.contours=[],Ze=0;Ze<Ie;Ze++)K=_e[Ze],Te[Ze]=new Ni(K.x*B,K.y*N,K.lastPointOfContour,K.onCurve);for(var Ke=0;Ke<Ie;Ke++)K=Te[Ke],re||(re=K,Xe.push(Ke)),K.lastPointOfContour?((K.nextPointOnContour=re).prevPointOnContour=K,re=void 0):(se=Te[Ke+1],(K.nextPointOnContour=se).prevPointOnContour=K);if(!j.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",j.stack);for(var Ue=0;Ue<Ie;Ue++)console.log(Ue,Te[Ue].x,Te[Ue].y)}if(Te.push(new Ni(0,0),new Ni(Math.round(E.advanceWidth*B),0)),va(j),Te.length-=2,c.DEBUG){console.log("FINISHED GLYPH",j.stack);for(var yt=0;yt<Ie;yt++)console.log(yt,Te[yt].x,Te[yt].y)}}},va=function(E){var j=E.prog;if(j){var B,N=j.length;for(E.ip=0;E.ip<N;E.ip++){if(c.DEBUG&&E.step++,!(B=Oc[j[E.ip]]))throw new Error("unknown instruction: 0x"+Number(j[E.ip]).toString(16));B(E)}}},Oc=[sl.bind(void 0,Ui),sl.bind(void 0,Zr),ol.bind(void 0,Ui),ol.bind(void 0,Zr),di.bind(void 0,Ui),di.bind(void 0,Zr),qo.bind(void 0,0),qo.bind(void 0,1),Jo.bind(void 0,0),Jo.bind(void 0,1),function(E){var j=(B=E.stack).pop(),B=B.pop();c.DEBUG&&console.log(E.step,"SPVFS[]",j,B),E.pv=E.dpv=Vn(B,j)},function(E){var j=(B=E.stack).pop(),B=B.pop();c.DEBUG&&console.log(E.step,"SPVFS[]",j,B),E.fv=Vn(B,j)},function(E){var j=E.stack,B=E.pv;c.DEBUG&&console.log(E.step,"GPV[]"),j.push(16384*B.x),j.push(16384*B.y)},function(E){var j=E.stack,B=E.fv;c.DEBUG&&console.log(E.step,"GFV[]"),j.push(16384*B.x),j.push(16384*B.y)},function(E){E.fv=E.pv,c.DEBUG&&console.log(E.step,"SFVTPV[]")},function(j){var B=(se=j.stack).pop(),N=se.pop(),K=se.pop(),re=se.pop(),se=se.pop(),Ie=j.z0,Xe=j.z1,_e=Ie[B],Ie=Ie[N],Te=Xe[K],Xe=Xe[re],j=j.z2[se],B=(c.DEBUG&&console.log("ISECT[], ",B,N,K,re,se),_e.x),N=_e.y,K=Ie.x,re=Ie.y,se=Te.x,_e=Te.y,Ie=Xe.x,Te=Xe.y,Xe=(B-K)*(_e-Te)-(N-re)*(se-Ie),Ze=B*re-N*K,Ke=se*Te-_e*Ie;j.x=(Ze*(se-Ie)-Ke*(B-K))/Xe,j.y=(Ze*(_e-Te)-Ke*(N-re))/Xe},function(E){E.rp0=E.stack.pop(),c.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),c.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),c.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var j=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"SZP0[]",j),E.zp0=j){case 0:E.tZone||Hi(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var j=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"SZP1[]",j),E.zp1=j){case 0:E.tZone||Hi(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var j=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"SZP2[]",j),E.zp2=j){case 0:E.tZone||Hi(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var j=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"SZPS[]",j),E.zp0=E.zp1=E.zp2=j){case 0:E.tZone||Hi(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),c.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){c.DEBUG&&console.log(E.step,"RTG[]"),E.round=pa},function(E){c.DEBUG&&console.log(E.step,"RTHG[]"),E.round=kc},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SMD[]",j),E.minDis=j/64},function(E){c.DEBUG&&console.log(E.step,"ELSE[]"),zi(E,!1)},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"JMPR[]",j),E.ip+=j-1},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SCVTCI[]",j),E.cvCutIn=j/64},void 0,void 0,function(E){var j=E.stack;c.DEBUG&&console.log(E.step,"DUP[]"),j.push(j[j.length-1])},yo,function(E){c.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"SWAP[]"),j.push(B),j.push(N)},function(E){var j=E.stack;c.DEBUG&&console.log(E.step,"DEPTH[]"),j.push(j.length)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"CINDEX[]",B),j.push(j[j.length-B])},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"MINDEX[]",B),j.push(j.splice(j.length-B,1)[0])},void 0,void 0,void 0,function(E){var j=(N=E.stack).pop(),B=N.pop(),N=(c.DEBUG&&console.log(E.step,"LOOPCALL[]",j,B),E.ip),K=E.prog;E.prog=E.funcs[j];for(var re=0;re<B;re++)va(E),c.DEBUG&&console.log(++E.step,re+1<B?"next loopcall":"done loopcall",re);E.ip=N,E.prog=K},function(E){var j=E.stack.pop(),B=(c.DEBUG&&console.log(E.step,"CALL[]",j),E.ip),N=E.prog;E.prog=E.funcs[j],va(E),E.ip=B,E.prog=N,c.DEBUG&&console.log(++E.step,"returning from",j)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var N=E.stack,j=E.prog,B=E.ip,N=N.pop(),K=B;for(c.DEBUG&&console.log(E.step,"FDEF[]",N);j[++B]!==45;);E.ip=B,E.funcs[N]=j.slice(K+1,B)},void 0,ni.bind(void 0,0),ni.bind(void 0,1),Rn.bind(void 0,Ui),Rn.bind(void 0,Zr),ga.bind(void 0,0),ga.bind(void 0,1),os.bind(void 0,0),os.bind(void 0,1),vo.bind(void 0,0),vo.bind(void 0,1),function(E){for(var j=E.stack,B=E.loop,N=E.fv,K=j.pop()/64,re=E.z2;B--;){var se=j.pop(),_e=re[se];c.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-B)+": ":"")+"SHPIX[]",se,K),N.setRelative(_e,_e,K),N.touch(_e)}E.loop=1},function(E){for(var j=E.stack,B=E.rp1,N=E.rp2,K=E.loop,re=E.z0[B],se=E.z1[N],_e=E.fv,Ie=E.dpv,Te=E.z2;K--;){var Xe=j.pop(),Ze=Te[Xe];c.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-K)+": ":"")+"IP[]",Xe,B,"<->",N),_e.interpolate(Ze,re,se,Ie),_e.touch(Ze)}E.loop=1},ya.bind(void 0,0),ya.bind(void 0,1),function(E){for(var j=E.stack,B=E.rp0,N=E.z0[B],K=E.loop,re=E.fv,se=E.pv,_e=E.z1;K--;){var Ie=j.pop(),Te=_e[Ie];c.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-K)+": ":"")+"ALIGNRP[]",Ie),re.setRelative(Te,N,0,se),re.touch(Te)}E.loop=1},function(E){c.DEBUG&&console.log(E.step,"RTDG[]"),E.round=lu},cu.bind(void 0,0),cu.bind(void 0,1),function(E){var j=E.prog,B=E.ip,N=E.stack,K=j[++B];c.DEBUG&&console.log(E.step,"NPUSHB[]",K);for(var re=0;re<K;re++)N.push(j[++B]);E.ip=B},function(E){var j=E.ip,B=E.prog,N=E.stack,K=B[++j];c.DEBUG&&console.log(E.step,"NPUSHW[]",K);for(var re=0;re<K;re++){var se=B[++j]<<8|B[++j];32768&se&&(se=-(1+(65535^se))),N.push(se)}E.ip=j},function(E){var N=E.stack,j=(j=E.store)||(E.store=[]),B=N.pop(),N=N.pop();c.DEBUG&&console.log(E.step,"WS",B,N),j[N]=B},function(K){var j=K.stack,B=K.store,N=j.pop(),K=(c.DEBUG&&console.log(K.step,"RS",N),B&&B[N]||0);j.push(K)},function(E){var j=(B=E.stack).pop(),B=B.pop();c.DEBUG&&console.log(E.step,"WCVTP",j,B),E.cvt[B]=j/64},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"RCVT",B),j.push(64*E.cvt[B])},Pn.bind(void 0,0),Pn.bind(void 0,1),void 0,ii.bind(void 0,0),ii.bind(void 0,1),function(E){c.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){c.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"LT[]",B,N),j.push(N<B?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"LTEQ[]",B,N),j.push(N<=B?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"GT[]",B,N),j.push(B<N?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"GTEQ[]",B,N),j.push(B<=N?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"EQ[]",B,N),j.push(B===N?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"NEQ[]",B,N),j.push(B!==N?1:0)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"ODD[]",B),j.push(Math.trunc(B)%2?1:0)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"EVEN[]",B),j.push(Math.trunc(B)%2?0:1)},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"IF[]",j),j||(zi(E,!0),c.DEBUG&&console.log(E.step,"EIF[]"))},function(E){c.DEBUG&&console.log(E.step,"EIF[]")},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"AND[]",B,N),j.push(B&&N?1:0)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"OR[]",B,N),j.push(B||N?1:0)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"NOT[]",B),j.push(B?0:1)},ln.bind(void 0,1),function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SDB[]",j),E.deltaBase=j},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SDS[]",j),E.deltaShift=Math.pow(.5,j)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"ADD[]",B,N),j.push(N+B)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"SUB[]",B,N),j.push(N-B)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"DIV[]",B,N),j.push(64*N/B)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"MUL[]",B,N),j.push(N*B/64)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"ABS[]",B),j.push(Math.abs(B))},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"NEG[]",B),j.push(-B)},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"FLOOR[]",B),j.push(64*Math.floor(B/64))},function(E){var j=E.stack,B=j.pop();c.DEBUG&&console.log(E.step,"CEILING[]",B),j.push(64*Math.ceil(B/64))},$r.bind(void 0,0),$r.bind(void 0,1),$r.bind(void 0,2),$r.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var j=(B=E.stack).pop(),B=B.pop();c.DEBUG&&console.log(E.step,"WCVTF[]",j,B),E.cvt[B]=j*E.ppem/E.font.unitsPerEm},ln.bind(void 0,2),ln.bind(void 0,3),hi.bind(void 0,1),hi.bind(void 0,2),hi.bind(void 0,3),function(E){var j,B=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"SROUND[]",B),E.round=uu,192&B){case 0:j=.5;break;case 64:j=1;break;case 128:j=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=j,48&B){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*j;break;case 32:E.srPhase=.5*j;break;case 48:E.srPhase=.75*j;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(B&=15)===0?0:(B/8-.5)*j},function(E){var j,B=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"S45ROUND[]",B),E.round=uu,192&B){case 0:j=Math.sqrt(2)/2;break;case 64:j=Math.sqrt(2);break;case 128:j=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=j,48&B){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*j;break;case 32:E.srPhase=.5*j;break;case 48:E.srPhase=.75*j;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(B&=15)===0?0:(B/8-.5)*j},void 0,void 0,function(E){c.DEBUG&&console.log(E.step,"ROFF[]"),E.round=go},void 0,function(E){c.DEBUG&&console.log(E.step,"RUTG[]"),E.round=an},function(E){c.DEBUG&&console.log(E.step,"RDTG[]"),E.round=ma},yo,yo,void 0,void 0,void 0,void 0,void 0,function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SCANCTRL[]",j)},_o.bind(void 0,0),_o.bind(void 0,1),function(E){var j=E.stack,B=j.pop(),N=0;c.DEBUG&&console.log(E.step,"GETINFO[]",B),1&B&&(N=35),32&B&&(N|=4096),j.push(N)},void 0,function(E){var j=E.stack,B=j.pop(),N=j.pop(),K=j.pop();c.DEBUG&&console.log(E.step,"ROLL[]"),j.push(N),j.push(B),j.push(K)},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"MAX[]",B,N),j.push(Math.max(N,B))},function(E){var j=E.stack,B=j.pop(),N=j.pop();c.DEBUG&&console.log(E.step,"MIN[]",B,N),j.push(Math.min(N,B))},function(E){var j=E.stack.pop();c.DEBUG&&console.log(E.step,"SCANTYPE[]",j)},function(E){var j=E.stack.pop(),B=E.stack.pop();switch(c.DEBUG&&console.log(E.step,"INSTCTRL[]",j,B),j){case 1:return void(E.inhibitGridFit=!!B);case 2:return void(E.ignoreCvt=!!B);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ws.bind(void 0,1),Ws.bind(void 0,2),Ws.bind(void 0,3),Ws.bind(void 0,4),Ws.bind(void 0,5),Ws.bind(void 0,6),Ws.bind(void 0,7),Ws.bind(void 0,8),xo.bind(void 0,1),xo.bind(void 0,2),xo.bind(void 0,3),xo.bind(void 0,4),xo.bind(void 0,5),xo.bind(void 0,6),xo.bind(void 0,7),xo.bind(void 0,8),It.bind(void 0,0,0,0,0,0),It.bind(void 0,0,0,0,0,1),It.bind(void 0,0,0,0,0,2),It.bind(void 0,0,0,0,0,3),It.bind(void 0,0,0,0,1,0),It.bind(void 0,0,0,0,1,1),It.bind(void 0,0,0,0,1,2),It.bind(void 0,0,0,0,1,3),It.bind(void 0,0,0,1,0,0),It.bind(void 0,0,0,1,0,1),It.bind(void 0,0,0,1,0,2),It.bind(void 0,0,0,1,0,3),It.bind(void 0,0,0,1,1,0),It.bind(void 0,0,0,1,1,1),It.bind(void 0,0,0,1,1,2),It.bind(void 0,0,0,1,1,3),It.bind(void 0,0,1,0,0,0),It.bind(void 0,0,1,0,0,1),It.bind(void 0,0,1,0,0,2),It.bind(void 0,0,1,0,0,3),It.bind(void 0,0,1,0,1,0),It.bind(void 0,0,1,0,1,1),It.bind(void 0,0,1,0,1,2),It.bind(void 0,0,1,0,1,3),It.bind(void 0,0,1,1,0,0),It.bind(void 0,0,1,1,0,1),It.bind(void 0,0,1,1,0,2),It.bind(void 0,0,1,1,0,3),It.bind(void 0,0,1,1,1,0),It.bind(void 0,0,1,1,1,1),It.bind(void 0,0,1,1,1,2),It.bind(void 0,0,1,1,1,3),It.bind(void 0,1,0,0,0,0),It.bind(void 0,1,0,0,0,1),It.bind(void 0,1,0,0,0,2),It.bind(void 0,1,0,0,0,3),It.bind(void 0,1,0,0,1,0),It.bind(void 0,1,0,0,1,1),It.bind(void 0,1,0,0,1,2),It.bind(void 0,1,0,0,1,3),It.bind(void 0,1,0,1,0,0),It.bind(void 0,1,0,1,0,1),It.bind(void 0,1,0,1,0,2),It.bind(void 0,1,0,1,0,3),It.bind(void 0,1,0,1,1,0),It.bind(void 0,1,0,1,1,1),It.bind(void 0,1,0,1,1,2),It.bind(void 0,1,0,1,1,3),It.bind(void 0,1,1,0,0,0),It.bind(void 0,1,1,0,0,1),It.bind(void 0,1,1,0,0,2),It.bind(void 0,1,1,0,0,3),It.bind(void 0,1,1,0,1,0),It.bind(void 0,1,1,0,1,1),It.bind(void 0,1,1,0,1,2),It.bind(void 0,1,1,0,1,3),It.bind(void 0,1,1,1,0,0),It.bind(void 0,1,1,1,0,1),It.bind(void 0,1,1,1,0,2),It.bind(void 0,1,1,1,0,3),It.bind(void 0,1,1,1,1,0),It.bind(void 0,1,1,1,1,1),It.bind(void 0,1,1,1,1,2),It.bind(void 0,1,1,1,1,3)],lm=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Ur(E){(E=E||{}).empty||(Hs(E.familyName,"When creating a new Font object, familyName is required."),Hs(E.styleName,"When creating a new Font object, styleName is required."),Hs(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Hs(E.ascender,"When creating a new Font object, ascender is required."),Hs(E.descender,"When creating a new Font object, descender is required."),Hs(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ct.GlyphSet(this,E.glyphs||[]),this.encoding=new ye(this),this.position=new is(this),this.substitution=new kn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new il(this):void 0)}})}function Bc(E,j){var B,N=JSON.stringify(E),K=256;for(B in j){var re=parseInt(B);if(re&&!(re<256)){if(JSON.stringify(j[B])===N)return re;K<=re&&(K=re+1)}}return j[K]=E,K}Ur.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},Ur.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},Ur.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Ur.prototype.stringToGlyphs=function(E,j){j=j||this.defaultRenderOptions;for(var B=lm(E),N=[],K=0;K<B.length;K+=1){var re=B[K];N.push(this.charToGlyphIndex(re))}var se=N.length;if(j.features){var E=j.script||this.substitution.getDefaultScriptName(),_e=[];j.features.liga&&(_e=_e.concat(this.substitution.getFeature("liga",E,j.language))),j.features.rlig&&(_e=_e.concat(this.substitution.getFeature("rlig",E,j.language)));for(var Ie=0;Ie<se;Ie+=1)for(var Te=0;Te<_e.length;Te++){for(var Xe=_e[Te],Ze=Xe.sub,Ke=Ze.length,Ue=0;Ue<Ke&&Ze[Ue]===N[Ie+Ue];)Ue++;Ue===Ke&&(N.splice(Ie,Ke,Xe.by),se=se-Ke+1)}}for(var yt=new Array(se),it=this.glyphs.get(0),ft=0;ft<se;ft+=1)yt[ft]=this.glyphs.get(N[ft])||it;return yt},Ur.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},Ur.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Ur.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},Ur.prototype.getKerningValue=function(E,j){E=E.index||E,j=j.index||j;var B=this.position.defaultKerningTables;return B?this.position.getKerningValue(B,E,j):this.kerningPairs[E+","+j]||0},Ur.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Ur.prototype.forEachGlyph=function(E,j,B,N,K,re){j=j!==void 0?j:0,B=B!==void 0?B:0,K=K||this.defaultRenderOptions;var se,_e=1/this.unitsPerEm*(N=N!==void 0?N:72),Ie=this.stringToGlyphs(E,K);K.kerning&&(E=K.script||this.position.getDefaultScriptName(),se=this.position.getKerningTables(E,K.language));for(var Te=0;Te<Ie.length;Te+=1){var Xe=Ie[Te];re.call(this,Xe,j,B,N,K),Xe.advanceWidth&&(j+=Xe.advanceWidth*_e),K.kerning&&Te<Ie.length-1&&(j+=(se?this.position.getKerningValue(se,Xe.index,Ie[Te+1].index):this.getKerningValue(Xe,Ie[Te+1]))*_e),K.letterSpacing?j+=K.letterSpacing*N:K.tracking&&(j+=K.tracking/1e3*N)}return j},Ur.prototype.getPath=function(E,j,B,N,K){var re=new J;return this.forEachGlyph(E,j,B,N,K,function(se,_e,Ie,Te){se=se.getPath(_e,Ie,Te,K,this),re.extend(se)}),re},Ur.prototype.getPaths=function(E,j,B,N,K){var re=[];return this.forEachGlyph(E,j,B,N,K,function(se,_e,Ie,Te){se=se.getPath(_e,Ie,Te,K,this),re.push(se)}),re},Ur.prototype.getAdvanceWidth=function(E,j,B){return this.forEachGlyph(E,0,0,j,B,function(){})},Ur.prototype.draw=function(E,j,B,N,K,re){this.getPath(j,B,N,K,re).draw(E)},Ur.prototype.drawPoints=function(E,j,B,N,K,re){this.forEachGlyph(j,B,N,K,re,function(se,_e,Ie,Te){se.drawPoints(E,_e,Ie,Te)})},Ur.prototype.drawMetrics=function(E,j,B,N,K,re){this.forEachGlyph(j,B,N,K,re,function(se,_e,Ie,Te){se.drawMetrics(E,_e,Ie,Te)})},Ur.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},Ur.prototype.validate=function(){var E=this;function j(B){B=E.getEnglishName(B),B&&B.trim().length}j("fontFamily"),j("weightName"),j("manufacturer"),j("copyright"),j("version"),this.unitsPerEm},Ur.prototype.toTables=function(){return zn.fontToTable(this)},Ur.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ur.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),j=new ArrayBuffer(E.length),B=new Uint8Array(j),N=0;N<E.length;N++)B[N]=E[N];return j},Ur.prototype.download=function(E){var j=this.getEnglishName("fontFamily"),B=this.getEnglishName("fontSubfamily"),N=(E=E||j.replace(/\s/g,"")+"-"+B+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,N.byteLength,function(K){K.root.getFile(E,{create:!0},function(re){re.createWriter(function(se){var _e=new DataView(N),_e=new Blob([_e],{type:"font/opentype"});se.write(_e),se.addEventListener("writeend",function(){location.href=re.toURL()},!1)})})},function(K){throw new Error(K.name+": "+K.message)})):(j=r("fs"),B=function(K){for(var re=new a(K.byteLength),se=new Uint8Array(K),_e=0;_e<re.length;++_e)re[_e]=se[_e];return re}(N),j.writeFileSync(E,B))},Ur.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ur.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ur.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Fc={make:function(E,j){var B=new Ae.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);B.offsetToData=B.sizeOf();for(var N,K,re,se=0;se<E.axes.length;se++)B.fields=B.fields.concat((N=se,K=E.axes[se],re=j,re=Bc(K.name,j),[{name:"tag_"+N,type:"TAG",value:K.tag},{name:"minValue_"+N,type:"FIXED",value:K.minValue<<16},{name:"defaultValue_"+N,type:"FIXED",value:K.defaultValue<<16},{name:"maxValue_"+N,type:"FIXED",value:K.maxValue<<16},{name:"flags_"+N,type:"USHORT",value:0},{name:"nameID_"+N,type:"USHORT",value:re}]));for(var _e=0;_e<E.instances.length;_e++)B.fields=B.fields.concat(function(Ie,Te,Xe,Ze){for(var Ke=[{name:"nameID_"+Ie,type:"USHORT",value:Bc(Te.name,Ze)},{name:"flags_"+Ie,type:"USHORT",value:0}],Ue=0;Ue<Xe.length;++Ue){var yt=Xe[Ue].tag;Ke.push({name:"axis_"+Ie+" "+yt,type:"FIXED",value:Te.coordinates[yt]<<16})}return Ke}(_e,E.instances[_e],E.axes,j));return B},parse:function(E,j,B){for(var N,K,re,se,_e=new Re.Parser(E,j),Ie=_e.parseULong(),Te=(O.argument(Ie===65536,"Unsupported fvar table version."),_e.parseOffset16()),Xe=(_e.skip("uShort",1),_e.parseUShort()),Ze=_e.parseUShort(),Ke=_e.parseUShort(),Ue=_e.parseUShort(),yt=[],it=0;it<Xe;it++)yt.push((N=E,K=j+Te+it*Ze,re=B,se={},N=new Re.Parser(N,K),se.tag=N.parseTag(),se.minValue=N.parseFixed(),se.defaultValue=N.parseFixed(),se.maxValue=N.parseFixed(),N.skip("uShort",1),se.name=re[N.parseUShort()]||{},se));for(var ft=[],nt=j+Te+Xe*Ze,rt=0;rt<Ke;rt++)ft.push(function(Ft,Zt,Ut,Ht){var ar={},Dr=new Re.Parser(Ft,Zt);ar.name=Ht[Dr.parseUShort()]||{},Dr.skip("uShort",1),ar.coordinates={};for(var un=0;un<Ut.length;++un)ar.coordinates[Ut[un].tag]=Dr.parseFixed();return ar}(E,nt+rt*Ue,yt,B));return{axes:yt,instances:ft}}},as=new Array(10);as[1]=function(){var E=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{posFormat:1,coverage:this.parsePointer(Se.coverage),value:this.parseValueRecord()}:j===2?{posFormat:2,coverage:this.parsePointer(Se.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},as[2]=function(){var E,j,B,N,re=this.offset+this.relativeOffset,K=this.parseUShort(),re=(O.assert(K===1||K===2,"0x"+re.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Se.coverage)),se=this.parseUShort(),_e=this.parseUShort();return K===1?{posFormat:K,coverage:re,valueFormat1:se,valueFormat2:_e,pairSets:this.parseList(Se.pointer(Se.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(se),value2:this.parseValueRecord(_e)}})))}:K===2?(E=this.parsePointer(Se.classDef),j=this.parsePointer(Se.classDef),B=this.parseUShort(),N=this.parseUShort(),{posFormat:K,coverage:re,valueFormat1:se,valueFormat2:_e,classDef1:E,classDef2:j,class1Count:B,class2Count:N,classRecords:this.parseList(B,Se.list(N,function(){return{value1:this.parseValueRecord(se),value2:this.parseValueRecord(_e)}}))}):void 0},as[3]=function(){return{error:"GPOS Lookup 3 not supported"}},as[4]=function(){return{error:"GPOS Lookup 4 not supported"}},as[5]=function(){return{error:"GPOS Lookup 5 not supported"}},as[6]=function(){return{error:"GPOS Lookup 6 not supported"}},as[7]=function(){return{error:"GPOS Lookup 7 not supported"}},as[8]=function(){return{error:"GPOS Lookup 8 not supported"}},as[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var um=new Array(10),cm={parse:function(E,j){return j=(E=new Se(E,j=j||0)).parseVersion(1),O.argument(j===1||j===1.1,"Unsupported GPOS table version "+j),j===1?{version:j,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(as)}:{version:j,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(as),variations:E.parseFeatureVariationsList()}},make:function(E){return new Ae.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ae.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Ae.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Ae.LookupList(E.lookups,um)}])}},xd={parse:function(E,j){if(E=new Re.Parser(E,j),(j=E.parseUShort())===0){var B=E,N={},Ze=(B.skip("uShort"),B.parseUShort()),K=(O.argument(Ze===0,"Unsupported kern sub-table version."),B.skip("uShort",2),B.parseUShort());B.skip("uShort",3);for(var re=0;re<K;re+=1){var se=B.parseUShort(),_e=B.parseUShort(),Ie=B.parseShort();N[se+","+_e]=Ie}return N}if(j!==1)throw new Error("Unsupported kern table version ("+j+").");var Te=E,Xe={},Ze=(Te.skip("uShort"),1<Te.parseULong()&&console.warn("Only the first kern subtable is supported."),Te.skip("uLong"),255&Te.parseUShort());if(Te.skip("uShort"),Ze==0){var Ke=Te.parseUShort();Te.skip("uShort",3);for(var Ue=0;Ue<Ke;Ue+=1){var yt=Te.parseUShort(),it=Te.parseUShort(),ft=Te.parseShort();Xe[yt+","+it]=ft}}return Xe}},al={parse:function(E,j,B,N){for(var K=new Re.Parser(E,j),re=N?K.parseUShort:K.parseULong,se=[],_e=0;_e<B+1;_e+=1){var Ie=re.call(K);N&&(Ie*=2),se.push(Ie)}return se}};function ll(E,j){r("fs").readFile(E,function(B,N){if(B)return j(B.message);j(null,au(N))})}function Uc(E,j){var B=new XMLHttpRequest;B.open("get",E,!0),B.responseType="arraybuffer",B.onload=function(){return B.response?j(null,B.response):j("Font could not be loaded: "+B.statusText)},B.onerror=function(){j("Font could not be loaded")},B.send()}function du(E,j){for(var B=[],N=12,K=0;K<j;K+=1){var re=Re.getTag(E,N),se=Re.getULong(E,N+4),_e=Re.getULong(E,N+8),Ie=Re.getULong(E,N+12);B.push({tag:re,checksum:se,offset:_e,length:Ie,compression:!1}),N+=16}return B}function jr(B,j){if(j.compression!=="WOFF")return{data:B,offset:j.offset};var B=new Uint8Array(B.buffer,j.offset+2,j.compressedLength-2),N=new Uint8Array(j.length);if(V(B,N),N.byteLength!==j.length)throw new Error("Decompression error: "+j.tag+" decompressed length doesn't match recorded length");return{data:new DataView(N.buffer,0),offset:0}}function wi(rt){var j,B,N,K,re,se,_e,Ie,Te,Xe,Ze,Ke,Ue,yt,it=new Ur({empty:!0}),ft=new DataView(rt,0),nt=[],rt=Re.getTag(ft,0);if(rt==="\0\0\0"||rt==="true"||rt==="typ1")it.outlinesFormat="truetype",nt=du(ft,N=Re.getUShort(ft,4));else if(rt==="OTTO")it.outlinesFormat="cff",nt=du(ft,N=Re.getUShort(ft,4));else{if(rt!=="wOFF")throw new Error("Unsupported OpenType signature "+rt);var Ft=Re.getTag(ft,4);if(Ft==="\0\0\0")it.outlinesFormat="truetype";else{if(Ft!=="OTTO")throw new Error("Unsupported OpenType flavor "+rt);it.outlinesFormat="cff"}nt=function(Vr,Er){for(var Wn=[],Jr=44,gr=0;gr<Er;gr+=1){var Nr=Re.getTag(Vr,Jr),wn=Re.getULong(Vr,Jr+4),_a=Re.getULong(Vr,Jr+8),bo=Re.getULong(Vr,Jr+12),Vi=void 0,Vi=_a<bo&&"WOFF";Wn.push({tag:Nr,offset:wn,compression:Vi,compressedLength:_a,length:bo}),Jr+=20}return Wn}(ft,N=Re.getUShort(ft,12))}for(var Zt=0;Zt<N;Zt+=1){var Ut=nt[Zt],Ht=void 0;switch(Ut.tag){case"cmap":Ht=jr(ft,Ut),it.tables.cmap=le.parse(Ht.data,Ht.offset),it.encoding=new De(it.tables.cmap);break;case"cvt ":Ht=jr(ft,Ut),yt=new Re.Parser(Ht.data,Ht.offset),it.tables.cvt=yt.parseShortList(Ut.length/2);break;case"fvar":re=Ut;break;case"fpgm":Ht=jr(ft,Ut),yt=new Re.Parser(Ht.data,Ht.offset),it.tables.fpgm=yt.parseByteList(Ut.length);break;case"head":Ht=jr(ft,Ut),it.tables.head=po.parse(Ht.data,Ht.offset),it.unitsPerEm=it.tables.head.unitsPerEm,j=it.tables.head.indexToLocFormat;break;case"hhea":Ht=jr(ft,Ut),it.tables.hhea=Ge.parse(Ht.data,Ht.offset),it.ascender=it.tables.hhea.ascender,it.descender=it.tables.hhea.descender,it.numberOfHMetrics=it.tables.hhea.numberOfHMetrics;break;case"hmtx":Te=Ut;break;case"ltag":Ht=jr(ft,Ut),B=He.parse(Ht.data,Ht.offset);break;case"maxp":Ht=jr(ft,Ut),it.tables.maxp=ze.parse(Ht.data,Ht.offset),it.numGlyphs=it.tables.maxp.numGlyphs;break;case"name":Ke=Ut;break;case"OS/2":Ht=jr(ft,Ut),it.tables.os2=Et.parse(Ht.data,Ht.offset);break;case"post":Ht=jr(ft,Ut),it.tables.post=jt.parse(Ht.data,Ht.offset),it.glyphNames=new qe(it.tables.post);break;case"prep":Ht=jr(ft,Ut),yt=new Re.Parser(Ht.data,Ht.offset),it.tables.prep=yt.parseByteList(Ut.length);break;case"glyf":se=Ut;break;case"loca":Ze=Ut;break;case"CFF ":K=Ut;break;case"kern":Xe=Ut;break;case"GPOS":_e=Ut;break;case"GSUB":Ie=Ut;break;case"meta":Ue=Ut}}if(Ft=jr(ft,Ke),it.tables.name=rr.parse(Ft.data,Ft.offset,B),it.names=it.tables.name,se&&Ze)rt=j===0,Ft=jr(ft,Ze),Ft=al.parse(Ft.data,Ft.offset,it.numGlyphs,rt),rt=jr(ft,se),it.glyphs=mr.parse(rt.data,rt.offset,Ft,it);else{if(!K)throw new Error("Font doesn't contain TrueType or CFF outlines.");rt=jr(ft,K),Ss.parse(rt.data,rt.offset,it)}for(var Ft=jr(ft,Te),ar=(ve.parse(Ft.data,Ft.offset,it.numberOfHMetrics,it.numGlyphs,it.glyphs),it),Dr=ar.tables.cmap.glyphIndexMap,un=Object.keys(Dr),en=0;en<un.length;en+=1){var zr,bn=un[en],si=Dr[bn];(zr=ar.glyphs.get(si)).addUnicode(parseInt(bn))}for(var xr=0;xr<ar.glyphs.length;xr+=1)zr=ar.glyphs.get(xr),ar.cffEncoding?ar.isCIDFont?zr.name="gid"+xr:zr.name=ar.cffEncoding.charset[xr]:ar.glyphNames.names&&(zr.name=ar.glyphNames.glyphIndexToName(xr));return Xe?(rt=jr(ft,Xe),it.kerningPairs=xd.parse(rt.data,rt.offset)):it.kerningPairs={},_e&&(Ft=jr(ft,_e),it.tables.gpos=cm.parse(Ft.data,Ft.offset),it.position.init()),Ie&&(rt=jr(ft,Ie),it.tables.gsub=xn.parse(rt.data,rt.offset)),re&&(Ft=jr(ft,re),it.tables.fvar=Fc.parse(Ft.data,Ft.offset,it.names)),Ue&&(rt=jr(ft,Ue),it.tables.meta=Rr.parse(rt.data,rt.offset),it.metas=it.tables.meta),it}c.Font=Ur,c.Glyph=Ye,c.Path=J,c.BoundingBox=Y,c._parse=Re,c.parse=wi,c.load=function(E,j){(typeof window>"u"?ll:Uc)(E,function(B,N){if(B)return j(B);var K;try{K=wi(N)}catch(re){return j(re,null)}return j(null,K)})},c.loadSync=function(E){return wi(au(r("fs").readFileSync(E)))},Object.defineProperty(c,"__esModule",{value:!0})},l(typeof o=="object"&&s!==void 0?o:u.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],255:[function(r,s,o){(function(a){function u(d,p){for(var f=0,h=d.length-1;0<=h;h--){var m=d[h];m==="."?d.splice(h,1):m===".."?(d.splice(h,1),f++):f&&(d.splice(h,1),f--)}if(p)for(;f--;)d.unshift("..");return d}function l(d,p){if(d.filter)return d.filter(p);for(var f=[],h=0;h<d.length;h++)p(d[h],h,d)&&f.push(d[h]);return f}o.resolve=function(){for(var d="",p=!1,f=arguments.length-1;-1<=f&&!p;f--){var h=0<=f?arguments[f]:a.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(d=h+"/"+d,p=h.charAt(0)==="/")}return(p?"/":"")+(d=u(l(d.split("/"),function(m){return!!m}),!p).join("/"))||"."},o.normalize=function(d){var p=o.isAbsolute(d),f=c(d,-1)==="/";return(d=(d=u(l(d.split("/"),function(h){return!!h}),!p).join("/"))||p?d:".")&&f&&(d+="/"),(p?"/":"")+d},o.isAbsolute=function(d){return d.charAt(0)==="/"},o.join=function(){var d=Array.prototype.slice.call(arguments,0);return o.normalize(l(d,function(p,f){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},o.relative=function(d,p){function f(x){for(var b=0;b<x.length&&x[b]==="";b++);for(var S=x.length-1;0<=S&&x[S]==="";S--);return S<b?[]:x.slice(b,S-b+1)}d=o.resolve(d).substr(1),p=o.resolve(p).substr(1);for(var h=f(d.split("/")),m=f(p.split("/")),y=Math.min(h.length,m.length),v=y,g=0;g<y;g++)if(h[g]!==m[g]){v=g;break}for(var _=[],g=v;g<h.length;g++)_.push("..");return(_=_.concat(m.slice(v))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(d){if(typeof d!="string"&&(d+=""),d.length===0)return".";for(var p=d.charCodeAt(0)===47,f=-1,h=!0,m=d.length-1;1<=m;--m)if(d.charCodeAt(m)===47){if(!h){f=m;break}}else h=!1;return f===-1?p?"/":".":p&&f===1?"/":d.slice(0,f)},o.basename=function(d,p){return d=function(f){typeof f!="string"&&(f+="");for(var h=0,m=-1,y=!0,v=f.length-1;0<=v;--v)if(f.charCodeAt(v)===47){if(!y){h=v+1;break}}else m===-1&&(y=!1,m=v+1);return m===-1?"":f.slice(h,m)}(d),d=p&&d.substr(-1*p.length)===p?d.substr(0,d.length-p.length):d},o.extname=function(d){typeof d!="string"&&(d+="");for(var p=-1,f=0,h=-1,m=!0,y=0,v=d.length-1;0<=v;--v){var g=d.charCodeAt(v);if(g===47){if(m)continue;f=v+1;break}h===-1&&(m=!1,h=v+1),g===46?p===-1?p=v:y!==1&&(y=1):p!==-1&&(y=-1)}return p===-1||h===-1||y===0||y===1&&p===h-1&&p===f+1?"":d.slice(p,h)};var c="ab".substr(-1)==="b"?function(d,p,f){return d.substr(p,f)}:function(d,p,f){return p<0&&(p=d.length+p),d.substr(p,f)}}).call(this,r("_process"))},{_process:256}],256:[function(r,l,o){var a,u,l=l.exports={};function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:c}catch{a=c}try{u=typeof clearTimeout=="function"?clearTimeout:d}catch{u=d}function p(b){if(a===setTimeout)return setTimeout(b,0);if((a===c||!a)&&setTimeout)return(a=setTimeout)(b,0);try{return a(b,0)}catch{try{return a.call(null,b,0)}catch{return a.call(this,b,0)}}}var f,h=[],m=!1,y=-1;function v(){m&&f&&(m=!1,f.length?h=f.concat(h):y=-1,h.length&&g())}function g(){if(!m){for(var b=p(v),S=(m=!0,h.length);S;){for(f=h,h=[];++y<S;)f&&f[y].run();y=-1,S=h.length}f=null,m=!1,function(T){if(u===clearTimeout)return clearTimeout(T);if((u===d||!u)&&clearTimeout)return(u=clearTimeout)(T);try{u(T)}catch{try{return u.call(null,T)}catch{return u.call(this,T)}}}(b)}}function _(b,S){this.fun=b,this.array=S}function x(){}l.nextTick=function(b){var S=new Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];h.push(new _(b,S)),h.length!==1||m||p(g)},_.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=x,l.addListener=x,l.once=x,l.off=x,l.removeListener=x,l.removeAllListeners=x,l.emit=x,l.prependListener=x,l.prependOnceListener=x,l.listeners=function(b){return[]},l.binding=function(b){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(b){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],257:[function(r,s,o){s=function(a){var u,l=Object.prototype,c=l.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},d=M.iterator||"@@iterator",p=M.asyncIterator||"@@asyncIterator",f=M.toStringTag||"@@toStringTag";function h(Q,H,W,q){var J,ie,I,O,H=H&&H.prototype instanceof b?H:b,H=Object.create(H.prototype),q=new F(q||[]);return H._invoke=(J=Q,ie=W,I=q,O=y,function(Z,oe){if(O===g)throw new Error("Generator is already running");if(O===_){if(Z==="throw")throw oe;return z()}for(I.method=Z,I.arg=oe;;){var pe=I.delegate;if(pe&&(pe=function be(me,ce){var te=me.iterator[ce.method];if(te===u){if(ce.delegate=null,ce.method==="throw"){if(me.iterator.return&&(ce.method="return",ce.arg=u,be(me,ce),ce.method==="throw"))return x;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}if(te=m(te,me.iterator,ce.arg),te.type==="throw")return ce.method="throw",ce.arg=te.arg,ce.delegate=null,x;if(te=te.arg,!te)return ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,x;{if(!te.done)return te;ce[me.resultName]=te.value,ce.next=me.nextLoc,ce.method!=="return"&&(ce.method="next",ce.arg=u)}return ce.delegate=null,x}(pe,I),pe)){if(pe===x)continue;return pe}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(O===y)throw O=_,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);if(O=g,pe=m(J,ie,I),pe.type==="normal"){if(O=I.done?_:v,pe.arg!==x)return{value:pe.arg,done:I.done}}else pe.type==="throw"&&(O=_,I.method="throw",I.arg=pe.arg)}}),H}function m(Q,V,W){try{return{type:"normal",arg:Q.call(V,W)}}catch(Y){return{type:"throw",arg:Y}}}a.wrap=h;var y="suspendedStart",v="suspendedYield",g="executing",_="completed",x={};function b(){}function S(){}function T(){}var M={},R=(M[d]=function(){return this},Object.getPrototypeOf),R=R&&R(R(G([]))),L=(R&&R!==l&&c.call(R,d)&&(M=R),T.prototype=b.prototype=Object.create(M));function P(Q){["next","throw","return"].forEach(function(V){Q[V]=function(W){return this._invoke(V,W)}})}function C(Q){var V;this._invoke=function(W,Y){function J(){return new Promise(function(ie,I){(function O(be,q,Z,oe){var pe,be=m(Q[be],Q,q);if(be.type!=="throw")return(q=(pe=be.arg).value)&&typeof q=="object"&&c.call(q,"__await")?Promise.resolve(q.__await).then(function(me){O("next",me,Z,oe)},function(me){O("throw",me,Z,oe)}):Promise.resolve(q).then(function(me){pe.value=me,Z(pe)},function(me){return O("throw",me,Z,oe)});oe(be.arg)})(W,Y,ie,I)})}return V=V?V.then(J,J):J()}}function k(Q){var V={tryLoc:Q[0]};1 in Q&&(V.catchLoc=Q[1]),2 in Q&&(V.finallyLoc=Q[2],V.afterLoc=Q[3]),this.tryEntries.push(V)}function D(Q){var V=Q.completion||{};V.type="normal",delete V.arg,Q.completion=V}function F(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(k,this),this.reset(!0)}function G(Q){if(Q){var V,W=Q[d];if(W)return W.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length))return V=-1,(W=function Y(){for(;++V<Q.length;)if(c.call(Q,V))return Y.value=Q[V],Y.done=!1,Y;return Y.value=u,Y.done=!0,Y}).next=W}return{next:z}}function z(){return{value:u,done:!0}}return(S.prototype=L.constructor=T).constructor=S,T[f]=S.displayName="GeneratorFunction",a.isGeneratorFunction=function(Q){return Q=typeof Q=="function"&&Q.constructor,!!Q&&(Q===S||(Q.displayName||Q.name)==="GeneratorFunction")},a.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,T):(Q.__proto__=T,f in Q||(Q[f]="GeneratorFunction")),Q.prototype=Object.create(L),Q},a.awrap=function(Q){return{__await:Q}},P(C.prototype),C.prototype[p]=function(){return this},a.AsyncIterator=C,a.async=function(Q,V,W,Y){var J=new C(h(Q,V,W,Y));return a.isGeneratorFunction(V)?J:J.next().then(function(ie){return ie.done?ie.value:J.next()})},P(L),L[f]="Generator",L[d]=function(){return this},L.toString=function(){return"[object Generator]"},a.keys=function(Q){var V,W=[];for(V in Q)W.push(V);return W.reverse(),function Y(){for(;W.length;){var J=W.pop();if(J in Q)return Y.value=J,Y.done=!1,Y}return Y.done=!0,Y}},a.values=G,F.prototype={constructor:F,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(D),!Q)for(var V in this)V.charAt(0)==="t"&&c.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=u)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var V=this;function W(H,q){return ie.type="throw",ie.arg=Q,V.next=H,q&&(V.method="next",V.arg=u),!!q}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var J=this.tryEntries[Y],ie=J.completion;if(J.tryLoc==="root")return W("end");if(J.tryLoc<=this.prev){var I=c.call(J,"catchLoc"),O=c.call(J,"finallyLoc");if(I&&O){if(this.prev<J.catchLoc)return W(J.catchLoc,!0);if(this.prev<J.finallyLoc)return W(J.finallyLoc)}else if(I){if(this.prev<J.catchLoc)return W(J.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return W(J.finallyLoc)}}}},abrupt:function(Q,V){for(var W=this.tryEntries.length-1;0<=W;--W){var Y=this.tryEntries[W];if(Y.tryLoc<=this.prev&&c.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var J=Y;break}}var ie=(J=J&&(Q==="break"||Q==="continue")&&J.tryLoc<=V&&V<=J.finallyLoc?null:J)?J.completion:{};return ie.type=Q,ie.arg=V,J?(this.method="next",this.next=J.finallyLoc,x):this.complete(ie)},complete:function(Q,V){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&V&&(this.next=V),x},finish:function(Q){for(var V=this.tryEntries.length-1;0<=V;--V){var W=this.tryEntries[V];if(W.finallyLoc===Q)return this.complete(W.completion,W.afterLoc),D(W),x}},catch:function(Q){for(var V=this.tryEntries.length-1;0<=V;--V){var W,Y,J=this.tryEntries[V];if(J.tryLoc===Q)return(W=J.completion).type==="throw"&&(Y=W.arg,D(J)),Y}throw new Error("illegal catch attempt")},delegateYield:function(Q,V,W){return this.delegate={iterator:G(Q),resultName:V,nextLoc:W},this.method==="next"&&(this.arg=u),x}},a}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=s}catch{Function("r","regeneratorRuntime = r")(s)}},{}],258:[function(r,s,o){(function(a){var u,l,c,d,p,f,h,m,y,v;function g(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function _(D){return D=typeof D!="string"?String(D):D}function x(D){var F={next:function(){var G=D.shift();return{done:G===void 0,value:G}}};return l&&(F[Symbol.iterator]=function(){return F}),F}function b(D){this.map={},D instanceof b?D.forEach(function(F,G){this.append(G,F)},this):Array.isArray(D)?D.forEach(function(F){this.append(F[0],F[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(F){this.append(F,D[F])},this)}function S(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function T(D){return new Promise(function(F,G){D.onload=function(){F(D.result)},D.onerror=function(){G(D.error)}})}function M(D){var F=new FileReader,G=T(F);return F.readAsArrayBuffer(D),G}function R(D){var F;return D.slice?D.slice(0):((F=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),F.buffer)}function L(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(c&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(d&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(u&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(p&&c&&h(D))this._bodyArrayBuffer=R(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(D)&&!m(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=R(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var D,F,G=S(this);if(G)return G;if(this._bodyBlob)return G=this._bodyBlob,D=new FileReader,F=T(D),D.readAsText(G),F;if(this._bodyArrayBuffer)return Promise.resolve(function(z){for(var Q=new Uint8Array(z),V=new Array(Q.length),W=0;W<Q.length;W++)V[W]=String.fromCharCode(Q[W]);return V.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(D,F){var G,z=(F=F||{}).body;if(D instanceof P){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,F.headers||(this.headers=new b(D.headers)),this.method=D.method,this.mode=D.mode,z||D._bodyInit==null||(z=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=F.credentials||this.credentials||"omit",!F.headers&&this.headers||(this.headers=new b(F.headers)),this.method=(D=F.method||this.method||"GET",G=D.toUpperCase(),-1<y.indexOf(G)?G:D),this.mode=F.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(z)}function C(D){var F=new FormData;return D.trim().split("&").forEach(function(G){var z;G&&(z=(G=G.split("=")).shift().replace(/\+/g," "),G=G.join("=").replace(/\+/g," "),F.append(decodeURIComponent(z),decodeURIComponent(G)))}),F}function k(D,F){F=F||{},this.type="default",this.status=F.status===void 0?200:F.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new b(F.headers),this.url=F.url||"",this._initBody(D)}a.fetch||(u="URLSearchParams"in a,l="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in a,(p="ArrayBuffer"in a)&&(f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(D){return D&&DataView.prototype.isPrototypeOf(D)},m=ArrayBuffer.isView||function(D){return D&&-1<f.indexOf(Object.prototype.toString.call(D))}),b.prototype.append=function(D,F){D=g(D),F=_(F);var G=this.map[D];this.map[D]=G?G+","+F:F},b.prototype.delete=function(D){delete this.map[g(D)]},b.prototype.get=function(D){return D=g(D),this.has(D)?this.map[D]:null},b.prototype.has=function(D){return this.map.hasOwnProperty(g(D))},b.prototype.set=function(D,F){this.map[g(D)]=_(F)},b.prototype.forEach=function(D,F){for(var G in this.map)this.map.hasOwnProperty(G)&&D.call(F,this.map[G],G,this)},b.prototype.keys=function(){var D=[];return this.forEach(function(F,G){D.push(G)}),x(D)},b.prototype.values=function(){var D=[];return this.forEach(function(F){D.push(F)}),x(D)},b.prototype.entries=function(){var D=[];return this.forEach(function(F,G){D.push([G,F])}),x(D)},l&&(b.prototype[Symbol.iterator]=b.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},L.call(P.prototype),L.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},k.error=function(){var D=new k(null,{status:0,statusText:""});return D.type="error",D},v=[301,302,303,307,308],k.redirect=function(D,F){if(v.indexOf(F)===-1)throw new RangeError("Invalid status code");return new k(null,{status:F,headers:{location:D}})},a.Headers=b,a.Request=P,a.Response=k,a.fetch=function(D,F){return new Promise(function(G,z){var Q=new P(D,F),V=new XMLHttpRequest;V.onload=function(){var W,Y={status:V.status,statusText:V.statusText,headers:(Y=V.getAllResponseHeaders()||"",W=new b,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(I){var I=I.split(":"),O=I.shift().trim();O&&(I=I.join(":").trim(),W.append(O,I))}),W)},J=(Y.url="responseURL"in V?V.responseURL:Y.headers.get("X-Request-URL"),"response"in V?V.response:V.responseText);G(new k(J,Y))},V.onerror=function(){z(new TypeError("Network request failed"))},V.ontimeout=function(){z(new TypeError("Network request failed"))},V.open(Q.method,Q.url,!0),Q.credentials==="include"?V.withCredentials=!0:Q.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&c&&(V.responseType="blob"),Q.headers.forEach(function(W,Y){V.setRequestHeader(Y,W)}),V.send(Q._bodyInit===void 0?null:Q._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(r,s,o){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,u=c(r("../core/main")),l=c(r("../color/color_conversion"));function c(f){return f&&f.__esModule?f:{default:f}}var d=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];u.default.prototype._rgbColorName=function(y){var h,m,y=l.default._rgbaToHSBA(y),v=[(a=y)[0],y[1],y[2]];v[0]!==0&&(v[0]=Math.round(100*v[0]),(y=v[0].toString().split(""))[m=y.length-1]=parseInt(y[m]),y[m]<2.5?y[m]=0:2.5<=y[m]&&y[m]<7.5&&(y[m]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[m]&&(y[m]=0,y[0]=y[0]+1),v[0]=10*y[0]+y[1]):7.5<=y[m]?v[0]=10:v[0]=y[m]),v[2]=v[2]/255;for(var g=v.length-1;1<=g;g--)v[g]<=.25?v[g]=0:.25<v[g]&&v[g]<.75?v[g]=.5:v[g]=1;if(v[0]===0&&v[1]===0&&v[2]===1){for(var _=2;0<=_;_--)a[_]=Math.round(1e4*a[_])/1e4;for(var x=0;x<d.length;x++){if(d[x].h===a[0]&&d[x].s===a[1]&&d[x].b===a[2]){h=d[x].name;break}h="white"}}else for(var b=0;b<p.length;b++)if(p[b].h===v[0]&&p[b].s===v[1]&&p[b].b===v[2]){h=p[b].name;break}return h},r=u.default,o.default=r},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r},u="_Description",l="_fallbackDesc",c="_fallbackTable",d="_Label",p="_labelDesc",f="_labelTable";function h(m){if(m==="label"||m==="fallback")throw new Error("description should not be LABEL or FALLBACK");return m.endsWith(".")||m.endsWith(";")||m.endsWith(",")||m.endsWith("?")||m.endsWith("!")||(m+="."),m}a.default.prototype.describe=function(m,y){var v;a.default._validateParameters("describe",arguments),typeof m=="string"&&(v=this.canvas.id,m=h(m),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==m&&(this.descriptions.fallback.innerHTML=m):this._describeHTML("fallback",m),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==m&&(this.descriptions.label.innerHTML=m):this._describeHTML("label",m)))},a.default.prototype.describeElement=function(m,y,v){var g,_;a.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof m=="string"&&(g=this.canvas.id,y=h(y),_=function(x){if(x==="label"||x==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return x.endsWith(".")||x.endsWith(";")||x.endsWith(",")?x=x.replace(/.$/,":"):x.endsWith(":")||(x+=":"),x}(m),m=m.replace(/[^a-zA-Z0-9]/g,""),_='<th scope="row">'.concat(_,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[m]?this.descriptions.fallbackElements[m].innerHTML!==_&&(this.descriptions.fallbackElements[m].innerHTML=_):this._describeElementHTML("fallback",m,_),v===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[m]?this.descriptions.labelElements[m].innerHTML!==_&&(this.descriptions.labelElements[m].innerHTML=_):this._describeElementHTML("label",m,_)))},a.default.prototype._describeHTML=function(m,y){var v,g=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(g+u))?this.dummyDOM.querySelector("#"+g+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+l,'"></p>')):(v='<div id="'.concat(g).concat(u,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(g)).innerHTML=v),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(l)),this.descriptions.fallback.innerHTML=y):m==="label"&&(this.dummyDOM.querySelector("#".concat(g+d))?this.dummyDOM.querySelector("#".concat(g+f))&&this.dummyDOM.querySelector("#".concat(g+f)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(p,'"></p>')):(v='<div id="'.concat(g).concat(d,'" class="p5Label"><p id="').concat(g).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",v)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+p),this.descriptions.label.innerHTML=y)},a.default.prototype._describeElementHTML=function(m,y,v){var g,_=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(_+u))?this.dummyDOM.querySelector("#"+_+c)||this.dummyDOM.querySelector("#"+_+l).insertAdjacentHTML("afterend",'<table id="'.concat(_).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(_).concat(u,'" role="region" aria-label="Canvas Description"><table id="').concat(_).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+_).innerHTML=g),(g=document.createElement("tr")).id=_+"_fte_"+y,this.dummyDOM.querySelector("#"+_+c).appendChild(g),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(_).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=v):m==="label"&&(this.dummyDOM.querySelector("#".concat(_+d))?this.dummyDOM.querySelector("#".concat(_+f))||this.dummyDOM.querySelector("#"+_+p).insertAdjacentHTML("afterend",'<table id="'.concat(_+f,'"></table>')):(g='<div id="'.concat(_).concat(d,'" class="p5Label"><table id="').concat(_).concat(f,'"></table></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",g)),(m=document.createElement("tr")).id=_+"_lte_"+y,this.dummyDOM.querySelector("#"+_+f).appendChild(m),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(_).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=v)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(a){var u,l,c,d;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(u=this._accessibleOutputs[a],c=function(p,f,h,m){return f="".concat(f," canvas, ").concat(h," by ").concat(m," pixels, contains ").concat(p[0]),f=(p[0]===1?"".concat(f," shape: "):"".concat(f," shapes: ")).concat(p[1]),f}((l=function(p,f){var h,m="",y="",v=0;for(h in f){var g,_=0;for(g in f[h]){var x='<li id="'.concat(p,"shape").concat(v,'">').concat(f[h][g].color," ").concat(h,",");h==="line"?x+=" location = ".concat(f[h][g].pos,", length = ").concat(f[h][g].length," pixels"):(x+=" location = ".concat(f[h][g].pos),h!=="point"&&(x+=", area = ".concat(f[h][g].area," %")),x+="</li>"),m+=x,_++,v++}y=1<_?"".concat(y," ").concat(_," ").concat(h,"s"):"".concat(y," ").concat(_," ").concat(h)}return{numShapes:[v,y],details:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),d=function(p,f){var h,m,y=0,v="",g=Array.from(Array(10),function(){return Array(10)});for(h in f)for(var _ in f[h]){var x=void 0;x=h!=="line"?'<a href="#'.concat(p,"shape").concat(y,'">').concat(f[h][_].color," ").concat(h,"</a>"):'<a href="#'.concat(p,"shape").concat(y,'">').concat(f[h][_].color," ").concat(h," midpoint</a>"),g[f[h][_].loc.locY][f[h][_].loc.locX]?g[f[h][_].loc.locY][f[h][_].loc.locX]=g[f[h][_].loc.locY][f[h][_].loc.locX]+"  "+x:g[f[h][_].loc.locY][f[h][_].loc.locX]=x,y++}for(m in g){var b,S="<tr>";for(b in g[m])S+="<td>",g[m][b]!==void 0&&(S+=g[m][b]),S+="</td>";v=v+S+"</tr>"}return v}(a,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),d!==u.map.innerHTML&&(u.map.innerHTML=d),l.details!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=l.details),this._accessibleOutputs[a]=u)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c){return function(d){if(Array.isArray(d)){for(var p=0,f=new Array(d.length);p<d.length;p++)f[p]=d[p];return f}}(c)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(c,d,p){return d=Math.floor(c[0]/d*10),c=Math.floor(c[1]/p*10),d===10&&(d-=1),c===10&&(c-=1),{locX:d,locY:c}}a.default.prototype.textOutput=function(c){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(c){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(c,d){var p,f,h,m=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),"");d==="Fallback"?(p=m+c,this.dummyDOM.querySelector("#".concat(f=m+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(m,"_Description"))?this.dummyDOM.querySelector("#".concat(m,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(f,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(m)).innerHTML='<div id="'.concat(f,'" role="region" aria-label="Canvas Outputs"></div>'))):d==="Label"&&(p=m+c+(y=d),this.dummyDOM.querySelector("#".concat(f=m+"accessibleOutput"+d))||(this.dummyDOM.querySelector("#".concat(m,"_Label"))?this.dummyDOM.querySelector("#".concat(m,"_Label")):this.dummyDOM.querySelector("#".concat(m))).insertAdjacentHTML("afterend",'<div id="'.concat(f,'"></div>'))),this._accessibleOutputs[p]={},c==="textOutput"?(y="#".concat(m,"gridOutput").concat(y),h='<div id="'.concat(p,'">Text Output<div id="').concat(p,'Summary" aria-label="text output summary"><p id="').concat(p,'_summary"></p><ul id="').concat(p,'_list"></ul></div><table id="').concat(p,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(f)).innerHTML=h,this._accessibleOutputs[p].list=this.dummyDOM.querySelector("#".concat(p,"_list"))):c==="gridOutput"&&(y="#".concat(m,"textOutput").concat(y),h='<div id="'.concat(p,'">Grid Output<p id="').concat(p,'_summary" aria-label="grid output summary"><table id="').concat(p,'_map" summary="grid output content"></table><ul id="').concat(p,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(f)).innerHTML=h,this._accessibleOutputs[p].map=this.dummyDOM.querySelector("#".concat(p,"_map"))),this._accessibleOutputs[p].shapeDetails=this.dummyDOM.querySelector("#".concat(p,"_shapeDetails")),this._accessibleOutputs[p].summary=this.dummyDOM.querySelector("#".concat(p,"_summary"))},a.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},a.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},a.default.prototype._accsCanvasColors=function(c,d){c==="fill"?this.ingredients.colors.fillRGBA!==d&&(this.ingredients.colors.fillRGBA=d,this.ingredients.colors.fill=this._rgbColorName(d)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==d&&(this.ingredients.colors.strokeRGBA=d,this.ingredients.colors.stroke=this._rgbColorName(d))},a.default.prototype._accsOutput=function(c,d){c==="ellipse"&&d[2]===d[3]?c="circle":c==="rectangle"&&d[2]===d[3]&&(c="square");var p,f,h={},m=!0,y=function(g,_){var x;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(x=Math.round(_[0]+_[2]/2),Math.round(_[1]+_[3]/2)):g==="triangle"?(x=(_[0]+_[2]+_[4])/3,(_[1]+_[3]+_[5])/3):g==="quadrilateral"?(x=(_[0]+_[2]+_[4]+_[6])/4,(_[1]+_[3]+_[5]+_[7])/4):g==="line"?(x=(_[0]+_[2])/2,(_[1]+_[3])/2):(x=_[0],_[1]),[x,g]}(c,d);if(c==="line"?(h.color=this.ingredients.colors.stroke,h.length=Math.round(this.dist(d[0],d[1],d[2],d[3])),p=this._getPos(d[0],[1]),f=this._getPos(d[2],[3]),h.loc=l(y,this.width,this.height),h.pos=p===f?"at ".concat(p):"from ".concat(p," to ").concat(f)):(c==="point"?h.color=this.ingredients.colors.stroke:(h.color=this.ingredients.colors.fill,h.area=this._getArea(c,d)),h.pos=this._getPos.apply(this,u(y)),h.loc=l(y,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[h]){for(var v in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][v])===JSON.stringify(h)&&(m=!1);m===!0&&this.ingredients.shapes[c].push(h)}}else this.ingredients.shapes[c]=[h]},a.default.prototype._getPos=function(f,p){var f=new DOMPointReadOnly(f,p),p=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),f=f.matrixTransform(p),p=f.x,f=f.y,h=this.width*this._pixelDensity,m=this.height*this._pixelDensity;return p<.4*h?f<.4*m?"top left":.6*m<f?"bottom left":"mid left":.6*h<p?f<.4*m?"top right":.6*m<f?"bottom right":"mid right":f<.4*m?"top middle":.6*m<f?"bottom middle":"middle"},a.default.prototype._getArea=function(c,d){var p,f,h=0,m=(c==="arc"?(h=(p=((d[5]-d[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*d[2]*d[3]/8,d[6]!=="open"&&d[6]!=="chord"||(f=d[0],_=d[1],m=d[0]+d[2]/2*Math.cos(d[4]).toFixed(2),x=d[1]+d[3]/2*Math.sin(d[4]).toFixed(2),v=d[0]+d[2]/2*Math.cos(d[5]).toFixed(2),y=d[1]+d[3]/2*Math.sin(d[5]).toFixed(2),f=Math.abs(f*(x-y)+m*(y-_)+v*(_-x))/2,p>Math.PI?h+=f:h-=f)):c==="ellipse"||c==="circle"?h=3.14*d[2]/2*d[3]/2:c==="line"||c==="point"?h=0:c==="quadrilateral"?h=Math.abs((d[6]+d[0])*(d[7]-d[1])+(d[0]+d[2])*(d[1]-d[3])+(d[2]+d[4])*(d[3]-d[5])+(d[4]+d[6])*(d[5]-d[7]))/2:c==="rectangle"||c==="square"?h=d[2]*d[3]:c==="triangle"&&(h=Math.abs(d[0]*(d[3]-d[5])+d[2]*(d[5]-d[1])+d[4]*(d[1]-d[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,v=[new DOMPoint(0,0),new DOMPoint(m,0),new DOMPoint(m,y),new DOMPoint(0,y)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),_=v.map(function(b){return b.matrixTransform(g)}),x=Math.abs((_[3].x+_[0].x)*(_[3].y-_[0].y)+(_[0].x+_[1].x)*(_[0].y-_[1].y)+(_[1].x+_[2].x)*(_[1].y-_[2].y)+(_[2].x+_[3].x)*(_[2].y-_[3].y))/2;return Math.round(100*h/x)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(a){var u,l,c,d;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(u=this._accessibleOutputs[a],c=function(p,f,h,m){return h="Your output is a, ".concat(h," by ").concat(m," pixels, ").concat(f," canvas containing the following"),h=p===1?"".concat(h," shape:"):"".concat(h," ").concat(p," shapes:"),h}((l=function(p,f){var h,m="",y=0;for(h in f)for(var v in f[h]){var g='<li><a href="#'.concat(p,"shape").concat(y,'">').concat(f[h][v].color," ").concat(h,"</a>");h==="line"?g+=", ".concat(f[h][v].pos,", ").concat(f[h][v].length," pixels long.</li>"):(g+=", at ".concat(f[h][v].pos),h!=="point"&&(g+=", covering ".concat(f[h][v].area,"% of the canvas")),g+=".</li>"),m+=g,y++}return{numShapes:y,listShapes:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),d=function(p,f){var h,m="",y=0;for(h in f)for(var v in f[h]){var g='<tr id="'.concat(p,"shape").concat(y,'"><th>').concat(f[h][v].color," ").concat(h,"</th>");h==="line"?g+="<td>location = ".concat(f[h][v].pos,"</td><td>length = ").concat(f[h][v].length," pixels</td></tr>"):(g+="<td>location = ".concat(f[h][v].pos,"</td>"),h!=="point"&&(g+="<td> area = ".concat(f[h][v].area,"%</td>")),g+="</tr>"),m+=g,y++}return m}(a,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),l.listShapes!==u.list.innerHTML&&(u.list.innerHTML=l.listShapes),d!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=d),this._accessibleOutputs[a]=u)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(r,s,o){var a=(a=r("./core/main"))&&a.__esModule?a:{default:a};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.DataArray"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=a.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={_hsbaToHSLA:function(a){var u=a[0],l=a[1],c=a[2],d=(2-l)*c/2;return d!=0&&(d==1?l=0:d<.5?l/=2-l:l=l*c/(2-2*d)),[u,l,d,a[3]]},_hsbaToRGBA:function(a){var u,l,c,d,p,f=6*a[0],h=a[1],m=a[2];return h===0?[m,m,m,a[3]]:(l=m*(1-h),c=m*(1-h*(f-(u=Math.floor(f)))),h=m*(1-h*(1+u-f)),f=u===1?(d=c,p=m,l):u===2?(d=l,p=m,h):u===3?(d=l,p=c,m):u===4?(d=h,p=l,m):u===5?(d=m,p=l,c):(d=m,p=h,l),[d,p,f,a[3]])},_hslaToHSBA:function(a){var u=a[0],l=a[1],c=a[2],d=c<.5?(1+l)*c:c+l-c*l;return[u,l=2*(d-c)/d,d,a[3]]},_hslaToRGBA:function(a){var u,l=6*a[0],c=a[1],d=a[2];return c===0?[d,d,d,a[3]]:[(u=function(p,f,h){return p<0?p+=6:6<=p&&(p-=6),p<1?f+(h-f)*p:p<3?h:p<4?f+(h-f)*(4-p):f})(2+l,c=2*d-(d=d<.5?(1+c)*d:d+c-d*c),d),u(l,c,d),u(l-2,c,d),a[3]]},_rgbaToHSBA:function(a){var u,l,c=a[0],d=a[1],p=a[2],f=Math.max(c,d,p),h=f-Math.min(c,d,p);return h==0?l=u=0:(l=h/f,c===f?u=(d-p)/h:d===f?u=2+(p-c)/h:p===f&&(u=4+(c-d)/h),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,f,a[3]]},_rgbaToHSLA:function(a){var u,l,c=a[0],d=a[1],p=a[2],f=Math.max(c,d,p),m=Math.min(c,d,p),h=f+m,m=f-m;return m==0?l=u=0:(l=h<1?m/h:m/(2-h),c===f?u=(d-p)/m:d===f?u=2+(p-c)/m:p===f&&(u=4+(c-d)/m),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,h/2,a[3]]}},r=r.default.ColorConversion,o.default=r},{"../core/main":280}],266:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants"));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(f){return l.default._validateParameters("alpha",arguments),this.color(f)._getAlpha()},l.default.prototype.blue=function(f){return l.default._validateParameters("blue",arguments),this.color(f)._getBlue()},l.default.prototype.brightness=function(f){return l.default._validateParameters("brightness",arguments),this.color(f)._getBrightness()},l.default.prototype.color=function(){for(var f,h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];return l.default._validateParameters("color",m),m[0]instanceof l.default.Color?m[0]:(f=Array.isArray(m[0])?m[0]:m,new l.default.Color(this,f))},l.default.prototype.green=function(f){return l.default._validateParameters("green",arguments),this.color(f)._getGreen()},l.default.prototype.hue=function(f){return l.default._validateParameters("hue",arguments),this.color(f)._getHue()},l.default.prototype.lerpColor=function(f,h,m){l.default._validateParameters("lerpColor",arguments);var y,v,g,_=this._colorMode,x=this._colorMaxes;if(_===c.RGB)v=f.levels.map(function(b){return b/255}),g=h.levels.map(function(b){return b/255});else if(_===c.HSB)f._getBrightness(),h._getBrightness(),v=f.hsba,g=h.hsba;else{if(_!==c.HSL)throw new Error("".concat(_," cannot be used for interpolation."));f._getLightness(),h._getLightness(),v=f.hsla,g=h.hsla}return m=Math.max(Math.min(m,1),0),this.lerp===void 0&&(this.lerp=function(b,S,T){return T*(S-b)+b}),_===c.RGB?y=this.lerp(v[0],g[0],m):(.5<Math.abs(v[0]-g[0])&&(v[0]>g[0]?g[0]+=1:v[0]+=1),1<=(y=this.lerp(v[0],g[0],m))&&--y),f=this.lerp(v[1],g[1],m),h=this.lerp(v[2],g[2],m),v=this.lerp(v[3],g[3],m),y*=x[_][0],f*=x[_][1],h*=x[_][2],v*=x[_][3],this.color(y,f,h,v)},l.default.prototype.lightness=function(f){return l.default._validateParameters("lightness",arguments),this.color(f)._getLightness()},l.default.prototype.red=function(f){return l.default._validateParameters("red",arguments),this.color(f)._getRed()},l.default.prototype.saturation=function(f){return l.default._validateParameters("saturation",arguments),this.color(f)._getSaturation()};var p=l.default;o.default=p},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(y,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}function u(b){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(b)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=f(y("../core/main")),c=function(b){if(b&&b.__esModule)return b;if(b===null||u(b)!=="object"&&typeof b!="function")return{default:b};var S=p();if(S&&S.has(b))return S.get(b);var T,M={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in b){var L;Object.prototype.hasOwnProperty.call(b,T)&&((L=R?Object.getOwnPropertyDescriptor(b,T):null)&&(L.get||L.set)?Object.defineProperty(M,T,L):M[T]=b[T])}return M.default=b,S&&S.set(b,M),M}(y("../core/constants")),d=f(y("./color_conversion"));function p(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,p=function(){return b},b)}function f(b){return b&&b.__esModule?b:{default:b}}function h(b,S){for(var T=0;T<S.length;T++){var M=S[T];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,x=/(\d{1,3})/,v=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(v.source,"%")),_={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",x.source,",",x.source,",",x.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",x.source,",",x.source,",",x.source,",",v.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",x.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",x.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",x.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",x.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i")},x=(l.default.Color=function(){function b(R,L){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(R._colorMode,R._colorMaxes),![c.RGB,c.HSL,c.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=b._parseInputs.apply(this,L),this._calculateLevels()}var S,T,M;return S=b,M=[{key:"_parseInputs",value:function(R,L,P,C){var k,D=arguments.length,F=this.mode,G=this.maxes[F],z=[];if(3<=D){for(z[0]=R/G[0],z[1]=L/G[1],z[2]=P/G[2],z[3]=typeof C=="number"?C/G[3]:1,k=z.length-1;0<=k;--k){var Q=z[k];Q<0?z[k]=0:1<Q&&(z[k]=1)}return F===c.HSL?d.default._hslaToRGBA(z):F===c.HSB?d.default._hsbaToRGBA(z):z}if(D===1&&typeof R=="string"){if(P=R.trim().toLowerCase(),m[P])return b._parseInputs.call(this,m[P]);if(_.HEX3.test(P))return(z=_.HEX3.exec(P).slice(1).map(function(V){return parseInt(V+V,16)/255}))[3]=1,z;if(_.HEX6.test(P))return(z=_.HEX6.exec(P).slice(1).map(function(V){return parseInt(V,16)/255}))[3]=1,z;if(_.HEX4.test(P))return z=_.HEX4.exec(P).slice(1).map(function(V){return parseInt(V+V,16)/255});if(_.HEX8.test(P))return z=_.HEX8.exec(P).slice(1).map(function(V){return parseInt(V,16)/255});if(_.RGB.test(P))return(z=_.RGB.exec(P).slice(1).map(function(V){return V/255}))[3]=1,z;if(_.RGB_PERCENT.test(P))return(z=_.RGB_PERCENT.exec(P).slice(1).map(function(V){return parseFloat(V)/100}))[3]=1,z;if(_.RGBA.test(P))return z=_.RGBA.exec(P).slice(1).map(function(V,W){return W===3?parseFloat(V):V/255});if(_.RGBA_PERCENT.test(P))return z=_.RGBA_PERCENT.exec(P).slice(1).map(function(V,W){return W===3?parseFloat(V):parseFloat(V)/100});if(_.HSL.test(P)?(z=_.HSL.exec(P).slice(1).map(function(V,W){return W===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:_.HSLA.test(P)&&(z=_.HSLA.exec(P).slice(1).map(function(V,W){return W===0?parseInt(V,10)/360:W===3?parseFloat(V):parseInt(V,10)/100})),(z=z.map(function(V){return Math.max(Math.min(V,1),0)})).length)return d.default._hslaToRGBA(z);if(_.HSB.test(P)?(z=_.HSB.exec(P).slice(1).map(function(V,W){return W===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:_.HSBA.test(P)&&(z=_.HSBA.exec(P).slice(1).map(function(V,W){return W===0?parseInt(V,10)/360:W===3?parseFloat(V):parseInt(V,10)/100})),z.length){for(k=z.length-1;0<=k;--k)z[k]=Math.max(Math.min(z[k],1),0);return d.default._hsbaToRGBA(z)}z=[1,1,1,1]}else{if(D!==1&&D!==2||typeof R!="number")throw new Error("".concat(arguments,"is not a valid color representation."));z[0]=R/G[2],z[1]=R/G[2],z[2]=R/G[2],z[3]=typeof L=="number"?L/G[3]:1,z=z.map(function(V){return Math.max(Math.min(V,1),0)})}return z}}],(T=[{key:"toString",value:function(R){var L=this.levels,P=this._array,C=P[3];switch(R){case"#rrggbb":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16));case"#rrggbbaa":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16),L[3]<16?"0".concat(L[3].toString(16)):L[3].toString(16));case"#rgb":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16),Math.round(15*P[3]).toString(16));case"rgb":return"rgb(".concat(L[0],", ",L[1],", ",L[2],")");case"rgb%":return"rgb(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%, ",(100*P[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",C,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",C,")");case"hsla%":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");default:return"rgba(".concat(L[0],",",L[1],",",L[2],",",C,")")}}},{key:"setRed",value:function(R){this._array[0]=R/this.maxes[c.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(R){this._array[1]=R/this.maxes[c.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(R){this._array[2]=R/this.maxes[c.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(R){this._array[3]=R/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var R=this._array,L=this.levels=new Array(R.length),P=R.length-1;0<=P;--P)L[P]=Math.round(255*R[P]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(R,L){this.mode=R,this.maxes=L}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[c.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[c.RGB][1]}},{key:"_getHue",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[c.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])}}])&&h(S.prototype,T),M&&h(S,M),b}(),l.default.Color);o.default=x},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants"));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}r("./p5.Color"),l.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},l.default.prototype.endClip=function(){this._renderer.endClip()},l.default.prototype.clip=function(f,h){this._renderer.beginClip(h),f(),this._renderer.endClip(h)},l.default.prototype.background=function(){var f;return(f=this._renderer).background.apply(f,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(f,h,m,y,v){return l.default._validateParameters("colorMode",arguments),f!==c.RGB&&f!==c.HSB&&f!==c.HSL||(this._colorMode=f,f=this._colorMaxes[f],arguments.length===2?(f[0]=h,f[1]=h,f[2]=h,f[3]=h):arguments.length===4?(f[0]=h,f[1]=m,f[2]=y):arguments.length===5&&(f[0]=h,f[1]=m,f[2]=y,f[3]=v)),this},l.default.prototype.fill=function(){var f;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(f=this._renderer).fill.apply(f,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var f;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(f=this._renderer).stroke.apply(f,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QUADRATIC=o.LINEAR=o._CTX_MIDDLE=o._DEFAULT_LEADMULT=o._DEFAULT_TEXT_FILL=o.WORD=o.CHAR=o.BOLDITALIC=o.BOLD=o.ITALIC=o.NORMAL=o.BLUR=o.ERODE=o.DILATE=o.POSTERIZE=o.INVERT=o.OPAQUE=o.GRAY=o.THRESHOLD=o.BURN=o.DODGE=o.SOFT_LIGHT=o.HARD_LIGHT=o.OVERLAY=o.REPLACE=o.SCREEN=o.MULTIPLY=o.EXCLUSION=o.SUBTRACT=o.DIFFERENCE=o.LIGHTEST=o.DARKEST=o.ADD=o.REMOVE=o.BLEND=o.UP_ARROW=o.TAB=o.SHIFT=o.RIGHT_ARROW=o.RETURN=o.OPTION=o.LEFT_ARROW=o.ESCAPE=o.ENTER=o.DOWN_ARROW=o.DELETE=o.CONTROL=o.BACKSPACE=o.ALT=o.AUTO=o.HSL=o.HSB=o.RGB=o.MITER=o.BEVEL=o.ROUND=o.SQUARE=o.PROJECT=o.PIE=o.CHORD=o.OPEN=o.CLOSE=o.TESS=o.QUAD_STRIP=o.QUADS=o.TRIANGLE_STRIP=o.TRIANGLE_FAN=o.TRIANGLES=o.LINE_LOOP=o.LINE_STRIP=o.LINES=o.POINTS=o.BASELINE=o.BOTTOM=o.TOP=o.CENTER=o.LEFT=o.RIGHT=o.RADIUS=o.CORNERS=o.CORNER=o.RAD_TO_DEG=o.DEG_TO_RAD=o.RADIANS=o.DEGREES=o.TWO_PI=o.TAU=o.QUARTER_PI=o.PI=o.HALF_PI=o.WAIT=o.TEXT=o.MOVE=o.HAND=o.CROSS=o.ARROW=o.WEBGL2=o.WEBGL=o.P2D=o.VERSION=void 0,o.RGBA=o.HALF_FLOAT=o.FLOAT=o.UNSIGNED_INT=o.UNSIGNED_BYTE=o.COVER=o.CONTAIN=o.FALLBACK=o.LABEL=o.AXES=o.GRID=o._DEFAULT_FILL=o._DEFAULT_STROKE=o.PORTRAIT=o.LANDSCAPE=o.SMOOTH=o.FLAT=o.MIRROR=o.CLAMP=o.REPEAT=o.NEAREST=o.IMAGE=o.IMMEDIATE=o.TEXTURE=o.FILL=o.STROKE=o.CURVE=o.BEZIER=void 0;var a=Math.PI,u=(o.VERSION="1.9.4",o.P2D="p2d",o.WEBGL="webgl",o.WEBGL2="webgl2",o.ARROW="default",o.CROSS="crosshair",o.HAND="pointer",o.MOVE="move",o.TEXT="text",o.WAIT="wait",a/2),u=(o.HALF_PI=u,a),u=(o.PI=u,a/4),u=(o.QUARTER_PI=u,2*a),u=(o.TAU=u,2*a),u=(o.TWO_PI=u,o.DEGREES="degrees",o.RADIANS="radians",a/180),u=(o.DEG_TO_RAD=u,180/a);o.RAD_TO_DEG=u,o.CORNER="corner",o.CORNERS="corners",o.RADIUS="radius",o.RIGHT="right",o.LEFT="left",o.CENTER="center",o.TOP="top",o.BOTTOM="bottom",o.BASELINE="alphabetic",o.POINTS=0,o.LINES=1,o.LINE_STRIP=3,o.LINE_LOOP=2,o.TRIANGLES=4,o.TRIANGLE_FAN=6,o.TRIANGLE_STRIP=5,o.QUADS="quads",o.QUAD_STRIP="quad_strip",o.TESS="tess",o.CLOSE="close",o.OPEN="open",o.CHORD="chord",o.PIE="pie",o.PROJECT="square",o.SQUARE="butt",o.ROUND="round",o.BEVEL="bevel",o.MITER="miter",o.RGB="rgb",o.HSB="hsb",o.HSL="hsl",o.AUTO="auto",o.ALT=18,o.BACKSPACE=8,o.CONTROL=17,o.DELETE=46,o.DOWN_ARROW=40,o.ENTER=13,o.ESCAPE=27,o.LEFT_ARROW=37,o.OPTION=18,o.RETURN=13,o.RIGHT_ARROW=39,o.SHIFT=16,o.TAB=9,o.UP_ARROW=38,o.BLEND="source-over",o.REMOVE="destination-out",o.ADD="lighter",o.DARKEST="darken",o.LIGHTEST="lighten",o.DIFFERENCE="difference",o.SUBTRACT="subtract",o.EXCLUSION="exclusion",o.MULTIPLY="multiply",o.SCREEN="screen",o.REPLACE="copy",o.OVERLAY="overlay",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DODGE="color-dodge",o.BURN="color-burn",o.THRESHOLD="threshold",o.GRAY="gray",o.OPAQUE="opaque",o.INVERT="invert",o.POSTERIZE="posterize",o.DILATE="dilate",o.ERODE="erode",o.BLUR="blur",o.NORMAL="normal",o.ITALIC="italic",o.BOLD="bold",o.BOLDITALIC="bold italic",o.CHAR="CHAR",o.WORD="WORD",o._DEFAULT_TEXT_FILL="#000000",o._DEFAULT_LEADMULT=1.25,o._CTX_MIDDLE="middle",o.LINEAR="linear",o.QUADRATIC="quadratic",o.BEZIER="bezier",o.CURVE="curve",o.STROKE="stroke",o.FILL="fill",o.TEXTURE="texture",o.IMMEDIATE="immediate",o.IMAGE="image",o.NEAREST="nearest",o.REPEAT="repeat",o.CLAMP="clamp",o.MIRROR="mirror",o.FLAT="flat",o.SMOOTH="smooth",o.LANDSCAPE="landscape",o.PORTRAIT="portrait",o._DEFAULT_STROKE="#000000",o._DEFAULT_FILL="#FFFFFF",o.GRID="grid",o.AXES="axes",o.LABEL="label",o.FALLBACK="fallback",o.CONTAIN="contain",o.COVER="cover",o.UNSIGNED_BYTE="unsigned-byte",o.UNSIGNED_INT="unsigned-int",o.FLOAT="float",o.HALF_FLOAT="half-float",o.RGBA="rgba"},{}],270:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function u(v){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(c=r("./main"))&&c.__esModule?c:{default:c},c=function(v){if(v&&v.__esModule)return v;if(v===null||u(v)!=="object"&&typeof v!="function")return{default:v};var g=d();if(g&&g.has(v))return g.get(v);var _,x={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var S;Object.prototype.hasOwnProperty.call(v,_)&&((S=b?Object.getOwnPropertyDescriptor(v,_):null)&&(S.get||S.set)?Object.defineProperty(x,_,S):x[_]=v[_])}return x.default=v,g&&g.set(v,x),x}(r("./constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}var p=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],f=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print),h=!1;function m(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var v;arguments.length?(v=console).log.apply(v,arguments):h||(f(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(h=!0))},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(v,g,_){var x,b="auto",S=this._curElement.elt;p.includes(v)?b=v:typeof v=="string"&&(x="",g&&_&&typeof g=="number"&&typeof _=="number"&&(x="".concat(g," ").concat(_)),b=v.substring(0,7)==="http://"||v.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(v)?"url(".concat(v,") ").concat(x,", auto"):v),S.style.cursor=b},l.default.prototype.frameRate=function(v){return l.default._validateParameters("frameRate",arguments),typeof v!="number"||v<0?this._frameRate:(this._setProperty("_targetFrameRate",v),v===0&&this._setProperty("_frameRate",v),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(v){return this.frameRate(v)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.webglVersion=c.P2D,l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=m(),l.default.prototype.windowHeight=y(),l.default.prototype._onresize=function(v){this._setProperty("windowWidth",m()),this._setProperty("windowHeight",y());var g=this._isGlobal?window:this;typeof g.windowResized!="function"||(g=g.windowResized(v))===void 0||g||v.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(v){if(l.default._validateParameters("fullscreen",arguments),v===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(v){if(v=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");v.requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(v){var g;return l.default._validateParameters("pixelDensity",arguments),typeof v=="number"?(v!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=v),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(v){return v!==""})},l.default.prototype.getURLParams=function(){for(var v,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,_={};(v=g.exec(location.search))!=null;)v.index===g.lastIndex&&g.lastIndex++,_[v[1]]=v[2];return _},r=l.default,o.default=r},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(p=r("../main"))&&p.__esModule?p:{default:p};r("../internationalization");function u(f,h){h=h||console.log.bind(console),l||d(),l.some(function(m){var y;if(f.message&&f.message.match("\\W?".concat(m.name,"\\W"))!==null)return y=m.type==="function"?"".concat(m.name,"()"):m.name,h("Did you just try to use p5.js's ".concat(y," ").concat(m.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var l=null,d=null,c=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),d=function(){function f(m){return Object.getOwnPropertyNames(m).filter(function(y){return y[0]!=="_"&&!(y in h)&&(h[y]=!0)}).map(function(y){var v=typeof m[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:v}})}var h={};(l=[].concat(f(a.default.prototype),f(r("../constants")))).sort(function(m,y){return y.name.length-m.name.length})},p=(a.default.prototype._helpForMisusedAtTopLevelCode=u,document.readyState!=="complete"&&(window.addEventListener("error",u,!1),window.addEventListener("load",function(){window.removeEventListener("error",u,!1)})),a.default);o.default=p},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(a=r("../main"))&&a.__esModule?a:{default:a};r("../internationalization"),a.default._friendlyFileLoadError=function(){},r=a.default,o.default=r},{"../internationalization":278,"../main":280}],273:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function u(h){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=p(r("../main"));r("../internationalization"),d(r("../constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function d(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var y,v,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h)Object.prototype.hasOwnProperty.call(h,y)&&((v=_?Object.getOwnPropertyDescriptor(h,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=h[y]);return g.default=h,m&&m.set(h,g),g}function p(h){return h&&h.__esModule?h:{default:h}}l.default._fesCodeReader=function(){};var f=l.default;o.default=f},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function a(){var u=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(d){return d.stacktrace!==void 0||d["opera#sourceloc"]!==void 0?this.parseOpera(d):d.stack&&d.stack.match(l)?this.parseV8OrIE(d):d.stack?this.parseFFOrSafari(d):void 0},extractLocation:function(d){return d.indexOf(":")===-1?[d]:[(d=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(d.replace(/[()]/g,"")))[1],d[2]||void 0,d[3]||void 0]},parseV8OrIE:function(d){return d.stack.split(`
`).filter(function(p){return!!p.match(l)},this).map(function(p){var f=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"("),h=f.match(/ (\((.+):(\d+):(\d+)\)$)/),f=(f=h?f.replace(h[0],""):f).split(/\s+/).slice(1),h=this.extractLocation(h?h[1]:f.pop());return{functionName:f.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(h[0])?void 0:h[0],lineNumber:h[1],columnNumber:h[2],source:p}},this)},parseFFOrSafari:function(d){return d.stack.split(`
`).filter(function(p){return!p.match(c)},this).map(function(p){var f,h;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(h=p.match(f=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&h[1]?h[1]:void 0,fileName:(h=this.extractLocation(p.replace(f,"")))[0],lineNumber:h[1],columnNumber:h[2],source:p}},this)},parseOpera:function(d){return!d.stacktrace||-1<d.message.indexOf(`
`)&&d.message.split(`
`).length>d.stacktrace.split(`
`).length?this.parseOpera9(d):d.stack?this.parseOpera11(d):this.parseOpera10(d)},parseOpera9:function(d){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,f=d.message.split(`
`),h=[],m=2,y=f.length;m<y;m+=2){var v=p.exec(f[m]);v&&h.push({fileName:v[2],lineNumber:v[1],source:f[m]})}return h},parseOpera10:function(d){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,f=d.stacktrace.split(`
`),h=[],m=0,y=f.length;m<y;m+=2){var v=p.exec(f[m]);v&&h.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:f[m]})}return h},parseOpera11:function(d){return d.stack.split(`
`).filter(function(p){return!!p.match(u)&&!p.match(/^Error created at/)},this).map(function(p){var f,m=p.split("@"),h=this.extractLocation(m.pop()),m=m.shift()||"";return{functionName:m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(f=m.match(/\(([^)]*)\)/)?m.replace(/^[^(]+\(([^)]*)\)$/,"$1"):f)===void 0||f==="[arguments not available]"?void 0:f.split(","),fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:p}},this)}}}r.default._getErrorStackParser=function(){return new a},r=r.default,o.default=r},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(u=r("../main"))&&u.__esModule?u:{default:u};(function(d){if(!(d&&d.__esModule)&&!(d===null||c(d)!=="object"&&typeof d!="function")){var p=l();if(p&&p.has(d))return p.get(d);var f,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var y;Object.prototype.hasOwnProperty.call(d,f)&&((y=m?Object.getOwnPropertyDescriptor(d,f):null)&&(y.get||y.set)?Object.defineProperty(h,f,y):h[f]=d[f])}h.default=d,p&&p.set(d,h)}})(r("../constants")),r("../internationalization");function l(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,l=function(){return d},d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}u.default._validateParameters=u.default._clearValidateParamsCache=function(){},r=u.default,o.default=r},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function u(d){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var p=c();if(p&&p.has(d))return p.get(d);var f,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var y;Object.prototype.hasOwnProperty.call(d,f)&&((y=m?Object.getOwnPropertyDescriptor(d,f):null)&&(y.get||y.set)?Object.defineProperty(h,f,y):h[f]=d[f])}return h.default=d,p&&p.set(d,h),h}(r("./constants"));function c(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,c=function(){return d},d)}o.default={modeAdjust:function(d,p,f,h,m){return m===l.CORNER?{x:d,y:p,w:f,h}:m===l.CORNERS?{x:d,y:p,w:f-d,h:h-p}:m===l.RADIUS?{x:d-f,y:p-h,w:2*f,h:2*h}:m===l.CENTER?{x:d-.5*f,y:p-.5*h,w:f,h}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(u=r("../core/main"))&&u.__esModule?u:{default:u};r("./internationalization");var u=Promise.resolve();Promise.all([new Promise(function(l,c){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),u]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(r,s,o){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.setTranslatorLanguage=o.currentTranslatorLanguage=o.availableTranslatorLanguages=o.initialize=o.translator=void 0;var a,u,l=d(r("i18next")),c=d(r("i18next-browser-languagedetector"));function d(h){return h&&h.__esModule?h:{default:h}}function p(h,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}var f=function(){function h(v,g){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.init(v,g)}var m,y;return m=h,(y=[{key:"fetchWithTimeout",value:function(v,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(v,g),new Promise(function(x,b){return setTimeout(function(){return b(new Error("timeout"))},_)})])}},{key:"init",value:function(v){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=v,this.options=g}},{key:"read",value:function(v,g,_){var x=this.options.loadPath;v===this.options.fallback?_(null,a[v][g]):u.includes(v)?(x=this.services.interpolator.interpolate(x,{lng:v,ns:g}),this.loadUrl(x,_)):_("Not found",!1)}},{key:"loadUrl",value:function(v,g){this.fetchWithTimeout(v).then(function(_){if(_.ok)return _.json();throw new Error("failed loading ".concat(v))},function(){throw new Error("failed loading ".concat(v))}).then(function(_){return g(null,_)}).catch(g)}}])&&p(m.prototype,y),h}();f.type="backend",o.translator=function(h,m){console.debug("p5.js translator called before translations were loaded"),l.default.t(h,m)},o.initialize=function(){return l.default.use(c.default).use(f).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(h){o.translator=h},function(h){return console.debug("Translations failed to load (".concat(h,")"))})},o.availableTranslatorLanguages=function(){return l.default.languages},o.currentTranslatorLanguage=function(h){return l.default.language},o.setTranslatorLanguage=function(h){return l.default.changeLanguage(h||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,o.default=r},{"./main":280}],280:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function u(h){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("./shim");var l=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var _;Object.prototype.hasOwnProperty.call(h,y)&&((_=g?Object.getOwnPropertyDescriptor(h,y):null)&&(_.get||_.set)?Object.defineProperty(v,y,_):v[y]=h[y])}return v.default=h,m&&m.set(h,v),v}(r("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function d(h,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}var p,f=function(){function h(v,x){var _=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=x,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(h.prototype._registeredMethods),b=!0,S=!1,T=void 0;try{for(var M,R=x[Symbol.iterator]();!(b=(M=R.next()).done);b=!0){var L=M.value;this._registeredMethods[L]=h.prototype._registeredMethods[L].slice()}}catch(V){S=!0,T=V}finally{try{b||R.return==null||R.return()}finally{if(S)throw T}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),h.prototype.callRegisteredHooksFor=function(V){var W=this||h.prototype,Y=this._isGlobal?window:this;if(W._registeredMethods.hasOwnProperty(V)){var W=W._registeredMethods[V],J=!0,V=!1,ie=void 0;try{for(var I,O=W[Symbol.iterator]();!(J=(I=O.next()).done);J=!0){var H=I.value;typeof H=="function"&&H.call(Y)}}catch(oe){V=!0,ie=oe}finally{try{J||O.return==null||O.return()}finally{if(V)throw ie}}}},this._start=function(){_._userNode&&typeof _._userNode=="string"&&(_._userNode=document.getElementById(_._userNode));var V=_._isGlobal?window:_;if(V.preload){_.callRegisteredHooksFor("beforePreload");var W,Y=document.getElementById(_._loadingScreenId),J=(Y||((Y=document.createElement("div")).innerHTML="Loading...",Y.style.position="absolute",Y.id=_._loadingScreenId,(_._userNode||document.body).appendChild(Y)),_._preloadMethods);for(W in J){J[W]=J[W]||h;var ie=J[W];ie!==h.prototype&&ie!==h||(_._isGlobal&&(window[W]=_._wrapPreload(_,W)),ie=_),_._registeredPreloadMethods[W]=ie[W],ie[W]=_._wrapPreload(ie,W)}V.preload(),_._runIfPreloadsAreDone()}else _._setup(),_._recording||_._draw()},this._runIfPreloadsAreDone=function(){var V,W=this._isGlobal?window:this;W._preloadCount===0&&((V=document.getElementById(W._loadingScreenId))&&V.parentNode.removeChild(V),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),W._setup(),this._recording||W._draw()))},this._decrementPreload=function(){var V=this._isGlobal?window:this;V._preloadDone||typeof V.preload!="function"||(V._setProperty("_preloadCount",V._preloadCount-1),V._runIfPreloadsAreDone())},this._wrapPreload=function(V,W){var Y=this;return function(){Y._incrementPreload();for(var J=arguments.length,ie=new Array(J),I=0;I<J;I++)ie[I]=arguments[I];return Y._registeredPreloadMethods[W].apply(V,ie)}},this._incrementPreload=function(){var V=this._isGlobal?window:this;V._preloadDone||V._setProperty("_preloadCount",V._preloadCount+1)},this._setup=function(){_.callRegisteredHooksFor("beforeSetup"),_.createCanvas(_._defaultCanvasSize.width,_._defaultCanvasSize.height,"p2d");var V=_._isGlobal?window:_;if(typeof V.preload=="function")for(var W in _._preloadMethods)V[W]=_._preloadMethods[W][W],V[W]&&_&&(V[W]=V[W].bind(_));_._millisStart=window.performance.now(),V._preloadDone=!0,typeof V.setup=="function"&&V.setup();var Y=document.getElementsByTagName("canvas"),J=!0,ie=!1,I=void 0;try{for(var O,H=Y[Symbol.iterator]();!(J=(O=H.next()).done);J=!0){var q=O.value;q.dataset.hidden==="true"&&(q.style.visibility="",delete q.dataset.hidden)}}catch(Z){ie=!0,I=Z}finally{try{J||H.return==null||H.return()}finally{if(ie)throw I}}_._lastTargetFrameTime=window.performance.now(),_._lastRealFrameTime=window.performance.now(),_._setupDone=!0,(_._accessibleOutputs.grid||_._accessibleOutputs.text)&&_._updateAccsOutput(),_.callRegisteredHooksFor("afterSetup")},this._draw=function(){var V=window.performance.now(),W=V-_._lastTargetFrameTime,Y=1e3/_._targetFrameRate;(!_._loop||Y-5<=W)&&(_.deltaTime=V-_._lastRealFrameTime,_._setProperty("deltaTime",_.deltaTime),_._frameRate=1e3/_.deltaTime,_.redraw(),_._lastTargetFrameTime=Math.max(_._lastTargetFrameTime+Y,V),_._lastRealFrameTime=V,_._updateMouseCoords!==void 0&&(_._updateMouseCoords(),_._setProperty("movedX",0),_._setProperty("movedY",0))),_._loop&&(_._requestAnimId=window.requestAnimationFrame(_._draw))},this._setProperty=function(V,W){_[V]=W,_._isGlobal&&(window[V]=W)},this.remove=function(){_._startListener&&window.removeEventListener("load",_._startListener,!1);var V=document.getElementById(_._loadingScreenId);if(V&&(V.parentNode.removeChild(V),_._incrementPreload()),_._curElement){for(var W in _._loop=!1,_._requestAnimId&&window.cancelAnimationFrame(_._requestAnimId),_._events)window.removeEventListener(W,_._events[W]);var Y=!0,V=!1,J=void 0;try{for(var ie,I=_._elements[Symbol.iterator]();!(Y=(ie=I.next()).done);Y=!0){var O,H=ie.value;for(O in H.elt&&H.elt.parentNode&&H.elt.parentNode.removeChild(H.elt),H._events)H.elt.removeEventListener(O,H._events[O])}}catch(be){V=!0,J=be}finally{try{Y||I.return==null||I.return()}finally{if(V)throw J}}var q=_;_._registeredMethods.remove.forEach(function(be){be!==void 0&&be.call(q)})}if(_._isGlobal){for(var Z in h.prototype)try{delete window[Z]}catch{window[Z]=void 0}for(var oe in _)if(_.hasOwnProperty(oe))try{delete window[oe]}catch{window[oe]=void 0}h.instance=null}},this._registeredMethods.init.forEach(function(V){V!==void 0&&V.call(this)},this),this._setupPromisePreloads();var P,C,k=this._createFriendlyGlobalFunctionBinder();if(v)v(this),h._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,h.instance=this,h.prototype)typeof h.prototype[D]=="function"?(P=D.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(D)&&Math[D]===h.prototype[D]?k(D,h.prototype[D]):k(D,h.prototype[D].bind(this)))):k(D,h.prototype[D]);for(var F in this)this.hasOwnProperty(F)&&k(F,this[F])}for(C in this._events){var G=this["_on".concat(C)];G&&(G=G.bind(this),window.addEventListener(C,G,{passive:!1}),this._events[C]=G)}function z(){_._setProperty("focused",!0)}function Q(){_._setProperty("focused",!1)}window.addEventListener("focus",z),window.addEventListener("blur",Q),this.registerMethod("remove",function(){window.removeEventListener("focus",z),window.removeEventListener("blur",Q)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var m,y;return m=h,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(v,g){h.prototype._preloadMethods.hasOwnProperty(v)||(h.prototype._preloadMethods[v]=g)}},{key:"registerMethod",value:function(v,g){var _=this||h.prototype;_._registeredMethods.hasOwnProperty(v)||(_._registeredMethods[v]=[]),_._registeredMethods[v].push(g)}},{key:"unregisterMethod",value:function(v,g){var _=this||h.prototype;if(_._registeredMethods.hasOwnProperty(v)){for(var x=_._registeredMethods[v],b=[],S=0;S<x.length;S++)x[S]===g&&b.push(S);for(var T=b.length-1;0<=T;T--)x.splice(b[T],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=v.globalObject||window;return v.log||console.log.bind(console),function(_,x){h.disableFriendlyErrors,g[_]=x}}}])&&d(m.prototype,y),h}();for(p in f.instance=null,f.disableFriendlyErrors=!1,l)f.prototype[p]=l[p];f.VERSION=l.VERSION,f.prototype._preloadMethods={loadJSON:f.prototype,loadImage:f.prototype,loadStrings:f.prototype,loadXML:f.prototype,loadBytes:f.prototype,loadTable:f.prototype,loadFont:f.prototype,loadModel:f.prototype,loadShader:f.prototype},f.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},f.prototype._registeredPreloadMethods={},o.default=f},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function u(l,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}a.default.Element=function(){function l(f,h){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.elt=f,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var c,d,p;return c=l,p=[{key:"_adjustListener",value:function(f,h,m){return h===!1?a.default.Element._detachListener(f,m):a.default.Element._attachListener(f,h,m),this}},{key:"_attachListener",value:function(f,h,m){m._events[f]&&a.default.Element._detachListener(f,m),h=h.bind(m),m.elt.addEventListener(f,h,!1),m._events[f]=h}},{key:"_detachListener",value:function(f,h){var m=h._events[f];h.elt.removeEventListener(f,m,!1),h._events[f]=null}}],(d=[{key:"parent",value:function(f){return f===void 0?this.elt.parentNode:(typeof f=="string"?(f[0]==="#"&&(f=f.substring(1)),f=document.getElementById(f)):f instanceof a.default.Element&&(f=f.elt),f.appendChild(this.elt),this)}},{key:"id",value:function(f){return f===void 0?this.elt.id:(this.elt.id=f,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(f){return f===void 0?this.elt.className:(this.elt.className=f,this)}},{key:"mousePressed",value:function(f){return a.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),f.call(this,h)},this),this}},{key:"doubleClicked",value:function(f){return a.default.Element._adjustListener("dblclick",f,this),this}},{key:"mouseWheel",value:function(f){return a.default.Element._adjustListener("wheel",f,this),this}},{key:"mouseReleased",value:function(f){return a.default.Element._adjustListener("mouseup",f,this),this}},{key:"mouseClicked",value:function(f){return a.default.Element._adjustListener("click",f,this),this}},{key:"mouseMoved",value:function(f){return a.default.Element._adjustListener("mousemove",f,this),this}},{key:"mouseOver",value:function(f){return a.default.Element._adjustListener("mouseover",f,this),this}},{key:"mouseOut",value:function(f){return a.default.Element._adjustListener("mouseout",f,this),this}},{key:"touchStarted",value:function(f){return a.default.Element._adjustListener("touchstart",f,this),this}},{key:"touchMoved",value:function(f){return a.default.Element._adjustListener("touchmove",f,this),this}},{key:"touchEnded",value:function(f){return a.default.Element._adjustListener("touchend",f,this),this}},{key:"dragOver",value:function(f){return a.default.Element._adjustListener("dragover",f,this),this}},{key:"dragLeave",value:function(f){return a.default.Element._adjustListener("dragleave",f,this),this}},{key:"_setProperty",value:function(f,h){this[f]=h}}])&&u(c.prototype,d),p&&u(c,p),l}(),r=a.default.Element,o.default=r},{"./main":280}],282:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function u(_){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("./main"))&&g.__esModule?g:{default:g},c=function(_){if(_&&_.__esModule)return _;if(_===null||u(_)!=="object"&&typeof _!="function")return{default:_};var x=d();if(x&&x.has(_))return x.get(_);var b,S={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in _){var M;Object.prototype.hasOwnProperty.call(_,b)&&((M=T?Object.getOwnPropertyDescriptor(_,b):null)&&(M.get||M.set)?Object.defineProperty(S,b,M):S[b]=_[b])}return S.default=_,x&&x.set(_,S),S}(r("./constants"));function d(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,d=function(){return _},_)}function p(_,x){for(var b=0;b<x.length;b++){var S=x[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}function f(_,x){return(f=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b})(_,x)}function h(_){return function(){var x,b=v(_);return m(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=v(this).constructor,Reflect.construct(b,arguments,x)):b.apply(this,arguments))}}function m(_,x){return!x||u(x)!=="object"&&typeof x!="function"?y(_):x}function y(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function v(_){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}l.default.Graphics=function(_){var x=S;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&f(x,_);var b=h(S);function S(T,M,F,L,P){var C;if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");D=P||document.createElement("canvas"),(C=b.call(this,D,L)).canvas=D;var k,D=F||c.P2D,F=L._userNode||document.body;for(k in P||F.appendChild(C.canvas),l.default.prototype)C[k]||(typeof l.default.prototype[k]=="function"?C[k]=l.default.prototype[k].bind(y(C)):C[k]=l.default.prototype[k]);return l.default.prototype._initializeInstanceVariables.apply(y(C)),C.width=T,C.height=M,C._pixelDensity=L._pixelDensity,D===c.WEBGL?(C._renderer=new l.default.RendererGL(C.canvas,y(C),!1),T=(P=C._renderer._adjustDimensions(T,M)).adjustedWidth,M=P.adjustedHeight):C._renderer=new l.default.Renderer2D(C.canvas,y(C),!1),L._elements.push(y(C)),Object.defineProperty(y(C),"deltaTime",{get:function(){return this._pInst.deltaTime}}),C._renderer.resize(T,M),C._renderer._applyDefaults(),m(C,y(C))}return x=S,(_=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var T,M=this._pInst._elements.indexOf(this);for(T in M!==-1&&this._pInst._elements.splice(M,1),this._events)this.elt.removeEventListener(T,this._events[T])}},{key:"createFramebuffer",value:function(T){return new l.default.Framebuffer(this,T)}}])&&p(x.prototype,_),S}(l.default.Element);var g=l.default.Graphics;o.default=g},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(v=r("./main"))&&v.__esModule?v:{default:v},l=function(_){if(_&&_.__esModule)return _;if(_===null||d(_)!=="object"&&typeof _!="function")return{default:_};var x=c();if(x&&x.has(_))return x.get(_);var b,S={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in _){var M;Object.prototype.hasOwnProperty.call(_,b)&&((M=T?Object.getOwnPropertyDescriptor(_,b):null)&&(M.get||M.set)?Object.defineProperty(S,b,M):S[b]=_[b])}return S.default=_,x&&x.set(_,S),S}(r("../core/constants"));function c(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,c=function(){return _},_)}function d(_){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(_)}function p(_,x){for(var b=0;b<x.length;b++){var S=x[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}function f(_,x){return(f=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b})(_,x)}function h(_){return function(){var x,b,S=y(_);return x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=y(this).constructor,Reflect.construct(S,arguments,x)):S.apply(this,arguments),S=this,!(b=x)||d(b)!=="object"&&typeof b!="function"?m(S):b}}function m(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function y(_){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(_)}var v=function(_){var x=S;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),_&&f(x,_);var b=h(S);function S(T,M,R){var L;if(this instanceof S)return(L=b.call(this,T,M)).canvas=T,L._pixelsState=M,R?(L._isMainCanvas=!0,L._pInst._setProperty("_curElement",m(L)),L._pInst._setProperty("canvas",L.canvas),L._pInst._setProperty("width",L.width),L._pInst._setProperty("height",L.height)):(L.canvas.style.display="none",L._styles=[]),L._clipping=!1,L._clipInvert=!1,L._textSize=12,L._textLeading=15,L._textFont="sans-serif",L._textStyle=l.NORMAL,L._textAscent=null,L._textDescent=null,L._textAlign=l.LEFT,L._textBaseline=l.BASELINE,L._textWrap=l.WORD,L._rectMode=l.CORNER,L._ellipseMode=l.CENTER,L._curveTightness=0,L._imageMode=l.CORNER,L._tint=null,L._doStroke=!0,L._doFill=!0,L._strokeSet=!1,L._fillSet=!1,L._leadingSet=!1,L._pushPopDepth=0,L;throw new TypeError("Cannot call a class as a function")}return x=S,(_=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(T){this._pushPopDepth--,T.properties&&Object.assign(this,T.properties)}},{key:"beginClip",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=T.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(T,M){this.width=T,this.height=M,this.elt.width=T*this._pInst._pixelDensity,this.elt.height=M*this._pInst._pixelDensity,this.elt.style.width="".concat(T,"px"),this.elt.style.height="".concat(M,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(T,M,R,L){var P=this._pixelsState,C=P._pixelDensity,k=this.canvas;if(T===void 0&&M===void 0)T=M=0,R=P.width,L=P.height;else if(T*=C,M*=C,R===void 0&&L===void 0)return T<0||M<0||T>=k.width||M>=k.height?[0,0,0,0]:this._getPixel(T,M);return P=new u.default.Image(R*C,L*C),P.pixelDensity(C),P.canvas.getContext("2d").drawImage(k,T,M,R*C,L*C,0,0,R*C,L*C),P}},{key:"textLeading",value:function(T){return typeof T=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",T),this._pInst):this._textLeading}},{key:"textStyle",value:function(T){return T?(T!==l.NORMAL&&T!==l.ITALIC&&T!==l.BOLD&&T!==l.BOLDITALIC||this._setProperty("_textStyle",T),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(T,M){return T!==void 0?(this._setProperty("_textAlign",T),M!==void 0&&this._setProperty("_textBaseline",M),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(T){return this._setProperty("_textWrap",T),this._textWrap}},{key:"text",value:function(T,M,R,L,P){var C,k,D,F,G=this._pInst,z=this._textWrap,Q=Number.MAX_VALUE,V=R;if((this._doFill||this._doStroke)&&T!==void 0){if(C=(T=(T=typeof T!="string"?T.toString():T).replace(/(\t)/g,"  ")).split(`
`),L!==void 0){switch(this._rectMode===l.CENTER&&(M-=L/2),this._textAlign){case l.CENTER:M+=L/2;break;case l.RIGHT:M+=L}if(P!==void 0){this._rectMode===l.CENTER&&(R-=P/2,V-=P/2);var T=R,W=G.textAscent();switch(this._textBaseline){case l.BOTTOM:F=R+P,R=Math.max(F,R),V+=W;break;case l.CENTER:F=R+P/2,R=Math.max(F,R),V+=W/2}Q=R+P-W,this._textBaseline===l.CENTER&&(Q=T+P-W/2)}else this._textBaseline!==l.BOTTOM&&this._textBaseline!==l.CENTER||(V=R-(T=G.textSize()*this._textLeading)/2,Q=R+T/2);if(z===l.WORD){for(var Y=[],J=0;J<C.length;J++){for(var ie="",I=C[J].split(" "),O=0;O<I.length;O++)k="".concat(ie+I[O])+" ",ie=L<(D=this.textWidth(k))&&0<ie.length?(Y.push(ie),"".concat(I[O])+" "):k;Y.push(ie)}var H=0;this._textBaseline===l.CENTER?H=(Y.length-1)*G.textLeading()/2:this._textBaseline===l.BOTTOM&&(H=(Y.length-1)*G.textLeading());for(var q=0;q<C.length;q++){ie="",I=C[q].split(" ");for(var Z=0;Z<I.length;Z++)k="".concat(ie+I[Z])+" ",L<(D=this.textWidth(k))&&0<ie.length?(this._renderText(G,ie.trim(),M,R-H,Q,V),ie="".concat(I[Z])+" ",R+=G.textLeading()):ie=k;this._renderText(G,ie.trim(),M,R-H,Q,V),R+=G.textLeading()}}else{for(var oe=[],pe=0;pe<C.length;pe++)for(var be=C[pe].split(ie=""),me=0;me<be.length;me++)k="".concat(ie+be[me]),(D=this.textWidth(k))<=L?ie+=be[me]:L<D&&0<ie.length&&(oe.push(ie),ie="".concat(be[me]));oe.push(ie);var ce=0;this._textBaseline===l.CENTER?ce=(oe.length-1)*G.textLeading()/2:this._textBaseline===l.BOTTOM&&(ce=(oe.length-1)*G.textLeading());for(var te=0;te<C.length;te++){be=C[te].split(ie="");for(var ue=0;ue<be.length;ue++)k="".concat(ie+be[ue]),(D=this.textWidth(k))<=L?ie+=be[ue]:L<D&&0<ie.length&&(this._renderText(G,ie.trim(),M,R-ce,Q,V),R+=G.textLeading(),ie="".concat(be[ue]))}this._renderText(G,ie.trim(),M,R-ce,Q,V),R+=G.textLeading()}}else{var ge=0;this._textBaseline===l.CENTER?ge=(C.length-1)*G.textLeading()/2:this._textBaseline===l.BOTTOM&&(ge=(C.length-1)*G.textLeading());for(var xe=0;xe<C.length;xe++)this._renderText(G,C[xe],M,R-ge,Q,V-ge),R+=G.textLeading()}return G}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return d(T)==="object"&&T.font&&T.font.supported}},{key:"_updateTextMetrics",value:function(){var T,M,R,L,P,C;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((T=document.createElement("span")).style.fontFamily=this._textFont,T.style.fontSize="".concat(this._textSize,"px"),T.innerHTML="ABCjgq|",(C=document.createElement("div")).style.display="inline-block",C.style.width="1px",C.style.height="0px",L=((M=document.createElement("div")).appendChild(T),M.appendChild(C),M.style.height="0px",M.style.overflow="hidden",document.body.appendChild(M),C.style.verticalAlign="baseline",g(C)),P=g(T),R=L[1]-P[1],L=(C.style.verticalAlign="bottom",g(C)),P=g(T),C=L[1]-P[1]-R,document.body.removeChild(M),this._setProperty("_textAscent",R),this._setProperty("_textDescent",C)),this}}])&&p(x.prototype,_),S}(u.default.Element);function g(_){var x=0,b=0;if(_.offsetParent)for(;x+=_.offsetLeft,b+=_.offsetTop,_=_.offsetParent;);else x+=_.offsetLeft,b+=_.offsetTop;return[x,b]}v.prototype.textSize=function(_){return typeof _=="number"?(this._setProperty("_textSize",_),this._leadingSet||this._setProperty("_textLeading",_*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},u.default.Renderer=v,r=u.default.Renderer,o.default=r},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(_,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function u(x){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(x)}_("core-js/modules/es.symbol"),_("core-js/modules/es.symbol.description"),_("core-js/modules/es.symbol.iterator"),_("core-js/modules/es.array.concat"),_("core-js/modules/es.array.fill"),_("core-js/modules/es.array.for-each"),_("core-js/modules/es.array.iterator"),_("core-js/modules/es.array.join"),_("core-js/modules/es.array.slice"),_("core-js/modules/es.function.name"),_("core-js/modules/es.number.to-fixed"),_("core-js/modules/es.object.get-own-property-descriptor"),_("core-js/modules/es.object.get-prototype-of"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.reflect.construct"),_("core-js/modules/es.reflect.get"),_("core-js/modules/es.regexp.exec"),_("core-js/modules/es.regexp.to-string"),_("core-js/modules/es.string.iterator"),_("core-js/modules/es.weak-map"),_("core-js/modules/web.dom-collections.iterator"),_("core-js/modules/es.array.concat"),_("core-js/modules/es.array.fill"),_("core-js/modules/es.array.for-each"),_("core-js/modules/es.array.join"),_("core-js/modules/es.array.slice"),_("core-js/modules/es.function.name"),_("core-js/modules/es.number.to-fixed"),_("core-js/modules/es.object.get-prototype-of"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.regexp.exec"),_("core-js/modules/es.regexp.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=_("./main"))&&g.__esModule?g:{default:g},c=function(x){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var b=d();if(b&&b.has(x))return b.get(x);var S,T={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var R;Object.prototype.hasOwnProperty.call(x,S)&&((R=M?Object.getOwnPropertyDescriptor(x,S):null)&&(R.get||R.set)?Object.defineProperty(T,S,R):T[S]=x[S])}return T.default=x,b&&b.set(x,T),T}(_("./constants"));function d(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,d=function(){return x},x)}function p(x,b){for(var S=0;S<b.length;S++){var T=b[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function f(x,b,S){return(f=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,M,R){var L=function(P,C){for(;!Object.prototype.hasOwnProperty.call(P,C)&&(P=y(P))!==null;);return P}(L,M);if(L)return(L=Object.getOwnPropertyDescriptor(L,M)).get?L.get.call(R):L.value})(x,b,S||x)}function h(x,b){return(h=Object.setPrototypeOf||function(S,T){return S.__proto__=T,S})(x,b)}function m(x){return function(){var b,S=y(x),S=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=y(this).constructor,Reflect.construct(S,arguments,b)):S.apply(this,arguments),this);if(!b||u(b)!=="object"&&typeof b!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}_("./p5.Renderer");var v="rgba(0,0,0,0)",g=function(x){var b=T;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&h(b,x);var S=m(T);function T(M,R,L){if(this instanceof T)return(M=S.call(this,M,R,L)).drawingContext=M.canvas.getContext("2d"),M._pInst._setProperty("drawingContext",M.drawingContext),M;throw new TypeError("Cannot call a class as a function")}return b=T,(x=[{key:"getFilterGraphicsLayer",value:function(){var M;return this.filterGraphicsLayer||(M=(this._pInst instanceof l.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new l.default.Graphics(this.width,this.height,c.WEBGL,M)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(M,R){f(y(T.prototype),"resize",this).call(this,M,R),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var M,R;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(M=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(M,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(M=this._getFill(),R=(R=this._pInst).color.apply(R,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(R.levels),R=R.toString(),this._setFill(R),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(M),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var M=(M=this._pInst).color.apply(M,arguments);this._setFill(M.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",M.levels)}},{key:"stroke",value:function(){var M=(M=this._pInst).color.apply(M,arguments);this._setStroke(M.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",M.levels)}},{key:"erase",value:function(M,R){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,M=this._pInst.color(255,M).toString(),this.drawingContext.fillStyle=M,this._cachedStrokeStyle=this.drawingContext.strokeStyle,M=this._pInst.color(255,R).toString(),this.drawingContext.strokeStyle=M,R=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=R,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(f(y(T.prototype),"beginClip",this).call(this,M),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),M=(this.drawingContext.fillStyle=M,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),M=(this.drawingContext.strokeStyle=M,this._cachedBlendMode);this.blendMode(c.BLEND),this._cachedBlendMode=M,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),f(y(T.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(M,R,L,P,C,k,D,F,G){M.gifProperties&&M._animateGif(this._pInst);try{l.default.MediaElement&&M instanceof l.default.MediaElement&&M._ensureCanvas();var z=(z=this._tint&&M.canvas?this._getTintedImageCanvas(M):z)||M.canvas||M.elt,Q=1;M.width&&0<M.width&&(Q=z.width/M.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(z,Q*R,Q*L,Q*P,Q*C,k,D,F,G),this._isErasing&&this._pInst.erase()}catch(V){if(V.name!=="NS_ERROR_NOT_AVAILABLE")throw V}}},{key:"_getTintedImageCanvas",value:function(M){if(!M.canvas)return M;M.tintCanvas||(M.tintCanvas=document.createElement("canvas")),M.tintCanvas.width!==M.canvas.width&&(M.tintCanvas.width=M.canvas.width),M.tintCanvas.height!==M.canvas.height&&(M.tintCanvas.height=M.canvas.height);var R=M.tintCanvas.getContext("2d");return R.save(),R.clearRect(0,0,M.canvas.width,M.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(R.drawImage(M.canvas,0,0),R.globalCompositeOperation="luminosity",R.drawImage(M.canvas,0,0),R.globalCompositeOperation="color",R.drawImage(M.canvas,0,0),R.globalCompositeOperation="multiply",R.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),R.fillRect(0,0,M.canvas.width,M.canvas.height),R.globalCompositeOperation="destination-in"),R.globalAlpha=this._tint[3]/255,R.drawImage(M.canvas,0,0),R.restore(),M.tintCanvas}},{key:"blendMode",value:function(M){if(M===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(M!==c.BLEND&&M!==c.REMOVE&&M!==c.DARKEST&&M!==c.LIGHTEST&&M!==c.DIFFERENCE&&M!==c.MULTIPLY&&M!==c.EXCLUSION&&M!==c.SCREEN&&M!==c.REPLACE&&M!==c.OVERLAY&&M!==c.HARD_LIGHT&&M!==c.SOFT_LIGHT&&M!==c.DODGE&&M!==c.BURN&&M!==c.ADD)throw new Error("Mode ".concat(M," not recognized."));this._cachedBlendMode=M,this.drawingContext.globalCompositeOperation=M}}},{key:"blend",value:function(){for(var M=this.drawingContext.globalCompositeOperation,R=arguments.length,L=new Array(R),P=0;P<R;P++)L[P]=arguments[P];var C=L[L.length-1],k=Array.prototype.slice.call(L,0,L.length-1);this.drawingContext.globalCompositeOperation=C,l.default.prototype.copy.apply(this,k),this.drawingContext.globalCompositeOperation=M}},{key:"_getPixel",value:function(M,R){return M=this.drawingContext.getImageData(M,R,1,1).data,[M[0],M[1],M[2],M[3]]}},{key:"loadPixels",value:function(){var M=this._pixelsState,R=M._pixelDensity,L=this.width*R,R=this.height*R,L=this.drawingContext.getImageData(0,0,L,R);M._setProperty("imageData",L),M._setProperty("pixels",L.data)}},{key:"set",value:function(M,R,L){M=Math.floor(M),R=Math.floor(R);var P=this._pixelsState;if(L instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(P._pixelDensity,P._pixelDensity),this.drawingContext.clearRect(M,R,L.width,L.height),this.drawingContext.drawImage(L.canvas,M,R),this.drawingContext.restore();else{var C=0,k=0,D=0,F=0,G=4*(R*P._pixelDensity*(this.width*P._pixelDensity)+M*P._pixelDensity);if(P.imageData||P.loadPixels(),typeof L=="number")G<P.pixels.length&&(D=k=C=L,F=255);else if(Array.isArray(L)){if(L.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");G<P.pixels.length&&(C=L[0],k=L[1],D=L[2],F=L[3])}else L instanceof l.default.Color&&G<P.pixels.length&&(C=L.levels[0],k=L.levels[1],D=L.levels[2],F=L.levels[3]);for(var z=0;z<P._pixelDensity;z++)for(var Q=0;Q<P._pixelDensity;Q++)G=4*((R*P._pixelDensity+Q)*this.width*P._pixelDensity+(M*P._pixelDensity+z)),P.pixels[G]=C,P.pixels[G+1]=k,P.pixels[G+2]=D,P.pixels[G+3]=F}}},{key:"updatePixels",value:function(M,R,L,P){var C=this._pixelsState,k=C._pixelDensity;M===void 0&&R===void 0&&L===void 0&&P===void 0&&(R=M=0,L=this.width,P=this.height),M*=k,R*=k,L*=k,P*=k,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=C.imageData),this.drawingContext.putImageData(C.imageData,M,R,0,0,L,P)}},{key:"_acuteArcToBezier",value:function(M,R){var k=R/2,L=Math.cos(k),F=Math.sin(k),P=1/Math.tan(k),k=M+k,C=Math.cos(k),k=Math.sin(k),D=(4-L)/3,F=F+(L-D)*P;return{ax:Math.cos(M).toFixed(7),ay:Math.sin(M).toFixed(7),bx:(D*C+F*k).toFixed(7),by:(D*k-F*C).toFixed(7),cx:(D*C-F*k).toFixed(7),cy:(D*k+F*C).toFixed(7),dx:Math.cos(M+R).toFixed(7),dy:Math.sin(M+R).toFixed(7)}}},{key:"arc",value:function(M,R,L,P,C,k,D){var F,G=this.drawingContext,z=L/2,Q=P/2,V=[];for(M+=z,R+=Q;1e-5<=k-C;)F=Math.min(k-C,c.HALF_PI),V.push(this._acuteArcToBezier(C,F)),C+=F;return this._doFill&&(this._clipping||G.beginPath(),V.forEach(function(W,Y){Y===0&&G.moveTo(M+W.ax*z,R+W.ay*Q),G.bezierCurveTo(M+W.bx*z,R+W.by*Q,M+W.cx*z,R+W.cy*Q,M+W.dx*z,R+W.dy*Q)}),D!==c.PIE&&D!=null||G.lineTo(M,R),G.closePath(),this._clipping||G.fill()),this._doStroke&&(this._clipping||G.beginPath(),V.forEach(function(W,Y){Y===0&&G.moveTo(M+W.ax*z,R+W.ay*Q),G.bezierCurveTo(M+W.bx*z,R+W.by*Q,M+W.cx*z,R+W.cy*Q,M+W.dx*z,R+W.dy*Q)}),D===c.PIE?(G.lineTo(M,R),G.closePath()):D===c.CHORD&&G.closePath(),this._clipping||G.stroke()),this}},{key:"ellipse",value:function(F){var R=this.drawingContext,L=this._doFill,P=this._doStroke,C=parseFloat(F[0]),k=parseFloat(F[1]),D=parseFloat(F[2]),F=parseFloat(F[3]);if(L&&!P){if(this._getFill()===v)return this}else if(!L&&P&&this._getStroke()===v)return this;C+=D/2,k+=F/2,D/=2,F/=2,this._clipping||R.beginPath(),R.ellipse(C,k,D,F,0,0,2*Math.PI),!this._clipping&&L&&R.fill(),!this._clipping&&P&&R.stroke()}},{key:"line",value:function(M,R,L,P){var C=this.drawingContext;return this._doStroke&&this._getStroke()!==v&&(this._clipping||C.beginPath(),C.moveTo(M,R),C.lineTo(L,P),C.stroke()),this}},{key:"point",value:function(M,R){var L,P,C=this.drawingContext;return!this._doStroke||this._getStroke()===v?this:(L=this._getStroke(),P=this._getFill(),this._clipping||this._setFill(L),this._clipping||C.beginPath(),C.arc(M,R,C.lineWidth/2,0,c.TWO_PI,!1),void(this._clipping||(C.fill(),this._setFill(P))))}},{key:"quad",value:function(M,R,L,P,C,k,D,F){var G=this.drawingContext,z=this._doFill,Q=this._doStroke;if(z&&!Q){if(this._getFill()===v)return this}else if(!z&&Q&&this._getStroke()===v)return this;return this._clipping||G.beginPath(),G.moveTo(M,R),G.lineTo(L,P),G.lineTo(C,k),G.lineTo(D,F),G.closePath(),!this._clipping&&z&&G.fill(),!this._clipping&&Q&&G.stroke(),this}},{key:"rect",value:function(Q){var R,L,P=Q[0],C=Q[1],k=Q[2],D=Q[3],F=Q[4],G=Q[5],z=Q[6],Q=Q[7],V=this.drawingContext,W=this._doFill,Y=this._doStroke;if(W&&!Y){if(this._getFill()===v)return this}else if(!W&&Y&&this._getStroke()===v)return this;return this._clipping||V.beginPath(),F===void 0?V.rect(P,C,k,D):(G===void 0&&(G=F),z===void 0&&(z=G),Q===void 0&&(Q=z),Y=(W=Math.abs(k))/2,L=(R=Math.abs(D))/2,R<2*(F=W<2*F?Y:F)&&(F=L),R<2*(G=W<2*G?Y:G)&&(G=L),R<2*(z=W<2*z?Y:z)&&(z=L),R<2*(Q=W<2*Q?Y:Q)&&(Q=L),this._clipping||V.beginPath(),V.moveTo(P+F,C),V.arcTo(P+k,C,P+k,C+D,G),V.arcTo(P+k,C+D,P,C+D,z),V.arcTo(P,C+D,P,C,Q),V.arcTo(P,C,P+k,C,F),V.closePath()),!this._clipping&&this._doFill&&V.fill(),!this._clipping&&this._doStroke&&V.stroke(),this}},{key:"triangle",value:function(z){var R=this.drawingContext,L=this._doFill,P=this._doStroke,C=z[0],k=z[1],D=z[2],F=z[3],G=z[4],z=z[5];if(L&&!P){if(this._getFill()===v)return this}else if(!L&&P&&this._getStroke()===v)return this;this._clipping||R.beginPath(),R.moveTo(C,k),R.lineTo(D,F),R.lineTo(G,z),R.closePath(),!this._clipping&&L&&R.fill(),!this._clipping&&P&&R.stroke()}},{key:"endShape",value:function(M,R,L,P,C,k,D){if(R.length!==0&&(this._doStroke||this._doFill)){var F,G,z,Q=M===c.CLOSE,V=(Q&&!k&&R.push(R[0]),R.length);if(L&&D===null){if(3<V){var W=[],Y=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(R[1][0],R[1][1]),G=1;G+2<V;G++)F=R[G],W[0]=[F[0],F[1]],W[1]=[F[0]+(Y*R[G+1][0]-Y*R[G-1][0])/6,F[1]+(Y*R[G+1][1]-Y*R[G-1][1])/6],W[2]=[R[G+1][0]+(Y*R[G][0]-Y*R[G+2][0])/6,R[G+1][1]+(Y*R[G][1]-Y*R[G+2][1])/6],W[3]=[R[G+1][0],R[G+1][1]],this.drawingContext.bezierCurveTo(W[1][0],W[1][1],W[2][0],W[2][1],W[3][0],W[3][1]);Q&&this.drawingContext.lineTo(R[G+1][0],R[G+1][1]),this._doFillStrokeClose(Q)}}else if(P&&D===null){for(this._clipping||this.drawingContext.beginPath(),G=0;G<V;G++)R[G].isVert?R[G].moveTo?this.drawingContext.moveTo(R[G][0],R[G][1]):this.drawingContext.lineTo(R[G][0],R[G][1]):this.drawingContext.bezierCurveTo(R[G][0],R[G][1],R[G][2],R[G][3],R[G][4],R[G][5]);this._doFillStrokeClose(Q)}else if(C&&D===null){for(this._clipping||this.drawingContext.beginPath(),G=0;G<V;G++)R[G].isVert?R[G].moveTo?this.drawingContext.moveTo(R[G][0],R[G][1]):this.drawingContext.lineTo(R[G][0],R[G][1]):this.drawingContext.quadraticCurveTo(R[G][0],R[G][1],R[G][2],R[G][3]);this._doFillStrokeClose(Q)}else if(D===c.POINTS)for(G=0;G<V;G++)F=R[G],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(D===c.LINES)for(G=0;G+1<V;G+=2)F=R[G],this._doStroke&&this._pInst.stroke(R[G+1][6]),this._pInst.line(F[0],F[1],R[G+1][0],R[G+1][1]);else if(D===c.TRIANGLES)for(G=0;G+2<V;G+=3)F=R[G],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(R[G+1][0],R[G+1][1]),this.drawingContext.lineTo(R[G+2][0],R[G+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(R[G+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(R[G+2][6]),this.drawingContext.stroke());else if(D===c.TRIANGLE_STRIP)for(G=0;G+1<V;G++)F=R[G],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(R[G+1][0],R[G+1][1]),this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(R[G+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(R[G+1][5]),G+2<V&&(this.drawingContext.lineTo(R[G+2][0],R[G+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(R[G+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(R[G+2][5])),this._doFillStrokeClose(Q);else if(D===c.TRIANGLE_FAN){if(2<V){for(this._clipping||this.drawingContext.beginPath(),G=2;G<V;G++)F=R[G],this.drawingContext.moveTo(R[0][0],R[0][1]),this.drawingContext.lineTo(R[G-1][0],R[G-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(R[0][0],R[0][1]),G<V-1&&(this._doFill&&F[5]!==R[G+1][5]||this._doStroke&&F[6]!==R[G+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(R[G+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(R[G+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(Q)}}else if(D===c.QUADS)for(G=0;G+3<V;G+=4){for(F=R[G],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),z=1;z<4;z++)this.drawingContext.lineTo(R[G+z][0],R[G+z][1]);this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doFill&&this._pInst.fill(R[G+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(R[G+3][6]),this._doFillStrokeClose(Q)}else if(D===c.QUAD_STRIP){if(3<V)for(G=0;G+1<V;G+=2)F=R[G],this._clipping||this.drawingContext.beginPath(),G+3<V?(this.drawingContext.moveTo(R[G+2][0],R[G+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(R[G+1][0],R[G+1][1]),this.drawingContext.lineTo(R[G+3][0],R[G+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(R[G+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(R[G+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(R[G+1][0],R[G+1][1])),this._doFillStrokeClose(Q)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(R[0][0],R[0][1]),G=1;G<V;G++)(F=R[G]).isVert&&(F.moveTo?(Q&&this.drawingContext.closePath(),this.drawingContext.moveTo(F[0],F[1])):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(Q)}k=C=P=L=!1,Q&&R.pop()}return this}},{key:"strokeCap",value:function(M){return M!==c.ROUND&&M!==c.SQUARE&&M!==c.PROJECT||(this.drawingContext.lineCap=M),this}},{key:"strokeJoin",value:function(M){return M!==c.ROUND&&M!==c.BEVEL&&M!==c.MITER||(this.drawingContext.lineJoin=M),this}},{key:"strokeWeight",value:function(M){return this.drawingContext.lineWidth=M===void 0||M===0?1e-4:M,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(M){M!==this._cachedFillStyle&&(this.drawingContext.fillStyle=M,this._cachedFillStyle=M)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(M){M!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=M,this._cachedStrokeStyle=M)}},{key:"bezier",value:function(M,R,L,P,C,k,D,F){return this._pInst.beginShape(),this._pInst.vertex(M,R),this._pInst.bezierVertex(L,P,C,k,D,F),this._pInst.endShape(),this}},{key:"curve",value:function(M,R,L,P,C,k,D,F){return this._pInst.beginShape(),this._pInst.curveVertex(M,R),this._pInst.curveVertex(L,P),this._pInst.curveVertex(C,k),this._pInst.curveVertex(D,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(M){M&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(M,R,L,P,C,k){this.drawingContext.transform(M,R,L,P,C,k)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(M){this.drawingContext.rotate(M)}},{key:"scale",value:function(M,R){return this.drawingContext.scale(M,R),this}},{key:"translate",value:function(M,R){return M instanceof l.default.Vector&&(R=M.y,M=M.x),this.drawingContext.translate(M,R),this}},{key:"_renderText",value:function(M,R,L,P,C,k){if(!(P<k||C<=P))return M.push(),this._isOpenType()?this._textFont._renderPath(R,L,P,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(R,L,P),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(R,L,P))),M.pop(),M}},{key:"textWidth",value:function(M){return this._isOpenType()?this._textFont._textWidth(M,this._textSize):this.drawingContext.measureText(M).width}},{key:"_applyTextProperties",value:function(){var M=this._pInst,R=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),R=this._textFont,this._isOpenType()&&(R=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),R||"sans-serif");return/\s/.exec(R)&&(R='"'.concat(R,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(R),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,M}},{key:"push",value:function(){return this.drawingContext.save(),f(y(T.prototype),"push",this).call(this)}},{key:"pop",value:function(M){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,f(y(T.prototype),"pop",this).call(this,M)}}])&&p(b.prototype,x),T}(l.default.Renderer),_=(g.prototype.text=function(x,b,S,L,M){L!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(R=!0,this.drawingContext.textBaseline=c.TOP);var R,L=l.default.Renderer.prototype.text.apply(this,arguments);return R&&(this.drawingContext.textBaseline=c.BASELINE),L},l.default.Renderer2D=g,l.default.Renderer2D);o.default=_},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(r=r("./main"))&&r.__esModule?r:{default:r};a.default.prototype._promisePreloads=[];function u(){return{}}var l=!(a.default.prototype.registerPromisePreload=function(c){a.default.prototype._promisePreloads.push(c)});a.default.prototype._setupPromisePreloads=function(){var c=!0,d=!1,p=void 0;try{for(var f,h=this._promisePreloads[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value,y=this,v=m.method,g=m.addCallbacks,_=m.legacyPreloadSetup,x=m.target||this,b=x[v].bind(x);if(x===a.default.prototype){if(l)continue;y=null,b=x[v]}x[v]=this._wrapPromisePreload(y,b,g),_&&(x[_.method]=this._legacyPreloadGenerator(y,_,x[v]))}}catch(S){d=!0,p=S}finally{try{c||h.return==null||h.return()}finally{if(d)throw p}}l=!0},a.default.prototype._wrapPromisePreload=function(c,d,p){var f=function(){for(var h=this,m=(this._incrementPreload(),null),y=null,v=arguments.length,g=new Array(v),_=0;_<v;_++)g[_]=arguments[_];if(p)for(var x=g.length-1;0<=x&&!y&&typeof g[x]=="function";x--)y=m,m=g.pop();var b=Promise.resolve(d.apply(this,g));return m&&b.then(m),y&&b.catch(y),b.then(function(){return h._decrementPreload()}),b};return f=c?f.bind(c):f},a.default.prototype._legacyPreloadGenerator=function(c,h,p){var f=h.createBaseObject||u,h=function(){var m=this;this._incrementPreload();for(var y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];var _=f.apply(this,v);return p.apply(this,v).then(function(x){Object.assign(_,x),m._decrementPreload()}),_};return h=c?h.bind(c):h}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(f=r("./main"))&&f.__esModule?f:{default:f},l=function(h){if(h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var _;Object.prototype.hasOwnProperty.call(h,y)&&((_=g?Object.getOwnPropertyDescriptor(h,y):null)&&(_.get||_.set)?Object.defineProperty(v,y,_):v[y]=h[y])}return v.default=h,m&&m.set(h,v),v}(r("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function d(h){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var p="defaultCanvas0",f=(u.default.prototype.createCanvas=function(h,m,y,v){var g,_,x;if(u.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=l.P2D,v=arguments[2]):g=y||l.P2D,v)(x=document.getElementById(p))&&x.parentNode.removeChild(x),x=v,this._defaultGraphicsCreated=!1;else{if(g===l.WEBGL)(x=document.getElementById(p))&&(x.parentNode.removeChild(x),_=this._renderer,this._elements=this._elements.filter(function(S){return S!==_})),(x=document.createElement("canvas")).id=p,x.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)x=this.canvas;else{x=v||document.createElement("canvas");for(var b=0;document.getElementById("defaultCanvas".concat(b));)b++;p="defaultCanvas".concat(b),x.id=p,x.classList.add("p5Canvas")}this._setupDone||(x.dataset.hidden=!0,x.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(x)}return g===l.WEBGL?(this._setProperty("_renderer",new u.default.RendererGL(x,this,!0)),this._elements.push(this._renderer),h=(v=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=v.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new u.default.Renderer2D(x,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(h,m),this._renderer._applyDefaults(),this._renderer},u.default.prototype.resizeCanvas=function(h,m,y){if(u.default._validateParameters("resizeCanvas",arguments),this._renderer){var v,g,_,x={};for(v in this.drawingContext){var b=this.drawingContext[v];d(b)!=="object"&&typeof b!="function"&&(x[v]=b)}for(_ in this._renderer instanceof u.default.RendererGL&&(h=(g=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=g.adjustedHeight),this.width=h,this.height=m,this._renderer.resize(h,m),x)try{this.drawingContext[_]=x[_]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},u.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},u.default.prototype.createGraphics=function(h,m){for(var y=arguments.length,v=new Array(2<y?y-2:0),g=2;g<y;g++)v[g-2]=arguments[g];return v[0]instanceof HTMLCanvasElement&&(v[1]=v[0],v[0]=l.P2D),u.default._validateParameters("createGraphics",arguments),new u.default.Graphics(h,m,v[0],this,v[1])},u.default.prototype.createFramebuffer=function(h){return new u.default.Framebuffer(this,h)},u.default.prototype.clearDepth=function(h){this._assert3d("clearDepth"),this._renderer.clearDepth(h)},u.default.prototype.blendMode=function(h){u.default._validateParameters("blendMode",arguments),h===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),h=l.BLEND),this._renderer.blendMode(h)},u.default);o.default=f},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function u(m){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=f(r("../main")),c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var y=p();if(y&&y.has(m))return y.get(m);var v,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var x;Object.prototype.hasOwnProperty.call(m,v)&&((x=_?Object.getOwnPropertyDescriptor(m,v):null)&&(x.get||x.set)?Object.defineProperty(g,v,x):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../constants")),d=f(r("../helpers"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}function f(m){return m&&m.__esModule?m:{default:m}}function h(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(m,y,v,g,_){var x;return m-=c.TWO_PI*Math.floor(m/c.TWO_PI),y-=c.TWO_PI*Math.floor(y/c.TWO_PI),x=Math.min(Math.abs(m-y),c.TWO_PI-Math.abs(m-y)),_&&(m=m<=c.HALF_PI?Math.atan(v/g*Math.tan(m)):m>c.HALF_PI&&m<=3*c.HALF_PI?Math.atan(v/g*Math.tan(m))+c.PI:Math.atan(v/g*Math.tan(m))+c.TWO_PI,y=y<=c.HALF_PI?Math.atan(v/g*Math.tan(y)):y>c.HALF_PI&&y<=3*c.HALF_PI?Math.atan(v/g*Math.tan(y))+c.PI:Math.atan(v/g*Math.tan(y))+c.TWO_PI),y<m&&(y+=c.TWO_PI),{start:m,stop:y,correspondToSamePoint:x<1e-5}},l.default.prototype.arc=function(m,y,v,g,_,x,b,S){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&_!==x&&(_=this._toRadians(_),x=this._toRadians(x),v=Math.abs(v),g=Math.abs(g),m=d.default.modeAdjust(m,y,v,g,this._renderer._ellipseMode),(y=this._normalizeArcAngles(_,x,m.w,m.h,!0)).correspondToSamePoint?this._renderer.ellipse([m.x,m.y,m.w,m.h,S]):(this._renderer.arc(m.x,m.y,m.w,m.h,y.start,y.stop,b,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[m.x,m.y,m.w,m.h,y.start,y.stop,b]))),this},l.default.prototype.ellipse=function(m,y,v,g,_){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];l.default._validateParameters("circle",y);var g=y.slice(0,2);return g.push(y[2],y[2]),this._renderEllipse.apply(this,h(g))},l.default.prototype._renderEllipse=function(m,y,v,g,_){return(this._renderer._doStroke||this._renderer._doFill)&&(v<0&&(v=Math.abs(v)),g===void 0?g=v:g<0&&(g=Math.abs(g)),m=d.default.modeAdjust(m,y,v,g,this._renderer._ellipseMode),this._renderer.ellipse([m.x,m.y,m.w,m.h,_]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[m.x,m.y,m.w,m.h])),this},l.default.prototype.line=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("line",v),this._renderer._doStroke&&(m=this._renderer).line.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",v),this},l.default.prototype.point=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("point",v),this._renderer._doStroke&&(v.length===1&&v[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,v[0].x,v[0].y,v[0].z):((m=this._renderer).point.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",v))),this},l.default.prototype.quad=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("quad",v),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&v.length<12?this._renderer.quad.call(this._renderer,v[0],v[1],0,v[2],v[3],0,v[4],v[5],0,v[6],v[7],0,v[8],v[9]):((m=this._renderer).quad.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",v))),this},l.default.prototype.rect=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return l.default._validateParameters("rect",y),this._renderRect.apply(this,y)},l.default.prototype.square=function(m,y,v,g,_,x,b){return l.default._validateParameters("square",arguments),this._renderRect.call(this,m,y,v,v,g,_,x,b)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var m=d.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=[m.x,m.y,m.w,m.h],v=4;v<arguments.length;v++)y[v]=arguments[v];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[m.x,m.y,m.w,m.h])}return this},l.default.prototype.triangle=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return l.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},r=l.default,o.default=r},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../main"))&&p.__esModule?p:{default:p},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../constants"));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}l.default.prototype.ellipseMode=function(f){return l.default._validateParameters("ellipseMode",arguments),f!==c.CORNER&&f!==c.CORNERS&&f!==c.RADIUS&&f!==c.CENTER||(this._renderer._ellipseMode=f),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(f){return l.default._validateParameters("rectMode",arguments),f!==c.CORNER&&f!==c.CORNERS&&f!==c.RADIUS&&f!==c.CENTER||(this._renderer._rectMode=f),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(f){return l.default._validateParameters("strokeCap",arguments),f!==c.ROUND&&f!==c.SQUARE&&f!==c.PROJECT||this._renderer.strokeCap(f),this},l.default.prototype.strokeJoin=function(f){return l.default._validateParameters("strokeJoin",arguments),f!==c.ROUND&&f!==c.BEVEL&&f!==c.MITER||this._renderer.strokeJoin(f),this},l.default.prototype.strokeWeight=function(f){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(f),this};var p=l.default;o.default=p},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(u=r("../main"))&&u.__esModule?u:{default:u};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var l,c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("bezier",d),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,d),this},a.default.prototype.bezierDetail=function(l){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},a.default.prototype.bezierPoint=function(l,c,d,p,f){a.default._validateParameters("bezierPoint",arguments);var h=1-f;return Math.pow(h,3)*l+3*Math.pow(h,2)*f*c+3*h*Math.pow(f,2)*d+Math.pow(f,3)*p},a.default.prototype.bezierTangent=function(l,c,d,p,f){a.default._validateParameters("bezierTangent",arguments);var h=1-f;return 3*p*Math.pow(f,2)-3*d*Math.pow(f,2)+6*d*h*f-6*c*h*f+3*c*Math.pow(h,2)-3*l*Math.pow(h,2)},a.default.prototype.curve=function(){for(var l,c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("curve",d),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,d),this},a.default.prototype.curveDetail=function(l){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},a.default.prototype.curveTightness=function(l){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},a.default.prototype.curvePoint=function(l,c,d,p,f){a.default._validateParameters("curvePoint",arguments);var h=this._renderer._curveTightness,m=f*f*f,y=f*f;return l*((h-1)/2*m+(1-h)*y+(h-1)/2*f)+c*((h+3)/2*m+(-5-h)/2*y+1)+d*((-3-h)/2*m+(h+2)*y+(1-h)/2*f)+p*((1-h)/2*m+(h-1)/2*y)},a.default.prototype.curveTangent=function(l,c,d,p,y){a.default._validateParameters("curveTangent",arguments);var h=this._renderer._curveTightness,m=y*y*3,y=2*y;return l*((h-1)/2*m+(1-h)*y+(h-1)/2)+c*((h+3)/2*m+(-5-h)/2*y)+d*((-3-h)/2*m+(h+2)*y+(1-h)/2)+p*((1-h)/2*m+(h-1)/2*y)};var u=a.default;o.default=u},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}function u(b){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(x=r("../main"))&&x.__esModule?x:{default:x},c=function(b){if(b&&b.__esModule)return b;if(b===null||u(b)!=="object"&&typeof b!="function")return{default:b};var S=d();if(S&&S.has(b))return S.get(b);var T,M={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in b){var L;Object.prototype.hasOwnProperty.call(b,T)&&((L=R?Object.getOwnPropertyDescriptor(b,T):null)&&(L.get||L.set)?Object.defineProperty(M,T,L):M[T]=b[T])}return M.default=b,S&&S.set(b,M),M}(r("../constants"));function d(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,d=function(){return b},b)}var p=null,f=[],h=[],m=!1,y=!1,v=!1,g=!1,_=!0,x=(l.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(h=[],g=!0),this},l.default.prototype.beginShape=function(b){var S;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(p=b===c.POINTS||b===c.LINES||b===c.TRIANGLES||b===c.TRIANGLE_FAN||b===c.TRIANGLE_STRIP||b===c.QUADS||b===c.QUAD_STRIP?b:null,f=[],h=[]),this},l.default.prototype.bezierVertex=function(){for(var b,S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];if(l.default._validateParameters("bezierVertex",T),this._renderer.isP3D)(b=this._renderer).bezierVertex.apply(b,T);else if(f.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{m=!0;for(var R=[],L=0;L<T.length;L++)R[L]=T[L];R.isVert=!1,(g?h:f).push(R)}return this},l.default.prototype.curveVertex=function(){for(var b,S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];return l.default._validateParameters("curveVertex",T),this._renderer.isP3D?(b=this._renderer).curveVertex.apply(b,T):(y=!0,this.vertex(T[0],T[1])),this},l.default.prototype.endContour=function(){if(!this._renderer.isP3D){var b=h[0].slice();b.isVert=h[0].isVert,b.moveTo=!1,h.push(b),_&&(f.push(f[0]),_=!1);for(var S=0;S<h.length;S++)f.push(h[S])}return this},l.default.prototype.endShape=function(b){var S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(l.default._validateParameters("endShape",arguments),S<1&&(console.log(" p5.js says: You can not have less than one instance"),S=1),this._renderer.isP3D)this._renderer.endShape(b,y,m,v,g,p,S);else{if(S!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),f.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;S=b===c.CLOSE,S&&!g&&f.push(f[0]),this._renderer.endShape(b,f,y,m,v,g,p),_=!(g=v=m=y=!1),S&&f.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var b,S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];if(l.default._validateParameters("quadraticVertex",T),this._renderer.isP3D)(b=this._renderer).quadraticVertex.apply(b,T);else{if(this._contourInited)return(b={}).x=T[0],b.y=T[1],b.x3=T[2],b.y3=T[3],b.type=c.QUADRATIC,this._contourVertices.push(b),this;if(0<f.length){v=!0;for(var R=[],L=0;L<T.length;L++)R[L]=T[L];R.isVert=!1,(g?h:f).push(R)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(b,S,T,M,R){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=b,L[1]=S,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),T&&(L.moveTo=T),(g?(h.length===0&&(L.moveTo=!0),h):f).push(L)),this},l.default.prototype.normal=function(b,S,T){var M;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(M=this._renderer).normal.apply(M,arguments),this},l.default);o.default=x},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(r,s,o){},{}],292:[function(r,s,o){r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var u=parseInt(a),l=((isNaN(u)||u<1)&&(u=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var c=0;c<u;c++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},r=r.default,o.default=r},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function u(l){return function(c){if(Array.isArray(c)){for(var d=0,p=new Array(c.length);d<c.length;d++)p[d]=c[d];return p}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var l=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,u(arguments.length<=0?void 0:arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(l,c){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),c),this},a.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},a.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},a.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},a.default.prototype.scale=function(l,c,d){var p;return a.default._validateParameters("scale",arguments),l instanceof a.default.Vector?(l=(p=l).x,c=p.y,d=p.z):Array.isArray(l)&&(l=(p=l)[0],c=p[1],d=p[2]||1),isNaN(c)?c=d=l:isNaN(d)&&(d=1),this._renderer.scale(l,c,d),this},a.default.prototype.shearX=function(l){return a.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},a.default.prototype.shearY=function(l){return a.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},a.default.prototype.translate=function(l,c,d){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,c,d):this._renderer.translate(l,c),this},r=a.default,o.default=r},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator");var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d){return function(p){if(Array.isArray(p)){for(var f=0,h=new Array(p.length);f<p.length;f++)h[f]=p[f];return h}}(d)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}u.default.prototype.storeItem=function(d,p){typeof d!="string"&&console.log("The argument that you passed to storeItem() - ".concat(d," is not a string.")),d.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(d," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var f=c(p);switch(f){case"number":case"boolean":p=p.toString();break;case"object":p instanceof u.default.Color?f="p5.Color":p instanceof u.default.Vector&&(f="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(d,p),d="".concat(d,"p5TypeID"),localStorage.setItem(d,f)},u.default.prototype.getItem=function(d){var p=localStorage.getItem(d),f=localStorage.getItem("".concat(d,"p5TypeID"));if(f===void 0)console.log("Unable to determine type of item stored under ".concat(d,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(f){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,l(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,l(p))}return p},u.default.prototype.clearStorage=function(){var d=this;Object.keys(localStorage).forEach(function(p){p.endsWith("p5TypeID")&&d.removeItem(p.replace("p5TypeID",""))})},u.default.prototype.removeItem=function(d){typeof d!="string"&&console.log("The argument that you passed to removeItem() - ".concat(d," is not a string.")),localStorage.removeItem(d),localStorage.removeItem("".concat(d,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function u(v){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&d(v,g)}function d(v,g){return(d=Object.setPrototypeOf||function(_,x){return _.__proto__=x,_})(v,g)}function p(v){return function(){var g,_=f(v),_=(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=f(this).constructor,Reflect.construct(_,arguments,g)):_.apply(this,arguments),this);if(!g||u(g)!=="object"&&typeof g!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function f(v){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(v)}function h(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function m(v,g){for(var _=0;_<g.length;_++){var x=g[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}function y(v,g,_){g&&m(v.prototype,g)}l.default.prototype.createStringDict=function(v,g){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(v,g)},l.default.prototype.createNumberDict=function(v,g){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(v,g)},l.default.TypedDict=function(){function v(g,_){return h(this,v),g instanceof Object?this.data=g:(this.data={},this.data[g]=_),this}return y(v,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,_){this._validate(_)?this.data[g]=_:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var _ in g)this.set(_,g[_])}},{key:"create",value:function(g,_){g instanceof Object&&_===void 0?this._addObj(g):g!==void 0?this.set(g,_):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var _,x="";for(_ in this.data)x+="".concat(_,",").concat(this.data[_],`
`);var b=new Blob([x],{type:"text/csv"});l.default.prototype.downloadFile(b,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,_){l.default.prototype.saveJSON(this.data,g,_)}},{key:"_validate",value:function(g){return!0}}]),v}(),l.default.StringDict=function(){c(g,l.default.TypedDict);var v=p(g);function g(){h(this,g);for(var _=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];return v.call.apply(v,[this].concat(x))}return y(g,[{key:"_validate",value:function(_){return typeof _=="string"}}]),g}(),l.default.NumberDict=function(){c(g,l.default.TypedDict);var v=p(g);function g(){h(this,g);for(var _=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];return v.call.apply(v,[this].concat(x))}return y(g,[{key:"_validate",value:function(_){return typeof _=="number"}},{key:"add",value:function(_,x){this.data.hasOwnProperty(_)?this.data[_]+=x:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"sub",value:function(_,x){this.add(_,-x)}},{key:"mult",value:function(_,x){this.data.hasOwnProperty(_)?this.data[_]*=x:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"div",value:function(_,x){this.data.hasOwnProperty(_)?this.data[_]/=x:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"_valueTest",value:function(_){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var x,b=this.data[Object.keys(this.data)[0]];for(x in this.data)this.data[x]*_<b*_&&(b=this.data[x]);return b}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(_){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var x=Object.keys(this.data)[0],b=1;b<Object.keys(this.data).length;b++)Object.keys(this.data)[b]*_<x*_&&(x=Object.keys(this.data)[b]);return x}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),r=l.default.TypedDict,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(x,b){for(var S=0;S<b.length;S++){var T=b[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function c(x,b,S){b&&l(x.prototype,b),S&&l(x,S)}function d(x,b){return(d=Object.setPrototypeOf||function(S,T){return S.__proto__=T,S})(x,b)}function p(x){return function(){var b,S,T=h(x);return b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=h(this).constructor,Reflect.construct(T,arguments,b)):T.apply(this,arguments),T=this,!(S=b)||y(S)!=="object"&&typeof S!="function"?f(T):S}}function f(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function h(x){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}function m(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function y(x){return(y=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(x)}function v(x,b,S){return(b._userNode||document.body).appendChild(x),S=new(S?u.default.MediaElement:u.default.Element)(x,b),b._elements.push(S),S}function g(x,L,S,T){var M=document.createElement(L),R=(typeof(S=S||"")=="string"&&(S=[S]),!0),L=!1,P=void 0;try{for(var C,k=S[Symbol.iterator]();!(R=(C=k.next()).done);R=!0){var D=C.value,F=document.createElement("source");F.setAttribute("src",D),M.appendChild(F)}}catch(z){L=!0,P=z}finally{try{R||k.return==null||k.return()}finally{if(L)throw P}}typeof T=="function"&&M.addEventListener("canplaythrough",function z(){T(),M.removeEventListener("canplaythrough",z)});var G=v(M,x,!0);return G.loadedmetadata=!1,M.addEventListener("loadedmetadata",function(){G.width=M.videoWidth,G.height=M.videoHeight,G.elt.width===0&&(G.elt.width=M.videoWidth),G.elt.height===0&&(G.elt.height=M.videoHeight),G.presetPlaybackRate&&(G.elt.playbackRate=G.presetPlaybackRate,delete G.presetPlaybackRate),G.loadedmetadata=!0}),G}u.default.prototype.select=function(x,b){return u.default._validateParameters("select",arguments),b=this._getContainer(b).querySelector(x),b?this._wrapElement(b):null},u.default.prototype.selectAll=function(x,b){u.default._validateParameters("selectAll",arguments);var S=[],T=this._getContainer(b).querySelectorAll(x);if(T)for(var M=0;M<T.length;M++){var R=this._wrapElement(T[M]);S.push(R)}return S},u.default.prototype._getContainer=function(x){var b=document;return typeof x=="string"?b=document.querySelector(x)||document:x instanceof u.default.Element?b=x.elt:x instanceof HTMLElement&&(b=x),b},u.default.prototype._wrapElement=function(x){var b,S=Array.prototype.slice.call(x.children);return x.tagName==="INPUT"&&x.type==="checkbox"?((b=new u.default.Element(x,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},b):x.tagName==="VIDEO"||x.tagName==="AUDIO"?new u.default.MediaElement(x,this):x.tagName==="SELECT"?this.createSelect(new u.default.Element(x,this)):0<S.length&&S.every(function(T){return T.tagName==="INPUT"||T.tagName==="LABEL"})?this.createRadio(new u.default.Element(x,this)):new u.default.Element(x,this)},u.default.prototype.removeElements=function(x){u.default._validateParameters("removeElements",arguments),this._elements.filter(function(b){return!(b.elt instanceof HTMLCanvasElement)}).map(function(b){return b.remove()})},u.default.Element.prototype.changed=function(x){return u.default.Element._adjustListener("change",x,this),this},u.default.Element.prototype.input=function(x){return u.default.Element._adjustListener("input",x,this),this},u.default.prototype.createDiv=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=document.createElement("div");return b.innerHTML=x,v(b,this)},u.default.prototype.createP=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=document.createElement("p");return b.innerHTML=x,v(b,this)},u.default.prototype.createSpan=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=document.createElement("span");return b.innerHTML=x,v(b,this)},u.default.prototype.createImg=function(){u.default._validateParameters("createImg",arguments);var x,b=document.createElement("img"),S=arguments;return 1<S.length&&typeof S[1]=="string"&&(b.alt=S[1]),2<S.length&&typeof S[2]=="string"&&(b.crossOrigin=S[2]),b.src=S[0],x=v(b,this),b.addEventListener("load",function(){x.width=b.offsetWidth||b.width,x.height=b.offsetHeight||b.height;var T=S[S.length-1];typeof T=="function"&&T(x)}),x},u.default.prototype.createA=function(x,b,S){u.default._validateParameters("createA",arguments);var T=document.createElement("a");return T.href=x,T.innerHTML=b,S&&(T.target=S),v(T,this)},u.default.prototype.createSlider=function(x,b,S,T){u.default._validateParameters("createSlider",arguments);var M=document.createElement("input");return M.type="range",M.min=x,M.max=b,T===0?M.step=1e-18:T&&(M.step=T),typeof S=="number"&&(M.value=S),v(M,this)},u.default.prototype.createButton=function(x,b){u.default._validateParameters("createButton",arguments);var S=document.createElement("button");return S.innerHTML=x,b&&(S.value=b),v(S,this)},u.default.prototype.createCheckbox=function(){for(var x=arguments.length,b=new Array(x),S=0;S<x;S++)b[S]=arguments[S];u.default._validateParameters("createCheckbox",b);var T=document.createElement("div"),M=document.createElement("input"),R=(M.type="checkbox",document.createElement("label")),L=(R.appendChild(M),T.appendChild(R),v(T,this));return L.checked=function(){var P=L.elt.firstElementChild.getElementsByTagName("input")[0];if(P){if(arguments.length===0)return P.checked;P.checked=!(arguments.length<=0||!arguments[0])}return L},this.value=function(P){return L.value=P,this},b[0]&&(L.value(b[0]),(T=document.createElement("span")).innerHTML=b[0],R.appendChild(T)),b[1]&&(M.checked=!0),L},u.default.prototype.createSelect=function(){for(var x,b=arguments.length,S=new Array(b),T=0;T<b;T++)S[T]=arguments[T];u.default._validateParameters("createSelect",S);var M,R=S[0];return R instanceof u.default.Element&&R.elt instanceof HTMLSelectElement?this.elt=(x=R).elt:R instanceof HTMLSelectElement?(x=v(R,this),this.elt=R):(M=document.createElement("select"),R&&typeof R=="boolean"&&M.setAttribute("multiple","true"),x=v(M,this),this.elt=M),x.option=function(L,P){var C;if(L!==void 0){for(var k,D=0;D<this.elt.length;D+=1)if(this.elt[D].textContent===L){C=D;break}C!==void 0?P===!1?this.elt.remove(C):this.elt[C].value=P:((k=document.createElement("option")).textContent=L,k.value=P===void 0?L:P,this.elt.appendChild(k),this._pInst._elements.push(k))}},x.selected=function(L){if(L!==void 0){for(var P=0;P<this.elt.length;P+=1)this.elt[P].value.toString()===L.toString()&&(this.elt.selectedIndex=P);return this}if(this.elt.getAttribute("multiple")){var C=[],k=!0,D=!1,F=void 0;try{for(var G,z=this.elt.selectedOptions[Symbol.iterator]();!(k=(G=z.next()).done);k=!0){var Q=G.value;C.push(Q.value)}}catch(V){D=!0,F=V}finally{try{k||z.return==null||z.return()}finally{if(D)throw F}}return C}return this.elt.value},x.disable=function(L){if(typeof L=="string")for(var P=0;P<this.elt.length;P++)this.elt[P].value.toString()===L&&(this.elt[P].disabled=!0,this.elt[P].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(L){if(typeof L=="string")for(var P=0;P<this.elt.length;P++)this.elt[P].value.toString()===L&&(this.elt[P].disabled=!1,this.elt[P].selected=!1);else{this.elt.disabled=!1;for(var C=0;C<this.elt.length;C++)this.elt[C].disabled=!1,this.elt[C].selected=!1}return this},x},u.default.prototype.createRadio=function(){function x(L){return L instanceof HTMLInputElement&&L.type==="radio"}function b(L){return L instanceof HTMLLabelElement}var S,T,M,R=arguments.length<=0?void 0:arguments[0];return R instanceof u.default.Element&&(R.elt instanceof HTMLDivElement||R.elt instanceof HTMLSpanElement)?(S=R,this.elt=R.elt):R instanceof HTMLDivElement||R instanceof HTMLSpanElement?(S=v(R,this),T=this.elt=R,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(M=arguments.length<=1?void 0:arguments[1])):(typeof R=="string"&&(M=R),T=document.createElement("div"),S=v(T,this),this.elt=T),S._name=M||"radioOption",S._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(L){return x(L)||b(L)&&x(L.firstElementChild)}).map(function(L){return x(L)?L:L.firstElementChild})},S.option=function(L,P){var C,k,D,F=!0,G=!1,z=void 0;try{for(var Q,V=S._getOptionsArray()[Symbol.iterator]();!(F=(Q=V.next()).done);F=!0){var W=Q.value;if(W.value===L){C=W;break}}}catch(Y){G=!0,z=Y}finally{try{F||V.return==null||V.return()}finally{if(G)throw z}}return C===void 0&&((C=document.createElement("input")).setAttribute("type","radio"),C.setAttribute("value",L)),C.setAttribute("name",S._name),b(C.parentElement)?k=C.parentElement:(k=document.createElement("label")).insertAdjacentElement("afterbegin",C),k.lastElementChild instanceof HTMLSpanElement?D=k.lastElementChild:(D=document.createElement("span"),C.insertAdjacentElement("afterend",D)),D.innerHTML=P===void 0?L:P,this.elt.appendChild(k),C},S.remove=function(L){var P=!0,C=!1,k=void 0;try{for(var D,F=S._getOptionsArray()[Symbol.iterator]();!(P=(D=F.next()).done);P=!0){var G=D.value;if(G.value===L)return void(b(G.parentElement)?G.parentElement:G).remove()}}catch(z){C=!0,k=z}finally{try{P||F.return==null||F.return()}finally{if(C)throw k}}},S.value=function(){var L="",P=!0,C=!1,k=void 0;try{for(var D,F=S._getOptionsArray()[Symbol.iterator]();!(P=(D=F.next()).done);P=!0){var G=D.value;if(G.checked){L=G.value;break}}}catch(z){C=!0,k=z}finally{try{P||F.return==null||F.return()}finally{if(C)throw k}}return L},S.selected=function(L){var P=null;if(L===void 0){var C=!0,k=!1,D=void 0;try{for(var F,G=S._getOptionsArray()[Symbol.iterator]();!(C=(F=G.next()).done);C=!0){var z=F.value;if(z.checked){P=z;break}}}catch(J){k=!0,D=J}finally{try{C||G.return==null||G.return()}finally{if(k)throw D}}}else{S._getOptionsArray().forEach(function(I){I.checked=!1,I.removeAttribute("checked")});var Q=!0,k=!1,D=void 0;try{for(var V,W=S._getOptionsArray()[Symbol.iterator]();!(Q=(V=W.next()).done);Q=!0){var Y=V.value;Y.value===L&&(Y.setAttribute("checked",!0),Y.checked=!0,P=Y)}}catch(I){k=!0,D=I}finally{try{Q||W.return==null||W.return()}finally{if(k)throw D}}}return P},S.disable=function(){var L=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],P=!0,C=!1,k=void 0;try{for(var D,F=S._getOptionsArray()[Symbol.iterator]();!(P=(D=F.next()).done);P=!0)D.value.setAttribute("disabled",L)}catch(G){C=!0,k=G}finally{try{P||F.return==null||F.return()}finally{if(C)throw k}}},S},u.default.prototype.createColorPicker=function(x){u.default._validateParameters("createColorPicker",arguments);var b=document.createElement("input");return b.type="color",x?x instanceof u.default.Color?b.value=x.toString("#rrggbb"):(u.default.prototype._colorMode="rgb",u.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},b.value=u.default.prototype.color(x).toString("#rrggbb")):b.value="#000000",(b=v(b,this)).color=function(){return x&&(x.mode&&(u.default.prototype._colorMode=x.mode),x.maxes&&(u.default.prototype._colorMaxes=x.maxes)),u.default.prototype.color(this.elt.value)},b},u.default.prototype.createInput=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",S=(u.default._validateParameters("createInput",arguments),document.createElement("input"));return S.setAttribute("value",x),S.setAttribute("type",b),v(S,this)},u.default.prototype.createFileInput=function(x){var b,S=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(u.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(b=document.createElement("input")).setAttribute("type","file"),S&&b.setAttribute("multiple",!0),b.addEventListener("change",function(T){var M=!0,R=!1,L=void 0;try{for(var P,C=T.target.files[Symbol.iterator]();!(M=(P=C.next()).done);M=!0){var k=P.value;u.default.File._load(k,x)}}catch(D){R=!0,L=D}finally{try{M||C.return==null||C.return()}finally{if(R)throw L}}},!1),v(b,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},u.default.prototype.createVideo=function(x,b){return u.default._validateParameters("createVideo",arguments),g(this,"video",x,b)},u.default.prototype.createAudio=function(x,b){return u.default._validateParameters("createAudio",arguments),g(this,"audio",x,b)},u.default.prototype.VIDEO="video",u.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(x){var b=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return b?new Promise(function(S,T){b.call(navigator,x,S,T)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),u.default.prototype.createCapture=function(){for(var x=arguments.length,b=new Array(x),S=0;S<x;S++)b[S]=arguments[S];if(u.default._validateParameters("createCapture",b),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var T,M=!0,R=!0,L=!1,P=0,C=b;P<C.length;P++){var k=C[P];k===u.default.prototype.VIDEO?R=!1:k===u.default.prototype.AUDIO?M=!1:y(k)==="object"?(k.flipped!==void 0&&(L=k.flipped,delete k.flipped),D=Object.assign({},D,k)):typeof k=="function"&&(T=k)}var D=Object.assign({},{video:M,audio:R},D),F=document.createElement("video"),G=(F.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(D).then(function(z){try{"srcObject"in F?F.srcObject=z:F.src=window.URL.createObjectURL(z)}catch{F.src=z}}).catch(function(z){z.name==="NotFoundError"&&u.default._friendlyError("No webcam found on this device","createCapture"),z.name==="NotAllowedError"&&u.default._friendlyError("Access to the camera was denied","createCapture"),console.error(z)}),v(F,this,!0));return G.loadedmetadata=!1,F.addEventListener("loadedmetadata",function(){F.play(),F.width?(G.width=F.width,G.height=F.height,L&&(G.elt.style.transform="scaleX(-1)")):(G.width=G.elt.width=F.videoWidth,G.height=G.elt.height=F.videoHeight),G.loadedmetadata=!0,T&&T(F.srcObject)}),G.flipped=L,G},u.default.prototype.createElement=function(x,b){return u.default._validateParameters("createElement",arguments),x=document.createElement(x),b!==void 0&&(x.innerHTML=b),v(x,this)},u.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},u.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},u.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},u.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},u.default.Element.prototype.child=function(x){return x===void 0?this.elt.childNodes:(typeof x=="string"?(x[0]==="#"&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof u.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},u.default.Element.prototype.center=function(x){var b=this.elt.style.display,S=this.elt.style.display==="none",T=this.parent().style.display==="none",M={x:this.elt.offsetLeft,y:this.elt.offsetTop},R=(S&&this.show(),T&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),L=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return x==="both"||x===void 0?this.position(R/2+this.parent().offsetLeft,L/2+this.parent().offsetTop):x==="horizontal"?this.position(R/2+this.parent().offsetLeft,M.y):x==="vertical"&&this.position(M.x,L/2+this.parent().offsetTop),this.style("display",b),S&&this.hide(),T&&this.parent().hide(),this},u.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},u.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},u.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},u.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},u.default.Element.prototype.style=function(x,b){if((b=b instanceof u.default.Color?"rgba("+b.levels[0]+","+b.levels[1]+","+b.levels[2]+","+b.levels[3]/255+")":b)===void 0){if(x.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(x);for(var S=x.split(";"),T=0;T<S.length;T++){var M=S[T].split(":");M[0]&&M[1]&&(this.elt.style[M[0].trim()]=M[1].trim())}}else this.elt.style[x]=b,x!=="width"&&x!=="height"&&x!=="left"&&x!=="top"||(b=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(b,10)));return this},u.default.Element.prototype.attribute=function(x,b){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return b===void 0?this.elt.getAttribute(x):(this.elt.setAttribute(x,b),this);if(b===void 0)return this.elt.firstChild.getAttribute(x);for(var S=0;S<this.elt.childNodes.length;S++)this.elt.childNodes[S].setAttribute(x,b)},u.default.Element.prototype.removeAttribute=function(x){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var b=0;b<this.elt.childNodes.length;b++)this.elt.childNodes[b].removeAttribute(x);return this.elt.removeAttribute(x),this},u.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},u.default.Element.prototype.show=function(){return this.elt.style.display="block",this},u.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},u.default.Element.prototype.size=function(x,b){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var S=x,T=b,M=u.default.prototype.AUTO;if(S!==M||T!==M){if(S===M?S=b*this.width/this.height:T===M&&(T=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var R,L={},P=this.elt.getContext("2d");for(R in P)L[R]=P[R];for(R in this.elt.setAttribute("width",S*this._pInst._pixelDensity),this.elt.setAttribute("height",T*this._pInst._pixelDensity),this.elt.style.width=S+"px",this.elt.style.height=T+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),L)this.elt.getContext("2d")[R]=L[R]}else this.elt.style.width=S+"px",this.elt.style.height=T+"px",this.elt.width=S,this.elt.height=T;this.width=S,this.height=T,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",S),this._pInst._setProperty("height",T))}return this},u.default.Element.prototype.remove=function(){this instanceof u.default.MediaElement&&(this.stop(),(b=this.elt.srcObject)!==null&&b.getTracks().forEach(function(S){S.stop()}));var x,b=this._pInst._elements.indexOf(this);for(x in b!==-1&&this._pInst._elements.splice(b,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},u.default.Element.prototype.drop=function(x,b){var S;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",S=function(T){T.preventDefault()}),this.elt.addEventListener("dragleave",S)),u.default.Element._attachListener("drop",function(M){M.preventDefault(),typeof b=="function"&&b.call(this,M);var M=M.dataTransfer.files,R=!0,L=!1,P=void 0;try{for(var C,k=M[Symbol.iterator]();!(R=(C=k.next()).done);R=!0){var D=C.value;u.default.File._load(D,x)}}catch(F){L=!0,P=F}finally{try{R||k.return==null||k.return()}finally{if(L)throw P}}},this)):console.log("The File APIs are not fully supported in this browser."),this},u.default.Element.prototype.draggable=function(x){var b,S="ontouchstart"in window,T=0,M=0,R=0,L=0,P=S?"touchend":"mouseup",C=S?"touchmove":"mousemove";function k(F){var G;F=F||window.event,L=S?(G=F.changedTouches,T=R-parseInt(G[0].clientX),M=L-parseInt(G[0].clientY),R=parseInt(G[0].clientX),parseInt(G[0].clientY)):(T=R-parseInt(F.clientX),M=L-parseInt(F.clientY),R=parseInt(F.clientX),parseInt(F.clientY)),x.style.left=x.offsetLeft-T+"px",x.style.top=x.offsetTop-M+"px"}function D(){document.removeEventListener(P,D,!1),document.removeEventListener(C,k,!1)}return x===void 0?b=x=this.elt:x!==this.elt&&x.elt!==this.elt&&(x=x.elt,b=this.elt),b.addEventListener(S?"touchstart":"mousedown",function(F){{var G;F=F||window.event,L=S?(G=F.changedTouches,R=parseInt(G[0].clientX),parseInt(G[0].clientY)):(R=parseInt(F.clientX),parseInt(F.clientY))}return document.addEventListener(P,D,!1),document.addEventListener(C,k,!1),!1},!1),b.style.cursor="move",this};function _(x,b,S,T){m(this,_),this.callback=x,this.time=b,this.id=S,this.val=T}r=function(x){var b=T;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&d(b,x);var S=p(T);function T(M,R){m(this,T);var L=f(R=S.call(this,M,R));return R.elt.crossOrigin="anonymous",R._prevTime=0,R._cueIDCounter=0,R._cues=[],R.pixels=[],R._pixelsState=f(R),R._pixelDensity=1,R._modified=!1,R._frameOnCanvas=-1,Object.defineProperty(L,"src",{get:function(){var P=L.elt.children[0].src,C=L.elt.src===window.location.href?"":L.elt.src;return P===window.location.href?C:P},set:function(P){for(var C=0;C<L.elt.children.length;C++)L.elt.removeChild(L.elt.children[C]);var k=document.createElement("source");k.src=P,M.appendChild(k),L.elt.src=P,L.modified=!0}}),L._onended=function(){},L.elt.onended=function(){L._onended(L)},R}return c(T,[{key:"play",value:function(){var M;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(M=this.elt.play())&&M.catch&&M.catch(function(R){R.name==="NotAllowedError"?console.error(R):console.error("Media play method encountered an unexpected error",R)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var M=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(M)},{passive:!0,once:!0})}},{key:"autoplay",value:function(M){var R=this,L=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",M),M&&!L&&(M=function(){return R._setupAutoplayFailDetection()},this.elt.readyState===4?M():this.elt.addEventListener("canplay",M,{passive:!0,once:!0})),this}},{key:"volume",value:function(M){if(M===void 0)return this.elt.volume;this.elt.volume=M}},{key:"speed",value:function(M){if(M===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=M:this.presetPlaybackRate=M}},{key:"time",value:function(M){return M===void 0?this.elt.currentTime:(this.elt.currentTime=M,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var M=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&M&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var M=arguments.length,R=new Array(M),L=0;L<M;L++)R[L]=arguments[L];return u.default.Renderer2D.prototype.loadPixels.apply(this,R)}},{key:"updatePixels",value:function(M,R,L,P){return this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.updatePixels.call(this,M,R,L,P)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var M=arguments.length,R=new Array(M),L=0;L<M;L++)R[L]=arguments[L];return u.default.Renderer2D.prototype.get.apply(this,R)}},{key:"_getPixel",value:function(){this.loadPixels();for(var M=arguments.length,R=new Array(M),L=0;L<M;L++)R[L]=arguments[L];return u.default.Renderer2D.prototype._getPixel.apply(this,R)}},{key:"set",value:function(M,R,L){this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.set.call(this,M,R,L),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var M=arguments.length,R=new Array(M),L=0;L<M;L++)R[L]=arguments[L];u.default.prototype.copy.apply(this,R)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var M=arguments.length,R=new Array(M),L=0;L<M;L++)R[L]=arguments[L];u.default.Image.prototype.mask.apply(this,R)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(M){this._modified=M}},{key:"onended",value:function(M){return this._onended=M,this}},{key:"connect",value:function(M){var R,L;if(typeof u.default.prototype.getAudioContext=="function")R=u.default.prototype.getAudioContext(),L=u.default.soundOut.input;else try{L=(R=M.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=R.createMediaElementSource(this.elt),this.audioSourceNode.connect(L)),M?M.input?this.audioSourceNode.connect(M.input):this.audioSourceNode.connect(M):this.audioSourceNode.connect(L)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(M,C,L){var P=this._cueIDCounter++,C=new _(C,M,P,L);return this._cues.push(C),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),P}},{key:"removeCue",value:function(M){for(var R=0;R<this._cues.length;R++)this._cues[R].id===M&&(console.log(M),this._cues.splice(R,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var M=this.time(),R=0;R<this._cues.length;R++){var L=this._cues[R].time,P=this._cues[R].val;this._prevTime<L&&L<=M&&this._cues[R].callback(P)}this._prevTime=M}}]),T}(u.default.Element),u.default.MediaElement=r,r=function(){function x(b,S){m(this,x),this.file=b,this._pInst=S,S=b.type.split("/"),this.type=S[0],this.subtype=S[1],this.name=b.name,this.size=b.size,this.data=void 0}return c(x,null,[{key:"_createLoader",value:function(b,S){var T=new FileReader;return T.onload=function(M){var R,L=new u.default.File(b);L.file.type==="application/json"?L.data=JSON.parse(M.target.result):L.file.type==="text/xml"?(R=new DOMParser().parseFromString(M.target.result,"text/xml"),L.data=new u.default.XML(R.documentElement)):L.data=M.target.result,S(L)},T}},{key:"_load",value:function(b,S){var T;/^text\//.test(b.type)||b.type==="application/json"?u.default.File._createLoader(b,S).readAsText(b):/^(video|audio)\//.test(b.type)?((T=new u.default.File(b)).data=URL.createObjectURL(b),S(T)):u.default.File._createLoader(b,S).readAsDataURL(b)}}]),x}(),u.default.File=r,r=u.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(y,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(y=y("../core/main"))&&y.__esModule?y:{default:y};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var u=a.default.prototype.pRotationZ=0,l=0,c=0,d="clockwise",p="clockwise",f="clockwise",h=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),m=30,y=(a.default.prototype.setMoveThreshold=function(v){a.default._validateParameters("setMoveThreshold",arguments),h=v},a.default.prototype.setShakeThreshold=function(v){a.default._validateParameters("setShakeThreshold",arguments),m=v},a.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(v.beta)),this._setProperty("rotationY",this._fromDegrees(v.gamma)),this._setProperty("rotationZ",this._fromDegrees(v.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,g,_,x,b,S=this._isGlobal?window:this;typeof S.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&S.deviceMoved(),typeof S.deviceTurned=="function"&&(g=this._toDegrees(this.rotationX)+180,_=this._toDegrees(this.pRotationX)+180,v=u+180,0<g-_&&g-_<270||g-_<-270?d="clockwise":(g-_<0||270<g-_)&&(d="counter-clockwise"),d!==this.pRotateDirectionX&&(v=g),90<Math.abs(g-v)&&Math.abs(g-v)<270&&(v=g,this._setProperty("turnAxis","X"),S.deviceTurned()),this.pRotateDirectionX=d,u=v-180,_=this._toDegrees(this.rotationY)+180,g=this._toDegrees(this.pRotationY)+180,v=l+180,0<_-g&&_-g<270||_-g<-270?p="clockwise":(_-g<0||270<_-this.pRotationY)&&(p="counter-clockwise"),p!==this.pRotateDirectionY&&(v=_),90<Math.abs(_-v)&&Math.abs(_-v)<270&&(v=_,this._setProperty("turnAxis","Y"),S.deviceTurned()),this.pRotateDirectionY=p,l=v-180,0<(g=this._toDegrees(this.rotationZ))-(_=this._toDegrees(this.pRotationZ))&&g-_<270||g-_<-270?f="clockwise":(g-_<0||270<g-_)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(c=g),90<Math.abs(g-c)&&Math.abs(g-c)<270&&(c=g,this._setProperty("turnAxis","Z"),S.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)),typeof S.deviceShaken=="function"&&(this.pAccelerationX!==null&&(x=Math.abs(this.accelerationX-this.pAccelerationX),b=Math.abs(this.accelerationY-this.pAccelerationY)),m<x+b&&S.deviceShaken())},a.default);o.default=y},{"../core/main":280}],298:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(u){var l;this._downKeys[u.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",u.which),this._downKeys[u.which]=!0,this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||u.charCode||l.keyPressed(u)===!1&&u.preventDefault())},a.default.prototype._onkeyup=function(u){this._downKeys[u.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),this._setProperty("keyCode",u.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(u)===!1&&u.preventDefault()},a.default.prototype._onkeypress=function(u){var l;u.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",u.which),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(u)===!1&&u.preventDefault())},a.default.prototype._onblur=function(u){this._downKeys={}},a.default.prototype.keyIsDown=function(u){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[u]||!1},a.default.prototype._areDownKeys=function(){for(var u in this._downKeys)if(this._downKeys.hasOwnProperty(u)&&this._downKeys[u]===!0)return!0;return!1},r=a.default,o.default=r},{"../core/main":280}],299:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function u(p){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},c=function(p){if(p&&p.__esModule)return p;if(p===null||u(p)!=="object"&&typeof p!="function")return{default:p};var f=d();if(f&&f.has(p))return f.get(p);var h,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var v;Object.prototype.hasOwnProperty.call(p,h)&&((v=y?Object.getOwnPropertyDescriptor(p,h):null)&&(v.get||v.set)?Object.defineProperty(m,h,v):m[h]=p[h])}return m.default=p,f&&f.set(p,m),m}(r("../core/constants"));function d(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,d=function(){return p},p)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(p){var f,h,m,y,v;this._curElement!==null&&(!p.touches||0<p.touches.length)&&(f=this._curElement.elt,h=this.width,m=this.height,(y=p)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),v=f.getBoundingClientRect(),h=f.scrollWidth/h||1,f=f.scrollHeight/m||1,m={x:(y.clientX-v.left)/h,y:(y.clientY-v.top)/f,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",p.movementX),this._setProperty("movedY",p.movementY),this._setProperty("mouseX",m.x),this._setProperty("mouseY",m.y),this._setProperty("winMouseX",m.winX),this._setProperty("winMouseY",m.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(p){p.button===1?this._setProperty("mouseButton",c.CENTER):p.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},l.default.prototype._onmousemove=function(p){var f=this._isGlobal?window:this;this._updateNextMouseCoords(p),this.mouseIsPressed?typeof f.mouseDragged=="function"?f.mouseDragged(p)===!1&&p.preventDefault():typeof f.touchMoved=="function"&&f.touchMoved(p)===!1&&p.preventDefault():typeof f.mouseMoved=="function"&&f.mouseMoved(p)===!1&&p.preventDefault()},l.default.prototype._onmousedown=function(p){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(p),this._updateNextMouseCoords(p),this.touchstart||(typeof f.mousePressed=="function"?f.mousePressed(p)===!1&&p.preventDefault():typeof f.touchStarted=="function"&&f.touchStarted(p)===!1&&p.preventDefault(),this.touchstart=!1)},l.default.prototype._onmouseup=function(p){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof f.mouseReleased=="function"?f.mouseReleased(p)===!1&&p.preventDefault():typeof f.touchEnded=="function"&&f.touchEnded(p)===!1&&p.preventDefault(),this.touchend=!1)},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(p){var f=this._isGlobal?window:this;typeof f.mouseClicked=="function"&&f.mouseClicked(p)===!1&&p.preventDefault()},l.default.prototype._ondblclick=function(p){var f=this._isGlobal?window:this;typeof f.doubleClicked=="function"&&f.doubleClicked(p)===!1&&p.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(p){var f=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",p.deltaY),typeof f.mouseWheel=="function"&&(p.delta=p.deltaY,f.mouseWheel(p)===!1&&p.preventDefault())},l.default.prototype.requestPointerLock=function(){var p=this._curElement.elt;return p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock,p.requestPointerLock?(p.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var u=[],l=0;l<a.touches.length;l++)u[l]=function(v,y,g,f){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,m=v.getBoundingClientRect(),y=v.scrollWidth/y||1,v=v.scrollHeight/g||1,g=f.touches[h]||f.changedTouches[h];return{x:(g.clientX-m.left)/y,y:(g.clientY-m.top)/v,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,a,l);this._setProperty("touches",u)}},r.default.prototype._ontouchstart=function(a){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof u.touchStarted=="function"&&(u.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},r.default.prototype._ontouchmove=function(a){var u=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof u.touchMoved=="function"?u.touchMoved(a)===!1&&a.preventDefault():typeof u.mouseDragged=="function"&&u.mouseDragged(a)===!1&&a.preventDefault()},r.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var u=this._isGlobal?window:this;typeof u.touchEnded=="function"&&(u.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},r=r.default,o.default=r},{"../core/main":280}],301:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,u,l,c,d={_toPixels:function(p){var f,h;return p instanceof ImageData?p.data:p.getContext("2d")?p.getContext("2d").getImageData(0,0,p.width,p.height).data:p.getContext("webgl")?(h=(f=p.getContext("webgl")).drawingBufferWidth*f.drawingBufferHeight*4,h=new Uint8Array(h),f.readPixels(0,0,p.width,p.height,f.RGBA,f.UNSIGNED_BYTE,h),h):void 0},_getARGB:function(p,f){return f*=4,p[3+f]<<24&4278190080|p[f]<<16&16711680|p[1+f]<<8&65280|255&p[2+f]},_setPixels:function(p,f){for(var h,m=0,y=p.length;m<y;m++)p[0+(h=4*m)]=(16711680&f[m])>>>16,p[1+h]=(65280&f[m])>>>8,p[2+h]=255&f[m],p[3+h]=(4278190080&f[m])>>>24},_toImageData:function(p){return p instanceof ImageData?p:p.getContext("2d").getImageData(0,0,p.width,p.height)},_createImageData:function(p,f){return d._tmpCanvas=document.createElement("canvas"),d._tmpCtx=d._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(p,f)},apply:function(p,v,h){var m=p.getContext("2d"),y=m.getImageData(0,0,p.width,p.height),v=v(y,h);v instanceof ImageData?m.putImageData(v,0,0,0,0,p.width,p.height):m.putImageData(y,0,0,0,0,p.width,p.height)},threshold:function(p){for(var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,h=d._toPixels(p),m=Math.floor(255*f),y=0;y<h.length;y+=4){var v=void 0,v=m<=.2126*h[y]+.7152*h[y+1]+.0722*h[y+2]?255:0;h[y]=h[y+1]=h[y+2]=v}},gray:function(p){for(var f=d._toPixels(p),h=0;h<f.length;h+=4){var m=f[h],y=f[h+1],v=f[h+2];f[h]=f[h+1]=f[h+2]=.2126*m+.7152*y+.0722*v}},opaque:function(p){for(var f=d._toPixels(p),h=0;h<f.length;h+=4)f[h+3]=255;return f},invert:function(p){for(var f=d._toPixels(p),h=0;h<f.length;h+=4)f[h]=255-f[h],f[h+1]=255-f[h+1],f[h+2]=255-f[h+2]},posterize:function(p){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,h=d._toPixels(p);if(f<2||255<f)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=f-1,y=0;y<h.length;y+=4){var v=h[y],g=h[y+1],_=h[y+2];h[y]=255*(v*f>>8)/m,h[y+1]=255*(g*f>>8)/m,h[y+2]=255*(_*f>>8)/m}},dilate:function(p){for(var f,h,m,y,v,g,_,x,b,S=d._toPixels(p),T=0,M=S.length?S.length/4:0,R=new Int32Array(M);T<M;)for(h=(f=T)+p.width;T<h;)y=m=d._getARGB(S,T),(b=T-1)<f&&(b=T),h<=(x=T+1)&&(x=T),(v=T-p.width)<0&&(v=0),M<=(g=T+p.width)&&(g=T),v=d._getARGB(S,v),b=d._getARGB(S,b),g=d._getARGB(S,g),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(_=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(m=b,y=_),y<(_=77*((b=d._getARGB(S,x))>>16&255)+151*(b>>8&255)+28*(255&b))&&(m=b,y=_),y<(x=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(m=v,y=x),y<(b=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=g,y=b),R[T++]=m;d._setPixels(S,R)},erode:function(p){for(var f,h,m,y,v,g,_,x,b,S=d._toPixels(p),T=0,M=S.length?S.length/4:0,R=new Int32Array(M);T<M;)for(h=(f=T)+p.width;T<h;)y=m=d._getARGB(S,T),(b=T-1)<f&&(b=T),h<=(x=T+1)&&(x=T),(v=T-p.width)<0&&(v=0),M<=(g=T+p.width)&&(g=T),v=d._getARGB(S,v),b=d._getARGB(S,b),g=d._getARGB(S,g),(_=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=b,y=_),(_=77*((b=d._getARGB(S,x))>>16&255)+151*(b>>8&255)+28*(255&b))<y&&(m=b,y=_),(x=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<y&&(m=v,y=x),(b=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<y&&(m=g,y=b),R[T++]=m;d._setPixels(S,R)},blur:function(p,f){for(var h,m,y,v,g,_,x,b,S,T,M=d._toPixels(p),R=p.width,L=p.height,P=R*L,C=new Int32Array(P),k=0;k<P;k++)C[k]=d._getARGB(M,k);var D,F,G,z,Q,V,W,Y,J=new Int32Array(P),ie=new Int32Array(P),I=new Int32Array(P),O=new Int32Array(P),H=0,q=3.5*f|0;if(a!==(q=q<1?1:q<248?q:248)){u=1+(a=q)<<1,l=new Int32Array(u),c=new Array(u);for(var Z=0;Z<u;Z++)c[Z]=new Int32Array(256);for(var oe=1,pe=q-1;oe<q;oe++){l[q+oe]=l[pe]=V=pe*pe,W=c[q+oe],Y=c[pe--];for(var be=0;be<256;be++)W[be]=Y[be]=V*be}Q=l[q]=q*q,W=c[q];for(var me=0;me<256;me++)W[me]=Q*me}for(F=0;F<L;F++){for(D=0;D<R;D++){if(v=y=m=g=h=0,(_=D-a)<0)T=-_,_=0;else{if(R<=_)break;T=0}for(G=T;G<u&&!(R<=_);G++){var ce=C[_+H];z=c[G],g+=z[(-16777216&ce)>>>24],m+=z[(16711680&ce)>>16],y+=z[(65280&ce)>>8],v+=z[255&ce],h+=l[G],_++}J[x=H+D]=g/h,ie[x]=m/h,I[x]=y/h,O[x]=v/h}H+=R}for(S=(b=-a)*R,F=H=0;F<L;F++){for(D=0;D<R;D++){if(v=y=m=g=h=0,b<0)T=x=-b,_=D;else{if(L<=b)break;T=0,x=b,_=D+S}for(G=T;G<u&&!(L<=x);G++)z=c[G],g+=z[J[_]],m+=z[ie[_]],y+=z[I[_]],v+=z[O[_]],h+=l[G],x++,_+=R;C[D+H]=g/h<<24|m/h<<16|y/h<<8|v/h}H+=R,S+=R,b++}d._setPixels(M,C)}};o.default=d},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),u=l(r("omggif"));function l(d){return d&&d.__esModule?d:{default:d}}function c(d){return function(p){if(Array.isArray(p)){for(var f=0,h=new Array(p.length);f<p.length;f++)h[f]=p[f];return h}}(d)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(d,p){return a.default._validateParameters("createImage",arguments),new a.default.Image(d,p)},a.default.prototype.saveCanvas=function(){for(var d,p,f,h,m,y,v=arguments.length,g=new Array(v),_=0;_<v;_++)g[_]=arguments[_];switch(a.default._validateParameters("saveCanvas",g),g[0]instanceof HTMLCanvasElement?(d=g[0],g.shift()):g[0]instanceof a.default.Element?(d=g[0].elt,g.shift()):g[0]instanceof a.default.Framebuffer?(h=g[0],(m=this.createGraphics(h.width,h.height)).pixelDensity(pixelDensity()),h.loadPixels(),m.loadPixels(),m.pixels.set(h.pixels),m.updatePixels(),d=m.elt,g.shift()):d=this._curElement&&this._curElement.elt,1<=g.length&&(p=g[0]),f=(f=2<=g.length?g[1]:f)||a.default.prototype._checkFileExtension(p,f)[1]||"png"){default:y="image/png";break;case"jpeg":case"jpg":y="image/jpeg"}d.toBlob(function(x){a.default.prototype.downloadFile(x,p,f),m&&m.remove()},y)},a.default.prototype.encodeAndDownloadGif=function(d,p){for(var f=d.gifProperties,h=f.loopLimit,m=(h===1?h=null:h===null&&(h=0),new Uint8Array(d.width*d.height*f.numFrames)),y=[],v={},g=0;g<f.numFrames;g++){for(var _=new Set,x=f.frames[g].image.data,b=x.length,S=new Uint32Array(d.width*d.height),T=0,M=0;T<b;T+=4,M++){var R=x[T+0]<<16|x[T+1]<<8|x[T+2]<<0;_.add(R),S[M]=R}var L=c(_).sort().toString();v[L]===void 0?v[L]={freq:1,frames:[g]}:(v[L].freq+=1,v[L].frames.push(g)),y.push(S)}for(var k=[],P=Object.keys(v).sort(function(I,O){return v[O].freq-v[I].freq}),C=P[0].split(",").map(function(I){return parseInt(I)}),k=k.concat(v[C].frames),D=new Set(C),F=1;F<P.length;F++){var G=P[F].split(",").map(function(I){return parseInt(I)}).filter(function(I){return!D.has(I)});if(C.length+G.length<=256){for(var z=0;z<G.length;z++)C.push(G[z]),D.add(G[z]);k=k.concat(v[P[F]].frames)}}k=new Set(k);for(var Q={},V=0;V<C.length;V++)Q[C[V]]||(Q[C[V]]=V);for(var W=1;W<C.length;)W<<=1;C.length=W;for(var h={loop:h,palette:new Uint32Array(C)},Y=new u.default.GifWriter(m,d.width,d.height,h),J={},ie=0;ie<f.numFrames;ie++)(function(O){var H=!k.has(O),q=H?[]:C,Z=new Uint8Array(d.width*d.height),oe={},pe=new Set,be=(y[O].forEach(function(ge,xe){H?(oe[ge]===void 0&&(oe[ge]=q.length,q.push(ge)),Z[xe]=oe[ge]):Z[xe]=Q[ge],0<O&&y[O-1][xe]!==ge&&pe.add(ge)}),{}),me=q.filter(function(ge){return!pe.has(ge)});if(0<me.length){var me=me[0],ce=(H?oe:Q)[me];if(0<O){for(var te=0;te<y[O].length;te++)y[O-1][te]===y[O][te]&&(Z[te]=ce);be.transparent=ce,J.frameOpts.disposal=1}}if(be.delay=f.frames[O].delay/10,H){for(var ue=1;ue<q.length;)ue<<=1;q.length=ue,be.palette=new Uint32Array(q)}0<O&&Y.addFrame(0,0,d.width,d.height,J.pixelPaletteIndex,J.frameOpts),J={pixelPaletteIndex:Z,frameOpts:be}})(ie);J.frameOpts.disposal=1,Y.addFrame(0,0,d.width,d.height,J.pixelPaletteIndex,J.frameOpts),h=new Blob([m.slice(0,Y.end())],{type:"image/gif"}),a.default.prototype.downloadFile(h,p,"gif")},a.default.prototype.saveFrames=function(d,p,f,y,m){a.default._validateParameters("saveFrames",arguments),f=a.default.prototype.constrain(f=f||3,0,15),f*=1e3;var y=a.default.prototype.constrain(y||15,0,22),v=0,g=a.default.prototype._makeFrame,_=this._curElement.elt,x=[],b=setInterval(function(){x.push(g(d+v,p,_)),v++},1e3/y);setTimeout(function(){if(clearInterval(b),m)m(x);else for(var S=0,T=x;S<T.length;S++){var M=T[S];a.default.prototype.downloadFile(M.imageData,M.filename,M.ext)}x=[]},.01+f)},a.default.prototype._makeFrame=function(d,p,m){var h,m=this?this._curElement.elt:m;if(p)switch(p.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else p="png",h="image/png";var m=(m=m.toDataURL(h)).replace(h,"image/octet-stream"),y={};return y.imageData=m,y.filename=d,y.ext=p,y},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function u(_){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var l=m(r("../core/main")),c=m(r("../core/helpers")),d=function(_){if(_&&_.__esModule)return _;if(_===null||u(_)!=="object"&&typeof _!="function")return{default:_};var x=h();if(x&&x.has(_))return x.get(_);var b,S={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in _){var M;Object.prototype.hasOwnProperty.call(_,b)&&((M=T?Object.getOwnPropertyDescriptor(_,b):null)&&(M.get||M.set)?Object.defineProperty(S,b,M):S[b]=_[b])}return S.default=_,x&&x.set(_,S),S}(r("../core/constants")),p=m(r("omggif")),f=r("gifenc");function h(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,h=function(){return _},_)}function m(_){return _&&_.__esModule?_:{default:_}}function y(_,x,b,S,T,M,R){try{var L=_[M](R),P=L.value}catch(C){return void b(C)}L.done?x(P):Promise.resolve(P).then(S,T)}function v(_,x,b,S,T,M,R,L,P,C,k){var D,F,G,z,Q,V,W,Y,J;return _===d.COVER&&(D=x,G=b,W=M,Y=R,V=L,J=P,F=C,z=k,Q=Math.max(W/F,Y/z),W/=Q,Y/=Q,Q=V,V=J,D===d.CENTER?Q+=(F-W)/2:D===d.RIGHT&&(Q+=F-W),G===d.CENTER?V+=(z-Y)/2:G===d.BOTTOM&&(V+=z-Y),L=(J={x:Q,y:V,w:W,h:Y}).x,P=J.y,C=J.w,k=J.h),_===d.CONTAIN&&(D=x,F=b,G=S,z=T,Q=M,V=R,W=C,Y=k,J=Math.max(W/Q,Y/V),W/=J,Y/=J,J=G,G=z,D===d.CENTER?J+=(Q-W)/2:D===d.RIGHT&&(J+=Q-W),F===d.CENTER?G+=(V-Y)/2:F===d.BOTTOM&&(G+=V-Y),S=(_={x:J,y:G,w:W,h:Y}).x,T=_.y,M=_.w,R=_.h),{sx:L,sy:P,sw:C,sh:k,dx:S,dy:T,dw:M,dh:R}}function g(_,x){return 0<_&&_<x?_:x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(_,x,b){l.default._validateParameters("loadImage",arguments);var S=new l.default.Image(1,1,this),T=this,M=new Request(_,{method:"GET",mode:"cors"});return fetch(_,M).then(function(R){var L,P=R.headers.get("content-type");P===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),P&&P.includes("image/gif")?R.arrayBuffer().then(function(C){if(C){for(var C=new Uint8Array(C),k=S,D=x,F=b,G=(function(H){T._decrementPreload()}).bind(T),z=new p.default.GifReader(C),Q=(k.width=k.canvas.width=z.width,k.height=k.canvas.height=z.height,[]),V=z.numFrames(),W=new Uint8ClampedArray(k.width*k.height*4),Y=0;Y<V;Y++){var J=z.frameInfo(Y),ie=k.drawingContext.getImageData(0,0,k.width,k.height),I=(W=ie.data.slice(),function(H,q){try{q.decodeAndBlitFrameRGBA(H,W)}catch(Z){l.default._friendlyFileLoadError(8,k.src),typeof F=="function"?F(Z):console.error(Z)}}(Y,z),new ImageData(W,k.width,k.height)),I=(k.drawingContext.putImageData(I,0,0),J.delay);I===0&&(I=10),Q.push({image:k.drawingContext.getImageData(0,0,k.width,k.height),delay:10*I}),J.disposal===2?k.drawingContext.clearRect(J.x,J.y,J.width,J.height):J.disposal===3&&k.drawingContext.putImageData(ie,0,0,J.x,J.y,J.width,J.height)}(C=z.loopCount())===null?C=1:C===0&&(C=null),k.drawingContext.putImageData(Q[0].image,0,0),1<Q.length&&(k.gifProperties={displayIndex:0,loopLimit:C,loopCount:0,frames:Q,numFrames:V,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(k),G()}},function(C){typeof b=="function"?(b(C),T._decrementPreload()):console.error(C)}):((L=new Image).onload=function(){S.width=S.canvas.width=L.width,S.height=S.canvas.height=L.height,S.drawingContext.drawImage(L,0,0),S.modified=!0,typeof x=="function"&&x(S),T._decrementPreload()},L.onerror=function(C){l.default._friendlyFileLoadError(0,L.src),typeof b=="function"?(b(C),T._decrementPreload()):console.error(C)},_.indexOf("data:image/")!==0&&(L.crossOrigin="Anonymous"),L.src=_),S.modified=!0}).catch(function(R){l.default._friendlyFileLoadError(0,_),typeof b=="function"?(b(R),T._decrementPreload()):console.error(R)}),S},l.default.prototype.saveGif=function(){_=regeneratorRuntime.mark(function b(S,T){var M,R,L,P,C,k,D,F,G,z,Q,V,W,Y,J,ie,I,O,H,q,Z,oe,pe,be,me,ce,te=arguments;return regeneratorRuntime.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(M=2<te.length&&te[2]!==void 0?te[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof S!="string")throw TypeError("fileName parameter must be a string");ue.next=3;break;case 3:if(typeof T!="number")throw TypeError("Duration parameter must be a number");ue.next=5;break;case 5:if(R=M&&M.delay||0,L=M&&M.units||"seconds",P=M&&M.silent||!1,C=M&&M.notificationDuration||0,k=M&&M.notificationID||"progressBar",typeof R!="number")throw TypeError("Delay parameter must be a number");ue.next=12;break;case 12:if(L!=="seconds"&&L!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ue.next=14;break;case 14:if(typeof P!="boolean")throw TypeError("Silent parameter must be a boolean");ue.next=16;break;case 16:if(typeof C!="number")throw TypeError("Notification duration parameter must be a number");ue.next=18;break;case 18:if(typeof k!="string")throw TypeError("Notification ID parameter must be a string");ue.next=20;break;case 20:return this._recording=!0,z=this._targetFrameRate,D=(D=1/(z=z!==1/0&&z!==void 0&&z!==0?z:60)*1e3)<20?20:D,G=(F=L==="seconds"?T*z:T)+(z=L==="seconds"?R*z:R),z=z,this.frameCount=z,Q=this._pixelDensity,this.pixelDensity(1),V=[],document.getElementById(k)!==null&&document.getElementById(k).remove(),P||((W=this.createP("")).id(k),W.style("font-size","16px"),W.style("font-family","Montserrat"),W.style("background-color","#ffffffa0"),W.style("padding","8px"),W.style("border-radius","10px"),W.position(0,0)),this._renderer instanceof l.default.RendererGL&&(J=this.drawingContext,Y=new Uint8Array(J.drawingBufferWidth*J.drawingBufferHeight*4)),this.noLoop(),ue.next=39,Promise.resolve();case 39:if(z<G)return this.redraw(),be=void 0,be=this._renderer instanceof l.default.RendererGL?(Y=new Uint8Array(J.drawingBufferWidth*J.drawingBufferHeight*4),J.readPixels(0,0,J.drawingBufferWidth,J.drawingBufferHeight,J.RGBA,J.UNSIGNED_BYTE,Y),function(ge,xe,Le){for(var we=parseInt(Le/2),Ee=4*xe,ae=new Uint8Array(4*xe),ne=0;ne<we;++ne){var Ae=ne*Ee,Be=(Le-ne-1)*Ee;ae.set(ge.subarray(Ae,Ae+Ee)),ge.copyWithin(Ae,Be,Be+Ee),ge.set(ae,Be)}return ge}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,V.push(be),z++,P||W.html("Saved frame <b>"+V.length.toString()+"</b> out of "+F.toString()),ue.next=48,new Promise(function(ge){return setTimeout(ge,0)});ue.next=50;break;case 48:ue.next=39;break;case 50:P||W.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Q),ie=(0,f.GIFEncoder)(),I=function(ge){for(var xe=new Uint8Array(ge.length*ge[0].length),Le=0;Le<ge.length;Le++)xe.set(ge[Le],Le*ge[0].length);var we=(0,f.quantize)(xe,256,{format:"rgba4444",oneBitAlpha:!0});return we.length===256?we[we.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:we.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),we}(V),O={},H=function(ge){for(var xe=ge.length/4,Le=new Uint8Array(xe),we=0;we<xe;we++){var Ee=ge[4*we]<<24|ge[4*we+1]<<16|ge[4*we+2]<<8|ge[4*we+3];O[Ee]===void 0&&(O[Ee]=(0,f.nearestColorIndex)(I,ge.slice(4*we,4*(we+1)))),Le[we]=O[Ee]}return Le},q=I.length-1,Z=[],oe=0;case 60:if(!(oe<V.length)){ue.next=71;break}if(pe=H(V[oe]),be=pe.slice(),oe===0)ie.writeFrame(pe,this.width,this.height,{palette:I,delay:D,dispose:1});else{for(me=0;me<pe.length;me++)pe[me]===Z[me]&&(pe[me]=q);ie.writeFrame(pe,this.width,this.height,{delay:D,transparent:!0,transparentIndex:q,dispose:1})}return Z=be,P||W.html("Rendered frame <b>"+oe.toString()+"</b> out of "+F.toString()),ue.next=68,new Promise(function(ge){return setTimeout(ge,0)});case 68:oe++,ue.next=60;break;case 71:ie.finish(),ce=ie.bytesView(),ce=new Blob([ce],{type:"image/gif"}),V=[],this._recording=!1,this.loop(),P||(W.html("Done. Downloading your gif!"),0<C&&setTimeout(function(){return W.remove()},1e3*C)),l.default.prototype.downloadFile(ce,S,"gif");case 80:case"end":return ue.stop()}},b,this)});var _,x=function(){var b=this,S=arguments;return new Promise(function(T,M){var R=_.apply(b,S);function L(C){y(R,T,M,L,P,"next",C)}function P(C){y(R,T,M,L,P,"throw",C)}L(void 0)})};return function(b,S){return x.apply(this,arguments)}}(),l.default.prototype.image=function(_,x,b,S,z,Q,V,W,J,C,k,D){l.default._validateParameters("image",arguments);var Y=_.width,F=_.height,G=(D=D||d.CENTER,k=k||d.CENTER,_.elt&&(Y=Y!==void 0?Y:_.elt.width,F=F!==void 0?F:_.elt.height),_.elt&&_.elt.videoWidth&&!_.canvas&&(Y=Y!==void 0?Y:_.elt.videoWidth,F=F!==void 0?F:_.elt.videoHeight),S||Y),z=z||F,Q=Q||0,V=V||0,W=g(W!==void 0?W:Y,Y),Y=g(J!==void 0?J:F,F),J=1;_.elt&&!_.canvas&&_.elt.style.width&&(J=_.elt.videoWidth&&!S?_.elt.videoWidth:_.elt.width,J/=parseInt(_.elt.style.width,10)),Q*=J,V*=J,Y*=J,W*=J,F=v(C,k,D,(F=c.default.modeAdjust(x,b,G,z,this._renderer._imageMode)).x,F.y,F.w,F.h,Q,V,W,Y),this._renderer.image(_,F.sx,F.sy,F.sw,F.sh,F.dx,F.dy,F.dw,F.dh)},l.default.prototype.tint=function(){for(var _=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];l.default._validateParameters("tint",x);var S=this.color.apply(this,x);this._renderer._tint=S.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(_){l.default._validateParameters("imageMode",arguments),_!==d.CORNER&&_!==d.CORNERS&&_!==d.CENTER||(this._renderer._imageMode=_)},r=l.default,o.default=r},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),u=l(r("./filters"));function l(d){return d&&d.__esModule?d:{default:d}}function c(d,p){for(var f=0;f<p.length;f++){var h=p[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}a.default.Image=function(){function d(h,m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=m,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var p,f;return p=d,(f=[{key:"pixelDensity",value:function(h){return h!==void 0?(h<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(v){var m,y=this.gifProperties,v=v._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=v),y.playing&&(y.timeDisplayed=v-y.lastChangeTime,m=y.frames[y.displayIndex].delay,y.timeDisplayed>=m&&(m=Math.floor(y.timeDisplayed/m),y.timeDisplayed=0,y.lastChangeTime=v,y.displayIndex+=m,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(v=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[v].image,0,0),y.displayIndex=v,this.setModified(!0))))}},{key:"_setProperty",value:function(h,m){this[h]=m,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,m,y,v){a.default.Renderer2D.prototype.updatePixels.call(this,h,m,y,v),this.setModified(!0)}},{key:"get",value:function(h,m,y,v){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,m)}},{key:"set",value:function(h,m,y){a.default.Renderer2D.prototype.set.call(this,h,m,y),this.setModified(!0)}},{key:"resize",value:function(h,m){h===0&&m===0?(h=this.canvas.width,m=this.canvas.height):h===0?h=this.canvas.width*m/this.canvas.height:m===0&&(m=this.canvas.height*h/this.canvas.width),h=Math.floor(h),m=Math.floor(m);var y=document.createElement("canvas");if(y.width=h,y.height=m,this.gifProperties)for(var v=this.gifProperties,g=0;g<v.numFrames;g++){for(var _=this.drawingContext.createImageData(h,m),x=(R=R=M=T=S=void 0,v.frames[g].image),b=_,S=0,T=0;T<b.height;T++)for(var M=0;M<b.width;M++){var R=Math.floor(M*x.width/b.width),R=4*(Math.floor(T*x.height/b.height)*x.width+R);b.data[S++]=x.data[R++],b.data[S++]=x.data[R++],b.data[S++]=x.data[R++],b.data[S++]=x.data[+R]}v.frames[g].image=_}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=h,this.canvas.height=this.height=m,this.drawingContext.drawImage(y,0,0,h,m,0,0,h,m),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];a.default.prototype.copy.apply(this,m)}},{key:"mask",value:function(h){var m=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,v=1,g=[h=h===void 0?this:h,0,0,(v=h instanceof a.default.Renderer?h._pInst._pixelDensity:v)*h.width,v*h.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var _=0;_<this.gifProperties.frames.length;_++)this.drawingContext.putImageData(this.gifProperties.frames[_].image,0,0),this.copy.apply(this,g),this.gifProperties.frames[_].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,g);this.drawingContext.globalCompositeOperation=m,this.setModified(!0)}},{key:"filter",value:function(h,m){u.default.apply(this.canvas,u.default[h],m),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,m),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,m){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,h):a.default.prototype.saveCanvas(this.canvas,h,m)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var m;this.gifProperties&&(h<(m=this.gifProperties).numFrames&&0<=h?(m.timeDisplayed=0,m.lastChangeTime=0,m.displayIndex=h,this.drawingContext.putImageData(m.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,m){if(this.gifProperties){var y=this.gifProperties;if(m<y.numFrames&&0<=m)y.frames[m].delay=h;else{var v=!0,m=!1,g=void 0;try{for(var _,x=y.frames[Symbol.iterator]();!(v=(_=x.next()).done);v=!0)_.value.delay=h}catch(S){m=!0,g=S}finally{try{v||x.return==null||x.return()}finally{if(m)throw g}}}}}}])&&c(p.prototype,f),d}(),r=a.default.Image,o.default=r},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),u=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}r("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var c,d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];a.default._validateParameters("blend",p),this._renderer?(c=this._renderer).blend.apply(c,p):a.default.Renderer2D.prototype.blend.apply(this,p)},a.default.prototype.copy=function(){for(var c,d,p,f,h,m,y,v,g,_=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];if(a.default._validateParameters("copy",x),x.length===9)c=x[0],d=x[1],p=x[2],f=x[3],h=x[4],m=x[5],y=x[6],v=x[7],g=x[8];else{if(x.length!==8)throw new Error("Signature not supported");c=this,d=x[0],p=x[1],f=x[2],h=x[3],m=x[4],y=x[5],v=x[6],g=x[7]}a.default.prototype._copyHelper(this,c,d,p,f,h,m,y,v,g)},a.default.prototype._copyHelper=function(c,d,p,f,h,m,y,v,g,_){var x=d.canvas.width/d.width,b=0,S=0;d._renderer&&d._renderer.isP3D&&(b=d.width/2,S=d.height/2),c._renderer&&c._renderer.isP3D?(c.push(),c.resetMatrix(),c.noLights(),c.blendMode(c.BLEND),c.imageMode(c.CORNER),a.default.RendererGL.prototype.image.call(c._renderer,d,p+b,f+S,h,m,y,v,g,_),c.pop()):c.drawingContext.drawImage(d.canvas,x*(p+b),x*(f+S),x*h,x*m,y,v,g,_)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];a.default._validateParameters("filter",d);var y=(function(){var v,g={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?g.shader=arguments.length<=0?void 0:arguments[0]:(g.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(g.value=arguments.length<=1?void 0:arguments[1]),((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])===!1&&(g.useWebGL=!1)),g}).apply(void 0,d),f=y.shader,h=y.operation,m=y.value,y=y.useWebGL;this._renderer.isP3D&&f?a.default.RendererGL.prototype.filter.call(this._renderer,f):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,h,m):((f=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),f.filter.apply(f,d),this.copy(f._renderer,0,0,this.width,this.height,0,0,this.width,this.height),f.clear())):this.canvas!==void 0?u.default.apply(this.canvas,u.default[h],m):u.default.apply(this.elt,u.default[h],m)},a.default.prototype.get=function(c,d,p,f){var h;return a.default._validateParameters("get",arguments),(h=this._renderer).get.apply(h,arguments)},a.default.prototype.loadPixels=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];a.default._validateParameters("loadPixels",d),this._renderer.loadPixels()},a.default.prototype.set=function(c,d,p){this._renderer.set(c,d,p)},a.default.prototype.updatePixels=function(c,d,p,f){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,d,p,f)},r=a.default,o.default=r},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=d(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),d(r("fetch-jsonp"))),c=d(r("file-saver"));function d(m){return m&&m.__esModule?m:{default:m}}function p(m){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}function f(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(m,y){y&&y!==!0&&y!=="true"||(y="");var v="";return(m=m||"untitled")&&m.includes(".")&&(v=m.split(".").pop()),y&&v!==y&&(v=y,m="".concat(m,".").concat(v)),[m,v]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),u.default.prototype.loadJSON=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];u.default._validateParameters("loadJSON",y);for(var g,_,x,b=y[0],S={},T="json",M=1;M<y.length;M++){var R=y[M];typeof R=="string"?R!=="jsonp"&&R!=="json"||(T=R):typeof R=="function"?g?_=R:g=R:p(R)==="object"&&(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))&&(T="jsonp",x=R)}var L=this;return this.httpDo(b,"GET",x,T,function(P){for(var C in P)S[C]=P[C];g!==void 0&&g(P),L._decrementPreload()},function(P){if(u.default._friendlyFileLoadError(5,b),!_)throw P;_(P)}),S},u.default.prototype.loadStrings=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];u.default._validateParameters("loadStrings",y);for(var g,_,x=[],b=1;b<y.length;b++){var S=y[b];typeof S=="function"&&(g===void 0?g=S:_===void 0&&(_=S))}var T=this;return u.default.prototype.httpDo.call(this,y[0],"GET","text",function(M){for(var R=M.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),L=0,P=R.length;L<P;L+=32768)Array.prototype.push.apply(x,R.slice(L,Math.min(L+32768,P)));g!==void 0&&g(x),T._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(3,M),!_)throw M;_(M)}),x},u.default.prototype.loadTable=function(m){var y,v,g,_=!1,x=m.substring(m.lastIndexOf(".")+1,m.length);x==="csv"?g=",":x==="ssv"?g=";":x==="tsv"&&(g="	");for(var b=1;b<arguments.length;b++)typeof arguments[b]=="function"?y===void 0?y=arguments[b]:v===void 0&&(v=arguments[b]):typeof arguments[b]=="string"&&(arguments[b]==="header"&&(_=!0),arguments[b]==="csv"?g=",":arguments[b]==="ssv"?g=";":arguments[b]==="tsv"&&(g="	"));var S=new u.default.Table,T=this;return this.httpDo(m,"GET","table",function(M){for(var R,L,P={},C=0,k=[],D=0,F=null,G=function(){P.currentState=C,P.token=""},z=function(){F.push(P.token),G()},Q=function(){P.currentState=4,k.push(F),F=null};;){if((R=M[D++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(F){z(),Q();break}}if(F===null&&(P.escaped=!1,F=[],G()),P.currentState===C){if(R==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(R==='"')M[D]==='"'?(P.token+='"',D++):(P.escaped=!1,P.currentState=2);else{if(R==="\r")continue;P.token+=R}else R==="\r"?(M[D]===`
`&&D++,z(),Q()):R===`
`?(z(),Q()):R===g?z():P.currentState===1&&(P.token+=R)}if(_)S.columns=k.shift();else for(var V=0;V<k[0].length;V++)S.columns[V]="null";for(var W=0;W<k.length;W++)(k[W].length!==1||k[W][0]!=="undefined"&&k[W][0]!=="")&&((L=new u.default.TableRow).arr=k[W],L.obj=function(Y,J){if((J=J||[])===void 0)for(var ie=0;ie<Y.length;ie++)J[ie.toString()]=ie;return Object.fromEntries(J.map(function(I,O){return[I,Y[O]]}))}(k[W],S.columns),S.addRow(L));typeof y=="function"&&y(S),T._decrementPreload()},function(M){u.default._friendlyFileLoadError(2,m),v?v(M):console.error(M)}),S},u.default.prototype.loadXML=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];for(var g,_,x=new u.default.XML,b=1;b<y.length;b++){var S=y[b];typeof S=="function"&&(g===void 0?g=S:_===void 0&&(_=S))}var T=this;return this.httpDo(y[0],"GET","xml",function(M){for(var R in M)x[R]=M[R];g!==void 0&&g(x),T._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(1,M),!_)throw M;_(M)}),x},u.default.prototype.loadBytes=function(m,y,v){var g={},_=this;return this.httpDo(m,"GET","arrayBuffer",function(x){g.bytes=new Uint8Array(x),typeof y=="function"&&y(g),_._decrementPreload()},function(x){if(u.default._friendlyFileLoadError(6,m),!v)throw x;v(x)}),g},u.default.prototype.httpGet=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return u.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),u.default.prototype.httpDo.apply(this,y)},u.default.prototype.httpPost=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return u.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),u.default.prototype.httpDo.apply(this,y)},u.default.prototype.httpDo=function(){for(var m,y,v,g={},_=0,x="text/plain",b=arguments.length-1;0<b&&typeof(b<0||arguments.length<=b?void 0:arguments[b])=="function";b--)_++;var S=arguments.length-_,T=arguments.length<=0?void 0:arguments[0];if(S==2&&typeof T=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")k=new Request(T,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],v=arguments.length<=3?void 0:arguments[3];else{for(var M,R="GET",L=1;L<arguments.length;L++){var P=L<0||arguments.length<=L?void 0:arguments[L];if(typeof P=="string")P==="GET"||P==="POST"||P==="PUT"||P==="DELETE"?R=P:P==="json"||P==="jsonp"||P==="binary"||P==="arrayBuffer"||P==="xml"||P==="text"||P==="table"?m=P:M=P;else if(typeof P=="number")M=P.toString();else if(p(P)==="object")if(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))for(var C in P)g[C]=P[C];else x=P instanceof u.default.XML?(M=P.serialize(),"application/xml"):(M=JSON.stringify(P),"application/json");else typeof P=="function"&&(y?v=P:y=P)}var S=R==="GET"?new Headers:new Headers({"Content-Type":x}),k=new Request(T,{method:R,mode:"cors",body:M,headers:S})}return(S=(S=(m=m||(T.includes("json")?"json":T.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(T,g):fetch(k)).then(function(D){if(!D.ok)throw(F=new Error(D.body)).status=D.status,F.ok=!1,F;var F=0;switch((F=m!=="jsonp"?D.headers.get("content-length"):F)&&64e6<F&&u.default._friendlyFileLoadError(7,T),m){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(G){return G=new DOMParser().parseFromString(G,"text/xml"),new u.default.XML(G.documentElement)});default:return D.text()}})).then(y||function(){}),S.catch(v||console.error),S},window.URL=window.URL||window.webkitURL,u.default.prototype._pWriters=[],u.default.prototype.createWriter=function(m,y){var v,g;for(g in u.default.prototype._pWriters)if(u.default.prototype._pWriters[g].name===m)return v=new u.default.PrintWriter(m+this.millis(),y),u.default.prototype._pWriters.push(v),v;return v=new u.default.PrintWriter(m,y),u.default.prototype._pWriters.push(v),v},u.default.PrintWriter=function(m,y){var v=this;this.name=m,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g,_=[];for(g in _.push(this.content),u.default.prototype.writeFile(_,m,y),u.default.prototype._pWriters)u.default.prototype._pWriters[g].name===this.name&&u.default.prototype._pWriters.splice(g,1);v.clear(),v={}}},u.default.prototype.save=function(m,y,v){var g=arguments,_=(this._curElement||this).elt;if(g.length===0)u.default.prototype.saveCanvas(_);else if(g[0]instanceof u.default.Renderer||g[0]instanceof u.default.Graphics)u.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")u.default.prototype.saveCanvas(_,g[0]);else switch(h(g[1],g[2])[1]){case"json":return void u.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void u.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?u.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof u.default.Table?u.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof u.default.Image?u.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof u.default.SoundFile&&u.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},u.default.prototype.saveJSON=function(m,y,v){u.default._validateParameters("saveJSON",arguments),v=v?JSON.stringify(m):JSON.stringify(m,void 0,2),this.saveStrings(v.split(`
`),y,"json")},u.default.prototype.saveJSONObject=u.default.prototype.saveJSON,u.default.prototype.saveJSONArray=u.default.prototype.saveJSON,u.default.prototype.saveStrings=function(m,y,v,g){u.default._validateParameters("saveStrings",arguments);for(var _=this.createWriter(y,v||"txt"),x=0;x<m.length;x++)g?_.write(m[x]+`\r
`):_.write(m[x]+`
`);_.close(),_.clear()},u.default.prototype.saveTable=function(m,y,v){u.default._validateParameters("saveTable",arguments),g=v===void 0?y.substring(y.lastIndexOf(".")+1,y.length):v;var g,_=this.createWriter(y,g),x=m.columns,b=g==="tsv"?"	":",";if(g!=="html"){if(x[0]!=="0"){for(var S=0;S<x.length;S++)S<x.length-1?_.write(x[S]+b):_.write(x[S]);_.write(`
`)}for(var T=0;T<m.rows.length;T++){for(var M=void 0,M=0;M<m.rows[T].arr.length;M++)M<m.rows[T].arr.length-1?g==="csv"&&String(m.rows[T].arr[M]).includes(",")?_.write('"'+m.rows[T].arr[M]+'"'+b):_.write(m.rows[T].arr[M]+b):g==="csv"&&String(m.rows[T].arr[M]).includes(",")?_.write('"'+m.rows[T].arr[M]+'"'):_.write(m.rows[T].arr[M]);_.write(`
`)}}else{if(_.print("<html>"),_.print("<head>"),_.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),_.print("</head>"),_.print("<body>"),_.print("  <table>"),x[0]!=="0"){_.print("    <tr>");for(var R=0;R<x.length;R++){var L=f(x[R]);_.print("      <td>".concat(L)),_.print("      </td>")}_.print("    </tr>")}for(var P=0;P<m.rows.length;P++){_.print("    <tr>");for(var C=0;C<m.columns.length;C++){var k=f(m.rows[P].getString(C));_.print("      <td>".concat(k)),_.print("      </td>")}_.print("    </tr>")}_.print("  </table>"),_.print("</body>"),_.print("</html>")}_.close(),_.clear()},u.default.prototype.writeFile=function(_,y,v){var g="application/octet-stream",_=(u.default.prototype._isSafari()&&(g="text/plain"),new Blob(_,{type:g}));u.default.prototype.downloadFile(_,y,v)},u.default.prototype.downloadFile=function(m,_,x){var g,_=h(_,x),x=_[0];m instanceof Blob?c.default.saveAs(m,x):((g=document.createElement("a")).href=m,g.download=x,g.onclick=function(b){document.body.removeChild(b.target),b.stopPropagation()},g.style.display="none",document.body.appendChild(g),u.default.prototype._isSafari()&&(m=(m=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(_[1],'"'),alert(m)),g.click())},u.default.prototype._checkFileExtension=h,u.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},r=u.default,o.default=r},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}a.default.Table=function(){function l(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],f=this,h=l;if(!(f instanceof h))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var c,d;return c=l,(d=[{key:"addRow",value:function(p){if(p=p||new a.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,f){if(typeof f=="string"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[f]===p)return this.rows[h]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[f]===p)return this.rows[m];return null}},{key:"findRows",value:function(p,f){var h=[];if(typeof f=="string")for(var m=0;m<this.rows.length;m++)this.rows[m].obj[f]===p&&h.push(this.rows[m]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[f]===p&&h.push(this.rows[y]);return h}},{key:"matchRow",value:function(p,f){if(typeof f=="number"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[f].match(p))return this.rows[h]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[f].match(p))return this.rows[m];return null}},{key:"matchRows",value:function(p,f){var h=[];if(typeof f=="number")for(var m=0;m<this.rows.length;m++)this.rows[m].arr[f].match(p)&&h.push(this.rows[m]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[f].match(p)&&h.push(this.rows[y]);return h}},{key:"getColumn",value:function(p){var f=[];if(typeof p=="string")for(var h=0;h<this.rows.length;h++)f.push(this.rows[h].obj[p]);else for(var m=0;m<this.rows.length;m++)f.push(this.rows[m].arr[p]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,f){for(var h=[],m=0;m<p.length;m++)h.push(p.charAt(m).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(h.join("|"),"g");if(f===void 0)for(var v=0;v<this.columns.length;v++)for(var g=0;g<this.rows.length;g++){var _=(_=this.rows[g].arr[v]).replace(y,"");this.rows[g].arr[v]=_,this.rows[g].obj[this.columns[v]]=_}else if(typeof f=="string")for(var x=0;x<this.rows.length;x++){var b=(b=this.rows[x].obj[f]).replace(y,""),S=(this.rows[x].obj[f]=b,this.columns.indexOf(f));this.rows[x].arr[S]=b}else for(var T=0;T<this.rows.length;T++){var M=(M=this.rows[T].arr[f]).replace(y,"");this.rows[T].arr[f]=M,this.rows[T].obj[this.columns[f]]=M}}},{key:"trim",value:function(p){var f=new RegExp(" ","g");if(p===void 0)for(var h=0;h<this.columns.length;h++)for(var m=0;m<this.rows.length;m++){var y=(y=this.rows[m].arr[h]).replace(f,"");this.rows[m].arr[h]=y,this.rows[m].obj[this.columns[h]]=y}else if(typeof p=="string")for(var v=0;v<this.rows.length;v++){var g=(g=this.rows[v].obj[p]).replace(f,""),_=(this.rows[v].obj[p]=g,this.columns.indexOf(p));this.rows[v].arr[_]=g}else for(var x=0;x<this.rows.length;x++){var b=(b=this.rows[x].arr[p]).replace(f,"");this.rows[x].arr[p]=b,this.rows[x].obj[this.columns[p]]=b}}},{key:"removeColumn",value:function(m){typeof m=="string"?h=this.columns.indexOf(f=m):f=this.columns[h=m];var f,h,m=this.columns.splice(h+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(m);for(var y=0;y<this.rows.length;y++){var v=this.rows[y].arr,g=v.splice(h+1,v.length);v.pop(),this.rows[y].arr=v.concat(g),delete this.rows[y].obj[f]}}},{key:"set",value:function(p,f,h){this.rows[p].set(f,h)}},{key:"setNum",value:function(p,f,h){this.rows[p].setNum(f,h)}},{key:"setString",value:function(p,f,h){this.rows[p].setString(f,h)}},{key:"get",value:function(p,f){return this.rows[p].get(f)}},{key:"getNum",value:function(p,f){return this.rows[p].getNum(f)}},{key:"getString",value:function(p,f){return this.rows[p].getString(f)}},{key:"getObject",value:function(p){for(var f,h={},m=0;m<this.rows.length;m++)if(f=this.rows[m].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));h[f[p]]=f}else h[m]=this.rows[m].obj;return h}},{key:"getArray",value:function(){for(var p=[],f=0;f<this.rows.length;f++)p.push(this.rows[f].arr);return p}}])&&u(c.prototype,d),l}(),r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(r,s,o){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}r.default.TableRow=function(){function u(d,p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");var f=[];d&&(f=d.split(p=p||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var l,c;return l=u,(c=[{key:"set",value:function(d,p){if(typeof d=="string"){var f=this.table.columns.indexOf(d);if(!(0<=f))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=p,this.arr[f]=p}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=p,f=this.table.columns[d],this.obj[f]=p}}},{key:"setNum",value:function(d,p){p=parseFloat(p),this.set(d,p)}},{key:"setString",value:function(d,p){p=p.toString(),this.set(d,p)}},{key:"get",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d]}},{key:"getNum",value:function(d){var p=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return p}},{key:"getString",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d].toString()}}])&&a(l.prototype,c),u}(),r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,d){for(var p=0;p<d.length;p++){var f=d[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function l(c){for(var d=[],p=0;p<c.length;p++)d.push(new a.default.XML(c[p]));return d}a.default.XML=function(){function c(f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");f?this.DOM=f:(f=document.implementation.createDocument(null,"doc"),this.DOM=f.createElement("root"))}var d,p;return d=c,(p=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(f){var h=this.DOM.innerHTML,m=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(f);y.innerHTML=h;for(var v=0;v<m.length;v++)y.setAttribute(m[v].nodeName,m[v].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var f=[],h=0;h<this.DOM.childNodes.length;h++)f.push(this.DOM.childNodes[h].nodeName);return f}},{key:"getChildren",value:function(f){return l(f?this.DOM.getElementsByTagName(f):this.DOM.children)}},{key:"getChild",value:function(f){if(typeof f!="string")return new a.default.XML(this.DOM.children[f]);var h=!0,m=!1,y=void 0;try{for(var v,g=this.DOM.children[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var _=v.value;if(_.tagName===f)return new a.default.XML(_)}}catch(x){m=!0,y=x}finally{try{h||g.return==null||g.return()}finally{if(m)throw y}}}},{key:"addChild",value:function(f){f instanceof a.default.XML&&this.DOM.appendChild(f.DOM)}},{key:"removeChild",value:function(f){var h=-1;if(typeof f=="string"){for(var m=0;m<this.DOM.children.length;m++)if(this.DOM.children[m].tagName===f){h=m;break}}else h=f;h!==-1&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var f=[],h=!0,m=!1,y=void 0;try{for(var v,g=this.DOM.attributes[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var _=v.value;f.push(_.nodeName)}}catch(x){m=!0,y=x}finally{try{h||g.return==null||g.return()}finally{if(m)throw y}}return f}},{key:"hasAttribute",value:function(f){var h={},m=!0,y=!1,v=void 0;try{for(var g,_=this.DOM.attributes[Symbol.iterator]();!(m=(g=_.next()).done);m=!0){var x=g.value;h[x.nodeName]=x.nodeValue}}catch(b){y=!0,v=b}finally{try{m||_.return==null||_.return()}finally{if(y)throw v}}return!!h[f]}},{key:"getNum",value:function(f,h){var m={},y=!0,v=!1,g=void 0;try{for(var _,x=this.DOM.attributes[Symbol.iterator]();!(y=(_=x.next()).done);y=!0){var b=_.value;m[b.nodeName]=b.nodeValue}}catch(S){v=!0,g=S}finally{try{y||x.return==null||x.return()}finally{if(v)throw g}}return Number(m[f])||h||0}},{key:"getString",value:function(f,h){var m={},y=!0,v=!1,g=void 0;try{for(var _,x=this.DOM.attributes[Symbol.iterator]();!(y=(_=x.next()).done);y=!0){var b=_.value;m[b.nodeName]=b.nodeValue}}catch(S){v=!0,g=S}finally{try{y||x.return==null||x.return()}finally{if(v)throw g}}return m[f]?String(m[f]):h||null}},{key:"setAttribute",value:function(f,h){this.DOM.setAttribute(f,h)}},{key:"getContent",value:function(f){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||f||null}},{key:"setContent",value:function(f){this.DOM.children.length||(this.DOM.textContent=f)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&u(d.prototype,p),c}(),r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l){return function(c){if(Array.isArray(c)){for(var d=0,p=new Array(c.length);d<c.length;d++)p[d]=c[d];return p}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(l,c,d){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(l,d),c)},a.default.prototype.dist=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return a.default._validateParameters("dist",c),c.length===4?Math.hypot(c[2]-c[0],c[3]-c[1]):c.length===6?Math.hypot(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(l,c,d){return a.default._validateParameters("lerp",arguments),d*(c-l)+l},a.default.prototype.log=Math.log,a.default.prototype.mag=function(l,c){return a.default._validateParameters("mag",arguments),Math.hypot(l,c)},a.default.prototype.map=function(l,c,d,p,f,h){return a.default._validateParameters("map",arguments),l=(l-c)/(d-c)*(f-p)+p,h?p<f?this.constrain(l,p,f):this.constrain(l,f,p):l},a.default.prototype.max=function(){for(var l=function(f){return Math.max.apply(Math,u(f))},c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return Array.isArray(d[0])?l(d[0]):l(d)},a.default.prototype.min=function(){for(var l=function(f){return Math.min.apply(Math,u(f))},c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return Array.isArray(d[0])?l(d[0]):l(d)},a.default.prototype.norm=function(l,c,d){return a.default._validateParameters("norm",arguments),this.map(l,c,d,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(l,c){return c?(c=Math.pow(10,c),Math.round(l*c)/c):Math.round(l)},a.default.prototype.sq=function(l){return l*l},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(p){a.default._validateParameters("fract",arguments);var c,d=0,p=Number(p);return isNaN(p)||Math.abs(p)===1/0?p:(p<0&&(p=-p,d=1),String(p).includes(".")&&!String(p).includes("e")?(c=String(p),c=+("0"+c.slice(c.indexOf("."))),Math.abs(d-c)):p<1?Math.abs(d-p):0)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,d,p){return(u=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(f,h,m){var y=[null];return y.push.apply(y,h),h=new(Function.bind.apply(f,y)),m&&l(h,m.prototype),h}).apply(null,arguments)}function l(c,d){return(l=Object.setPrototypeOf||function(p,f){return p.__proto__=f,p})(c,d)}a.default.prototype.createVector=function(c,d,p){return this instanceof a.default?u(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(c,d,p)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(p,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,p=(p=p("../core/main"))&&p.__esModule?p:{default:p};function a(f){return .5*(1-Math.cos(f*Math.PI))}var u,l=4095,c=4,d=.5,p=(p.default.prototype.noise=function(f){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(u==null){u=new Array(4096);for(var y=0;y<4096;y++)u[y]=Math.random()}f<0&&(f=-f),h<0&&(h=-h),m<0&&(m=-m);for(var v,g,_=Math.floor(f),x=Math.floor(h),b=Math.floor(m),S=f-_,T=h-x,M=m-b,R=0,L=.5,P=0;P<c;P++){var C=_+(x<<4)+(b<<8),k=a(S),D=a(T),F=u[C&l];F+=k*(u[C+1&l]-F),v=u[C+16&l],F+=D*((v+=k*(u[C+16+1&l]-v))-F),v=u[(C+=256)&l],v+=k*(u[C+1&l]-v),g=u[C+16&l],v+=D*((g+=k*(u[C+16+1&l]-g))-v),R+=(F+=a(M)*(v-F))*L,L*=d,_<<=1,x<<=1,b<<=1,1<=(S*=2)&&(_++,S--),1<=(T*=2)&&(x++,T--),1<=(M*=2)&&(b++,M--)}return R},p.default.prototype.noiseDetail=function(f,h){0<f&&(c=f),0<h&&(d=h)},p.default.prototype.noiseSeed=function(f){y=4294967296;var h,m,y,v={setSeed:function(_){m=h=(_??Math.random()*y)>>>0},getSeed:function(){return h},rand:function(){return(m=(1664525*m+1013904223)%y)/y}};v.setSeed(f),u=new Array(4096);for(var g=0;g<4096;g++)u[g]=v.rand()},p.default);o.default=p},{"../core/main":280}],313:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function u(h){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var m=d();if(m&&m.has(h))return m.get(h);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var _;Object.prototype.hasOwnProperty.call(h,y)&&((_=g?Object.getOwnPropertyDescriptor(h,y):null)&&(_.get||_.set)?Object.defineProperty(v,y,_):v[y]=h[y])}return v.default=h,m&&m.set(h,v),v}(r("../core/constants"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function p(h,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}l.default.Vector=function(){function h(){var b=this,g=h;if(!(b instanceof g))throw new TypeError("Cannot call a class as a function");var _,x,b=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],_=(arguments.length<=2?void 0:arguments[2])||0,x=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(_=(arguments.length<=0?void 0:arguments[0])||0,x=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=_,this.y=x,this.z=b}var m,y,v;return m=h,v=[{key:"fromAngle",value:function(g){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new l.default.Vector(_*Math.cos(g),_*Math.sin(g),0)}},{key:"fromAngles",value:function(M,S){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=Math.cos(S),S=Math.sin(S),T=Math.cos(M),M=Math.sin(M);return new l.default.Vector(x*M*S,-x*T,x*M*b)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*c.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*c.TWO_PI,_=2*Math.random()-1,b=Math.sqrt(1-_*_),x=b*Math.cos(g),b=b*Math.sin(g);return new l.default.Vector(x,b,_)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return T?T.set(b):(T=b.copy(),_.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),T.add(S),T}},{key:"rem",value:function(g,_){if(g instanceof l.default.Vector&&_ instanceof l.default.Vector)return(g=g.copy()).rem(_),g}},{key:"sub",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return T?T.set(b):(T=b.copy(),_.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),T.sub(S),T}},{key:"mult",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return T?T.set(b):(T=b.copy(),_.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),T.mult(S),T}},{key:"rotate",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return _.length===2?T=b.copy():(T instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),T.set(b)),T.rotate(S),T}},{key:"div",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return T?T.set(b):(T=b.copy(),_.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),T.div(S),T}},{key:"dot",value:function(g,_){return g.dot(_)}},{key:"cross",value:function(g,_){return g.cross(_)}},{key:"dist",value:function(g,_){return g.dist(_)}},{key:"lerp",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2],M=_[3];return M?M.set(b):(M=b.copy(),_.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),M.lerp(S,T),M}},{key:"slerp",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2],M=_[3];return M?M.set(b):(M=b.copy(),_.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),M.slerp(S,T),M}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1];return _.length<2?S=b.copy():(S instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),S.set(b)),S.normalize()}},{key:"limit",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return _.length<3?T=b.copy():(T instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),T.set(b)),T.limit(S)}},{key:"setMag",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return _.length<3?T=b.copy():(T instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),T.set(b)),T.setMag(S)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,_){return g.angleBetween(_)}},{key:"reflect",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];return _.length<3?T=b.copy():(T instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),T.set(b)),T.reflect(S)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,_){var x;return g instanceof l.default.Vector?x=g:Array.isArray(g)?x=new l.default.Vector().set(g):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),x.equals(_)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,_,x){return g instanceof l.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=_||0,this.z=x||0),this}},{key:"copy",value:function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,_,x){return g instanceof l.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=_||0,this.z+=x||0),this}},{key:"calculateRemainder2D",value:function(g,_){return g!==0&&(this.x=this.x%g),_!==0&&(this.y=this.y%_),this}},{key:"calculateRemainder3D",value:function(g,_,x){return g!==0&&(this.x=this.x%g),_!==0&&(this.y=this.y%_),x!==0&&(this.z=this.z%x),this}},{key:"rem",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b,S,T,M=_[0],R=_[1],L=_[2];if(M instanceof l.default.Vector){if([M.x,M.y,M.z].every(Number.isFinite))return b=parseFloat(M.x),S=parseFloat(M.y),T=parseFloat(M.z),this.calculateRemainder3D(b,S,T)}else if(Array.isArray(M)){if(M.every(Number.isFinite))return M.length===2?this.calculateRemainder2D(M[0],M[1]):M.length===3?this.calculateRemainder3D(M[0],M[1],M[2]):void 0}else if(_.length===1){if(Number.isFinite(M)&&M!==0)return this.x=this.x%M,this.y=this.y%M,this.z=this.z%M,this}else if(_.length===2){if(_.every(Number.isFinite))return this.calculateRemainder2D(M,R)}else if(_.length===3&&_.every(Number.isFinite))return this.calculateRemainder3D(M,R,L)}},{key:"sub",value:function(g,_,x){return g instanceof l.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=_||0,this.z-=x||0),this}},{key:"mult",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b,S=_[0],T=_[1],M=_[2];return S instanceof l.default.Vector?Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"?(this.x*=S.x,this.y*=S.y,this.z*=S.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(S)?S.every(function(R){return Number.isFinite(R)})&&S.every(function(R){return typeof R=="number"})?S.length===1?(this.x*=S[0],this.y*=S[0],this.z*=S[0]):S.length===2?(this.x*=S[0],this.y*=S[1]):S.length===3&&(this.x*=S[0],this.y*=S[1],this.z*=S[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(b=_).every(function(R){return Number.isFinite(R)})&&b.every(function(R){return typeof R=="number"})?(_.length===1&&(this.x*=S,this.y*=S,this.z*=S),_.length===2&&(this.x*=S,this.y*=T),_.length===3&&(this.x*=S,this.y*=T,this.z*=M)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var g=arguments.length,_=new Array(g),x=0;x<g;x++)_[x]=arguments[x];var b=_[0],S=_[1],T=_[2];if(b instanceof l.default.Vector)if(Number.isFinite(b.x)&&Number.isFinite(b.y)&&Number.isFinite(b.z)&&typeof b.x=="number"&&typeof b.y=="number"&&typeof b.z=="number"){var M=b.z===0&&this.z===0;if(b.x===0||b.y===0||!M&&b.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=b.x,this.y/=b.y,M||(this.z/=b.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(b))if(b.every(Number.isFinite)&&b.every(function(R){return typeof R=="number"})){if(b.some(function(R){return R===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;b.length===1?(this.x/=b[0],this.y/=b[0],this.z/=b[0]):b.length===2?(this.x/=b[0],this.y/=b[1]):b.length===3&&(this.x/=b[0],this.y/=b[1],this.z/=b[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(_.every(Number.isFinite)&&_.every(function(R){return typeof R=="number"})){if(_.some(function(R){return R===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;_.length===1&&(this.x/=b,this.y/=b,this.z/=b),_.length===2&&(this.x/=b,this.y/=S),_.length===3&&(this.x/=b,this.y/=S,this.z/=T)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,_=this.y,x=this.z;return g*g+_*_+x*x}},{key:"dot",value:function(g,_,x){return g instanceof l.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(_||0)+this.z*(x||0)}},{key:"cross",value:function(b){var _=this.y*b.z-this.z*b.y,x=this.z*b.x-this.x*b.z,b=this.x*b.y-this.y*b.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,_,x,b):new l.default.Vector(_,x,b)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return g!==0&&this.mult(1/g),this}},{key:"limit",value:function(g){var _=this.magSq();return g*g<_&&this.div(Math.sqrt(_)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var _=this.mag();return this.x=_*Math.cos(g),this.y=_*Math.sin(g),this}},{key:"rotate",value:function(_){var _=this.heading()+_,x=(this.isPInst&&(_=this._toRadians(_)),this.mag());return this.x=Math.cos(_)*x,this.y=Math.sin(_)*x,this}},{key:"angleBetween",value:function(g){var _;return this.magSq()*g.magSq()==0?NaN:(_=this.cross(g),g=Math.atan2(_.mag(),this.dot(g))*Math.sign(_.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,_,x,b){return g instanceof l.default.Vector?this.lerp(g.x,g.y,g.z,_):(this.x+=(g-this.x)*b||0,this.y+=(_-this.y)*b||0,this.z+=(x-this.z)*b||0,this)}},{key:"slerp",value:function(g,_){if(_!==0){if(_===1)return this.set(g);var x=this.mag(),b=g.mag();if(x*b==0)this.mult(1-_).add(g.x*_,g.y*_,g.z*_);else{var S=this.cross(g),T=S.mag(),M=Math.atan2(T,this.dot(g));if(0<T)S.x/=T,S.y/=T,S.z/=T;else{if(M<.5*Math.PI)return this.mult(1-_).add(g.x*_,g.y*_,g.z*_),this;this.z===0&&g.z===0?S.set(0,0,1):this.x!==0?S.set(this.y,-this.x,0).normalize():S.set(1,0,0)}T=S.cross(this),g=1-_+_*b/x,S=g*Math.cos(_*M),b=g*Math.sin(_*M),this.x=this.x*S+T.x*b,this.y=this.y*S+T.y*b,this.z=this.z*S+T.z*b}}return this}},{key:"reflect",value:function(g){return g.normalize(),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(T,_,x){var b,S,T=T instanceof l.default.Vector?(b=T.x||0,S=T.y||0,T.z||0):Array.isArray(T)?(b=T[0]||0,S=T[1]||0,T[2]||0):(b=T||0,S=_||0,x||0);return this.x===b&&this.y===S&&this.z===T}}])&&p(m.prototype,y),v&&p(m,v),h}();var f=l.default.Vector;o.default=f},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(d,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(d=d("../core/main"))&&d.__esModule?d:{default:d},u="_lcg_random_state",l=4294967296,c=0,d=(a.default.prototype._lcg=function(p){return this[p]=(1664525*this[p]+1013904223)%l,this[p]/l},a.default.prototype._lcgSetSeed=function(p,f){this[p]=(f??Math.random()*l)>>>0},a.default.prototype.randomSeed=function(p){this._lcgSetSeed(u,p),this._gaussian_previous=!1},a.default.prototype.random=function(p,f){var h,m;return a.default._validateParameters("random",arguments),h=this[u]!=null?this._lcg(u):Math.random(),p===void 0?h:f===void 0?Array.isArray(p)?p[Math.floor(h*p.length)]:h*p:(f<p&&(m=p,p=f,f=m),h*(f-p)+p)},a.default.prototype.randomGaussian=function(p){var f,h,m,y,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)f=c,this._gaussian_previous=!1;else{for(;1<=(y=(h=this.random(2)-1)*h+(m=this.random(2)-1)*m););f=h*(y=Math.sqrt(-2*Math.log(y)/y)),c=m*y,this._gaussian_previous=!0}return f*v+(p||0)},a.default);o.default=d},{"../core/main":280}],315:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants"));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}l.default.prototype._angleMode=c.RADIANS,l.default.prototype.acos=function(f){return this._fromRadians(Math.acos(f))},l.default.prototype.asin=function(f){return this._fromRadians(Math.asin(f))},l.default.prototype.atan=function(f){return this._fromRadians(Math.atan(f))},l.default.prototype.atan2=function(f,h){return this._fromRadians(Math.atan2(f,h))},l.default.prototype.cos=function(f){return Math.cos(this._toRadians(f))},l.default.prototype.sin=function(f){return Math.sin(this._toRadians(f))},l.default.prototype.tan=function(f){return Math.tan(this._toRadians(f))},l.default.prototype.degrees=function(f){return f*c.RAD_TO_DEG},l.default.prototype.radians=function(f){return f*c.DEG_TO_RAD},l.default.prototype.angleMode=function(f){if(l.default._validateParameters("angleMode",arguments),f===void 0)return this._angleMode;f!==c.DEGREES&&f!==c.RADIANS||f!==this._angleMode&&(f===c.RADIANS?(this._setProperty("pRotationX",this.pRotationX*c.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*c.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*c.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*c.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*c.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*c.RAD_TO_DEG)),this._angleMode=f)},l.default.prototype._toRadians=function(f){return this._angleMode===c.DEGREES?f*c.DEG_TO_RAD:f},l.default.prototype._toDegrees=function(f){return this._angleMode===c.RADIANS?f*c.RAD_TO_DEG:f},l.default.prototype._fromRadians=function(f){return this._angleMode===c.DEGREES?f*c.RAD_TO_DEG:f},l.default.prototype._fromDegrees=function(f){return this._angleMode===c.RADIANS?f*c.DEG_TO_RAD:f};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(r,s,o){r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.textAlign=function(u,l){var c;return a.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},a.default.prototype.textLeading=function(u){var l;return a.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},a.default.prototype.textSize=function(u){var l;return a.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},a.default.prototype.textStyle=function(u){var l;return a.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},a.default.prototype.textWidth=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];if(l[0]+="",a.default._validateParameters("textWidth",l),l[0].length===0)return 0;for(var d=l[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),p=[],f=0;f<d.length;f++)p.push(this._renderer.textWidth(d[f]));return Math.max.apply(Math,p)},a.default.prototype.textAscent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return a.default._validateParameters("textAscent",l),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return a.default._validateParameters("textDescent",l),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(u){return a.default._validateParameters("textWrap",[u]),this._renderer.textWrap(u)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function u(m){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=f(r("../core/constants")),d=f(r("opentype.js"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}function f(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var y=p();if(y&&y.has(m))return y.get(m);var v,g,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&((g=x?Object.getOwnPropertyDescriptor(m,v):null)&&(g.get||g.set)?Object.defineProperty(_,v,g):_[v]=m[v]);return _.default=m,y&&y.set(m,_),_}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(m,y,v){l.default._validateParameters("loadFont",arguments);var g=new l.default.Font(this),_=this;return d.load(m,function(S,T){if(S)return l.default._friendlyFileLoadError(4,m),v!==void 0?v(S):void console.error(S,m);g.font=T,y!==void 0&&y(g),_._decrementPreload();var S=m.split("\\").pop().split("/").pop(),T=S.lastIndexOf("."),M=T<1?null:S.slice(T+1);["ttf","otf","woff","woff2"].includes(M)&&(M=S.slice(0,T!==-1?T:0),(S=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(M,`;
src: url(`).concat(m,`);
}
`))),document.head.appendChild(S))}),g},l.default.prototype.text=function(m,y,v,g,_){var x;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(x=this._renderer).text.apply(x,arguments):this},l.default.prototype.textFont=function(m,y){if(l.default._validateParameters("textFont",arguments),arguments.length){if(m)return this._renderer._setProperty("_textFont",m),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var h=l.default;o.default=h},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(r,s,o){function a(R){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(R)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(u=r("../core/main"))&&u.__esModule?u:{default:u},l=function(R){if(R&&R.__esModule)return R;if(R===null||d(R)!=="object"&&typeof R!="function")return{default:R};var L=c();if(L&&L.has(R))return L.get(R);var P,C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in R){var D;Object.prototype.hasOwnProperty.call(R,P)&&((D=k?Object.getOwnPropertyDescriptor(R,P):null)&&(D.get||D.set)?Object.defineProperty(C,P,D):C[P]=R[P])}return C.default=R,L&&L.set(R,C),C}(r("../core/constants"));function c(){var R;return typeof WeakMap!="function"?null:(R=new WeakMap,c=function(){return R},R)}function d(R){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(L){return a(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":a(L)})(R)}function p(R,L){for(var P=0;P<L.length;P++){var C=L[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(R,C.key,C)}}function f(R,L){var P=R.length;return R[L<0?L%P+P:L%P]}function h(R,L,P,C){var k,D,F;return C?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),D=h.tmpPoint1,F=h.tmpPoint2,D.x=L.x-R.x,D.y=L.y-R.y,F.x=P.x-L.x,F.y=P.y-L.y,k=D.x*F.x+D.y*F.y,D=Math.sqrt(D.x*D.x+D.y*D.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(k/(D*F))<C):(L[0]-R[0])*(P[1]-R[1])-(P[0]-R[0])*(L[1]-R[1])==0}function m(O,q,H,Z,oe,D,F,G,z){var Q=1-z,W=Math.pow(Q,3),Y=Math.pow(Q,2),I=z*z,J=I*z,V=W*O+3*Y*z*H+3*Q*z*z*oe+J*F,W=W*q+3*Y*z*Z+3*Q*z*z*D+J*G,Y=O+2*z*(H-O)+I*(oe-2*H+O),J=q+2*z*(Z-q)+I*(D-2*Z+q),ie=H+2*z*(oe-H)+I*(F-2*oe+H),I=Z+2*z*(D-Z)+I*(G-2*D+Z),O=Q*O+z*H,H=Q*q+z*Z,q=Q*oe+z*F,Z=Q*D+z*G,oe=90-180*Math.atan2(Y-ie,J-I)/Math.PI;return(ie<Y||J<I)&&(oe+=180),{x:V,y:W,m:{x:Y,y:J},n:{x:ie,y:I},start:{x:O,y:H},end:{x:q,y:Z},alpha:oe}}function y(R,L,P,C,k,D,F,G,z){return z==null?T(R,L,P,C,k,D,F,G):m(R,L,P,C,k,D,F,G,function(Q,V,W,Y,J,ie,I,O,H){if(!(H<0||T(Q,V,W,Y,J,ie,I,O)<H)){var q,Z=.5,oe=1-Z;for(q=T(Q,V,W,Y,J,ie,I,O,oe);.01<Math.abs(q-H);)q=T(Q,V,W,Y,J,ie,I,O,oe+=(q<H?1:-1)*(Z/=2));return oe}}(R,L,P,C,k,D,F,G,z))}function v(R,L,P){for(var C,k,D,F,G,z=0,Q=0,V=(R=function(W,Y){function J(we,Ee,ae){var ne,Ae;if(!we)return["C",Ee.x,Ee.y,Ee.x,Ee.y,Ee.x,Ee.y];switch(we[0]in{T:1,Q:1}||(Ee.qx=Ee.qy=null),we[0]){case"M":Ee.X=we[1],Ee.Y=we[2];break;case"A":we=["C"].concat(_.apply(0,[Ee.x,Ee.y].concat(we.slice(1))));break;case"S":Ae=ae==="C"||ae==="S"?(ne=2*Ee.x-Ee.bx,2*Ee.y-Ee.by):(ne=Ee.x,Ee.y),we=["C",ne,Ae].concat(we.slice(1));break;case"T":ae==="Q"||ae==="T"?(Ee.qx=2*Ee.x-Ee.qx,Ee.qy=2*Ee.y-Ee.qy):(Ee.qx=Ee.x,Ee.qy=Ee.y),we=["C"].concat(S(Ee.x,Ee.y,Ee.qx,Ee.qy,we[1],we[2]));break;case"Q":Ee.qx=we[1],Ee.qy=we[2],we=["C"].concat(S(Ee.x,Ee.y,we[1],we[2],we[3],we[4]));break;case"L":we=["C"].concat(b(Ee.x,Ee.y,we[1],we[2]));break;case"H":we=["C"].concat(b(Ee.x,Ee.y,we[1],Ee.y));break;case"V":we=["C"].concat(b(Ee.x,Ee.y,Ee.x,we[1]));break;case"Z":we=["C"].concat(b(Ee.x,Ee.y,Ee.X,Ee.Y))}return we}function ie(we,Ee){if(7<we[Ee].length){we[Ee].shift();for(var ae=we[Ee];ae.length;)pe[Ee]="A",q&&(be[Ee]="A"),we.splice(Ee++,0,["C"].concat(ae.splice(0,6)));we.splice(Ee,1),O=Math.max(H.length,q&&q.length||0)}}function I(we,Ee,ae,ne,Ae){we&&Ee&&we[Ae][0]==="M"&&Ee[Ae][0]!=="M"&&(Ee.splice(Ae,0,["M",ne.x,ne.y]),ae.bx=0,ae.by=0,ae.x=we[Ae][1],ae.y=we[Ae][2],O=Math.max(H.length,q&&q.length||0))}var O,H=g(W),q=Y&&g(Y),Z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},oe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},pe=[],be=[],me="",ce="";O=Math.max(H.length,q&&q.length||0);for(var te=0;te<O;te++){(me=H[te]?H[te][0]:me)!=="C"&&(pe[te]=me,te&&(ce=pe[te-1])),H[te]=J(H[te],Z,ce),pe[te]!=="A"&&me==="C"&&(pe[te]="C"),ie(H,te),q&&((me=q[te]?q[te][0]:me)!=="C"&&(be[te]=me,te&&(ce=be[te-1])),q[te]=J(q[te],oe,ce),be[te]!=="A"&&me==="C"&&(be[te]="C"),ie(q,te)),I(H,q,Z,oe,te),I(q,H,oe,Z,te);var ue=H[te],ge=q&&q[te],xe=ue.length,Le=q&&ge.length;Z.x=ue[xe-2],Z.y=ue[xe-1],Z.bx=parseFloat(ue[xe-4])||Z.x,Z.by=parseFloat(ue[xe-3])||Z.y,oe.bx=q&&(parseFloat(ge[Le-4])||oe.x),oe.by=q&&(parseFloat(ge[Le-3])||oe.y),oe.x=q&&ge[Le-2],oe.y=q&&ge[Le-1]}return q?[H,q]:H}(R)).length;Q<V;Q++){if((D=R[Q])[0]==="M")C=+D[1],k=+D[2];else{if(L<z+(F=y(C,k,D[1],D[2],D[3],D[4],D[5],D[6]))&&!P)return{x:(G=y(C,k,D[1],D[2],D[3],D[4],D[5],D[6],L-z)).x,y:G.y,alpha:G.alpha};z+=F,C=+D[5],k=+D[6]}D.shift()}return G=(G=P?z:m(C,k,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:G.x,y:G.y,alpha:G.alpha}:G}function g(R){var L=[],P=0,C=0,k=0,D=0,F=0;if(R){R[0][0]==="M"&&(k=P=+R[0][1],D=C=+R[0][2],F++,L[0]=["M",P,C]);for(var G,z,Q=R.length===3&&R[0][0]==="M"&&R[1][0].toUpperCase()==="R"&&R[2][0].toUpperCase()==="Z",V=F,W=R.length;V<W;V++){if(L.push(G=[]),(z=R[V])[0]!==z[0].toUpperCase())switch(G[0]=z[0].toUpperCase(),G[0]){case"A":G[1]=z[1],G[2]=z[2],G[3]=z[3],G[4]=z[4],G[5]=z[5],G[6]=+(z[6]+P),G[7]=+(z[7]+C);break;case"V":G[1]=+z[1]+C;break;case"H":G[1]=+z[1]+P;break;case"R":for(var Y,J=2,ie=(Y=[P,C].concat(z.slice(1))).length;J<ie;J++)Y[J]=+Y[J]+P,Y[++J]=+Y[J]+C;L.pop(),L=L.concat(x(Y,Q));break;case"M":k=+z[1]+P,D=+z[2]+C;break;default:for(var I=1,O=z.length;I<O;I++)G[I]=+z[I]+(I%2?P:C)}else if(z[0]==="R")Y=[P,C].concat(z.slice(1)),L.pop(),L=L.concat(x(Y,Q)),G=["R"].concat(z.slice(-2));else for(var H=0,q=z.length;H<q;H++)G[H]=z[H];switch(G[0]){case"Z":P=k,C=D;break;case"H":P=G[1];break;case"V":C=G[1];break;case"M":k=G[G.length-2],D=G[G.length-1];break;default:P=G[G.length-2],C=G[G.length-1]}}}return L}function _(R,L,P,C,q,pe,Z,G,z,Q){function V(Le,we,Ee){return{x:Le*Math.cos(Ee)-we*Math.sin(Ee),y:Le*Math.sin(Ee)+we*Math.cos(Ee)}}var W,O=Math.PI,H=120*O/180,Y=O/180*(+q||0),J=[],ie=(Q?(te=Q[0],W=Q[1],me=Q[2],ce=Q[3]):(R=(oe=V(R,L,-Y)).x,L=oe.y,1<(ie=(I=(R-(G=(oe=V(G,z,-Y)).x))/2)*I/(P*P)+(oe=(L-(z=oe.y))/2)*oe/(C*C))&&(P*=ie=Math.sqrt(ie),C*=ie),ie=P*P,be=C*C,me=(pe=(pe===Z?-1:1)*Math.sqrt(Math.abs((ie*be-ie*oe*oe-be*I*I)/(ie*oe*oe+be*I*I))))*P*oe/C+(R+G)/2,ce=pe*-C*I/P+(L+z)/2,te=Math.asin(((L-ce)/C).toFixed(9)),W=Math.asin(((z-ce)/C).toFixed(9)),(te=R<me?O-te:te)<0&&(te=2*O+te),(W=G<me?O-W:W)<0&&(W=2*O+W),Z&&W<te&&(te-=2*O),!Z&&te<W&&(W-=2*O)),W-te),I=(Math.abs(ie)>H&&(be=W,oe=G,pe=z,W=te+H*(Z&&te<W?1:-1),J=_(G=me+P*Math.cos(W),z=ce+C*Math.sin(W),P,C,q,0,Z,oe,pe,[W,be,me,ce])),ie=W-te,Math.cos(te)),O=Math.sin(te),H=Math.cos(W),q=Math.sin(W),Z=Math.tan(ie/4),oe=4/3*P*Z,pe=4/3*C*Z,be=[R,L],me=[R+oe*O,L-pe*I],ce=[G+oe*q,z-pe*H],te=[G,z];if(me[0]=2*be[0]-me[0],me[1]=2*be[1]-me[1],Q)return[me,ce,te].concat(J);for(var ue=[],ge=0,xe=(J=[me,ce,te].concat(J).join().split(",")).length;ge<xe;ge++)ue[ge]=ge%2?V(J[ge-1],J[ge],Y).y:V(J[ge],J[ge+1],Y).x;return ue}function x(R,L){for(var P=[],C=0,k=R.length;C<k-2*!L;C+=2){var D=[{x:+R[C-2],y:+R[C-1]},{x:+R[C],y:+R[C+1]},{x:+R[C+2],y:+R[C+3]},{x:+R[C+4],y:+R[C+5]}];L?C?k-4===C?D[3]={x:+R[0],y:+R[1]}:k-2===C&&(D[2]={x:+R[0],y:+R[1]},D[3]={x:+R[2],y:+R[3]}):D[0]={x:+R[k-2],y:+R[k-1]}:k-4===C?D[3]=D[2]:C||(D[0]={x:+R[C],y:+R[C+1]}),P.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return P}function b(R,L,P,C){return[R,L,P,C,P,C]}function S(R,L,P,C,k,D){return[1/3*R+2/3*P,1/3*L+2/3*C,1/3*k+2/3*P,1/3*D+2/3*C,k,D]}function T(R,L,P,C,k,D,F,G,z){for(var Q=(z=1<(z=z??1)?1:z<0?0:z)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],W=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],J=0;J<12;J++){var I=Q*V[J]+Q,ie=M(I,R,P,k,F),I=M(I,L,C,D,G);W+=Y[J]*Math.sqrt(ie*ie+I*I)}return Q*W}function M(R,L,P,C,k){return R*(R*(-3*L+9*P-9*C+3*k)+6*L-12*P+6*C)-3*L+3*P}u.default.Font=function(){function R(C){if(!(this instanceof R))throw new TypeError("Cannot call a class as a function");this.parent=C,this.cache={},this.font=void 0}var L,P;return L=R,(P=[{key:"textBounds",value:function(C){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Q=3<arguments.length?arguments[3]:void 0,F=4<arguments.length?arguments[4]:void 0,G=F&&F.renderer&&F.renderer._pInst||this.parent,z=G._renderer.drawingContext,Q=(z.textAlign||l.LEFT,z.textBaseline||l.BASELINE,Q||G._renderer._textSize);if(!oe){for(var V=[],W=[],Y=[],J=(Y[0]=[],[]),ie=this._scale(Q),I=G._renderer.textLeading(),O=0,H=(this.font.forEachGlyph(C,k,D,Q,F,function(me,ce,te,ue){var ge=me.getMetrics();me.index===0?Y[O+=1]=[]:(Y[O].push(ce+ge.xMin*ie),Y[O].push(ce+ge.xMax*ie),J.push(te+O*I+-ge.yMin*ie),J.push(te+O*I+-ge.yMax*ie))}),0<Y[O].length&&(V[O]=Math.min.apply(null,Y[O]),W[O]=Math.max.apply(null,Y[O])),0),q=0;q<=O;q++){V[q]=Math.min.apply(null,Y[q]),W[q]=Math.max.apply(null,Y[q]);var Z=W[q]-V[q];H<Z&&(H=Z)}var z=Math.min.apply(null,V),oe={x:z,y:D=Math.min.apply(null,J),h:Math.max.apply(null,J)-D,w:H,advance:z-k},Q=this._handleAlignment(G._renderer,C,oe.x,oe.y,oe.w+oe.advance);oe.x=Q.x,oe.y=Q.y}return oe}},{key:"textToPoints",value:function(C,k,D,F,G){var z=k,Q=[],V=C.split(/\r?\n|\r|\n/g);F=F||this.parent._renderer._textSize;for(var W,Y,J,ie=0;ie<V.length;ie++){var I=0;k=z;for(var O=(O=V[ie]).replace("	","  "),H=this._getGlyphs(O),q=0;q<H.length;q++){if(Y=O,!((J=H)[W=q].name&&J[W].name==="space"||Y.length===J.length&&Y[W]===" "))for(var Z=function(me){for(var ce,te=[],ue=0;ue<me.length;ue++)me[ue].type==="M"&&(ce&&te.push(ce),ce=[]),ce.push(function(ge){var xe=[ge.type];return ge.type==="M"||ge.type==="L"?xe.push(ge.x,ge.y):ge.type==="C"?xe.push(ge.x1,ge.y1,ge.x2,ge.y2,ge.x,ge.y):ge.type==="Q"&&xe.push(ge.x1,ge.y1,ge.x,ge.y),xe}(me[ue]));return te.push(ce),te}(H[q].getPath(k,D,F).commands),oe=0;oe<Z.length;oe++)for(var pe=function(me,ce){for(var ce=function(we,Ee){if(d(we)!=="object")we=Ee;else for(var ae in Ee)we[ae]===void 0&&(we[ae]=Ee[ae]);return we}(ce,{sampleFactor:.1,simplifyThreshold:0}),te=v(me,0,1),ue=te/(te*ce.sampleFactor),ge=[],xe=0;xe<te;xe+=ue)ge.push(v(me,xe));return ce.simplifyThreshold&&function(Le){for(var we=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ee=0,ae=Le.length-1;3<Le.length&&0<=ae;--ae)h(f(Le,ae-1),f(Le,ae),f(Le,ae+1),we)&&(Le.splice(ae%Le.length,1),Ee++)}(ge,ce.simplifyThreshold),ge}(Z[oe],G),be=0;be<pe.length;be++)pe[be].x+=I,Q.push(pe[be]);I+=H[q].advanceWidth*this._scale(F)}D+=this.parent._renderer._textLeading}return Q}},{key:"_getGlyphs",value:function(C){return this.font.stringToGlyphs(C)}},{key:"_getPath",value:function(C,z,D,F){var G=(F&&F.renderer&&F.renderer._pInst||this.parent)._renderer,z=this._handleAlignment(G,C,z,D);return this.font.getPath(C,z.x,z.y,G._textSize,F)}},{key:"_getPathData",value:function(C,k,D,F){var G=3;return typeof C=="string"&&2<arguments.length?C=this._getPath(C,k,D,F):d(k)==="object"&&(F=k),F&&typeof F.decimals=="number"&&(G=F.decimals),C.toPathData(G)}},{key:"_getSVG",value:function(C,k,D,F){var G=3;return typeof C=="string"&&2<arguments.length?C=this._getPath(C,k,D,F):d(k)==="object"&&(F=k),F&&(typeof F.decimals=="number"&&(G=F.decimals),typeof F.strokeWidth=="number"&&(C.strokeWidth=F.strokeWidth),F.fill!==void 0&&(C.fill=F.fill),F.stroke!==void 0&&(C.stroke=F.stroke)),C.toSVG(G)}},{key:"_renderPath",value:function(Q,W,Y,F){var G=F&&F.renderer||this.parent._renderer,z=G.drawingContext,Q=(d(Q)==="object"&&Q.commands?Q:this._getPath(Q,W,Y,F)).commands,V=(z.beginPath(),!0),W=!1,Y=void 0;try{for(var J,ie=Q[Symbol.iterator]();!(V=(J=ie.next()).done);V=!0){var I=J.value;I.type==="M"?z.moveTo(I.x,I.y):I.type==="L"?z.lineTo(I.x,I.y):I.type==="C"?z.bezierCurveTo(I.x1,I.y1,I.x2,I.y2,I.x,I.y):I.type==="Q"?z.quadraticCurveTo(I.x1,I.y1,I.x,I.y):I.type==="Z"&&z.closePath()}}catch(O){W=!0,Y=O}finally{try{V||ie.return==null||ie.return()}finally{if(W)throw Y}}return G._doStroke&&G._strokeSet&&!G._clipping&&z.stroke(),G._doFill&&!G._clipping&&(G._fillSet||G._setFill(l._DEFAULT_TEXT_FILL),z.fill()),this}},{key:"_textWidth",value:function(C,k){return this.font.getAdvanceWidth(C,k)}},{key:"_textAscent",value:function(C){return this.font.ascender*this._scale(C)}},{key:"_textDescent",value:function(C){return-this.font.descender*this._scale(C)}},{key:"_scale",value:function(C){return 1/this.font.unitsPerEm*(C||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(C,k,D,F,G){var z=C._textSize;switch(G===void 0&&(G=this._textWidth(k,z)),C._textAlign){case l.CENTER:D-=G/2;break;case l.RIGHT:D-=G}switch(C._textBaseline){case l.TOP:F+=this._textAscent(z);break;case l.CENTER:F+=this._textAscent(z)/2;break;case l.BOTTOM:F-=this._textDescent(z)}return{x:D,y:F}}}])&&p(L.prototype,P),R}(),r=u.default,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(a,u){return a.push(u),a},r.default.prototype.arrayCopy=function(a,u,l,c,d){var p,f;a=d!==void 0?(f=Math.min(d,a.length),p=c,a.slice(u,f+u)):(f=l!==void 0?(f=l,Math.min(f,a.length)):a.length,l=u,a.slice(p=0,f)),Array.prototype.splice.apply(l,[p,f].concat(a))},r.default.prototype.concat=function(a,u){return a.concat(u)},r.default.prototype.reverse=function(a){return a.reverse()},r.default.prototype.shorten=function(a){return a.pop(),a},r.default.prototype.shuffle=function(a,u){for(var l,c,d=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),p=(a=u||d?a:a.slice()).length;1<p;)l=this.random(0,1)*p|0,c=a[--p],a[p]=a[l],a[l]=c;return a},r.default.prototype.sort=function(a,c){var l=c?a.slice(0,Math.min(c,a.length)):a,c=c?a.slice(Math.min(c,a.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(d,p){return d-p})).concat(c)},r.default.prototype.splice=function(a,u,l){return Array.prototype.splice.apply(a,[l,0].concat(u)),a},r.default.prototype.subset=function(a,u,l){return l!==void 0?a.slice(u,u+l):a.slice(u,a.length)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.float=function(u){return u instanceof Array?u.map(parseFloat):parseFloat(u)},a.default.prototype.int=function(u){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return u===1/0||u==="Infinity"?1/0:u===-1/0||u==="-Infinity"?-1/0:typeof u=="string"?parseInt(u,l):typeof u=="number"?0|u:typeof u=="boolean"?u?1:0:u instanceof Array?u.map(function(c){return a.default.prototype.int(c,l)}):void 0},a.default.prototype.str=function(u){return u instanceof Array?u.map(a.default.prototype.str):String(u)},a.default.prototype.boolean=function(u){return typeof u=="number"?u!==0:typeof u=="string"?u.toLowerCase()==="true":typeof u=="boolean"?u:u instanceof Array?u.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(u){return u=a.default.prototype.int(u,10),typeof u=="number"?(u+128)%256-128:u instanceof Array?u.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(u){return typeof u!="number"||isNaN(u)?u instanceof Array?u.map(a.default.prototype.char):typeof u=="string"?a.default.prototype.char(parseInt(u,10)):void 0:String.fromCharCode(u)},a.default.prototype.unchar=function(u){return typeof u=="string"&&u.length===1?u.charCodeAt(0):u instanceof Array?u.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(u,l){if(l=l??8,u instanceof Array)return u.map(function(d){return a.default.prototype.hex(d,l)});if(u===1/0||u===-1/0)return(u===1/0?"F":"0").repeat(l);if(typeof u=="number"){u<0&&(u=4294967295+u+1);for(var c=Number(u).toString(16).toUpperCase();c.length<l;)c="0".concat(c);return c=c.length>=l?c.substring(c.length-l,c.length):c}},a.default.prototype.unhex=function(u){return u instanceof Array?u.map(a.default.prototype.unhex):parseInt("0x".concat(u),16)},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(f=r("../core/main"))&&f.__esModule?f:{default:f};function u(h,m){return function(y){if(Array.isArray(y))return y}(h)||function(y,v){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var g=[],_=!0,x=!1,b=void 0;try{for(var S,T=y[Symbol.iterator]();!(_=(S=T.next()).done)&&(g.push(S.value),!v||g.length!==v);_=!0);}catch(M){x=!0,b=M}finally{try{_||T.return==null||T.return()}finally{if(x)throw b}}return g}}(h,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(h,m,y){var g=u(h.toString().split("."),2),v=g[0],g=g[1];return y===void 0?(v=v.padStart(m,"0"),g?v+"."+g:v):(v=(h=u(h.toFixed(y).toString().split("."),2))[0],g=h[1],v=v.padStart(m,"0"),g===void 0?v:v+"."+g)}function c(g,m){var y=(g=g.toString()).indexOf("."),v=y!==-1?g.substring(y):"",g=(g=y!==-1?g.substring(0,y):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(m===0)v="";else if(m!==void 0)if(m>v.length)for(var _=m-(v+=y===-1?".":"").length+1,x=0;x<_;x++)v+="0";else v=v.substring(0,m+1);return g+v}function d(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function p(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.join=function(h,m){return a.default._validateParameters("join",arguments),h.join(m)},a.default.prototype.match=function(h,m){return a.default._validateParameters("match",arguments),h.match(m)},a.default.prototype.matchAll=function(h,m){a.default._validateParameters("matchAll",arguments);for(var y=new RegExp(m,"g"),v=y.exec(h),g=[];v!==null;)g.push(v),v=y.exec(h);return g},a.default.prototype.nf=function(h,m,y){return a.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(v){return l(v,m,y)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):l(h,m,y)},a.default.prototype.nfc=function(h,m){return a.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(y){return c(y,m)}):c(h,m)},a.default.prototype.nfp=function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];a.default._validateParameters("nfp",m);var v=a.default.prototype.nf.apply(this,m);return v instanceof Array?v.map(d):d(v)},a.default.prototype.nfs=function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];a.default._validateParameters("nfs",m);var v=a.default.prototype.nf.apply(this,m);return v instanceof Array?v.map(p):p(v)},a.default.prototype.split=function(h,m){return a.default._validateParameters("split",arguments),h.split(m)},a.default.prototype.splitTokens=function(h,m){var y,v;return a.default._validateParameters("splitTokens",arguments),v=m!==void 0?(v=/\]/g.exec(m=m),(y=/\[/g.exec(m))&&v?(m=m.slice(0,v.index)+m.slice(v.index+1),y=/\[/g.exec(m),m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[\\[".concat(m,"\\]]"),"g")):v?(m=m.slice(0,v.index)+m.slice(v.index+1),new RegExp("[".concat(m,"\\]]"),"g")):y?(m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[".concat(m,"\\[]"),"g")):new RegExp("[".concat(m,"]"),"g")):/\s/g,h.split(v).filter(function(g){return g})},a.default.prototype.trim=function(h){return a.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var f=a.default;o.default=f},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,o.default=r},{"../core/main":280}],323:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function u(h){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=(r("./p5.Geometry"),function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var m=d();if(m&&m.has(h))return m.get(h);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var _;Object.prototype.hasOwnProperty.call(h,y)&&((_=g?Object.getOwnPropertyDescriptor(h,y):null)&&(_.get||_.set)?Object.defineProperty(v,y,_):v[y]=h[y])}return v.default=h,m&&m.set(h,v),v}(r("../core/constants")));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}l.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},l.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},l.default.prototype.buildGeometry=function(h){return this._renderer.buildGeometry(h)},l.default.prototype.freeGeometry=function(h){this._renderer._freeBuffers(h.gid)},l.default.prototype.plane=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,_=(this._assert3d("plane"),l.default._validateParameters("plane",arguments),"plane|".concat(v,"|").concat(g));return this._renderer.geometryInHash(_)||((h=new l.default.Geometry(v,g,function(){for(var x,b,S=0;S<=this.detailY;S++)for(var T=S/this.detailY,M=0;M<=this.detailX;M++)x=M/this.detailX,b=new l.default.Vector(x-.5,T-.5,0),this.vertices.push(b),this.uvs.push(x,T)})).computeFaces().computeNormals(),v<=1&&g<=1?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(_,h)),this._renderer.drawBuffersScaled(_,m,y,1),this},l.default.prototype.box=function(h,m,y,v,g){this._assert3d("box"),l.default._validateParameters("box",arguments),h===void 0&&(h=50),m===void 0&&(m=h),y===void 0&&(y=m);var _,x=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,x=(g===void 0&&(g=x?1:4),"box|".concat(v=v===void 0?x?1:4:v,"|").concat(g));return this._renderer.geometryInHash(x)||((_=new l.default.Geometry(v,g,function(){var b=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(S,T){for(var T=4*T,M=0;M<4;M++){var R=S[M],R=new l.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);b.vertices.push(R),b.uvs.push(1&M,(2&M)/2)}b.faces.push([T,1+T,2+T]),b.faces.push([2+T,1+T,3+T])})})).computeNormals(),v<=4&&g<=4?_._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(x,_)),this._renderer.drawBuffersScaled(x,h,m,y),this},l.default.prototype.sphere=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(h,h,h,m,y),this};function p(h,m,y,v,g,_,x){h=h<=0?1:h,m=m<0?0:m,y=y<=0?h:y,v=v<3?3:v;for(var b,S,T=(_=_===void 0||_)?-2:0,M=(g=g<1?1:g)+((x=x===void 0?m!==0:x)?2:0),R=Math.atan2(h-m,y),L=Math.sin(R),P=Math.cos(R),C=T;C<=M;++C){var k=C/g,D=y*k,F=void 0,F=C<0?(k=D=0,h):g<C?(D=y,k=1,m):h+(m-h)*k;for(C!==-2&&C!==g+2||(F=0),D-=y/2,b=0;b<v;++b){var G=b/(v-1),Q=2*Math.PI*G,z=Math.sin(Q),Q=Math.cos(Q),V=(this.vertices.push(new l.default.Vector(z*F,D,Q*F)),void 0),V=C<0?new l.default.Vector(0,-1,0):g<C&&m?new l.default.Vector(0,1,0):new l.default.Vector(z*P,L,Q*P);this.vertexNormals.push(V),this.uvs.push(G,k)}}var W=0;if(_){for(S=0;S<v;++S)this.faces.push([W+S,W+v+(S+1)%v,W+v+S]);W+=2*v}for(C=0;C<g;++C){for(b=0;b<v;++b){var Y=(b+1)%v;this.faces.push([W+b,W+Y,W+v+Y]),this.faces.push([W+b,W+v+Y,W+v+b])}W+=v}if(x)for(W+=v,b=0;b<v;++b)this.faces.push([W+b,W+(b+1)%v,W+v])}l.default.prototype.cylinder=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,_=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],x=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],b=(this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),"cylinder|".concat(v,"|").concat(g,"|").concat(_,"|").concat(x));return this._renderer.geometryInHash(b)||(h=new l.default.Geometry(v,g),p.call(h,1,1,1,v,g,_,x),v<=24&&g<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,h)),this._renderer.drawBuffersScaled(b,m,y,m),this},l.default.prototype.cone=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,_=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],x=(this._assert3d("cone"),l.default._validateParameters("cone",arguments),"cone|".concat(v,"|").concat(g,"|").concat(_));return this._renderer.geometryInHash(x)||(h=new l.default.Geometry(v,g),p.call(h,1,0,1,v,g,_,!1),v<=24&&g<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,m,y,m),this},l.default.prototype.ellipsoid=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:m,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,_=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,x=(this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(g,"|").concat(_));return this._renderer.geometryInHash(x)||((h=new l.default.Geometry(g,_,function(){for(var b=0;b<=this.detailY;b++)for(var S=b/this.detailY,T=Math.PI*S-Math.PI/2,M=Math.cos(T),R=Math.sin(T),L=0;L<=this.detailX;L++){var P=L/this.detailX,k=2*Math.PI*P,C=Math.cos(k),k=Math.sin(k),k=new l.default.Vector(M*k,R,M*C);this.vertices.push(k),this.vertexNormals.push(k),this.uvs.push(P,S)}})).computeFaces(),g<=24&&_<=24?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,m,y,v),this},l.default.prototype.torus=function(h,x,y,v){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),h===void 0)h=50;else if(!h)return;if(x===void 0)x=10;else if(!x)return;y===void 0&&(y=24),v===void 0&&(v=16);var g,_=(x/h).toPrecision(4),x="torus|".concat(_,"|").concat(y,"|").concat(v);return this._renderer.geometryInHash(x)||((g=new l.default.Geometry(y,v,function(){for(var b=0;b<=this.detailY;b++)for(var S=b/this.detailY,T=2*Math.PI*S,M=Math.cos(T),R=Math.sin(T),L=1+_*M,P=0;P<=this.detailX;P++){var C=P/this.detailX,k=2*Math.PI*C,F=Math.cos(k),k=Math.sin(k),D=new l.default.Vector(L*F,L*k,_*R),F=new l.default.Vector(M*F,M*k,R);this.vertices.push(D),this.vertexNormals.push(F),this.uvs.push(C,S)}})).computeFaces(),y<=24&&v<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,g)),this._renderer.drawBuffersScaled(x,h,h,h),this},l.default.RendererGL.prototype.point=function(h,m){var y=[];return y.push(new l.default.Vector(h,m,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(x){var m=x[0],y=x[1],v=x[2],g=x[3],_=x[4],x=x[5],b=(this.geometryInHash("tri")||((b=new l.default.Geometry(1,1,function(){var M=[];M.push(new l.default.Vector(0,0,0)),M.push(new l.default.Vector(1,0,0)),M.push(new l.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=M,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),b.computeNormals(),this.createBuffers("tri",b)),this.uMVMatrix.copy());try{var S=Math.sign(m*g-v*y+v*x-_*g+_*y-m*x),T=new l.default.Matrix([v-m,g-y,0,0,_-m,x-y,0,0,0,0,S,0,m,y,0,1]).mult(this.uMVMatrix);this.uMVMatrix=T,this.drawBuffers("tri")}finally{this.uMVMatrix=b}return this},l.default.RendererGL.prototype.ellipse=function(h){this.arc(h[0],h[1],h[2],h[3],0,c.TWO_PI,c.OPEN,h[4])},l.default.RendererGL.prototype.arc=function(){var h,m=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],v=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3],_=arguments.length<=4?void 0:arguments[4],x=arguments.length<=5?void 0:arguments[5],b=arguments.length<=6?void 0:arguments[6],S=(arguments.length<=7?void 0:arguments[7])||25,T=(Math.abs(x-_)>=c.TWO_PI?"".concat(M="ellipse","|"):"".concat(M="arc","|").concat(_,"|").concat(x,"|").concat(b,"|")).concat(S,"|"),M=(this.geometryInHash(T)||((h=new l.default.Geometry(S,1,function(){if(_.toFixed(10)!==x.toFixed(10)){b!==c.PIE&&b!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=S;R++){var P=(x-_)*(R/S)+_,L=.5+Math.cos(P)/2,P=.5+Math.sin(P)/2;this.vertices.push(new l.default.Vector(L,P,0)),this.uvs.push([L,P]),R<S-1&&(this.faces.push([0,R+1,R+2]),this.edges.push([R+1,R+2]))}switch(b){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case c.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case c.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),S<=50?h._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(M," with more than 50 detail")),this.createBuffers(T,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,y,0]),this.uMVMatrix.scale(v,g,1),this.drawBuffers(T)}finally{this.uMVMatrix=M}return this},l.default.RendererGL.prototype.rect=function(h){var m=h[0],y=h[1],v=h[2],g=h[3];if(h[4]===void 0){var b=this._pInst._glAttributes.perPixelLighting,_=h[4]||(b?1:24),x=h[5]||(b?1:16),b="rect|".concat(_,"|").concat(x),S=(this.geometryInHash(b)||((S=new l.default.Geometry(_,x,function(){for(var V=0;V<=this.detailY;V++)for(var W=V/this.detailY,Y=0;Y<=this.detailX;Y++){var J=Y/this.detailX,ie=new l.default.Vector(J,W,0);this.vertices.push(ie),this.uvs.push(J,W)}0<_&&0<x&&(this.edges=[[0,_],[_,(_+1)*(x+1)-1],[(_+1)*(x+1)-1,(_+1)*x],[(_+1)*x,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(b,S)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,y,0]),this.uMVMatrix.scale(v,g,1),this.drawBuffers(b)}finally{this.uMVMatrix=S}}else{var b=h[4],S=h[5]===void 0?b:h[5],T=h[6]===void 0?S:h[6],h=h[7]===void 0?T:h[7],k=v,M=g,P=((k+=m)<m&&(P=m,m=k,k=P),(M+=y)<y&&(P=y,y=M,M=P),Math.min((k-m)/2,(M-y)/2)),R=(P<b&&(b=P),P<S&&(S=P),P<T&&(T=P),P<h&&(h=P),m),L=y,P=k,m=M,C=(this.beginShape(),S!==0?(this.vertex(P-S,L),this.quadraticVertex(P,L,P,L+S)):this.vertex(P,L),T!==0?(this.vertex(P,m-T),this.quadraticVertex(P,m,P-T,m)):this.vertex(P,m),h!==0?(this.vertex(R+h,m),this.quadraticVertex(R,m,R,m-h)):this.vertex(R,m),b!==0?(this.vertex(R,L+b),this.quadraticVertex(R,L,R+b,L)):this.vertex(R,L),!(this.immediateMode.geometry.uvs.length=0)),y=!1,k=void 0;try{for(var D,F=this.immediateMode.geometry.vertices[Symbol.iterator]();!(C=(D=F.next()).done);C=!0){var G=D.value,z=(G.x-R)/v,Q=(G.y-L)/g;this.immediateMode.geometry.uvs.push(z,Q)}}catch(I){y=!0,k=I}finally{try{C||F.return==null||F.return()}finally{if(y)throw k}}this.endShape(c.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(h,m,y,v,g,_,x,b,S,T,M,R){var L=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,P=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,C="quad|".concat(h,"|").concat(m,"|").concat(y,"|").concat(v,"|").concat(g,"|").concat(_,"|").concat(x,"|").concat(b,"|").concat(S,"|").concat(T,"|").concat(M,"|").concat(R,"|").concat(L,"|").concat(P);if(!this.geometryInHash(C)){var k=new l.default.Geometry(L,P,function(){for(var Y=1/(this.detailX-1),J=1/(this.detailY-1),ie=0;ie<this.detailY;ie++)for(var I=0;I<this.detailX;I++){var O=I*Y,H=ie*J;this.vertices.push(new l.default.Vector((1-O)*((1-H)*h+H*T)+O*((1-H)*v+H*x),(1-O)*((1-H)*m+H*M)+O*((1-H)*g+H*b),(1-O)*((1-H)*y+H*R)+O*((1-H)*_+H*S))),this.uvs.push([O,H])}});k.faces=[];for(var D=0;D<P-1;D++)for(var F=0;F<L-1;F++){var G=F+D*L,z=F+1+(D+1)*L,Q=F+(D+1)*L;k.faces.push([G,F+1+D*L,z]),k.faces.push([G,z,Q])}k.computeNormals();for(var V=[k.edges.length=0,2,3,1],W=0;W<V.length;W++)k.edges.push([V[W],V[(W+1)%V.length]]);k._edgesToVertices(),this.createBuffers(C,k)}return this.drawBuffers(C),this},l.default.RendererGL.prototype.bezier=function(h,m,y,v,g,_,x,b,S,T,M,R){arguments.length===8&&(M=b,T=x,b=_,x=g,g=v,v=y,y=_=S=R=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=L;P++){var C=Math.pow(1-P/L,3),k=P/L*3*Math.pow(1-P/L,2),D=3*Math.pow(P/L,2)*(1-P/L),F=Math.pow(P/L,3);this.vertex(h*C+v*k+x*D+T*F,m*C+g*k+b*D+M*F,y*C+_*k+S*D+R*F)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(h,m,y,v,g,_,x,b,S,T,M,R){arguments.length===8&&(T=x,M=b,x=g,b=v,g=v=y,y=_=S=R=0);var L=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=L;P++){var C=.5*Math.pow(P/L,3),k=.5*Math.pow(P/L,2),D=P/L*.5;this.vertex(C*(3*v-h-3*x+T)+k*(2*h-5*v+4*x-T)+D*(-h+x)+2*v*.5,C*(3*g-m-3*b+M)+k*(2*m-5*g+4*b-M)+D*(-m+b)+2*g*.5,C*(3*_-y-3*S+R)+k*(2*y-5*_+4*S-R)+D*(-y+S)+2*_*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var h,m,y,v,g,_,x=[],b=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,M=0,R=1,L=0;M<1;){if(_=parseFloat(M.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(_),R.toFixed(6)===T.toFixed(6)){_=parseFloat(R.toFixed(6))+parseFloat(M.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(_);break}M+=T,R-=T,++L}}for(var P=this._lookUpTableBezier.length,C=[],k=0;k<4;k++)C.push([]);C[0]=this.immediateMode.geometry.vertexColors.slice(-4),C[3]=this.curFillColor.slice();var D=[];for(k=0;k<4;k++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),S===6){this.isBezier=!0;var x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(x[0]-x[1],b[0]-b[1]),z=Math.hypot(x[1]-x[2],b[1]-b[2]),G=Math.hypot(x[2]-x[3],b[2]-b[3]),z=F+z+G;for(F/=z,G/=z,g=0;g<4;g++)C[1].push(C[0][g]*(1-F)+C[3][g]*F),C[2].push(C[0][g]*G+C[3][g]*(1-G)),D[1].push(D[0][g]*(1-F)+D[3][g]*F),D[2].push(D[0][g]*G+D[3][g]*(1-G));for(v=0;v<P;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=h=m=0;k<4;k++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[v][k]*C[k][g],this.curStrokeColor[g]+=this._lookUpTableBezier[v][k]*D[k][g];h+=x[k]*this._lookUpTableBezier[v][k],m+=b[k]*this._lookUpTableBezier[v][k]}this.vertex(h,m)}this.curFillColor=C[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){this.isBezier=!0,x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Q=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],V=Math.hypot(x[0]-x[1],b[0]-b[1],Q[0]-Q[1]),z=Math.hypot(x[1]-x[2],b[1]-b[2],Q[1]-Q[2]),W=Math.hypot(x[2]-x[3],b[2]-b[3],Q[2]-Q[3]),S=V+z+W;for(V/=S,W/=S,g=0;g<4;g++)C[1].push(C[0][g]*(1-V)+C[3][g]*V),C[2].push(C[0][g]*W+C[3][g]*(1-W)),D[1].push(D[0][g]*(1-V)+D[3][g]*V),D[2].push(D[0][g]*W+D[3][g]*(1-W));for(v=0;v<P;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=h=m=y=0;k<4;k++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[v][k]*C[k][g],this.curStrokeColor[g]+=this._lookUpTableBezier[v][k]*D[k][g];h+=x[k]*this._lookUpTableBezier[v][k],m+=b[k]*this._lookUpTableBezier[v][k],y+=Q[k]*this._lookUpTableBezier[v][k]}this.vertex(h,m,y)}this.curFillColor=C[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var h,m,y,v,g,_,x=[],b=[],S=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var T=1/this._lutQuadraticDetail,M=0,R=1,L=0;M<1;){if(_=parseFloat(M.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(_),R.toFixed(6)===T.toFixed(6)){_=parseFloat(R.toFixed(6))+parseFloat(M.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(_);break}M+=T,R-=T,++L}}for(var P=this._lookUpTableQuadratic.length,C=[],k=0;k<3;k++)C.push([]);C[0]=this.immediateMode.geometry.vertexColors.slice(-4),C[2]=this.curFillColor.slice();var D=[];for(k=0;k<3;k++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),S===4){this.isQuadratic=!0;var x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],F=Math.hypot(x[0]-x[1],b[0]-b[1]);for(F/=F+Math.hypot(x[1]-x[2],b[1]-b[2]),g=0;g<4;g++)C[1].push(C[0][g]*(1-F)+C[2][g]*F),D[1].push(D[0][g]*(1-F)+D[2][g]*F);for(v=0;v<P;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=h=m=0;k<3;k++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[v][k]*C[k][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[v][k]*D[k][g];h+=x[k]*this._lookUpTableQuadratic[v][k],m+=b[k]*this._lookUpTableQuadratic[v][k]}this.vertex(h,m)}this.curFillColor=C[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){this.isQuadratic=!0,x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var G=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],z=Math.hypot(x[0]-x[1],b[0]-b[1],G[0]-G[1]);for(z/=z+Math.hypot(x[1]-x[2],b[1]-b[2],G[1]-G[2]),g=0;g<4;g++)C[1].push(C[0][g]*(1-z)+C[2][g]*z),D[1].push(D[0][g]*(1-z)+D[2][g]*z);for(v=0;v<P;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=h=m=y=0;k<3;k++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[v][k]*C[k][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[v][k]*D[k][g];h+=x[k]*this._lookUpTableQuadratic[v][k],m+=b[k]*this._lookUpTableQuadratic[v][k],y+=G[k]*this._lookUpTableQuadratic[v][k]}this.vertex(h,m,y)}this.curFillColor=C[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var h,m,y,v,g,_,x=[],b=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,M=0,R=1,L=0;M<1;){if(_=parseFloat(M.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(_),R.toFixed(6)===T.toFixed(6)){_=parseFloat(R.toFixed(6))+parseFloat(M.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(_);break}M+=T,R-=T,++L}}var P=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<P;g++)m=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],y=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],this.vertex(m,y);for(g=0;g<S;g++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),h=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<P;g++)m=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],y=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],v=h[0]*this._lookUpTableBezier[g][0]+h[1]*this._lookUpTableBezier[g][1]+h[2]*this._lookUpTableBezier[g][2]+h[3]*this._lookUpTableBezier[g][3],this.vertex(m,y,v);for(g=0;g<S;g++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(h,R,y,L,g,_,x,b,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(h),this._pInst.textureMode(c.NORMAL);var T=0,M=(R<=h.width&&(T=R/h.width),1),R=(R+L<=h.width&&(M=(R+L)/h.width),0),L=(y<=h.height&&(R=y/h.height),1);y+g<=h.height&&(L=(y+g)/h.height),this.beginShape(),this.vertex(_,x,0,T,R),this.vertex(_+b,x,0,M,R),this.vertex(_+b,x+S,0,M,L),this.vertex(_,x+S,0,T,L),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var f=l.default;o.default=f},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function u(m){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var y=d();if(y&&y.has(m))return y.get(m);var v,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var x;Object.prototype.hasOwnProperty.call(m,v)&&((x=_?Object.getOwnPropertyDescriptor(m,v):null)&&(x.get||x.set)?Object.defineProperty(g,v,x):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(m,y){for(var v=0;v<y.length;v++){var g=y[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var h=function(){function m(g){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");(this.renderer=g)._pInst.push(),this.identityMatrix=new l.default.Matrix,g.uMVMatrix=new l.default.Matrix,this.geometry=new l.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(m.nextGeometryId),m.nextGeometryId++,this.hasTransform=!1}var y,v;return y=m,(v=[{key:"transformVertices",value:function(g){var _=this;return this.hasTransform?g.map(function(x){return _.renderer.uMVMatrix.multiplyPoint(x)}):g}},{key:"transformNormals",value:function(g){var _=this;return this.hasTransform?g.map(function(x){return _.renderer.uNMatrix.multiplyVec3(x)}):g}},{key:"addGeometry",value:function(g){for(var _,x=this,b=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(T,M){return T===x.identityMatrix.mat4[M]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),S=((_=this.geometry.vertices).push.apply(_,p(this.transformVertices(g.vertices))),(_=this.geometry.vertexNormals).push.apply(_,p(this.transformNormals(g.vertexNormals))),(_=this.geometry.uvs).push.apply(_,p(g.uvs)),this.renderer._doFill&&(_=this.geometry.faces).push.apply(_,p(g.faces.map(function(T){return T.map(function(M){return M+b})}))),this.renderer._doStroke&&(_=this.geometry.edges).push.apply(_,p(g.edges.map(function(T){return T.map(function(M){return M+b})}))),p(g.vertexColors));S.length<4*g.vertices.length;)S.push.apply(S,p(this.renderer.curFillColor));(_=this.geometry.vertexColors).push.apply(_,p(S))}},{key:"addImmediate",value:function(){var g=this.renderer.immediateMode.geometry,_=this.renderer.immediateMode.shapeMode,x=[];if(this.renderer._doFill)if(_===c.TRIANGLE_STRIP||_===c.QUAD_STRIP)for(var b=2;b<g.vertices.length;b++)b%2==0?x.push([b,b-1,b-2]):x.push([b,b-2,b-1]);else if(_===c.TRIANGLE_FAN)for(var S=2;S<g.vertices.length;S++)x.push([0,S-1,S]);else for(var T=0;T<g.vertices.length;T+=3)x.push([T,T+1,T+2]);this.addGeometry(Object.assign({},g,{faces:x}))}},{key:"addRetained",value:function(g){this.addGeometry(g.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&f(y.prototype,v),m}();h.nextGeometryId=0,o.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=function(f){if(f&&f.__esModule)return f;if(f===null||d(f)!=="object"&&typeof f!="function")return{default:f};var h=c();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function d(f){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}u.default.prototype.orbitControl=function(f,h,m,S){var v=this,g=(this._assert3d("orbitControl"),u.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);f===void 0&&(f=1),h===void 0&&(h=f),m===void 0&&(m=1),d(S)!=="object"&&(S={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var M=S.disableTouchActions;this.touchActionsDisabled===!0||M!==void 0&&!M||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var _,x,b,M=S.freeRotation,S=M!==void 0&&M,T=[],M=(this.touches.forEach(function(F){v._renderer.prevTouches.forEach(function(G){F.id===G.id&&(G={x:F.x,y:F.y,px:G.x,py:G.y},T.push(G))})}),this._renderer.prevTouches=this.touches,0),R=0,L=0,P=0,C=0,k=this.height<this.width?this.height:this.width,D=!1;return 0<T.length?(D=0<T[0].x&&T[0].x<this.width&&0<T[0].y&&T[0].y<this.height,T.length===1?(R=-f*((_=T[0]).x-_.px)/k,L=h*(_.y-_.py)/k):(_=T[0],x=T[1],M=-(Math.hypot(_.x-x.x,_.y-x.y)-Math.hypot(_.px-x.px,_.py-x.py))*m*4e-4,P=.5*(_.x+x.x)-.5*(_.px+x.px),C=.5*(_.y+x.y)-.5*(_.py+x.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(M=Math.sign(this._mouseWheelDeltaY)*m,M*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(R=-f*this.movedX/k,L=h*this.movedY/k):this.mouseButton===this.RIGHT&&(P=this.movedX,C=this.movedY*g.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),M!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=M),.001<Math.abs(this._renderer.zoomVelocity)?(S?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),g.projMatrix.mat4[15]!==0&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,R===0&&L===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*R,.6*L),1e-6<this._renderer.rotateVelocity.magSq()?(S?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),P===0&&C===0||!this._renderer.executeRotateAndMove||(_=2*P/this.width,x=2*-C/this.height,this._renderer.moveVelocity.add(.15*_,.15*x)),1e-6<this._renderer.moveVelocity.magSq()?(m=g._getLocalAxes(),f=g.eyeX-g.centerX,h=g.eyeY-g.centerY,k=g.eyeZ-g.centerZ,D=Math.sqrt(f*f+h*h+k*k),M=new u.default.Vector(g.centerX,g.centerY,g.centerZ),M=g.cameraMatrix.multiplyPoint(M),(M=this._renderer.uPMatrix.multiplyAndNormalizePoint(M)).x-=this._renderer.moveVelocity.x,M.y-=this._renderer.moveVelocity.y,L=(R=this._renderer.uPMatrix.mat4)[15]===0?(b=(R[8]+M.x)/R[0]*D,(R[9]+M.y)/R[5]*D):(b=(M.x-R[12])/R[0],(M.y-R[13])/R[5]),g.setPosition(g.eyeX+b*m.x[0]+L*m.y[0],g.eyeY+b*m.x[1]+L*m.y[1],g.eyeZ+b*m.x[2]+L*m.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},u.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];u.default._validateParameters("debugMode",h);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);h[0]===l.GRID?this.registerMethod("post",this._grid(h[1],h[2],h[3],h[4],h[5])):h[0]===l.AXES?this.registerMethod("post",this._axesIcon(h[1],h[2],h[3],h[4])):(this.registerMethod("post",this._grid(h[0],h[1],h[2],h[3],h[4])),this.registerMethod("post",this._axesIcon(h[5],h[6],h[7],h[8])))},u.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var f=this._registeredMethods.post.length-1;0<=f;f--)this._registeredMethods.post[f].toString()!==this._grid().toString()&&this._registeredMethods.post[f].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(f,1)},u.default.prototype._grid=function(f,h,m,y,v){f===void 0&&(f=this.width/2),h===void 0&&(h=Math.round(f/30)<4?4:Math.round(f/30)),m===void 0&&(m=0),y===void 0&&(y=0),v===void 0&&(v=0);var g=f/h,_=f/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var x=0;x<=h;x++)this.beginShape(this.LINES),this.vertex(-_+m,y,x*g-_+v),this.vertex(_+m,y,x*g-_+v),this.endShape();for(var b=0;b<=h;b++)this.beginShape(this.LINES),this.vertex(b*g-_+m,y,-_+v),this.vertex(b*g-_+m,y,_+v),this.endShape();this.pop()}},u.default.prototype._axesIcon=function(f,h,m,y){return f===void 0&&(f=40<this.width/20?this.width/20:40),h===void 0&&(h=-this.width/4),m===void 0&&(m=h),y===void 0&&(y=h),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(h,m,y),this.vertex(h+f,m,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(h,m,y),this.vertex(h,m+f,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(h,m,y),this.vertex(h,m,y+f),this.endShape(),this.pop()}};var p=u.default;o.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.ambientLight=function(u,l,c,d){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var p=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(p._array[0],p._array[1],p._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(u,l,c){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var d=this.color.apply(this,arguments);return this._renderer.specularColors=[d._array[0],d._array[1],d._array[2]],this},a.default.prototype.directionalLight=function(u,v,y,d,p,f){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),u=u instanceof a.default.Color?u:this.color(u,v,y);var h,m,v=arguments[arguments.length-1],y=typeof v=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=v.x,m=v.y,v.z),v=Math.sqrt(h*h+m*m+y*y);return this._renderer.directionalLightDirections.push(h/v,m/v,y/v),this._renderer.directionalLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(u,y,v,d,p,f){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),u=u instanceof a.default.Color?u:this.color(u,y,v);var h,m,y=arguments[arguments.length-1],v=typeof y=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=y.x,m=y.y,y.z);return this._renderer.pointLightPositions.push(h,m,v),this._renderer.pointLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(u){this._renderer.activeImageLight=u,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(u){this.filter(this._renderer._getSphereMapping(u))},a.default.prototype.lights=function(){this._assert3d("lights");var u=this.color("rgb(128,128,128)");return this.ambientLight(u),this.directionalLight(u,0,0,-1),this},a.default.prototype.lightFalloff=function(u,l,c){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),u<0&&(u=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),u===0&&l===0&&c===0&&(u=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=u,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=c,this},a.default.prototype.spotLight=function(u,l,c,d,p,f,h,m,y,v,g){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var _,x,b,S=arguments.length;switch(S){case 11:case 10:_=this.color(u,l,c),x=new a.default.Vector(d,p,f),b=new a.default.Vector(h,m,y);break;case 9:u instanceof a.default.Color?(_=u,x=new a.default.Vector(l,c,d),b=new a.default.Vector(p,f,h),v=m,g=y):d instanceof a.default.Vector?(_=this.color(u,l,c),x=d,b=new a.default.Vector(p,f,h),v=m,g=y):h instanceof a.default.Vector?(_=this.color(u,l,c),x=new a.default.Vector(d,p,f),b=h,v=m,g=y):(_=this.color(u,l,c),x=new a.default.Vector(d,p,f),b=new a.default.Vector(h,m,y));break;case 8:v=(b=u instanceof a.default.Color?(_=u,x=new a.default.Vector(l,c,d),new a.default.Vector(p,f,h)):d instanceof a.default.Vector?(_=this.color(u,l,c),x=d,new a.default.Vector(p,f,h)):(_=this.color(u,l,c),x=new a.default.Vector(d,p,f),h),m);break;case 7:u instanceof a.default.Color&&l instanceof a.default.Vector?(_=u,x=l,b=new a.default.Vector(c,d,p),v=f,g=h):u instanceof a.default.Color&&p instanceof a.default.Vector?(_=u,x=new a.default.Vector(l,c,d),b=p,v=f,g=h):d instanceof a.default.Vector&&p instanceof a.default.Vector?(_=this.color(u,l,c),x=d,b=p,v=f,g=h):b=u instanceof a.default.Color?(_=u,x=new a.default.Vector(l,c,d),new a.default.Vector(p,f,h)):d instanceof a.default.Vector?(_=this.color(u,l,c),x=d,new a.default.Vector(p,f,h)):(_=this.color(u,l,c),x=new a.default.Vector(d,p,f),h);break;case 6:d instanceof a.default.Vector&&p instanceof a.default.Vector?(_=this.color(u,l,c),x=d,b=p,v=f):u instanceof a.default.Color&&p instanceof a.default.Vector?(_=u,x=new a.default.Vector(l,c,d),b=p,v=f):u instanceof a.default.Color&&l instanceof a.default.Vector&&(_=u,x=l,b=new a.default.Vector(c,d,p),v=f);break;case 5:u instanceof a.default.Color&&l instanceof a.default.Vector&&c instanceof a.default.Vector?(_=u,x=l,b=c,v=d,g=p):d instanceof a.default.Vector&&p instanceof a.default.Vector?(_=this.color(u,l,c),x=d,b=p):u instanceof a.default.Color&&p instanceof a.default.Vector?(_=u,x=new a.default.Vector(l,c,d),b=p):u instanceof a.default.Color&&l instanceof a.default.Vector&&(_=u,x=l,b=new a.default.Vector(c,d,p));break;case 4:_=u,x=l,b=c,v=d;break;case 3:_=u,x=l,b=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(S<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(_._array[0],_._array[1],_._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(x.x,x.y,x.z),b.normalize(),this._renderer.spotLightDirections.push(b.x,b.y,b.z),v===void 0&&(v=Math.PI/3),g!==void 0&&g<1?(g=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):g===void 0&&(g=100),v=this._renderer._pInst._toRadians(v),this._renderer.spotLightAngle.push(Math.cos(v)),this._renderer.spotLightConc.push(g),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return a.default._validateParameters("noLights",l),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var u=(f=r("../core/main"))&&f.__esModule?f:{default:f};function l(h){return function(m){if(Array.isArray(m)){for(var y=0,v=new Array(m.length);y<m.length;y++)v[y]=m[y];return v}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(h,m,y,v,g,_,x){try{var b=h[_](x),S=b.value}catch(T){return void y(T)}b.done?m(S):Promise.resolve(S).then(v,g)}function d(h){return function(){var m=this,y=arguments;return new Promise(function(v,g){var _=h.apply(m,y);function x(S){c(_,v,g,x,b,"next",S)}function b(S){c(_,v,g,x,b,"throw",S)}x(void 0)})}}function p(h){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}r("./p5.Geometry"),u.default.prototype.loadModel=function(h,m){u.default._validateParameters("loadModel",arguments);var y,v,g=!1,_=!1,x=!1,b=h.slice(-4),S=(m&&p(m)==="object"?(g=m.normalize||!1,y=m.successCallback,v=m.failureCallback,b=m.fileType||b,_=m.flipU||!1,x=m.flipV||!1):typeof m=="boolean"?(g=m,y=arguments[2],v=arguments[3],arguments[4]!==void 0&&(b=arguments[4])):(y=typeof m=="function"?m:void 0,v=arguments[2],arguments[3]!==void 0&&(b=arguments[3])),new u.default.Geometry),T=(S.gid="".concat(h,"|").concat(g),this);function M(){return(M=d(regeneratorRuntime.mark(function L(P){var C,k,D,F;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:for(C=[],k=0;k<P.length;k++)(D=P[k].match(/^mtllib (.+)/))&&function(){var z="",Q=D[1],V=h.split("/");z=1<V.length?(V.pop(),V.join("/")+"/"+Q):Q,C.push(function(){return R.apply(this,arguments)}(z).then(function(W){return W?(Y=T,J=z,new Promise(function(ie,I){var O=null,H={};Y.loadStrings(J,function(q){for(var Z=0;Z<q.length;++Z){var oe,pe=q[Z].trim().split(/\s+/);pe[0]==="newmtl"?(oe=pe[1],H[O=oe]={}):pe[0]==="Kd"?H[O].diffuseColor=[parseFloat(pe[1]),parseFloat(pe[2]),parseFloat(pe[3])]:pe[0]==="Ka"?H[O].ambientColor=[parseFloat(pe[1]),parseFloat(pe[2]),parseFloat(pe[3])]:pe[0]==="Ks"?H[O].specularColor=[parseFloat(pe[1]),parseFloat(pe[2]),parseFloat(pe[3])]:pe[0]==="map_Kd"&&(H[O].texturePath=pe[1])}ie(H)},I)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(z)),{});var Y,J}).catch(function(W){return console.warn("Error loading MTL file: ".concat(z),W),{}}))}();return G.prev=2,G.next=5,Promise.all(C);case 5:return F=G.sent,F=Object.assign.apply(Object,[{}].concat(l(F))),G.abrupt("return",F);case 10:return G.prev=10,G.t0=G.catch(2),G.abrupt("return",{});case 13:case"end":return G.stop()}},L,null,[[2,10]])}))).apply(this,arguments)}function R(){return(R=d(regeneratorRuntime.mark(function L(P){var C;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,k.next=3,fetch(P,{method:"HEAD"});case 3:return C=k.sent,k.abrupt("return",C.ok);case 7:return k.prev=7,k.t0=k.catch(0),k.abrupt("return",!1);case 10:case"end":return k.stop()}},L,null,[[0,7]])}))).apply(this,arguments)}return b.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(L){(function(P,C){if(function(k){for(var D=new DataView(k),F=[115,111,108,105,100],G=0;G<5;G++)if(function(z,Q,V){for(var W=0,Y=z.length;W<Y;W++)if(z[W]!==Q.getUint8(V+W,!1))return;return 1}(F,D,G))return;return 1}(C))(function(k,D){for(var F,G,z,Q,V,W,Y,J=new DataView(D),ie=J.getUint32(80,!0),I=!1,O=0;O<70;O++)J.getUint32(O,!1)===1129270351&&J.getUint8(O+4)===82&&J.getUint8(O+5)===61&&(I=!0,Q=[],V=J.getUint8(O+6)/255,W=J.getUint8(O+7)/255,Y=J.getUint8(O+8)/255);for(var H=0;H<ie;H++){for(var q,Z=84+50*H,oe=J.getFloat32(Z,!0),pe=J.getFloat32(4+Z,!0),be=J.getFloat32(8+Z,!0),me=(I&&(q=J.getUint16(48+Z,!0),z=32768&q?(F=V,G=W,Y):(F=(31&q)/31,G=(q>>5&31)/31,(q>>10&31)/31)),new u.default.Vector(oe,pe,be)),ce=1;ce<=3;ce++){var te=Z+12*ce,te=new u.default.Vector(J.getFloat32(te,!0),J.getFloat32(4+te,!0),J.getFloat32(8+te,!0));k.vertices.push(te),k.vertexNormals.push(me),I&&Q.push(F,G,z)}k.faces.push([3*H,3*H+1,3*H+2]),k.uvs.push([0,0],[0,0],[0,0])}})(P,C);else{if(C=new DataView(C),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");C=new TextDecoder("utf-8").decode(C).split(`
`),function(k,D){for(var F,G,z="",Q=[],V=0;V<D.length;++V){for(var W=D[V].trim(),Y=W.split(" "),J=0;J<Y.length;++J)Y[J]===""&&Y.splice(J,1);if(Y.length!==0)switch(z){case"":if(Y[0]!=="solid")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));z="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));F=new u.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),k.vertexNormals.push(F,F,F),z="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));z="vertex";break;case"vertex":if(Y[0]==="vertex")G=new u.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),k.vertices.push(G),k.uvs.push([0,0]),Q.push(k.vertices.indexOf(G));else{if(Y[0]!=="endloop")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));k.faces.push(Q),Q=[],z="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));z="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(W),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));F=new u.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),k.vertexNormals.push(F,F,F),z="facet normal"}break;default:console.error('Invalid state "'.concat(z,'"'))}}}(P,C)}})(S,L),g&&S.normalize(),_&&S.flipU(),x&&S.flipV(),T._decrementPreload(),typeof y=="function"&&y(S)},v):b.match(/\.obj$/i)?this.loadStrings(h,function(){var L=d(regeneratorRuntime.mark(function P(C){var k;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,function(){return M.apply(this,arguments)}(C);case 3:k=D.sent,function(F,G){for(var z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},Q={v:[],vt:[],vn:[]},V={},W=null,Y=new Set,J=!1,ie=!1,I=0;I<G.length;++I){var O=G[I].trim().split(/\b\s+/);if(0<O.length){if(O[0]==="usemtl")W=O[1];else if(O[0]==="v"||O[0]==="vn"){var H=new u.default.Vector(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3]));Q[O[0]].push(H)}else if(O[0]==="vt")H=[parseFloat(O[1]),1-parseFloat(O[2])],Q[O[0]].push(H);else if(O[0]==="f")for(var q=3;q<O.length;++q){for(var Z=[],oe=[1,q-1,q],pe=0;pe<oe.length;++pe){for(var be,me=O[oe[pe]],ce=me.split("/"),te=0;te<ce.length;te++)ce[te]=parseInt(ce[te])-1;V[me]||(V[me]={}),V[me][W]===void 0?(be=F.vertices.length,F.vertices.push(Q.v[ce[0]].copy()),F.uvs.push(Q.vt[ce[1]]?Q.vt[ce[1]].slice():[0,0]),F.vertexNormals.push(Q.vn[ce[2]]?Q.vn[ce[2]].copy():new u.default.Vector),V[me][W]=be,Z.push(be),W&&z[W]&&z[W].diffuseColor&&Y.add(Q.v[ce[0]])):Z.push(V[me][W])}if(Z[0]!==Z[1]&&Z[0]!==Z[2]&&Z[1]!==Z[2])if(F.faces.push(Z),W&&z[W]&&z[W].diffuseColor){J=J=!0;for(var ue=z[W].diffuseColor,ge=0;ge<Z.length;ge++)F.vertexColors.push(ue[0]),F.vertexColors.push(ue[1]),F.vertexColors.push(ue[2])}else ie=!0}}}if(F.vertexNormals.length===0&&F.computeNormals(),J===ie)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(S,C,k),D.next=11;break;case 7:return D.prev=7,D.t0=D.catch(0),v?v(D.t0):u.default._friendlyError("Error during parsing: "+D.t0.message),D.abrupt("return");case 11:return D.prev=11,g&&S.normalize(),_&&S.flipU(),x&&S.flipV(),T._decrementPreload(),typeof y=="function"&&y(S),D.finish(11);case 18:case"end":return D.stop()}},P,null,[[0,7,11,18]])}));return function(P){return L.apply(this,arguments)}}(),v):(u.default._friendlyFileLoadError(3,h),v?v():u.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),S},u.default.prototype.model=function(h){this._assert3d("model"),u.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var f=u.default;o.default=f},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants"));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}r("./p5.Texture"),l.default.prototype.loadShader=function(f,h,m,y){l.default._validateParameters("loadShader",arguments),y=y||console.error;function v(){_._decrementPreload(),m&&m(g)}var g=new l.default.Shader,_=this,x=!1,b=!1;return this.loadStrings(f,function(S){g._vertSrc=S.join(`
`),b=!0,x&&v()},y),this.loadStrings(h,function(S){g._fragSrc=S.join(`
`),x=!0,b&&v()},y),g},l.default.prototype.createShader=function(f,h){return l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,f,h)},l.default.prototype.createFilterShader=function(f){l.default._validateParameters("createFilterShader",arguments);var h=f.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,h=new l.default.Shader(this._renderer,h,f);return this._renderer.GL?h.ensureCompiledOnContext(this):h.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),h},l.default.prototype.shader=function(f){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),f.ensureCompiledOnContext(this),f.isStrokeShader()?this._renderer.userStrokeShader=f:(this._renderer.userFillShader=f,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(f){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),f.gifProperties&&f._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=f,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(f){f!==c.IMAGE&&f!==c.NORMAL?console.warn("You tried to set ".concat(f," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=f},l.default.prototype.textureWrap=function(f){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:f,m=(this._renderer.textureWrapX=f,this._renderer.textureWrapY=h,!0),y=!1,v=void 0;try{for(var g,_=this._renderer.textures.values()[Symbol.iterator]();!(m=(g=_.next()).done);m=!0)g.value.setWrapMode(f,h)}catch(x){y=!0,v=x}finally{try{m||_.return==null||_.return()}finally{if(y)throw v}}},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return l.default._validateParameters("normalMaterial",h),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(f,h,m){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(f,h,m,y){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=v._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.specularMaterial=function(f,h,m,y){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=v._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.shininess=function(f){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=f=f<1?1:f,this},l.default.prototype.metalness=function(f){return this._assert3d("metalness"),f=1-Math.exp(-f/100),this._renderer._useMetalness=f,this},l.default.RendererGL.prototype._applyColorBlend=function(f,v){var m=this.GL,y=this.drawMode===c.TEXTURE,v=v||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==c.BLEND||f[f.length-1]<1||this._isErasing;return v!==this._isBlending&&(v||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=v),this._applyBlendMode(),f},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var f=this.GL;switch(this.curBlendMode){case c.BLEND:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case c.ADD:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE);break;case c.REMOVE:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ZERO,f.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.DST_COLOR,f.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:f.blendEquationSeparate(f.FUNC_ADD,f.FUNC_ADD),f.blendFuncSeparate(f.ONE_MINUS_DST_COLOR,f.ONE_MINUS_SRC_COLOR,f.ONE,f.ONE);break;case c.REPLACE:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ZERO);break;case c.SUBTRACT:f.blendEquationSeparate(f.FUNC_REVERSE_SUBTRACT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(f.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(f.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(r,s,o){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}a.default.prototype.camera=function(){var l;this._assert3d("camera");for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("camera",d),(l=this._renderer._curCamera).camera.apply(l,d),this},a.default.prototype.perspective=function(){var l;this._assert3d("perspective");for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("perspective",d),(l=this._renderer._curCamera).perspective.apply(l,d),this},a.default.prototype.linePerspective=function(l){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(l===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=l},a.default.prototype.ortho=function(){var l;this._assert3d("ortho");for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("ortho",d),(l=this._renderer._curCamera).ortho.apply(l,d),this},a.default.prototype.frustum=function(){var l;this._assert3d("frustum");for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return a.default._validateParameters("frustum",d),(l=this._renderer._curCamera).frustum.apply(l,d),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var l=new a.default.Camera(this._renderer);return l._computeCameraDefaultSettings(),l._setDefaultCamera(),this._renderer._curCamera=l},a.default.Camera=function(){function l(p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var c,d;return c=l,(d=[{key:"perspective",value:function(y,f,h,m){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),f===void 0&&(f=this.defaultAspectRatio),h===void 0&&(h=this.defaultCameraNear),m===void 0&&(m=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),m<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=h,this.cameraFar=m,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),v=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/f,0,0,0,0,-y*this.yScale,0,0,0,0,(m+h)*v,-1,0,0,2*m*h*v,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(M,T,h,m,y,v){M===void 0&&(M=-this._renderer.width/2),T===void 0&&(T=+this._renderer.width/2),h===void 0&&(h=-this._renderer.height/2),m===void 0&&(m=+this._renderer.height/2),y===void 0&&(y=0),v===void 0&&(v=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var R=T-M,g=m-h,_=(this.cameraFar=v)-y,x=2/R,b=2/g*this.yScale,S=-2/_,T=-(T+M)/R,M=-(m+h)/g,R=-(v+y)/_;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-b,0,0,0,0,S,0,T,M,R,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(M,T,h,m,y,v){M===void 0&&(M=.05*-this._renderer.width),T===void 0&&(T=.05*+this._renderer.width),h===void 0&&(h=.05*+this._renderer.height),m===void 0&&(m=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),v===void 0&&(v=this.defaultCameraFar),this.cameraNear=y;var R=T-M,g=m-h,_=(this.cameraFar=v)-y,x=2*y/R,b=2*y/g*this.yScale,S=-2*v*y/_,T=(T+M)/R,M=(m+h)/g,R=-(v+y)/_;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-b,0,0,T,M,R,-1,0,0,S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(x,f,h,m){var y=this.centerX,v=this.centerY,g=this.centerZ,_=(y-=this.eyeX,v-=this.eyeY,g-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),x=(_.rotate(this._renderer._pInst._toRadians(x),f,h,m),[y*_.mat4[0]+v*_.mat4[4]+g*_.mat4[8],y*_.mat4[1]+v*_.mat4[5]+g*_.mat4[9],y*_.mat4[2]+v*_.mat4[6]+g*_.mat4[10]]);x[0]+=this.eyeX,x[1]+=this.eyeY,x[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,x[0],x[1],x[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var f=this._getLocalAxes();this._rotateView(p,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(p){var f=this._getLocalAxes();this._rotateView(p,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(p,f,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,f,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,f,h,m,y,v,g,_,x){return p===void 0&&(p=this.defaultEyeX,f=this.defaultEyeY,h=this.defaultEyeZ,m=p,y=f,_=1,x=g=v=0),this.eyeX=p,this.eyeY=f,this.eyeZ=h,m!==void 0&&(this.centerX=m,this.centerY=y,this.centerZ=v),g!==void 0&&(this.upX=g,this.upY=_,this.upZ=x),m=this._getLocalAxes(),this.cameraMatrix.set(m.x[0],m.y[0],m.z[0],0,m.x[1],m.y[1],m.z[1],0,m.x[2],m.y[2],m.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-f,-h]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(m,y,h){var v=this._getLocalAxes(),m=[v.x[0]*m,v.x[1]*m,v.x[2]*m],y=[v.y[0]*y,v.y[1]*y,v.y[2]*y],v=[v.z[0]*h,v.z[1]*h,v.z[2]*h];this.camera(this.eyeX+m[0]+y[0]+v[0],this.eyeY+m[1]+y[1]+v[1],this.eyeZ+m[2]+y[2]+v[2],this.centerX+m[0]+y[0]+v[0],this.centerY+m[1]+y[1]+v[1],this.centerZ+m[2]+y[2]+v[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,f,h){var m=p-this.eyeX,y=f-this.eyeY,v=h-this.eyeZ;this.camera(p,f,h,this.centerX+m,this.centerY+y,this.centerZ+v,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var f=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];f<h.length;f++){var m=h[f];this[m]=p[m]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,f,h){var m,y,v,g,_,x,b,S,T,M,R,L,P,C,k,D,F,G;h===0?this.set(p):h===1?this.set(f):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/p.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/p.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),g=new a.default.Vector(p.eyeX,p.eyeY,p.eyeZ),_=new a.default.Vector(f.eyeX,f.eyeY,f.eyeZ),D=new a.default.Vector(p.centerX,p.centerY,p.centerZ),G=new a.default.Vector(f.centerX,f.centerY,f.centerZ),v=a.default.Vector.dist(g,D),m=a.default.Vector.dist(_,G),m=v*Math.pow(m/v,h),v=a.default.Vector.sub(g,_),y=1,1e-6<(F=(C=g.copy().sub(_).sub(D).add(G)).magSq())&&(y=a.default.Vector.dot(v,C)/F,y=Math.max(0,Math.min(y,1))),v=a.default.Vector.lerp(a.default.Vector.lerp(g,D,y),a.default.Vector.lerp(_,G,y),h),C=p.cameraMatrix.createSubMatrix3x3(),F=f.cameraMatrix.createSubMatrix3x3(),g=C.row(2),D=F.row(2),_=C.row(1),G=F.row(1),p=new a.default.Vector,f=new a.default.Vector,x=new a.default.Vector,b=new a.default.Vector,1-(S=.5*((C=(F=F.mult3x3(C.copy().transpose3x3())).diagonal())[0]+C[1]+C[2]-1))<1e-7?(p.set(a.default.Vector.lerp(g,D,h)).normalize(),x.set(p).mult(y*m).add(v),b.set(p).mult((y-1)*m).add(v),f.set(a.default.Vector.lerp(_,G,h)).normalize()):(D=1/(1-S),G=Math.max(C[0],C[1],C[2]),L=F.mat3[1]+F.mat3[3],P=F.mat3[2]+F.mat3[6],k=F.mat3[5]+F.mat3[7],G=G===C[0]?(M=.5*L*(D/=T=Math.sqrt((C[0]-S)*D)),R=.5*P*D,.5*(F.mat3[7]-F.mat3[5])/T):G===C[1]?(R=.5*k*(D/=M=Math.sqrt((C[1]-S)*D)),T=.5*L*D,.5*(F.mat3[2]-F.mat3[6])/M):(T=.5*P*(D/=R=Math.sqrt((C[2]-S)*D)),M=.5*k*D,.5*(F.mat3[3]-F.mat3[1])/R),L=h*Math.atan2(G,S),P=Math.cos(L),C=Math.sin(L),(G=new a.default.Matrix("mat3",[P+(k=1-P)*T*T,k*(D=T*M)+C*R,k*(F=R*T)-C*M,k*D-C*R,P+k*M*M,k*(h=M*R)+C*T,k*F+C*M,k*h-C*T,P+k*R*R])).multiplyVec3(g,p),x.set(p).mult(y*m).add(v),b.set(p).mult((y-1)*m).add(v),G.multiplyVec3(_,f)),this.camera(x.x,x.y,x.z,b.x,b.y,b.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new a.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,g=Math.sqrt(p*p+f*f+h*h),g=(g!==0&&(p/=g,f/=g,h/=g),this.upX),m=(_=this.upY)*h-(x=this.upZ)*f,y=-g*h+x*p,v=g*f-_*p,g=f*v-h*y,_=-p*v+h*m,x=p*y-f*m,b=Math.sqrt(m*m+y*y+v*v),b=(b!==0&&(m/=b,y/=b,v/=b),Math.sqrt(g*g+_*_+x*x));return b!==0&&(g/=b,_/=b,x/=b),{x:[m,y,v],y:[g,_,x],z:[p,f,h]}}},{key:"_orbit",value:function(p,b,x){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,m=Math.hypot(y,v,g),y=new a.default.Vector(y,v,g).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),g=a.default.Vector.cross(v,y).normalize(),_=a.default.Vector.cross(g,v),x=((m=(m*=Math.pow(10,x))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,v))))+b),b=p;(x<=0||x>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),v.mult(Math.cos(x)),_.mult(Math.cos(b)*Math.sin(x)),g.mult(Math.sin(b)*Math.sin(x)),y.set(v).add(_).add(g),this.eyeX=m*y.x+this.centerX,this.eyeY=m*y.y+this.centerY,this.eyeZ=m*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(x,b,T){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,m=Math.hypot(y,v,g),y=new a.default.Vector(y,v,g).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ),g=a.default.Vector.cross(v,y).normalize(),_=a.default.Vector.cross(y,g),M=Math.atan2(b,x),M=(_.mult(Math.sin(M)),g.mult(Math.cos(M)).add(_),Math.sqrt(x*x+b*b)),_=a.default.Vector.cross(y,g),x=((m=(m*=Math.pow(10,T))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),Math.cos(M)),b=Math.sin(M),T=v.dot(y),M=v.dot(g),S=T*x+M*b,T=-T*b+M*x,M=v.dot(_);v.x=S*y.x+T*g.x+M*_.x,v.y=S*y.y+T*g.y+M*_.y,v.z=S*y.z+T*g.z+M*_.z,g.mult(-b),y.mult(x).add(g).mult(m),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,v.x,v.y,v.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&u(c.prototype,d),l}(),a.default.prototype.setCamera=function(l){this._renderer._curCamera=l,this._renderer.uPMatrix.set(l.projMatrix)},r=a.default.Camera,o.default=r},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}r.default.DataArray=function(){function u(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,f=u;if(!(p instanceof f))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(d),this.initialLength=d}var l,c;return l=u,(c=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var d;this.length<this.data.length/2&&(d=1<<Math.ceil(Math.log2(this.length)),(d=new Float32Array(d)).set(this.data.subarray(0,this.length),0),this.data=d)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(d,p){return this.data.slice(d,Math.min(p,this.length))}},{key:"subArray",value:function(d,p){return this.data.subarray(d,Math.min(p,this.length))}},{key:"ensureLength",value:function(d){for(;this.data.length<d;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&a(l.prototype,c),u}(),r=r.default.DataArray,o.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(L,s,o){function a(P){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(P)}function u(P){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(C){return a(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":a(C)})(P)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(R=L("../core/main"))&&R.__esModule?R:{default:R},c=function(P){if(P&&P.__esModule)return P;if(P===null||u(P)!=="object"&&typeof P!="function")return{default:P};var C=f();if(C&&C.has(P))return C.get(P);var k,D={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in P){var G;Object.prototype.hasOwnProperty.call(P,k)&&((G=F?Object.getOwnPropertyDescriptor(P,k):null)&&(G.get||G.set)?Object.defineProperty(D,k,G):D[k]=P[k])}return D.default=P,C&&C.set(P,D),D}(L("../core/constants")),d=L("./p5.Texture"),p=L("./p5.RendererGL");function f(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,f=function(){return P},P)}function h(P,C){return function(k){if(Array.isArray(k))return k}(P)||function(k,D){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]"){var F=[],G=!0,z=!1,Q=void 0;try{for(var V,W=k[Symbol.iterator]();!(G=(V=W.next()).done)&&(F.push(V.value),!D||F.length!==D);G=!0);}catch(Y){z=!0,Q=Y}finally{try{G||W.return==null||W.return()}finally{if(z)throw Q}}return F}}(P,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(P,C,k){return C in P?Object.defineProperty(P,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):P[C]=k,P}function y(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}function v(P,C){for(var k=0;k<C.length;k++){var D=C[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}function g(P,C,k){C&&v(P.prototype,C)}function _(P,C,k){return(_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,F,G){var z=function(Q,V){for(;!Object.prototype.hasOwnProperty.call(Q,V)&&(Q=S(Q))!==null;);return Q}(z,F);if(z)return(z=Object.getOwnPropertyDescriptor(z,F)).get?z.get.call(G):z.value})(P,C,k||P)}function x(P,C){return(x=Object.setPrototypeOf||function(k,D){return k.__proto__=D,k})(P,C)}function b(P){return function(){var C,k=S(P),k=(C=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(C=S(this).constructor,Reflect.construct(k,arguments,C)):k.apply(this,arguments),this);if(!C||u(C)!=="object"&&typeof C!="function"){if(k!==void 0)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return C}}function S(P){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(P)}var T=function(P){var C=D;if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(P&&P.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),P&&x(C,P);var k=b(D);function D(F){var G;return y(this,D),(G=k.call(this,F.target._renderer)).fbo=F,G.yScale=-1,G}return g(D,[{key:"_computeCameraDefaultSettings",value:function(){_(S(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(l.default.Camera),M=(l.default.FramebufferCamera=T,function(){function P(C,k){y(this,P),this.framebuffer=C,this.property=k}return g(P,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),P}()),R=(l.default.FramebufferTexture=M,function(){function P(C){var k=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},F=(y(this,P),this.target=C,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||c.UNSIGNED_BYTE,this.channels=D.channels||(C._renderer._pInst._glAttributes.alpha?c.RGBA:c.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||c.FLOAT,this.textureFiltering=D.textureFiltering||c.LINEAR,D.antialias===void 0?this.antialiasSamples=C._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&C.webglVersion!==c.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||C.pixelDensity(),C._renderer.GL);if(this.gl=F,D.width&&D.height?(G=C._renderer._adjustDimensions(D.width,D.height),this.width=G.adjustedWidth,this.height=G.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=C.width,this.height=C.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=F.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=F.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var G=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=G,this.draw(function(){return k.target.clear()})}return g(P,[{key:"resize",value:function(C,k){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(C,k);C=D.adjustedWidth,k=D.adjustedHeight,this.width=C,this.height=k,this._handleResize()}},{key:"pixelDensity",value:function(C){if(!C)return this.density;this._autoSized=!1,this.density=C,this._handleResize()}},{key:"autoSized",value:function(C){if(C===void 0)return this._autoSized;this._autoSized=C,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var C=this.gl,C=(this.useDepth&&this.target.webglVersion===c.WEBGL&&!C.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===c.WEBGL&&this.depthFormat===c.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),[c.UNSIGNED_BYTE,c.FLOAT,c.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&![c.UNSIGNED_INT,c.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=c.FLOAT),(0,d.checkWebGLCapabilities)(this.target._renderer));C.float||this.format!==c.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&!C.float&&this.depthFormat===c.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),C.halfFloat||this.format!==c.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.channels===c.RGB&&[c.FLOAT,c.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=c.RGBA)}},{key:"_recreateTextures",value:function(){var C=this.gl,k=(this._updateSize(),C.getParameter(C.TEXTURE_BINDING_2D)),D=C.getParameter(C.FRAMEBUFFER_BINDING),F=C.createTexture();if(!F)throw new Error("Unable to create color texture");C.bindTexture(C.TEXTURE_2D,F);var G=this._glColorFormat();if(C.texImage2D(C.TEXTURE_2D,0,G.internalFormat,this.width*this.density,this.height*this.density,0,G.format,G.type,null),this.colorTexture=F,C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,F,0),this.useDepth){var F=C.createTexture();if(!F)throw new Error("Unable to create depth texture");var z=this._glDepthFormat();C.bindTexture(C.TEXTURE_2D,F),C.texImage2D(C.TEXTURE_2D,0,z.internalFormat,this.width*this.density,this.height*this.density,0,z.format,z.type,null),C.framebufferTexture2D(C.FRAMEBUFFER,this.useStencil?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,C.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,this.colorRenderbuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,C.getParameter(C.MAX_SAMPLES))),G.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(z=this._glDepthFormat(),this.depthRenderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,this.depthRenderbuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,C.getParameter(C.MAX_SAMPLES))),z.internalFormat,this.width*this.density,this.height*this.density)),C.bindFramebuffer(C.FRAMEBUFFER,this.aaFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&C.framebufferRenderbuffer(C.FRAMEBUFFER,this.useStencil?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,C.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new M(this,"depthTexture"),F=C.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new M(this,"colorTexture"),G=this.textureFiltering===c.LINEAR?C.LINEAR:C.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{minFilter:G,magFilter:G}),this.target._renderer.textures.set(this.color,this.colorP5Texture),C.bindTexture(C.TEXTURE_2D,k),C.bindFramebuffer(C.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var C,k,D=this.gl,F=this.format===c.FLOAT?D.FLOAT:this.format===c.HALF_FLOAT?this.target.webglVersion===c.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,G=this.channels===c.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===c.WEBGL2?(m(k={},D.FLOAT,m({},D.RGBA,D.RGBA32F)),m(k,D.HALF_FLOAT,m({},D.RGBA,D.RGBA16F)),m(k,D.UNSIGNED_BYTE,(m(C={},D.RGBA,D.RGBA8),m(C,D.RGB,D.RGB8),C)),k[F][G]):this.format===c.HALF_FLOAT?D.RGBA:G,format:G,type:F}}},{key:"_glDepthFormat",value:function(){var D=this.gl,C=this.useStencil?this.depthFormat===c.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===c.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===c.FLOAT?D.FLOAT:D.UNSIGNED_INT,k=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===c.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===c.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===c.WEBGL2?this.depthFormat===c.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:k,type:C}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.color,C=this.depth,k=this.colorRenderbuffer,D=this.depthRenderbuffer,F=(this._deleteTexture(F),C&&this._deleteTexture(C),this.gl);k&&F.deleteRenderbuffer(k),D&&F.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var C=new T(this);return C._computeCameraDefaultSettings(),C._setDefaultCamera(),this.target._renderer._curCamera=C}},{key:"_deleteTexture",value:function(C){this.gl.deleteTexture(C.rawTexture()),this.target._renderer.textures.delete(C)}},{key:"remove",value:function(){var C=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),C.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&C.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&C.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&C.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var C=this.gl,k=(C.bindFramebuffer(C.READ_FRAMEBUFFER,this.aaFramebuffer),C.bindFramebuffer(C.DRAW_FRAMEBUFFER,this.framebuffer),[[C.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&k.push([C.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,F=k;D<F.length;D++){var z=h(F[D],2),G=z[0],z=z[1];C.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,G,z)}}}},{key:"end",value:function(){var C=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(C.bindFramebuffer(C.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(C){this.begin(),C(),this.end()}},{key:"loadPixels",value:function(){var C=this.gl,k=this.target._renderer.activeFramebuffer(),D=(C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,p.readPixelsWebGL)(this.pixels,C,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),k?C.bindFramebuffer(C.FRAMEBUFFER,k._framebufferToBind()):C.bindFramebuffer(C.FRAMEBUFFER,null)}},{key:"get",value:function(C,k,D,F){l.default._validateParameters("p5.Framebuffer.get",arguments);var G=this._glColorFormat();if(C===void 0&&k===void 0)k=C=0,D=this.width,F=this.height;else if(D===void 0&&F===void 0)return(C<0||k<0||C>=this.width||k>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),C=this.target.constrain(C,0,this.width-1),k=this.target.constrain(k,0,this.height-1)),(0,p.readPixelWebGL)(this.gl,this.framebuffer,C*this.density,k*this.density,G.format,G.type);C=this.target.constrain(C,0,this.width-1),k=this.target.constrain(k,0,this.height-1),D=this.target.constrain(D,1,this.width-C),F=this.target.constrain(F,1,this.height-k);for(var z=(0,p.readPixelsWebGL)(void 0,this.gl,this.framebuffer,C*this.density,k*this.density,D*this.density,F*this.density,G.format,G.type),Q=new Uint8ClampedArray(D*F*this.density*this.density*4),V=(Q.fill(255),G.type===this.gl.RGB?3:4),W=0;W<F*this.density;W++)for(var Y=0;Y<D*this.density;Y++)for(var J=0;J<4;J++){var ie,I=4*(W*D*this.density+Y)+J;J<V&&(ie=V==4?I:(W*D*this.density+Y)*V+J,Q[I]=z[ie])}return C=new l.default.Image(D*this.density,F*this.density),C.imageData=C.canvas.getContext("2d").createImageData(C.width,C.height),C.imageData.data.set(Q),C.pixels=C.imageData.data,C.updatePixels(),this.density!==1&&C.resize(D,F),C}},{key:"updatePixels",value:function(){var C=this.gl,k=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=k.format===C.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,F=k.type===C.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof F)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");C.texImage2D(C.TEXTURE_2D,0,k.internalFormat,this.width*this.density,this.height*this.density,0,k.format,k.type,this.pixels),this.colorP5Texture.unbindTexture(),F=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(C.clearDepth(1),C.clear(C.DEPTH_BUFFER_BIT)),this.end()):(C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),this.useDepth&&(C.clearDepth(1),C.clear(C.DEPTH_BUFFER_BIT)),F?C.bindFramebuffer(C.FRAMEBUFFER,F._framebufferToBind()):C.bindFramebuffer(C.FRAMEBUFFER,null))}}]),P}()),L=l.default.Framebuffer=R;o.default=L},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function u(m){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var y=d();if(y&&y.has(m))return y.get(m);var v,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var x;Object.prototype.hasOwnProperty.call(m,v)&&((x=_?Object.getOwnPropertyDescriptor(m,v):null)&&(x.get||x.set)?Object.defineProperty(g,v,x):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(m,y){for(var v=0;v<y.length;v++){var g=y[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}l.default.Geometry=function(){function m(g,_,x){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new l.default.DataArray,this.lineTangentsIn=new l.default.DataArray,this.lineTangentsOut=new l.default.DataArray,this.lineSides=new l.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new l.default.DataArray,this.detailX=g!==void 0?g:1,this.detailY=_!==void 0?_:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,x instanceof Function&&x.call(this)}var y,v;return y=m,(v=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var g=new l.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),_=new l.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),x=0;x<this.vertices.length;x++){var b=this.vertices[x];g.x=Math.min(g.x,b.x),g.y=Math.min(g.y,b.y),g.z=Math.min(g.z,b.z),_.x=Math.max(_.x,b.x),_.y=Math.max(_.y,b.y),_.z=Math.max(_.z,b.z)}var S=new l.default.Vector(_.x-g.x,_.y-g.y,_.z-g.z),T=new l.default.Vector((g.x+_.x)/2,(g.y+_.y)/2,(g.z+_.z)/2);this.boundingBoxCache={min:g,max:_,size:S,offset:T}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var g=0;g<this.vertexColors.length;g+=4)if(this.vertexColors[g+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var g=0;g<this.lineVertexColors.length;g+=4)if(this.lineVertexColors[g+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(g,_){return _%2==0?1-g:g})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(g,_){return _%2==0?g:1-g})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var g,_,x,b=this.detailX+1,S=0;S<this.detailY;S++)for(var T=0;T<this.detailX;T++)_=(S+1)*b+T+1,this.faces.push([S*b+T,g=S*b+T+1,x=(S+1)*b+T]),this.faces.push([x,g,_]);return this}},{key:"_getFaceNormal",value:function(_){var _=this.faces[_],x=this.vertices[_[0]],S=this.vertices[_[1]],_=this.vertices[_[2]],S=l.default.Vector.sub(S,x),_=l.default.Vector.sub(_,x),x=l.default.Vector.cross(S,_),b=l.default.Vector.mag(x),S=b/(l.default.Vector.mag(S)*l.default.Vector.mag(_));return S===0||isNaN(S)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),x):(1<S&&(S=1),x.mult(Math.asin(S)/b))}},{key:"computeNormals",value:function(){var g,_=this,x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:c.FLAT,b=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,S=this.vertexNormals,T=this.vertices,M=this.faces;if(x===c.SMOOTH){for(var R={},L=[],P=Math.pow(10,b===void 0?3:b),C=function(z){return Math.round(z*P)/P},k=function(z){return"".concat(C(z.x),",").concat(C(z.y),",").concat(C(z.z))},D=0;D<T.length;D++){var F=T[D],G=k(F);R[G]===void 0&&(R[G]=L.length,L.push(F))}M.forEach(function(z){for(var Q=0;Q<3;++Q){var V=z[Q],V=T[V],V=k(V);z[Q]=R[V]}}),this.edges.forEach(function(z){for(var Q=0;Q<2;++Q){var V=z[Q],V=T[V],V=k(V);z[Q]=R[V]}}),this.vertices=T=L}for(g=S.length=0;g<T.length;++g)S.push(new l.default.Vector);for(M.forEach(function(z,Q){for(var V=_._getFaceNormal(Q),W=0;W<3;++W){var Y=z[W];S[Y].add(V)}}),g=0;g<T.length;++g)S[g].normalize();return this}},{key:"averageNormals",value:function(){for(var g=0;g<=this.detailY;g++){var _=this.detailX+1,x=l.default.Vector.add(this.vertexNormals[g*_],this.vertexNormals[g*_+this.detailX]),x=l.default.Vector.div(x,2);this.vertexNormals[g*_]=x,this.vertexNormals[g*_+this.detailX]=x}return this}},{key:"averagePoleNormals",value:function(){for(var g=new l.default.Vector(0,0,0),_=0;_<this.detailX;_++)g.add(this.vertexNormals[_]);for(var g=l.default.Vector.div(g,this.detailX),x=0;x<this.detailX;x++)this.vertexNormals[x]=g;g=new l.default.Vector(0,0,0);for(var b=this.vertices.length-1;b>this.vertices.length-1-this.detailX;b--)g.add(this.vertexNormals[b]);g=l.default.Vector.div(g,this.detailX);for(var S=this.vertices.length-1;S>this.vertices.length-1-this.detailX;S--)this.vertexNormals[S]=g;return this}},{key:"_makeTriangleEdges",value:function(){for(var g=this.edges.length=0;g<this.faces.length;g++)this.edges.push([this.faces[g][0],this.faces[g][1]]),this.edges.push([this.faces[g][1],this.faces[g][2]]),this.edges.push([this.faces[g][2],this.faces[g][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var g,_=new Map,x=new Set,b=0;b<this.edges.length;b++){var S,T=this.edges[b-1],M=this.edges[b],R=this.vertices[M[0]],L=this.vertices[M[1]],P=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*M[0],4*(M[0]+1)):[0,0,0,0],C=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*M[1],4*(M[1]+1)):[0,0,0,0],k=L.copy().sub(R).normalize(),D=0<k.magSq();D&&this._addSegment(R,L,P,C,k),0<b&&T[1]===M[0]?x.has(M[0])||(x.add(M[0]),_.delete(M[0]),g&&D&&k.dot(g)<1-1e-8&&this._addJoin(R,g,k,P)):(D&&!x.has(M[0])&&((S=_.get(M[0]))?(this._addJoin(R,S.dir,k,P),_.delete(M[0]),x.add(M[0])):_.set(M[0],{point:R,dir:k.copy().mult(-1),color:P})),g&&!x.has(T[1])&&((S=_.get(T[1]))?(this._addJoin(this.vertices[T[1]],g,S.dir.copy().mult(-1),P),_.delete(T[1]),x.add(T[1])):_.set(T[1],{point:this.vertices[T[1]],dir:g,color:P}),g=void 0)),b!==this.edges.length-1||x.has(M[1])||((R=_.get(M[1]))?(this._addJoin(L,k,R.dir.copy().mult(-1),C),_.delete(M[1]),x.add(M[1])):_.set(M[1],{point:L,dir:k,color:C})),D&&(g=k)}var F=!0,G=!1,z=void 0;try{for(var Q,V=_.values()[Symbol.iterator]();!(F=(Q=V.next()).done);F=!0){var W=Q.value,Y=W.point,J=W.dir,ie=W.color;this._addCap(Y,J,ie)}}catch(I){G=!0,z=I}finally{try{F||V.return==null||V.return()}finally{if(G)throw z}}return this}},{key:"_addSegment",value:function(T,M,x,b,S){var T=T.array(),M=M.array(),R=S.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var L=0,P=[this.lineTangentsIn,this.lineTangentsOut];L<P.length;L++)for(var C=P[L],k=0;k<6;k++)C.push.apply(C,p(R));return(S=this.lineVertices).push.apply(S,p(T).concat(p(M),p(T),p(M),p(M),p(T))),(S=this.lineVertexColors).push.apply(S,p(x).concat(p(b),p(x),p(b),p(b),p(x))),this}},{key:"_addCap",value:function(g,_,x){for(var b,S=g.array(),T=_.array(),M=[0,0,0],R=0;R<6;R++)(b=this.lineVertices).push.apply(b,p(S)),(b=this.lineTangentsIn).push.apply(b,p(T)),(b=this.lineTangentsOut).push.apply(b,M),(b=this.lineVertexColors).push.apply(b,p(x));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(g,_,x,b){for(var S,T=g.array(),M=_.array(),R=x.array(),L=0;L<12;L++)(S=this.lineVertices).push.apply(S,p(T)),(S=this.lineTangentsIn).push.apply(S,p(M)),(S=this.lineTangentsOut).push.apply(S,p(R)),(S=this.lineVertexColors).push.apply(S,p(b));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var g=this.vertices[0].copy(),_=this.vertices[0].copy(),x=0;x<this.vertices.length;x++)g.x=Math.max(g.x,this.vertices[x].x),_.x=Math.min(_.x,this.vertices[x].x),g.y=Math.max(g.y,this.vertices[x].y),_.y=Math.min(_.y,this.vertices[x].y),g.z=Math.max(g.z,this.vertices[x].z),_.z=Math.min(_.z,this.vertices[x].z);for(var b=l.default.Vector.lerp(g,_,.5),S=l.default.Vector.sub(g,_),T=200/Math.max(Math.max(S.x,S.y),S.z),M=0;M<this.vertices.length;M++)this.vertices[M].sub(b),this.vertices[M].mult(T)}return this}}])&&f(y.prototype,v),m}();var h=l.default.Geometry;o.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(d,s,o){d("core-js/modules/es.array.iterator"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.typed-array.float32-array"),d("core-js/modules/es.typed-array.copy-within"),d("core-js/modules/es.typed-array.every"),d("core-js/modules/es.typed-array.fill"),d("core-js/modules/es.typed-array.filter"),d("core-js/modules/es.typed-array.find"),d("core-js/modules/es.typed-array.find-index"),d("core-js/modules/es.typed-array.for-each"),d("core-js/modules/es.typed-array.includes"),d("core-js/modules/es.typed-array.index-of"),d("core-js/modules/es.typed-array.iterator"),d("core-js/modules/es.typed-array.join"),d("core-js/modules/es.typed-array.last-index-of"),d("core-js/modules/es.typed-array.map"),d("core-js/modules/es.typed-array.reduce"),d("core-js/modules/es.typed-array.reduce-right"),d("core-js/modules/es.typed-array.reverse"),d("core-js/modules/es.typed-array.set"),d("core-js/modules/es.typed-array.slice"),d("core-js/modules/es.typed-array.some"),d("core-js/modules/es.typed-array.sort"),d("core-js/modules/es.typed-array.subarray"),d("core-js/modules/es.typed-array.to-locale-string"),d("core-js/modules/es.typed-array.to-string"),d("core-js/modules/es.array.iterator"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.typed-array.float32-array"),d("core-js/modules/es.typed-array.copy-within"),d("core-js/modules/es.typed-array.every"),d("core-js/modules/es.typed-array.fill"),d("core-js/modules/es.typed-array.filter"),d("core-js/modules/es.typed-array.find"),d("core-js/modules/es.typed-array.find-index"),d("core-js/modules/es.typed-array.for-each"),d("core-js/modules/es.typed-array.includes"),d("core-js/modules/es.typed-array.index-of"),d("core-js/modules/es.typed-array.iterator"),d("core-js/modules/es.typed-array.join"),d("core-js/modules/es.typed-array.last-index-of"),d("core-js/modules/es.typed-array.map"),d("core-js/modules/es.typed-array.reduce"),d("core-js/modules/es.typed-array.reduce-right"),d("core-js/modules/es.typed-array.reverse"),d("core-js/modules/es.typed-array.set"),d("core-js/modules/es.typed-array.slice"),d("core-js/modules/es.typed-array.some"),d("core-js/modules/es.typed-array.sort"),d("core-js/modules/es.typed-array.subarray"),d("core-js/modules/es.typed-array.to-locale-string"),d("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(d=d("../core/main"))&&d.__esModule?d:{default:d};function u(p,f){for(var h=0;h<f.length;h++){var m=f[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}var l=Array,c=function(p){return Array.isArray(p)},d=(typeof Float32Array<"u"&&(l=Float32Array,c=function(p){return Array.isArray(p)||p instanceof Float32Array}),a.default.Matrix=function(){function p(){var y=this,v=p;if(y instanceof v)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof a.default&&(this.p5=(v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new l([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var f,h,m;return f=p,m=[{key:"identity",value:function(y){return new a.default.Matrix(y)}}],(h=[{key:"set",value:function(y){var v=arguments;if(y instanceof a.default.Matrix?v=y.mat4:c(y)&&(v=y),v.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(v.length,"."),"p5.Matrix.set");else for(var g=0;g<16;g++)this.mat4[g]=v[g];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var v,g,_,x,b,S;return y instanceof a.default.Matrix?(v=y.mat4[1],g=y.mat4[2],_=y.mat4[3],x=y.mat4[6],b=y.mat4[7],S=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=v,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=g,this.mat4[9]=x,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=_,this.mat4[13]=b,this.mat4[14]=S,this.mat4[15]=y.mat4[15]):c(y)&&(v=y[1],g=y[2],_=y[3],x=y[6],b=y[7],S=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=v,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=g,this.mat4[9]=x,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=_,this.mat4[13]=b,this.mat4[14]=S,this.mat4[15]=y[15]),this}},{key:"invert",value:function(z){z instanceof a.default.Matrix?(v=z.mat4[0],g=z.mat4[1],_=z.mat4[2],x=z.mat4[3],b=z.mat4[4],S=z.mat4[5],T=z.mat4[6],M=z.mat4[7],R=z.mat4[8],L=z.mat4[9],P=z.mat4[10],C=z.mat4[11],k=z.mat4[12],D=z.mat4[13],F=z.mat4[14],G=z.mat4[15]):c(z)&&(v=z[0],g=z[1],_=z[2],x=z[3],b=z[4],S=z[5],T=z[6],M=z[7],R=z[8],L=z[9],P=z[10],C=z[11],k=z[12],D=z[13],F=z[14],G=z[15]);var v,g,_,x,b,S,T,M,R,L,P,C,k,D,F,G,z=v*S-g*b,Q=v*T-_*b,V=v*M-x*b,W=g*T-_*S,Y=g*M-x*S,J=_*M-x*T,ie=R*D-L*k,I=R*F-P*k,O=R*G-C*k,H=L*F-P*D,q=L*G-C*D,Z=P*G-C*F,oe=z*Z-Q*q+V*H+W*O-Y*I+J*ie;return oe?(this.mat4[0]=(S*Z-T*q+M*H)*(oe=1/oe),this.mat4[1]=(_*q-g*Z-x*H)*oe,this.mat4[2]=(D*J-F*Y+G*W)*oe,this.mat4[3]=(P*Y-L*J-C*W)*oe,this.mat4[4]=(T*O-b*Z-M*I)*oe,this.mat4[5]=(v*Z-_*O+x*I)*oe,this.mat4[6]=(F*V-k*J-G*Q)*oe,this.mat4[7]=(R*J-P*V+C*Q)*oe,this.mat4[8]=(b*q-S*O+M*ie)*oe,this.mat4[9]=(g*O-v*q-x*ie)*oe,this.mat4[10]=(k*Y-D*V+G*z)*oe,this.mat4[11]=(L*V-R*Y-C*z)*oe,this.mat4[12]=(S*I-b*H-T*ie)*oe,this.mat4[13]=(v*H-g*I+_*ie)*oe,this.mat4[14]=(D*Q-k*W-F*z)*oe,this.mat4[15]=(R*W-L*Q+P*z)*oe,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],v=this.mat3[1],g=this.mat3[2],_=this.mat3[3],x=this.mat3[4],b=this.mat3[5],S=this.mat3[6],T=this.mat3[7],M=this.mat3[8],R=M*x-b*T,L=-M*_+b*S,P=T*_-x*S,C=y*R+v*L+g*P;return C?(this.mat3[0]=R*(C=1/C),this.mat3[1]=(-M*v+g*T)*C,this.mat3[2]=(b*v-g*x)*C,this.mat3[3]=L*C,this.mat3[4]=(M*y-g*S)*C,this.mat3[5]=(-b*y+g*_)*C,this.mat3[6]=P*C,this.mat3[7]=(-T*y+v*S)*C,this.mat3[8]=(x*y-v*_)*C,this):null}},{key:"transpose3x3",value:function(y){var v=(y=y===void 0?this.mat3:y)[1],g=y[2],_=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=v,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=g,this.mat3[7]=_,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var v=0;v<9;v++)this.mat3[v]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],v=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],g=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],_=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],x=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],b=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],S=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],T=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],M=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],R=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],L=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-v*L+g*R+_*M-x*T+b*S}},{key:"mult",value:function(g){var v;if(g===this||g===this.mat4)v=this.copy().mat4;else if(g instanceof a.default.Matrix)v=g.mat4;else if(c(g))v=g;else{if(arguments.length!==16)return;v=arguments}var g=this.mat4[0],_=this.mat4[1],x=this.mat4[2],b=this.mat4[3];return this.mat4[0]=g*v[0]+_*v[4]+x*v[8]+b*v[12],this.mat4[1]=g*v[1]+_*v[5]+x*v[9]+b*v[13],this.mat4[2]=g*v[2]+_*v[6]+x*v[10]+b*v[14],this.mat4[3]=g*v[3]+_*v[7]+x*v[11]+b*v[15],g=this.mat4[4],_=this.mat4[5],x=this.mat4[6],b=this.mat4[7],this.mat4[4]=g*v[0]+_*v[4]+x*v[8]+b*v[12],this.mat4[5]=g*v[1]+_*v[5]+x*v[9]+b*v[13],this.mat4[6]=g*v[2]+_*v[6]+x*v[10]+b*v[14],this.mat4[7]=g*v[3]+_*v[7]+x*v[11]+b*v[15],g=this.mat4[8],_=this.mat4[9],x=this.mat4[10],b=this.mat4[11],this.mat4[8]=g*v[0]+_*v[4]+x*v[8]+b*v[12],this.mat4[9]=g*v[1]+_*v[5]+x*v[9]+b*v[13],this.mat4[10]=g*v[2]+_*v[6]+x*v[10]+b*v[14],this.mat4[11]=g*v[3]+_*v[7]+x*v[11]+b*v[15],g=this.mat4[12],_=this.mat4[13],x=this.mat4[14],b=this.mat4[15],this.mat4[12]=g*v[0]+_*v[4]+x*v[8]+b*v[12],this.mat4[13]=g*v[1]+_*v[5]+x*v[9]+b*v[13],this.mat4[14]=g*v[2]+_*v[6]+x*v[10]+b*v[14],this.mat4[15]=g*v[3]+_*v[7]+x*v[11]+b*v[15],this}},{key:"apply",value:function(g){var v;if(g===this||g===this.mat4)v=this.copy().mat4;else if(g instanceof a.default.Matrix)v=g.mat4;else if(c(g))v=g;else{if(arguments.length!==16)return;v=arguments}var g=this.mat4,_=g[0],x=g[4],b=g[8],S=g[12],_=(g[0]=v[0]*_+v[1]*x+v[2]*b+v[3]*S,g[4]=v[4]*_+v[5]*x+v[6]*b+v[7]*S,g[8]=v[8]*_+v[9]*x+v[10]*b+v[11]*S,g[12]=v[12]*_+v[13]*x+v[14]*b+v[15]*S,g[1]),x=g[5],b=g[9],S=g[13],_=(g[1]=v[0]*_+v[1]*x+v[2]*b+v[3]*S,g[5]=v[4]*_+v[5]*x+v[6]*b+v[7]*S,g[9]=v[8]*_+v[9]*x+v[10]*b+v[11]*S,g[13]=v[12]*_+v[13]*x+v[14]*b+v[15]*S,g[2]),x=g[6],b=g[10],S=g[14],_=(g[2]=v[0]*_+v[1]*x+v[2]*b+v[3]*S,g[6]=v[4]*_+v[5]*x+v[6]*b+v[7]*S,g[10]=v[8]*_+v[9]*x+v[10]*b+v[11]*S,g[14]=v[12]*_+v[13]*x+v[14]*b+v[15]*S,g[3]),x=g[7],b=g[11],S=g[15];return g[3]=v[0]*_+v[1]*x+v[2]*b+v[3]*S,g[7]=v[4]*_+v[5]*x+v[6]*b+v[7]*S,g[11]=v[8]*_+v[9]*x+v[10]*b+v[11]*S,g[15]=v[12]*_+v[13]*x+v[14]*b+v[15]*S,this}},{key:"scale",value:function(y,v,g){return y instanceof a.default.Vector?(v=y.y,g=y.z,y=y.x):y instanceof Array&&(v=y[1],g=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=v,this.mat4[5]*=v,this.mat4[6]*=v,this.mat4[7]*=v,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(z,q,H,_){q instanceof a.default.Vector?(H=q.y,_=q.z,q=q.x):q instanceof Array&&(H=q[1],_=q[2],q=q[0]);var x=Math.sqrt(q*q+H*H+_*_),x=(q*=1/x,H*=1/x,_*=1/x,this.mat4[0]),b=this.mat4[1],S=this.mat4[2],T=this.mat4[3],M=this.mat4[4],R=this.mat4[5],L=this.mat4[6],P=this.mat4[7],C=this.mat4[8],k=this.mat4[9],D=this.mat4[10],F=this.mat4[11],G=Math.sin(z),z=Math.cos(z),Q=1-z,V=q*q*Q+z,W=H*q*Q+_*G,Y=_*q*Q-H*G,J=q*H*Q-_*G,ie=H*H*Q+z,I=_*H*Q+q*G,O=q*_*Q+H*G,H=H*_*Q-q*G,q=_*_*Q+z;return this.mat4[0]=x*V+M*W+C*Y,this.mat4[1]=b*V+R*W+k*Y,this.mat4[2]=S*V+L*W+D*Y,this.mat4[3]=T*V+P*W+F*Y,this.mat4[4]=x*J+M*ie+C*I,this.mat4[5]=b*J+R*ie+k*I,this.mat4[6]=S*J+L*ie+D*I,this.mat4[7]=T*J+P*ie+F*I,this.mat4[8]=x*O+M*H+C*q,this.mat4[9]=b*O+R*H+k*q,this.mat4[10]=S*O+L*H+D*q,this.mat4[11]=T*O+P*H+F*q,this}},{key:"translate",value:function(_){var v=_[0],g=_[1],_=_[2]||0;this.mat4[12]+=this.mat4[0]*v+this.mat4[4]*g+this.mat4[8]*_,this.mat4[13]+=this.mat4[1]*v+this.mat4[5]*g+this.mat4[9]*_,this.mat4[14]+=this.mat4[2]*v+this.mat4[6]*g+this.mat4[10]*_,this.mat4[15]+=this.mat4[3]*v+this.mat4[7]*g+this.mat4[11]*_}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(x,v,g,_){var x=1/Math.tan(x/2),b=1/(g-_);return this.mat4[0]=x/v,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=x,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(_+g)*b,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*_*g*b,this.mat4[15]=0,this}},{key:"ortho",value:function(y,v,g,_,x,b){var S=1/(y-v),T=1/(g-_),M=1/(x-b);return this.mat4[0]=-2*S,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*T,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*M,this.mat4[11]=0,this.mat4[12]=(y+v)*S,this.mat4[13]=(_+g)*T,this.mat4[14]=(b+x)*M,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,v,g,_){var x=new Array(4),b=this.mat4;return x[0]=b[0]*y+b[4]*v+b[8]*g+b[12]*_,x[1]=b[1]*y+b[5]*v+b[9]*g+b[13]*_,x[2]=b[2]*y+b[6]*v+b[10]*g+b[14]*_,x[3]=b[3]*y+b[7]*v+b[11]*g+b[15]*_,x}},{key:"multiplyPoint",value:function(g){var _=g.x,v=g.y,g=g.z,_=this.multiplyVec4(_,v,g,1);return new a.default.Vector(_[0],_[1],_[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var _=g.x,v=g.y,g=g.z,_=this.multiplyVec4(_,v,g,1);return _[0]/=_[3],_[1]/=_[3],_[2]/=_[3],new a.default.Vector(_[0],_[1],_[2])}},{key:"multiplyDirection",value:function(g){var _=g.x,v=g.y,g=g.z,_=this.multiplyVec4(_,v,g,0);return new a.default.Vector(_[0],_[1],_[2])}},{key:"mult3x3",value:function(g){var v;if(g===this||g===this.mat3)v=this.copy().mat3;else if(g instanceof a.default.Matrix)v=g.mat3;else if(c(g))v=g;else{if(arguments.length!==9)return;v=arguments}var g=this.mat3[0],_=this.mat3[1],x=this.mat3[2];return this.mat3[0]=g*v[0]+_*v[3]+x*v[6],this.mat3[1]=g*v[1]+_*v[4]+x*v[7],this.mat3[2]=g*v[2]+_*v[5]+x*v[8],g=this.mat3[3],_=this.mat3[4],x=this.mat3[5],this.mat3[3]=g*v[0]+_*v[3]+x*v[6],this.mat3[4]=g*v[1]+_*v[4]+x*v[7],this.mat3[5]=g*v[2]+_*v[5]+x*v[8],g=this.mat3[6],_=this.mat3[7],x=this.mat3[8],this.mat3[6]=g*v[0]+_*v[3]+x*v[6],this.mat3[7]=g*v[1]+_*v[4]+x*v[7],this.mat3[8]=g*v[2]+_*v[5]+x*v[8],this}},{key:"column",value:function(y){return new a.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new a.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,v){return(v=v===void 0?y.copy():v).x=this.row(0).dot(y),v.y=this.row(1).dot(y),v.z=this.row(2).dot(y),v}},{key:"createSubMatrix3x3",value:function(){var y=new a.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&u(f.prototype,h),m&&u(f,m),p}(),a.default.Matrix);o.default=d},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}r.default.RenderBuffer=function(){function u(d,p,f,h,m,y){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.size=d,this.src=p,this.dst=f,this.attr=h,this._renderer=m,this.map=y}var l,c;return l=u,(c=[{key:"_prepareBuffer",value:function(d,p){var f,h,m,g=p.attributes,y=this._renderer.GL,v=d.model||d,g=g[this.attr];g&&(f=d[this.dst],0<(h=v[this.src]).length?((m=!f)&&(d[this.dst]=f=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,f),!m&&v.dirtyFlags[this.src]===!1||(m=(d=this.map)?d(h):h,this._renderer._bindBuffer(f,y.ARRAY_BUFFER,m),v.dirtyFlags[this.src]=!1),p.enableAttrib(g,this.size)):(d=g.location)!==-1&&this._renderer.registerEnabled.has(d)&&(y.disableVertexAttribArray(d),this._renderer.registerEnabled.delete(d)))}}])&&a(l.prototype,c),u}(),r=r.default.RenderBuffer,o.default=r},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(r,s,o){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function u(m){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var y=d();if(y&&y.has(m))return y.get(m);var v,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var x;Object.prototype.hasOwnProperty.call(m,v)&&((x=_?Object.getOwnPropertyDescriptor(m,v):null)&&(x.get||x.set)?Object.defineProperty(g,v,x):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(m){return this.immediateMode.shapeMode=m!==void 0?m:c.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var f={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},h=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==c.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},l.default.RendererGL.prototype.vertex=function(m,y){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var v in f){var g=f[v],v=this.immediateMode.geometry[v];v.push.apply(v,p(v.slice(v.length-3*g,v.length-2*g)).concat(p(v.slice(v.length-g,v.length))))}var _,x,b=_=x=0,S=(arguments.length===3?b=arguments[2]:arguments.length===4?(_=arguments[2],x=arguments[3]):arguments.length===5&&(b=arguments[2],_=arguments[3],x=arguments[4]),new l.default.Vector(m,y,b)),S=(this.immediateMode.geometry.vertices.push(S),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),S=(this.immediateMode.geometry.vertexColors.push(S[0],S[1],S[2],S[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(S[0],S[1],S[2],S[3]),this.textureMode!==c.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(_/=this._tex.width,x/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(_,x),this.immediateMode._bezierVertex[0]=m,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=b,this.immediateMode._quadraticVertex[0]=m,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=b,this},l.default.RendererGL.prototype.normal=function(m,y,v){return m instanceof l.default.Vector?this._currentNormal=m:this._currentNormal=new l.default.Vector(m,y,v),this},l.default.RendererGL.prototype.endShape=function(m,y,v,g,_,x){var b,S=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===c.TESS&&(this.immediateMode.shapeMode,c.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),b=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN,b=!0),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._doFill&&!b&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(S),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(m){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,m=m===c.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,m),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===c.TESS,m=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||m)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(m,y,v){var g=[],_=0,x=this.immediateMode.contourIndices.slice(),b=0;switch(m){case c.TRIANGLE_STRIP:for(_=0;_<y.length-2;_++)g.push([_,_+1]),g.push([_,_+2]);g.push([_,_+1]);break;case c.TRIANGLE_FAN:for(_=1;_<y.length-1;_++)g.push([0,_]),g.push([_,_+1]);g.push([0,y.length-1]);break;case c.TRIANGLES:for(_=0;_<y.length-2;_+=3)g.push([_,_+1]),g.push([_+1,_+2]),g.push([_+2,_]);break;case c.LINES:for(_=0;_<y.length-1;_+=2)g.push([_,_+1]);break;case c.QUADS:for(_=0;_<y.length-5;_+=6)g.push([_,_+1]),g.push([_+1,_+2]),g.push([_+3,_+5]),g.push([_+4,_+5]);break;case c.QUAD_STRIP:for(_=0;_<y.length-2;_+=2)g.push([_,_+1]),g.push([_,_+2]),g.push([_+1,_+3]);g.push([_,_+1]);break;default:for(_=0;_<y.length;_++)_+1<y.length&&_+1!==x[0]?g.push([_,_+1]):((v||b)&&g.push([_,b]),0<x.length&&(b=x.shift()))}return m!==c.TESS&&v&&g.push([y.length-1,0]),g},l.default.RendererGL.prototype._tesselateShape=function(){for(var m=this,y=(this.immediateMode.shapeMode=c.TRIANGLES,[[]]),v=0;v<this.immediateMode.geometry.vertices.length;v++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===v&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[v].x,this.immediateMode.geometry.vertices[v].y,this.immediateMode.geometry.vertices[v].z,this.immediateMode.geometry.uvs[2*v],this.immediateMode.geometry.uvs[2*v+1],this.immediateMode.geometry.vertexColors[4*v],this.immediateMode.geometry.vertexColors[4*v+1],this.immediateMode.geometry.vertexColors[4*v+2],this.immediateMode.geometry.vertexColors[4*v+3],this.immediateMode.geometry.vertexNormals[v].x,this.immediateMode.geometry.vertexNormals[v].y,this.immediateMode.geometry.vertexNormals[v].z);for(var g,_=this._triangulate(y),x=this.immediateMode.geometry.vertices,b=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),S=0,T=_.length;S<T;S+=l.default.RendererGL.prototype.tessyVertexSize)b.push.apply(b,p(_.slice(S+5,S+9))),this.normal.apply(this,p(_.slice(S+9,S+12))),this.vertex.apply(this,p(_.slice(S,S+5)));this.geometryBuilder&&(g=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(M){return M.map(function(R){if(!g.has(R)){var L=x[R],P=m.immediateMode.geometry.vertices.findIndex(function(Q){return L.x===Q.x&&L.y===Q.y&&L.z===Q.z});if(P===-1){for(var C=1/0,k=0,D=0;D<m.immediateMode.geometry.vertices.length;D++){var G=m.immediateMode.geometry.vertices[D],z=L.x-G.x,F=L.y-G.y,G=L.z-G.z,z=z*z+F*F+G*G;z<C&&(C=z,k=D)}P=k}g.set(R,P)}return g.get(R)})})),this.immediateMode.geometry.vertexColors=b},l.default.RendererGL.prototype._drawImmediateFill=function(){var m,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,v=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,m=this._getImmediateFillShader(),this._setFillUniforms(m),!0),_=!1,x=void 0;try{for(var b,S=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(b=S.next()).done);g=!0)b.value._prepareBuffer(this.immediateMode.geometry,m)}catch(T){_=!0,x=T}finally{try{g||S.return==null||S.return()}finally{if(_)throw x}}if(m.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)v.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{v.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}m.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var m=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),v=(this._setStrokeUniforms(y),!0),g=!1,_=void 0;try{for(var x,b=this.immediateMode.buffers.stroke[Symbol.iterator]();!(v=(x=b.next()).done);v=!0)x.value._prepareBuffer(this.immediateMode.geometry,y)}catch(S){g=!0,_=S}finally{try{v||b.return==null||b.return()}finally{if(g)throw _}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),m.drawArrays(m.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},l.default.RendererGL);o.default=h},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var h=d();if(h&&h.has(f))return h.get(f);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in f){var g;Object.prototype.hasOwnProperty.call(f,m)&&((g=v?Object.getOwnPropertyDescriptor(f,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=f[m])}return y.default=f,h&&h.set(f,y),y}(r("../core/constants")));function d(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,d=function(){return f},f)}l.default.RendererGL.prototype.freeGeometry=function(f){f.gid?this._freeBuffers(f.gid):console.warn("The model you passed to freeGeometry does not have an id!")},l.default.RendererGL.prototype._initBufferDefaults=function(f){var h;return this._freeBuffers(f),1e3<Object.keys(this.retainedMode.geometry).length&&(h=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(h)),this.retainedMode.geometry[f]={}},l.default.RendererGL.prototype._freeBuffers=function(f){var h,m=this.retainedMode.geometry[f];function y(v){var g=!0,_=!1,x=void 0;try{for(var b,S=v[Symbol.iterator]();!(g=(b=S.next()).done);g=!0){var T=b.value;m[T.dst]&&(h.deleteBuffer(m[T.dst]),m[T.dst]=null)}}catch(M){_=!0,x=M}finally{try{g||S.return==null||S.return()}finally{if(_)throw x}}}m&&(delete this.retainedMode.geometry[f],h=this.GL,m.indexBuffer&&h.deleteBuffer(m.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},l.default.RendererGL.prototype.createBuffers=function(_,h){var m,y,v,g=this.GL,_=this._initBufferDefaults(_),x=(_.model=h,_.indexBuffer);return h.faces.length?(x=x||(_.indexBuffer=g.createBuffer()),v=(y=(m=l.default.RendererGL.prototype._flatten(h.faces)).some(function(b){return 65535<b}))?Uint32Array:Uint16Array,this._bindBuffer(x,g.ELEMENT_ARRAY_BUFFER,m,v),_.indexBufferType=y?g.UNSIGNED_INT:g.UNSIGNED_SHORT,_.vertexCount=3*h.faces.length):(x&&(g.deleteBuffer(x),_.indexBuffer=null),_.vertexCount=h.vertices?h.vertices.length:0),_.lineVertexCount=h.lineVertices?h.lineVertices.length/3:0,_},l.default.RendererGL.prototype.drawBuffers=function(f){var h=this.GL,m=this.retainedMode.geometry[f];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[f].vertexCount){this._useVertexColor=0<m.model.vertexColors.length;var y=this._getRetainedFillShader(),v=(this._setFillUniforms(y),!0),g=!1,_=void 0;try{for(var x,b=this.retainedMode.buffers.fill[Symbol.iterator]();!(v=(x=b.next()).done);v=!0)x.value._prepareBuffer(m,y)}catch(L){g=!0,_=L}finally{try{v||b.return==null||b.return()}finally{if(g)throw _}}y.disableRemainingAttributes(),m.indexBuffer&&this._bindBuffer(m.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,m.model.hasFillTransparency()),this._drawElements(h.TRIANGLES,f),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<m.lineVertexCount){this._useLineColor=0<m.model.vertexStrokeColors.length;var S=this._getRetainedStrokeShader(),T=(this._setStrokeUniforms(S),!0),g=!1,_=void 0;try{for(var M,R=this.retainedMode.buffers.stroke[Symbol.iterator]();!(T=(M=R.next()).done);T=!0)M.value._prepareBuffer(m,S)}catch(C){g=!0,_=C}finally{try{T||R.return==null||R.return()}finally{if(g)throw _}}S.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,m.model.hasStrokeTransparency()),this._drawArrays(h.TRIANGLES,f),S.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(m),this},l.default.RendererGL.prototype.drawBuffersScaled=function(f,h,m,y){var v=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,m,y),this.drawBuffers(f)}finally{this.uMVMatrix=v}},l.default.RendererGL.prototype._drawArrays=function(f,h){return this.GL.drawArrays(f,0,this.retainedMode.geometry[h].lineVertexCount),this},l.default.RendererGL.prototype._drawElements=function(f,m){var m=this.retainedMode.geometry[m],y=this.GL;if(m.indexBuffer){if(this._pInst.webglVersion!==c.WEBGL2&&m.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else y.drawArrays(f||y.TRIANGLES,0,m.vertexCount)},l.default.RendererGL.prototype._drawPoints=function(f,h){var m=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(h,m.ARRAY_BUFFER,this._vToNArray(f),Float32Array,m.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),m.drawArrays(m.Points,0,f.length),y.unbindShader()};var p=l.default.RendererGL;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(D,s,o){function a(W){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(W)}function u(W){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(Y){return a(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":a(Y)})(W)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.readPixelsWebGL=Q,o.readPixelWebGL=V,o.default=void 0;var l=m(D("../core/main")),c=function(W){if(W&&W.__esModule)return W;if(W===null||u(W)!=="object"&&typeof W!="function")return{default:W};var Y=h();if(Y&&Y.has(W))return Y.get(W);var J,ie={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(J in W){var O;Object.prototype.hasOwnProperty.call(W,J)&&((O=I?Object.getOwnPropertyDescriptor(W,J):null)&&(O.get||O.set)?Object.defineProperty(ie,J,O):ie[J]=W[J])}return ie.default=W,Y&&Y.set(W,ie),ie}(D("../core/constants")),d=m(D("./GeometryBuilder")),p=m(D("libtess")),f=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function h(){var W;return typeof WeakMap!="function"?null:(W=new WeakMap,h=function(){return W},W)}function m(W){return W&&W.__esModule?W:{default:W}}function y(W){return function(Y){if(Array.isArray(Y)){for(var J=0,ie=new Array(Y.length);J<Y.length;J++)ie[J]=Y[J];return ie}}(W)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(W)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(W,Y){for(var J=0;J<Y.length;J++){var ie=Y[J];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(W,ie.key,ie)}}function g(W,Y,J){return(g=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(H,I,O){var H=function(q,Z){for(;!Object.prototype.hasOwnProperty.call(q,Z)&&(q=S(q))!==null;);return q}(H,I);if(H)return(H=Object.getOwnPropertyDescriptor(H,I)).get?H.get.call(O):H.value})(W,Y,J||W)}function _(W,Y){return(_=Object.setPrototypeOf||function(J,ie){return J.__proto__=ie,J})(W,Y)}function x(W){return function(){var Y,J,ie=S(W);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=S(this).constructor,Reflect.construct(ie,arguments,Y)):ie.apply(this,arguments),ie=this,!(J=Y)||u(J)!=="object"&&typeof J!="function"?b(ie):J}}function b(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function S(W){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(W)}function T(W,Y,J){Y in W?Object.defineProperty(W,Y,{value:J,enumerable:!0,configurable:!0,writable:!0}):W[Y]=J}function M(W,Y){k+="#define STROKE_CAP_".concat(W," ").concat(Y,`
`),P[c[W]]=Y}function R(W,Y){k+="#define STROKE_JOIN_".concat(W," ").concat(Y,`
`),C[c[W]]=Y}var L,P={},C={},k="",D=(M("ROUND",0),M("PROJECT",1),M("SQUARE",2),R("ROUND",0),R("MITER",1),R("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),F={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:k+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:k+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},G=F.sphereMappingFrag;for(L in F)F[L]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+F[L];T(D={},c.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),T(D,c.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(D,c.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(D,c.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),T(D,c.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),T(D,c.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),T(D,c.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),T(D,c.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var z=D;function Q(W,Y,be,ie,I,O,H,q,Z,oe){var pe=Y.getParameter(Y.FRAMEBUFFER_BINDING),be=(Y.bindFramebuffer(Y.FRAMEBUFFER,be),q===Y.RGBA?4:3),me=O*H*be,ce=Z===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(W instanceof ce&&W.length===me||(W=new ce(me)),Y.readPixels(ie,oe?oe-I-H:I,O,H,q,Z,W),Y.bindFramebuffer(Y.FRAMEBUFFER,pe),oe)for(var te=Math.floor(H/2),ue=new ce(O*be),ge=0;ge<te;ge++){var xe=ge*O*4,Le=(H-ge-1)*O*4;ue.set(W.subarray(xe,xe+4*O)),W.copyWithin(xe,Le,Le+4*O),W.set(ue,Le)}return W}function V(W,Z,J,ie,I,O,H){var q=W.getParameter(W.FRAMEBUFFER_BINDING),Z=(W.bindFramebuffer(W.FRAMEBUFFER,Z),I===W.RGBA?4:3),Z=new(O===W.UNSIGNED_BYTE?Uint8Array:Float32Array)(Z);return W.readPixels(J,H?H-ie-1:ie,1,1,I,O,Z),W.bindFramebuffer(W.FRAMEBUFFER,q),Array.from(Z)}l.default.prototype.setAttributes=function(W,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var J=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[W]!==Y&&(this._glAttributes[W]=Y,J=!1)):W instanceof Object&&this._glAttributes!==W&&(this._glAttributes=W,J=!1),this._renderer.isP3D&&!J){if(!this._setupDone){for(var ie in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(ie))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(W){var Y=ie;if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(W&&W.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),W&&_(Y,W);var J=x(ie);function ie(I,O,H,q){if(this instanceof ie)return(I=J.call(this,I,O,H))._setAttributeDefaults(O),I._initContext(),I.isP3D=!0,I.geometryBuilder=void 0,I.GL=I.drawingContext,I._pInst._setProperty("drawingContext",I.drawingContext),I._isErasing=!1,I._clipDepths=[],I._isClipApplied=!1,I._stencilTestOn=!1,I._enableLighting=!1,I.ambientLightColors=[],I.mixedAmbientLight=[],I.mixedSpecularColor=[],I.specularColors=[1,1,1],I.directionalLightDirections=[],I.directionalLightDiffuseColors=[],I.directionalLightSpecularColors=[],I.pointLightPositions=[],I.pointLightDiffuseColors=[],I.pointLightSpecularColors=[],I.spotLightPositions=[],I.spotLightDirections=[],I.spotLightDiffuseColors=[],I.spotLightSpecularColors=[],I.spotLightAngle=[],I.spotLightConc=[],I.activeImageLight=null,I.diffusedTextures=new Map,I.specularTextures=new Map,I.drawMode=c.FILL,I.curFillColor=I._cachedFillStyle=[1,1,1,1],I.curAmbientColor=I._cachedFillStyle=[1,1,1,1],I.curSpecularColor=I._cachedFillStyle=[0,0,0,0],I.curEmissiveColor=I._cachedFillStyle=[0,0,0,0],I.curStrokeColor=I._cachedStrokeStyle=[0,0,0,1],I.curBlendMode=c.BLEND,I.preEraseBlend=void 0,I._cachedBlendMode=void 0,I.webglVersion===c.WEBGL2?I.blendExt=I.GL:I.blendExt=I.GL.getExtension("EXT_blend_minmax"),I._isBlending=!1,I._hasSetAmbient=!1,I._useSpecularMaterial=!1,I._useEmissiveMaterial=!1,I._useNormalMaterial=!1,I._useShininess=1,I._useMetalness=0,I._useLineColor=!1,I._useVertexColor=!1,I.registerEnabled=new Set,I._tint=[255,255,255,255],I.constantAttenuation=1,I.linearAttenuation=0,I.quadraticAttenuation=0,I.uMVMatrix=new l.default.Matrix,I.uPMatrix=new l.default.Matrix,I.uNMatrix=new l.default.Matrix("mat3"),I.curMatrix=new l.default.Matrix("mat3"),I._currentNormal=new l.default.Vector(0,0,1),I._curCamera=new l.default.Camera(b(I)),I._curCamera._computeCameraDefaultSettings(),I._curCamera._setDefaultCamera(),I.filterCamera=new l.default.Camera(b(I)),I.filterCamera._computeCameraDefaultSettings(),I.filterCamera._setDefaultCamera(),I.prevTouches=[],I.zoomVelocity=0,I.rotateVelocity=new l.default.Vector(0,0),I.moveVelocity=new l.default.Vector(0,0),I.executeZoom=!1,I.executeRotateAndMove=!1,I.specularShader=void 0,I.sphereMapping=void 0,I.diffusedShader=void 0,I._defaultLightShader=void 0,I._defaultImmediateModeShader=void 0,I._defaultNormalShader=void 0,I._defaultColorShader=void 0,I._defaultPointShader=void 0,I.userFillShader=void 0,I.userStrokeShader=void 0,I.userPointShader=void 0,I.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(I))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(I),I._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(I),I._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(I),I._flatten)]}},I.immediateMode={geometry:new l.default.Geometry,shapeMode:c.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(I),I._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(I))],point:I.GL.createBuffer()}},I.pointSize=5,I.curStrokeWeight=1,I.curStrokeCap=c.ROUND,I.curStrokeJoin=c.ROUND,I.textures=new Map,I.framebuffers=new Set,I.activeFramebuffers=[],I.filterShader=void 0,I.filterLayer=void 0,I.filterLayerTemp=void 0,I.defaultFilterShaders={},I.textureMode=c.IMAGE,I.textureWrapX=c.CLAMP,I.textureWrapY=c.CLAMP,I._tex=null,I._curveTightness=6,I._lookUpTableBezier=[],I._lookUpTableQuadratic=[],I._lutBezierDetail=0,I._lutQuadraticDetail=0,I.isProcessingVertices=!1,I._tessy=I._initTessy(),I.fontInfos={},I._curShader=void 0,I;throw new TypeError("Cannot call a class as a function")}return Y=ie,(W=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new d.default(this)}},{key:"endGeometry",value:function(){var I;if(this.geometryBuilder)return I=this.geometryBuilder.finish(),this.geometryBuilder=void 0,I;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(I){return this.beginGeometry(),I(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(I){var O={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};I._glAttributes===null?I._glAttributes=O:I._glAttributes=Object.assign(O,I._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?c.WEBGL2:c.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var I=this.drawingContext;I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var I=this.drawingContext;return I.getParameter(I.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(I,O){this._maxTextureSize||(this._maxTextureSize=this._getParam());var q=this._maxTextureSize,q=(l.default.prototype._maxAllowedPixelDimensions,Math.floor(q/this.pixelDensity())),H=Math.min(I,q),q=Math.min(O,q);return H===I&&q===O||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(H,", height: ").concat(q,".")),{adjustedWidth:H,adjustedHeight:q}}},{key:"_resetContext",value:function(I,O){var H,q=this.width,Z=this.height,pe=this.canvas.id,oe=this._pInst instanceof l.default.Graphics,pe=(oe?((H=this._pInst).canvas.parentNode.removeChild(H.canvas),H.canvas=document.createElement("canvas"),(H._pInst._userNode||document.body).appendChild(H.canvas),l.default.Element.call(H,H.canvas,H._pInst),H.width=q,H.height=Z):((H=this.canvas)&&H.parentNode.removeChild(H),(H=document.createElement("canvas")).id=pe,(this._pInst._userNode||document.body).appendChild(H),this._pInst.canvas=H,this.canvas=H),new l.default.RendererGL(this._pInst.canvas,this._pInst,!oe));this._pInst._setProperty("_renderer",pe),pe.resize(q,Z),pe._applyDefaults(),oe||this._pInst._elements.push(pe),typeof O=="function"&&setTimeout(function(){O.apply(window._renderer,I)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var q=(q=this._pInst).color.apply(q,arguments),I=q.levels[0]/255,O=q.levels[1]/255,H=q.levels[2]/255,q=q.levels[3]/255;this.clear(I,O,H,q)}},{key:"fill",value:function(I,O,H,q){var Z=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Z._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(I,O,H,q){var Z=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Z._array}},{key:"strokeCap",value:function(I){this.curStrokeCap=I}},{key:"strokeJoin",value:function(I){this.curStrokeJoin=I}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(I,O){I.width===O.width&&I.height===O.height||I.resize(O.width,O.height),I.pixelDensity()!==O.pixelDensity()&&I.pixelDensity(O.pixelDensity())}},{key:"filter",value:function(){var I,O,H=this,q=this.getFilterLayer(),Z=void 0,oe=void 0,pe=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(oe=arguments.length<=0?void 0:arguments[0],T(I={},c.BLUR,3),T(I,c.POSTERIZE,4),T(I,c.THRESHOLD,.5),Z=oe in(I=I)&&(arguments.length<=1?void 0:arguments[1])===void 0?I[oe]:arguments.length<=1?void 0:arguments[1],oe in this.defaultFilterShaders||(this.defaultFilterShaders[oe]=new l.default.Shader(q._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,z[oe])),this.filterShader=this.defaultFilterShaders[oe]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),be=(this.matchSize(q,pe),q.draw(function(){return H._pInst.clear()}),[1/(pe.width*pe.pixelDensity()),1/(pe.height*pe.pixelDensity())]);oe===c.BLUR?(O=this.getFilterLayerTemp(),this.matchSize(O,pe),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(c.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",be),this.filterShader.setUniform("canvasSize",[pe.width,pe.height]),this.filterShader.setUniform("radius",Math.max(1,Z)),O.draw(function(){H.filterShader.setUniform("direction",[1,0]),H.filterShader.setUniform("tex0",pe),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(pe.width,pe.height)}),q.draw(function(){H.filterShader.setUniform("direction",[0,1]),H.filterShader.setUniform("tex0",O),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(pe.width,pe.height)}),this._pInst.pop()):q.draw(function(){H._pInst.noStroke(),H._pInst.blendMode(c.BLEND),H._pInst.shader(H.filterShader),H.filterShader.setUniform("tex0",pe),H.filterShader.setUniform("texelSize",be),H.filterShader.setUniform("canvasSize",[pe.width,pe.height]),H.filterShader.setUniform("filterParameter",Z),H._pInst.noLights(),H._pInst.plane(pe.width,pe.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(c.CORNER),this._pInst.blendMode(c.BLEND),pe.filterCamera._resize(),this._pInst.setCamera(pe.filterCamera),this._pInst.resetMatrix(),this._pInst.image(q,-pe.width/2,-pe.height/2,pe.width,pe.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(I){return I?this._pInst.pixelDensity(I):this._pInst.pixelDensity()}},{key:"blendMode",value:function(I){I===c.DARKEST||I===c.LIGHTEST||I===c.ADD||I===c.BLEND||I===c.SUBTRACT||I===c.SCREEN||I===c.EXCLUSION||I===c.REPLACE||I===c.MULTIPLY||I===c.REMOVE?this.curBlendMode=I:I!==c.BURN&&I!==c.OVERLAY&&I!==c.HARD_LIGHT&&I!==c.SOFT_LIGHT&&I!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(I,O){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(c.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,I/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,O/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var I=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},I=(g(S(ie.prototype),"beginClip",this).call(this,I),this.drawTarget()._isClipApplied=!0,this.GL);I.clearStencil(0),I.clear(I.STENCIL_BUFFER_BIT),I.enable(I.STENCIL_TEST),this._stencilTestOn=!0,I.stencilFunc(I.ALWAYS,1,255),I.stencilOp(I.KEEP,I.KEEP,I.REPLACE),I.disable(I.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var I=this.GL;I.stencilOp(I.KEEP,I.KEEP,I.KEEP),I.stencilFunc(this._clipInvert?I.EQUAL:I.NOTEQUAL,0,255),I.enable(I.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),g(S(ie.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(I){this.curStrokeWeight!==I&&(this.pointSize=I,this.curStrokeWeight=I)}},{key:"_getPixel",value:function(I,O){var H=this.GL;return V(H,null,I,O,H.RGBA,H.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var I,O,H=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(I=this._pInst._pixelDensity,O=this.GL,H._setProperty("pixels",Q(H.pixels,O,null,0,0,this.width*I,this.height*I,O.RGBA,O.UNSIGNED_BYTE,this.height*I)))}},{key:"updatePixels",value:function(){var I=this._getTempFramebuffer();I.pixels=this._pixelsState.pixels,I.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(c.CENTER),this._pInst.image(I,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:c.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:c.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(I){return this.retainedMode.geometry[I]!==void 0}},{key:"viewport",value:function(I,O){this._viewport=[0,0,I,O],this.GL.viewport(0,0,I,O)}},{key:"resize",value:function(Z,q){l.default.Renderer.prototype.resize.call(this,Z,q),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Z=this._pixelsState,H=(Z.pixels!==void 0&&Z._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),q=!1,Z=void 0;try{for(var oe,pe=this.framebuffers[Symbol.iterator]();!(H=(oe=pe.next()).done);H=!0)oe.value._canvasSizeChanged()}catch(be){q=!0,Z=be}finally{try{H||pe.return==null||pe.return()}finally{if(q)throw Z}}}},{key:"clear",value:function(){var I=(arguments.length<=0?void 0:arguments[0])||0,O=(arguments.length<=1?void 0:arguments[1])||0,H=(arguments.length<=2?void 0:arguments[2])||0,q=(arguments.length<=3?void 0:arguments[3])||0,Z=this.activeFramebuffer();Z&&Z.format===c.UNSIGNED_BYTE&&!Z.antialias&&q===0&&(q=1e-10),this.GL.clearColor(I*q,O*q,H*q,q),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(I,O,H,q,Z,oe){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([I,O,0,0,H,q,0,0,0,0,1,0,Z,oe,0,1])}},{key:"translate",value:function(I,O,H){return I instanceof l.default.Vector&&(H=I.z,O=I.y,I=I.x),this.uMVMatrix.translate([I,O,H]),this}},{key:"scale",value:function(I,O,H){return this.uMVMatrix.scale(I,O,H),this}},{key:"rotate",value:function(I,O){return O===void 0?this.rotateZ(I):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(I){return this.rotate(I,1,0,0),this}},{key:"rotateY",value:function(I){return this.rotate(I,0,1,0),this}},{key:"rotateZ",value:function(I){return this.rotate(I,0,0,1),this}},{key:"push",value:function(){var I=l.default.Renderer.prototype.push.apply(this),O=I.properties;return O.uMVMatrix=this.uMVMatrix.copy(),O.uPMatrix=this.uPMatrix.copy(),O._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),O.ambientLightColors=this.ambientLightColors.slice(),O.specularColors=this.specularColors.slice(),O.directionalLightDirections=this.directionalLightDirections.slice(),O.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),O.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),O.pointLightPositions=this.pointLightPositions.slice(),O.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),O.pointLightSpecularColors=this.pointLightSpecularColors.slice(),O.spotLightPositions=this.spotLightPositions.slice(),O.spotLightDirections=this.spotLightDirections.slice(),O.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),O.spotLightSpecularColors=this.spotLightSpecularColors.slice(),O.spotLightAngle=this.spotLightAngle.slice(),O.spotLightConc=this.spotLightConc.slice(),O.userFillShader=this.userFillShader,O.userStrokeShader=this.userStrokeShader,O.userPointShader=this.userPointShader,O.pointSize=this.pointSize,O.curStrokeWeight=this.curStrokeWeight,O.curStrokeColor=this.curStrokeColor,O.curFillColor=this.curFillColor,O.curAmbientColor=this.curAmbientColor,O.curSpecularColor=this.curSpecularColor,O.curEmissiveColor=this.curEmissiveColor,O._hasSetAmbient=this._hasSetAmbient,O._useSpecularMaterial=this._useSpecularMaterial,O._useEmissiveMaterial=this._useEmissiveMaterial,O._useShininess=this._useShininess,O._useMetalness=this._useMetalness,O.constantAttenuation=this.constantAttenuation,O.linearAttenuation=this.linearAttenuation,O.quadraticAttenuation=this.quadraticAttenuation,O._enableLighting=this._enableLighting,O._useNormalMaterial=this._useNormalMaterial,O._tex=this._tex,O.drawMode=this.drawMode,O._currentNormal=this._currentNormal,O.curBlendMode=this.curBlendMode,O.activeImageLight=this.activeImageLight,I}},{key:"pop",value:function(){var I;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var O=arguments.length,H=new Array(O),q=0;q<O;q++)H[q]=arguments[q];(I=g(S(ie.prototype),"pop",this)).call.apply(I,[this].concat(H)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var I=this.drawTarget();I._isClipApplied!==this._stencilTestOn&&(I._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var I=this.userStrokeShader;return I&&I.isStrokeShader()?I:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(I){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(G)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",I),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var I=this.userFillShader;if(this._useNormalMaterial&&(!I||!I.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getImmediateModeShader();return I}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var I=this.userFillShader;if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getColorShader();return I}},{key:"_getImmediatePointShader",value:function(){var I=this.userPointShader;return I&&I.isPointShader()?I:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+F.phongFrag):this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+F.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===c.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(I,O){var H="";return this.webglVersion===c.WEBGL2&&(H+=`#version 300 es
#define WEBGL2
`),I==="vert"?H+=`#define VERTEX_SHADER
`:I==="frag"&&(H+=`#define FRAGMENT_SHADER
`),O&&(H+="precision ".concat(O,` float;
`)),H}},{key:"_getEmptyTexture",value:function(){var I;return this._emptyTexture||((I=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,I)),this._emptyTexture}},{key:"getTexture",value:function(I){I instanceof l.default.Framebuffer&&(I=I.color);var O=this.textures.get(I);return O||(O=new l.default.Texture(this,I),this.textures.set(I,O),O)}},{key:"getDiffusedTexture",value:function(I){var O,H,q=this;return this.diffusedTextures.get(I)!=null?this.diffusedTextures.get(I):(O=Math.floor(I.height/I.width*200),H=this._pInst.createFramebuffer({width:200,height:O,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(F.imageLightVert,F.imageLightDiffusedFrag)),H.draw(function(){q._pInst.shader(q.diffusedShader),q.diffusedShader.setUniform("environmentMap",I),q._pInst.noStroke(),q._pInst.rectMode(c.CENTER),q._pInst.noLights(),q._pInst.rect(0,0,200,O)}),this.diffusedTextures.set(I,H),H)}},{key:"getSpecularTexture",value:function(I){var O=this;if(this.specularTextures.get(I)!=null)return this.specularTextures.get(I);for(var H,q=[],Z=this._pInst.createFramebuffer({width:512,height:512,density:1}),oe=Math.log(512)/Math.log(2),pe=(this.specularShader||(this.specularShader=this._pInst.createShader(F.imageLightVert,F.imageLightSpecularFrag)),512);1<=pe;pe/=2)(function(be){Z.resize(be,be);var me=1-Math.log(be)/Math.log(2)/oe;Z.draw(function(){O._pInst.shader(O.specularShader),O._pInst.clear(),O.specularShader.setUniform("environmentMap",I),O.specularShader.setUniform("roughness",me),O._pInst.noStroke(),O._pInst.noLights(),O._pInst.plane(be,be)}),q.push(Z.get().drawingContext.getImageData(0,0,be,be))})(pe);return Z.remove(),H=new f.MipmapTexture(this,q,{}),this.specularTextures.set(I,H),H}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(I){return new l.default.Framebuffer(this,I)}},{key:"_setStrokeUniforms",value:function(I){I.bindShader(),I.setUniform("uUseLineColor",this._useLineColor),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uStrokeWeight",this.curStrokeWeight),I.setUniform("uStrokeCap",P[this.curStrokeCap]),I.setUniform("uStrokeJoin",C[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(I){var O=this,H=(I.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(q,Z){return O.curFillColor[Z]*O._useMetalness+q*(1-O._useMetalness)})),I.setUniform("uUseVertexColor",this._useVertexColor),I.setUniform("uMaterialColor",this.curFillColor),I.setUniform("isTexture",!!this._tex),this._tex&&I.setUniform("uSampler",this._tex),I.setUniform("uTint",this._tint),I.setUniform("uHasSetAmbient",this._hasSetAmbient),I.setUniform("uAmbientMatColor",this.curAmbientColor),I.setUniform("uSpecularMatColor",this.mixedSpecularColor),I.setUniform("uEmissiveMatColor",this.curEmissiveColor),I.setUniform("uSpecular",this._useSpecularMaterial),I.setUniform("uEmissive",this._useEmissiveMaterial),I.setUniform("uShininess",this._useShininess),I.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(I),I.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),H=(I.setUniform("uPointLightCount",H),I.setUniform("uPointLightLocation",this.pointLightPositions),I.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),I.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),H=(I.setUniform("uDirectionalLightCount",H),I.setUniform("uLightingDirection",this.directionalLightDirections),I.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),I.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),H=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(q){return q-=O._useMetalness,Math.max(0,q)})),I.setUniform("uAmbientLightCount",H),I.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);I.setUniform("uSpotLightCount",H),I.setUniform("uSpotLightAngle",this.spotLightAngle),I.setUniform("uSpotLightConc",this.spotLightConc),I.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),I.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),I.setUniform("uSpotLightLocation",this.spotLightPositions),I.setUniform("uSpotLightDirection",this.spotLightDirections),I.setUniform("uConstantAttenuation",this.constantAttenuation),I.setUniform("uLinearAttenuation",this.linearAttenuation),I.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),I.bindTextures()}},{key:"_setImageLightUniforms",value:function(I){var O,H;I.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(O=this.getDiffusedTexture(this.activeImageLight),I.setUniform("environmentMapDiffused",O),O=this.getSpecularTexture(this.activeImageLight),H=20/this._useShininess,I.setUniform("levelOfDetail",8*H),I.setUniform("environmentMapSpecular",O))}},{key:"_setPointUniforms",value:function(I){I.bindShader(),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(I,O,H,q,Z){O=O||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(O,I),H!==void 0&&((I=H)instanceof l.default.DataArray?I=H.dataArray():I instanceof(q||Float32Array)||(I=new(q||Float32Array)(I)),this.GL.bufferData(O,I,Z||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(I,O){return I.length===O.length&&I.every(function(H,q){return H===O[q]})}},{key:"_isTypedArray",value:function(I){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(O){return I instanceof O})}},{key:"_flatten",value:function(I){return I.flat()}},{key:"_vToNArray",value:function(I){return I.flatMap(function(O){return[O.x,O.y,O.z]})}},{key:"_bezierCoefficients",value:function(I){var O=I*I,H=1-I,q=H*H;return[q*H,3*q*I,3*H*O,O*I]}},{key:"_quadraticCoefficients",value:function(I){var O=1-I;return[O*O,2*O*I,I*I]}},{key:"_bezierToCatmull",value:function(I){return[I[1],I[1]+(I[2]-I[0])/this._curveTightness,I[2]-(I[3]-I[1])/this._curveTightness,I[2]]}},{key:"_initTessy",value:function(){var I=new p.default.GluTesselator;return I.gluTessCallback(p.default.gluEnum.GLU_TESS_VERTEX_DATA,function(O,H){var q=!0,Z=!1,oe=void 0;try{for(var pe,be=O[Symbol.iterator]();!(q=(pe=be.next()).done);q=!0){var me=pe.value;H.push(me)}}catch(ce){Z=!0,oe=ce}finally{try{q||be.return==null||be.return()}finally{if(Z)throw oe}}}),I.gluTessCallback(p.default.gluEnum.GLU_TESS_BEGIN,function(O){O!==p.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(O))}),I.gluTessCallback(p.default.gluEnum.GLU_TESS_ERROR,function(O){console.log("error callback"),console.log("error number: ".concat(O))}),I.gluTessCallback(p.default.gluEnum.GLU_TESS_COMBINE,function(O,H,q){for(var Z=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),oe=0;oe<q.length;oe++)for(var pe=0;pe<Z.length;pe++)q[oe]!==0&&H[oe]&&(Z[pe]+=H[oe][pe]*q[oe]);return Z}),I.gluTessCallback(p.default.gluEnum.GLU_TESS_EDGE_FLAG,function(O){}),I.gluTessProperty(p.default.gluEnum.GLU_TESS_WINDING_RULE,p.default.windingRule.GLU_TESS_WINDING_NONZERO),I}},{key:"_triangulate",value:function(I){var O=I[0]?I[0][2]:void 0,H=!0,q=!0,me=!1,te=void 0;try{for(var Z,oe=I[Symbol.iterator]();!(q=(Z=oe.next()).done);q=!0)for(var pe=Z.value,be=0;be<pe.length;be+=l.default.RendererGL.prototype.tessyVertexSize)if(pe[be+2]!==O){H=!1;break}}catch(ae){me=!0,te=ae}finally{try{q||oe.return==null||oe.return()}finally{if(me)throw te}}H?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var me=[],ce=(this._tessy.gluTessBeginPolygon(me),!0),te=!1,ue=void 0;try{for(var ge,xe=I[Symbol.iterator]();!(ce=(ge=xe.next()).done);ce=!0){var Le=ge.value;this._tessy.gluTessBeginContour();for(var we=0;we<Le.length;we+=l.default.RendererGL.prototype.tessyVertexSize){var Ee=Le.slice(we,we+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Ee,Ee)}this._tessy.gluTessEndContour()}}catch(ae){te=!0,ue=ae}finally{try{ce||xe.return==null||xe.return()}finally{if(te)throw ue}}return this._tessy.gluTessEndPolygon(),me}}])&&v(Y.prototype,W),ie}(l.default.Renderer),l.default.prototype._assert3d=function(W){if(!this._renderer.isP3D)throw new Error("".concat(W,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,D=l.default.RendererGL,o.default=D},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}a.default.Shader=function(){function l(p,f,h){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=f,this._fragSrc=h,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var c,d;return c=l,(d=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return a.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return a.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var f=new a.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return f.ensureCompiledOnContext(p),f}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,f=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),h=0;h<f;++h){var m=p.getActiveAttrib(this._glProgram,h),y=m.name,v=p.getAttribLocation(this._glProgram,y),g={};g.name=y,g.location=v,g.index=h,g.type=m.type,g.size=m.size,this.attributes[y]=g}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,f=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),h=0,m=0;m<f;++m){var y=p.getActiveUniform(this._glProgram,m),v={},g=(v.location=p.getUniformLocation(this._glProgram,y.name),v.size=y.size,y.name);1<y.size&&(g=g.substring(0,g.indexOf("[0]"))),v.name=g,v.type=y.type,v._cachedData=void 0,v.type===p.SAMPLER_2D&&(v.samplerIndex=h,h++,this.samplers.push(v)),v.isArray=1<y.size||v.type===p.FLOAT_MAT3||v.type===p.FLOAT_MAT4||v.type===p.FLOAT_VEC2||v.type===p.FLOAT_VEC3||v.type===p.FLOAT_VEC4||v.type===p.INT_VEC2||v.type===p.INT_VEC4||v.type===p.INT_VEC3,this.uniforms[g]=v}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,f=!0,h=!1,m=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var g=y.value,_=g.texture;_===void 0&&(_=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+g.samplerIndex),_.bindTexture(),_.update(),p.uniform1i(g.location,g.samplerIndex)}}catch(x){h=!0,m=x}finally{try{f||v.return==null||v.return()}finally{if(h)throw m}}}},{key:"updateTextures",value:function(){var p=!0,f=!1,h=void 0;try{for(var m,y=this.samplers[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var v=m.value.texture;v&&v.update()}}catch(g){f=!0,h=g}finally{try{p||y.return==null||y.return()}finally{if(f)throw h}}}},{key:"unbindTextures",value:function(){var p=!0,f=!1,h=void 0;try{for(var m,y=this.samplers[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var v=m.value;this.setUniform(v.name,this._renderer._getEmptyTexture())}}catch(g){f=!0,h=g}finally{try{p||y.return==null||y.return()}finally{if(f)throw h}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,f=this._renderer.uPMatrix,h=this._renderer.uMVMatrix,m=h.copy();m.mult(f),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",f.mat4),this.setUniform("uModelViewMatrix",h.mat4),this.setUniform("uModelViewProjectionMatrix",m.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,f){var h=this.uniforms[p];if(h){var m=this._renderer.GL;if(h.isArray){if(h._cachedData&&this._renderer._arraysEqual(h._cachedData,f))return;h._cachedData=f.slice(0)}else{if(h._cachedData&&h._cachedData===f)return;Array.isArray(f)?h._cachedData=f.slice(0):h._cachedData=f}var y=h.location;switch(this.useProgram(),h.type){case m.BOOL:f===!0?m.uniform1i(y,1):m.uniform1i(y,0);break;case m.INT:1<h.size?f.length&&m.uniform1iv(y,f):m.uniform1i(y,f);break;case m.FLOAT:1<h.size?f.length&&m.uniform1fv(y,f):m.uniform1f(y,f);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(y,!1,f);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(y,!1,f);break;case m.FLOAT_VEC2:1<h.size?f.length&&m.uniform2fv(y,f):m.uniform2f(y,f[0],f[1]);break;case m.FLOAT_VEC3:1<h.size?f.length&&m.uniform3fv(y,f):m.uniform3f(y,f[0],f[1],f[2]);break;case m.FLOAT_VEC4:1<h.size?f.length&&m.uniform4fv(y,f):m.uniform4f(y,f[0],f[1],f[2],f[3]);break;case m.INT_VEC2:1<h.size?f.length&&m.uniform2iv(y,f):m.uniform2i(y,f[0],f[1]);break;case m.INT_VEC3:1<h.size?f.length&&m.uniform3iv(y,f):m.uniform3i(y,f[0],f[1],f[2]);break;case m.INT_VEC4:1<h.size?f.length&&m.uniform4iv(y,f):m.uniform4i(y,f[0],f[1],f[2],f[3]);break;case m.SAMPLER_2D:m.activeTexture(m.TEXTURE0+h.samplerIndex),h.texture=f instanceof a.default.Texture?f:this._renderer.getTexture(f),m.uniform1i(y,h.samplerIndex),h.texture.src.gifProperties&&h.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,f,h,m,y,v){var g;return p&&(p=p.location)!==-1&&(g=this._renderer.GL,this._renderer.registerEnabled.has(p)||(g.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,f,h||g.FLOAT,m||!1,y||0,v||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,f=!0,h=!1,m=void 0;try{for(var y,v=this._renderer.registerEnabled.values()[Symbol.iterator]();!(f=(y=v.next()).done);f=!0)(function(){var g=y.value;Object.keys(p.attributes).some(function(_){return p.attributes[_].location===g})||(p._renderer.GL.disableVertexAttribArray(g),p._renderer.registerEnabled.delete(g))})()}catch(g){h=!0,m=g}finally{try{f||v.return==null||v.return()}finally{if(h)throw m}}}}])&&u(c.prototype,d),l}(),r=a.default.Shader,o.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function u(x){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkWebGLCapabilities=_,o.default=o.MipmapTexture=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},c=function(x){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var b=d();if(b&&b.has(x))return b.get(x);var S,T={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var R;Object.prototype.hasOwnProperty.call(x,S)&&((R=M?Object.getOwnPropertyDescriptor(x,S):null)&&(R.get||R.set)?Object.defineProperty(T,S,R):T[S]=x[S])}return T.default=x,b&&b.set(x,T),T}(r("../core/constants"));function d(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,d=function(){return x},x)}function p(x,b){return(p=Object.setPrototypeOf||function(S,T){return S.__proto__=T,S})(x,b)}function f(x){return function(){var b,S=h(x),S=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=h(this).constructor,Reflect.construct(S,arguments,b)):S.apply(this,arguments),this);if(!b||u(b)!=="object"&&typeof b!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function h(x){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}function m(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function y(x,b){for(var S=0;S<b.length;S++){var T=b[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function v(x,b,S){b&&y(x.prototype,b)}l.default.Texture=function(){function x(L,S,R){m(this,x),this._renderer=L;var M=this._renderer.GL,R=(R=R||{},this.src=S,this.glTex=void 0,this.glTarget=M.TEXTURE_2D,this.glFormat=R.format||M.RGBA,this.mipmaps=!1,this.glMinFilter=R.minFilter||M.LINEAR,this.glMagFilter=R.magFilter||M.LINEAR,this.glWrapS=R.wrapS||M.CLAMP_TO_EDGE,this.glWrapT=R.wrapT||M.CLAMP_TO_EDGE,this.glDataType=R.dataType||M.UNSIGNED_BYTE,_(L)),L=(this.glFormat!==M.HALF_FLOAT||R.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=M.FLOAT),this.glFormat!==M.HALF_FLOAT||this.glMinFilter!==M.LINEAR&&this.glMagFilter!==M.LINEAR||R.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===M.LINEAR&&(this.glMinFilter=M.NEAREST),this.glMagFilter===M.LINEAR&&(this.glMagFilter=M.NEAREST)),this.glFormat!==M.FLOAT||R.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=M.UNSIGNED_BYTE),this.glFormat!==M.FLOAT||this.glMinFilter!==M.LINEAR&&this.glMagFilter!==M.LINEAR||R.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===M.LINEAR&&(this.glMinFilter=M.NEAREST),this.glMagFilter===M.LINEAR&&(this.glMagFilter=M.NEAREST)),this.isSrcMediaElement=l.default.MediaElement!==void 0&&S instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&S instanceof l.default.Element&&!(S instanceof l.default.Graphics)&&!(S instanceof l.default.Renderer),this.isSrcP5Image=S instanceof l.default.Image,this.isSrcP5Graphics=S instanceof l.default.Graphics,this.isSrcP5Renderer=S instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&S instanceof ImageData,this.isFramebufferTexture=S instanceof l.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=L.width,this.height=L.height,this.init(L),this}return v(x,[{key:"_getTextureDataFromSource",value:function(){var b;return this.isFramebufferTexture?b=this.src.rawTexture():this.isSrcP5Image?b=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?b=this.src.elt:this.isImageData&&(b=this.src),b}},{key:"init",value:function(b){var S,T=this._renderer.GL;this.isFramebufferTexture||(this.glTex=T.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(S=new Uint8Array([1,1,1,1]),T.texImage2D(this.glTarget,0,T.RGBA,1,1,0,this.glFormat,this.glDataType,S)):T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b))}},{key:"update",value:function(){var b,S,T,M=this.src;return M.width!==0&&M.height!==0&&!this.isFramebufferTexture&&(b=this._getTextureDataFromSource(),S=!1,T=this._renderer.GL,b.width!==this.width||b.height!==this.height?(S=!0,this.width=b.width||M.width,this.height=b.height||M.height,this.isSrcP5Image?M.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&M.setModified(!0)):this.isSrcP5Image?M.isModified()&&M.setModified(!(S=!0)):this.isSrcMediaElement?M.isModified()?M.setModified(!(S=!0)):M.loadedmetadata&&this._videoPrevUpdateTime!==M.time()&&(this._videoPrevUpdateTime=M.time(),S=!0):this.isImageData?M._dirty&&(S=!(M._dirty=!1)):S=!0,S&&(this.bindTexture(),T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b)),S)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(b,S){var T=this._renderer.GL;this.glMinFilter=this.glFilter(b),this.glMagFilter=this.glFilter(S),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(b){var S=this._renderer.GL;return b===c.NEAREST?S.NEAREST:S.LINEAR}},{key:"setWrapMode",value:function(b,S){function T(P){return(P&P-1)==0}var M=this._renderer.GL,L=this._getTextureDataFromSource(),L=L.naturalWidth&&L.naturalHeight?(R=L.naturalWidth,L.naturalHeight):(R=this.width,this.height),R=T(R),L=T(L);b===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||R&&L?this.glWrapS=M.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=M.CLAMP_TO_EDGE):b===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||R&&L?this.glWrapS=M.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=M.CLAMP_TO_EDGE):this.glWrapS=M.CLAMP_TO_EDGE,S===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||R&&L?this.glWrapT=M.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=M.CLAMP_TO_EDGE):S===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||R&&L?this.glWrapT=M.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=M.CLAMP_TO_EDGE):this.glWrapT=M.CLAMP_TO_EDGE,this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this.glWrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),x}();var g=function(x){var b=T;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&p(b,x);var S=f(T);function T(M,R,L){return m(this,T),R=(M=S.call(this,M,R,L))._renderer.GL,M.glMinFilter===R.LINEAR&&(M.glMinFilter=R.LINEAR_MIPMAP_LINEAR),M}return v(T,[{key:"glFilter",value:function(M){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(M){var R=this._renderer.GL;this.glTex=R.createTexture(),this.bindTexture();for(var L=0;L<M.length;L++)R.texImage2D(this.glTarget,L,this.glFormat,this.glFormat,this.glDataType,M[L]);this.glMinFilter=R.LINEAR_MIPMAP_LINEAR,R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,this.glMagFilter),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),T}(l.default.Texture);function _(M){var b=M.GL,M=M.webglVersion,S=M===c.WEBGL2?b.getExtension("EXT_color_buffer_float")&&b.getExtension("EXT_float_blend"):b.getExtension("OES_texture_float"),T=S&&b.getExtension("OES_texture_float_linear"),M=M===c.WEBGL2?b.getExtension("EXT_color_buffer_float"):b.getExtension("OES_texture_half_float");return{float:S,floatLinear:T,halfFloat:M,halfFloatLinear:M&&b.getExtension("OES_texture_half_float_linear")}}o.MipmapTexture=g,r=l.default.Texture,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function u(x){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,c=(l=r("../core/main"))&&l.__esModule?l:{default:l},d=function(x){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var b=p();if(b&&b.has(x))return b.get(x);var S,T={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var R;Object.prototype.hasOwnProperty.call(x,S)&&((R=M?Object.getOwnPropertyDescriptor(x,S):null)&&(R.get||R.set)?Object.defineProperty(T,S,R):T[S]=x[S])}return T.default=x,b&&b.set(x,T),T}(r("../core/constants"));function p(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,p=function(){return x},x)}function f(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function h(x,b){for(var S=0;S<b.length;S++){var T=b[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function m(x,b,S){b&&h(x.prototype,b)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(x){return this._isOpenType()?this._textFont._textWidth(x,this._textSize):0};var y=function(){function x(b,S){f(this,x),this.width=b,this.height=S,this.infos=[]}return m(x,[{key:"findImage",value:function(b){var S,T,M=this.width*this.height;if(M<b)throw new Error("font is too complex to render in 3D");for(var R=this.infos.length-1;0<=R;--R){var L=this.infos[R];if(L.index+b<M){T=(S=L).imageData;break}}if(!S){try{T=new ImageData(this.width,this.height)}catch{var P=document.getElementsByTagName("canvas")[0],C=!P,k=(P||((P=document.createElement("canvas")).style.display="none",document.body.appendChild(P)),P.getContext("2d"));k&&(T=k.createImageData(this.width,this.height)),C&&document.body.removeChild(P)}this.infos.push(S={index:0,imageData:T})}return k=S.index,S.index+=b,T._dirty=!0,{imageData:T,index:k}}}]),x}();function v(L,b,S,T,M){var R=L.imageData.data,L=4*L.index++;R[L++]=b,R[L++]=S,R[L++]=T,R[+L]=M}var g=Math.sqrt(3),_=function(){function x(b){f(this,x),this.font=b,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return m(x,[{key:"getGlyphInfo",value:function(b){var S=this.glyphInfos[b.index];if(!S){var T=b.getBoundingBox(),M=T.x1,R=T.y1,L=T.x2-M,P=T.y2-R,C=b.path.commands;if(L==0||P==0||!C.length)return this.glyphInfos[b.index]={};for(var k=[],D=[],F=[],G=8;0<=G;--G)F.push([]);for(G=8;0<=G;--G)D.push([]);var z,Q,V,W,Y=function(){function Fe(Oe,Je,Ve,Se){f(this,Fe),this.p0=Oe,this.c0=Je,this.c1=Ve,this.p1=Se}return m(Fe,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(We){var Je=c.default.Vector.lerp(this.p0,this.c0,We),Se=c.default.Vector.lerp(this.c0,this.c1,We),Ve=c.default.Vector.lerp(Je,Se,We),Se=(this.c1=c.default.Vector.lerp(this.c1,this.p1,We),this.c0=c.default.Vector.lerp(Se,this.c1,We),c.default.Vector.lerp(Ve,this.c0,We)),We=new Fe(this.p0,Je,Ve,Se);return this.p0=Se,We}},{key:"splitInflections",value:function(){var Oe=c.default.Vector.sub(this.c0,this.p0),Je=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),Oe),Ve=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),Oe),c.default.Vector.mult(Je,2)),Se=[],We=Je.x*Ve.y-Je.y*Ve.x;return We!==0&&0<=(Oe=(Ve=Oe.x*Ve.y-Oe.y*Ve.x)*Ve-4*We*(Oe.x*Je.y-Oe.y*Je.x))&&(We<0&&(We=-We,Ve=-Ve),Oe=(-Ve+(Je=Math.sqrt(Oe)))/(2*We),0<(Ve=(-Ve-Je)/(2*We))&&Ve<1&&(Se.push(this.split(Ve)),Oe=1-(1-Oe)/(1-Ve)),0<Oe&&Oe<1&&Se.push(this.split(Oe))),Se.push(this),Se}}]),Fe}(),J=!0,ie=!1,I=void 0;try{for(var O,H=C[Symbol.iterator]();!(J=(O=H.next()).done);J=!0){var q=O.value,Z=(q.x-M)/L,oe=(q.y-R)/P;if(!Ae(z,Q,Z,oe)){switch(q.type){case"M":V=Z,W=oe;break;case"L":ne(z,Q,Z,oe);break;case"Q":var pe=(q.x1-M)/L,be=(q.y1-R)/P;Ee([z,Z,pe],[Q,oe,be],{x:z,y:Q,cx:pe,cy:be});break;case"Z":Ae(z,Q,V,W)?k.push({x:z,y:Q}):(ne(z,Q,V,W),k.push({x:V,y:W}));break;case"C":for(var me=function(de,ye,De,Ve,Se,We,Re,le){var de=new Y(new c.default.Vector(de,ye),new c.default.Vector(De,Ve),new c.default.Vector(Se,We),new c.default.Vector(Re,le)).splitInflections(),ee=[],he=30/g,Pe=!0,ye=!1,De=void 0;try{for(var Me,qe=de[Symbol.iterator]();!(Pe=(Me=qe.next()).done);Pe=!0){for(var ke=Me.value,Ye=[],dt=void 0;!(.125<=(dt=he/ke.quadError()));){var at=Math.pow(dt,.3333333333333333),ct=ke.split(at),xt=ke.split(1-at/(1-at));ee.push(ct),Ye.push(ke),ke=xt}dt<1&&ee.push(ke.split(.5)),ee.push(ke),Array.prototype.push.apply(ee,Ye.reverse())}}catch(_t){ye=!0,De=_t}finally{try{Pe||qe.return==null||qe.return()}finally{if(ye)throw De}}return ee}(z,Q,(q.x1-M)/L,(q.y1-R)/P,(q.x2-M)/L,(q.y2-R)/P,Z,oe),ce=0;ce<me.length;ce++){var te=me[ce].toQuadratic();Ee([te.x,te.x1,te.cx],[te.y,te.y1,te.cy],te)}break;default:throw new Error("unknown command type: ".concat(q.type))}z=Z,Q=oe}}}catch(Fe){ie=!0,I=Fe}finally{try{J||H.return==null||H.return()}finally{if(ie)throw I}}for(var ue=k.length,ge=this.strokeImageInfos.findImage(ue),xe=ge.index,Le=0;Le<ue;++Le){var we=k[Le];v(ge,ae(we.x),ae(we.y),ae(we.cx),ae(we.cy))}(S=this.glyphInfos[b.index]={glyph:b,uGlyphRect:[T.x1,-T.y1,T.x2,-T.y2],strokeImageInfo:ge,strokes:k,colInfo:Be(F,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Be(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[S.colInfo.dimOffset,S.rowInfo.dimOffset]}return S;function Ee(Fe,Oe,Je){var Ve=k.length;function Se(ee,he,Pe){for(var ye=ee.length;0<ye--;){var De=ee[ye];De<he&&(he=De),Pe<De&&(Pe=De)}return{min:he,max:Pe}}k.push(Je);for(var Je=Se(Fe,1,0),Fe=Math.max(Math.floor(9*Je.min-.5),0),We=Math.min(Math.ceil(9*Je.max+.5),9),Re=Fe;Re<We;++Re)F[Re].push(Ve);for(var Je=Se(Oe,1,0),Fe=Math.max(Math.floor(9*Je.min-.5),0),le=Math.min(Math.ceil(9*Je.max+.5),9),de=Fe;de<le;++de)D[de].push(Ve)}function ae(Fe){return(Fe=(Je=255)*Fe)<(Oe=0)?Oe:Je<Fe?Je:Fe;var Oe,Je}function ne(Fe,Oe,Je,Ve){Ee([Fe,Je],[Oe,Ve],{x:Fe,y:Oe,cx:(Fe+Je)/2,cy:(Oe+Ve)/2})}function Ae(Fe,Oe,Je,Ve){return Math.abs(Je-Fe)<1e-5&&Math.abs(Ve-Oe)<1e-5}function Be(Fe,Oe,Je){for(var Ve=Fe.length,Se=Oe.findImage(Ve),Oe=Se.index,We=0,Re=0;Re<Ve;++Re)We+=Fe[Re].length;for(var le=Je.findImage(We),de=0;de<Ve;++de){var ee=Fe[de],he=ee.length,Pe=le.index;v(Se,Pe>>7,127&Pe,he>>7,127&he);for(var ye=0;ye<he;++ye){var De=ee[ye]+xe;v(le,De>>7,127&De,0,0)}}return{cellImageInfo:le,dimOffset:Oe,dimImageInfo:Se}}}}]),x}();c.default.RendererGL.prototype._renderText=function(x,b,S,T,M){if(this._textFont&&typeof this._textFont!="string"){if(!(M<=T)&&this._doFill){if(this._isOpenType()){x.push();var M=this._doStroke,R=this.drawMode,L=(this._doStroke=!1,this.drawMode=d.TEXTURE,this._textFont.font),P=(P=this._textFont._fontInfo)||(this._textFont._fontInfo=new _(L)),S=this._textFont._handleAlignment(this,b,S,T),T=this._textSize/L.unitsPerEm,C=(this.translate(S.x,S.y,0),this.scale(T,T,1),this.GL),S=!this._defaultFontShader,k=this._getFontShader(),D=(k.init(),k.bindShader(),S&&(k.setUniform("uGridImageSize",[64,64]),k.setUniform("uCellsImageSize",[64,64]),k.setUniform("uStrokeImageSize",[64,64]),k.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),F=(D||((T=this._textGeom=new c.default.Geometry(1,1,function(){for(var ce=0;ce<=1;ce++)for(var te=0;te<=1;te++)this.vertices.push(new c.default.Vector(te,ce,0)),this.uvs.push(te,ce)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",T)),!0),S=!1,T=void 0;try{for(var G,z=this.retainedMode.buffers.text[Symbol.iterator]();!(F=(G=z.next()).done);F=!0)G.value._prepareBuffer(D,k)}catch(ce){S=!0,T=ce}finally{try{F||z.return==null||z.return()}finally{if(S)throw T}}this._bindBuffer(D.indexBuffer,C.ELEMENT_ARRAY_BUFFER),k.setUniform("uMaterialColor",this.curFillColor),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var Q=0,V=null,W=L.stringToGlyphs(b),Y=!0,J=!1,ie=void 0;try{for(var I,O=W[Symbol.iterator]();!(Y=(I=O.next()).done);Y=!0){var H,q,Z=I.value,oe=(V&&(Q+=L.getKerningValue(V,Z)),P.getGlyphInfo(Z));oe.uGlyphRect&&(H=oe.rowInfo,q=oe.colInfo,k.setUniform("uSamplerStrokes",oe.strokeImageInfo.imageData),k.setUniform("uSamplerRowStrokes",H.cellImageInfo.imageData),k.setUniform("uSamplerRows",H.dimImageInfo.imageData),k.setUniform("uSamplerColStrokes",q.cellImageInfo.imageData),k.setUniform("uSamplerCols",q.dimImageInfo.imageData),k.setUniform("uGridOffset",oe.uGridOffset),k.setUniform("uGlyphRect",oe.uGlyphRect),k.setUniform("uGlyphOffset",Q),k.bindTextures(),C.drawElements(C.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),Q+=Z.advanceWidth,V=Z}}catch(ce){J=!0,ie=ce}finally{try{Y||O.return==null||O.return()}finally{if(J)throw ie}}}finally{k.unbindShader(),this._doStroke=M,this.drawMode=R,C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),x.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return x}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})})(HP);var RF=HP.exports;const PF=EF(RF);function IF(i,t){return new PF(i,t)}function WM(i){var t;(t=i.current)==null||t.remove(),i.current=null}function LF(i){const{sketch:t,children:n,...r}=i,s=Qe.useRef(null),o=Qe.useRef(null);return Qe.useEffect(()=>{s.current!==null&&(WM(o),o.current=IF(t,s.current))},[t]),Qe.useEffect(()=>{var a,u;(u=(a=o.current)==null?void 0:a.updateWithProps)==null||u.call(a,r)},[r,s]),Qe.useEffect(()=>()=>WM(o),[]),vy.jsx("div",{ref:s,className:CF,children:n})}function jF(i){const{sketch:t,fallback:n}=i;return t===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),n!==void 0?vy.jsx(vy.Fragment,{children:n}):null):vy.jsx(LF,{...i})}const DF=Qe.memo(jF,MF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},dp.apply(this,arguments)}var Dl;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Dl||(Dl={}));const XM="popstate";function kF(i){i===void 0&&(i={});function t(s,o){let{pathname:a="/",search:u="",hash:l=""}=Mc(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ab("",{pathname:a,search:u,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");u=c===-1?l:l.slice(0,c)}return u+"#"+(typeof o=="string"?o:Zy(o))}function r(s,o){uS(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return BF(t,n,r,i)}function Gn(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function uS(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OF(){return Math.random().toString(36).substr(2,8)}function YM(i,t){return{usr:i.state,key:i.key,idx:t}}function Ab(i,t,n,r){return n===void 0&&(n=null),dp({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?Mc(t):t,{state:n,key:t&&t.key||r||OF()})}function Zy(i){let{pathname:t="/",search:n="",hash:r=""}=i;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mc(i){let t={};if(i){let n=i.indexOf("#");n>=0&&(t.hash=i.substr(n),i=i.substr(0,n));let r=i.indexOf("?");r>=0&&(t.search=i.substr(r),i=i.substr(0,r)),i&&(t.pathname=i)}return t}function BF(i,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,u=Dl.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(dp({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function p(){u=Dl.Pop;let v=d(),g=v==null?null:v-c;c=v,l&&l({action:u,location:y.location,delta:g})}function f(v,g){u=Dl.Push;let _=Ab(y.location,v,g);n&&n(_,v),c=d()+1;let x=YM(_,c),b=y.createHref(_);try{a.pushState(x,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(b)}o&&l&&l({action:u,location:y.location,delta:1})}function h(v,g){u=Dl.Replace;let _=Ab(y.location,v,g);n&&n(_,v),c=d();let x=YM(_,c),b=y.createHref(_);a.replaceState(x,"",b),o&&l&&l({action:u,location:y.location,delta:0})}function m(v){let g=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof v=="string"?v:Zy(v);return _=_.replace(/ $/,"%20"),Gn(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let y={get action(){return u},get location(){return i(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(XM,p),l=v,()=>{s.removeEventListener(XM,p),l=null}},createHref(v){return t(s,v)},createURL:m,encodeLocation(v){let g=m(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(v){return a.go(v)}};return y}var qM;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(qM||(qM={}));function FF(i,t,n){return n===void 0&&(n="/"),UF(i,t,n)}function UF(i,t,n,r){let s=typeof t=="string"?Mc(t):t,o=cS(s.pathname||"/",n);if(o==null)return null;let a=zP(i);NF(a);let u=null;for(let l=0;u==null&&l<a.length;++l){let c=ZF(o);u=JF(a[l],c)}return u}function zP(i,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,u)=>{let l={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Gn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Xl([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Gn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zP(o.children,t,d,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:YF(c,o.index),routesMeta:d})};return i.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,a);else for(let l of VP(o.path))s(o,a,l)}),t}function VP(i){let t=i.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=VP(r.join("/")),u=[];return u.push(...a.map(l=>l===""?o:[o,l].join("/"))),s&&u.push(...a),u.map(l=>i.startsWith("/")&&l===""?"/":l)}function NF(i){i.sort((t,n)=>t.score!==n.score?n.score-t.score:qF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GF=/^:[\w-]+$/,HF=3,zF=2,VF=1,WF=10,XF=-2,JM=i=>i==="*";function YF(i,t){let n=i.split("/"),r=n.length;return n.some(JM)&&(r+=XF),t&&(r+=zF),n.filter(s=>!JM(s)).reduce((s,o)=>s+(GF.test(o)?HF:o===""?VF:WF),r)}function qF(i,t){return i.length===t.length&&i.slice(0,-1).every((r,s)=>r===t[s])?i[i.length-1]-t[t.length-1]:0}function JF(i,t,n){let{routesMeta:r}=i,s={},o="/",a=[];for(let u=0;u<r.length;++u){let l=r[u],c=u===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",p=KF({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Xl([o,p.pathname]),pathnameBase:rU(Xl([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=Xl([o,p.pathnameBase]))}return a}function KF(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=QF(i.path,i.caseSensitive,i.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:f,isOptional:h}=d;if(f==="*"){let y=u[p]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const m=u[p];return h&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:i}}function QF(i,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),uS(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let r=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,l)=>(r.push({paramName:u,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function ZF(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uS(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function cS(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function $F(i,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof i=="string"?Mc(i):i;return{pathname:n?n.startsWith("/")?n:eU(n,t):t,search:nU(r),hash:iU(s)}}function eU(i,t){let n=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function y_(i,t,n,r){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tU(i){return i.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function WP(i,t){let n=tU(i);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function XP(i,t,n,r){r===void 0&&(r=!1);let s;typeof i=="string"?s=Mc(i):(s=dp({},i),Gn(!s.pathname||!s.pathname.includes("?"),y_("?","pathname","search",s)),Gn(!s.pathname||!s.pathname.includes("#"),y_("#","pathname","hash",s)),Gn(!s.search||!s.search.includes("#"),y_("#","search","hash",s)));let o=i===""||s.pathname==="",a=o?"/":s.pathname,u;if(a==null)u=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}u=p>=0?t[p]:"/"}let l=$F(s,u),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Xl=i=>i.join("/").replace(/\/\/+/g,"/"),rU=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),nU=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,iU=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function sU(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const YP=["post","put","patch","delete"];new Set(YP);const oU=["get",...YP];new Set(oU);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},hp.apply(this,arguments)}const fS=Qe.createContext(null),aU=Qe.createContext(null),Ec=Qe.createContext(null),d0=Qe.createContext(null),Tc=Qe.createContext({outlet:null,matches:[],isDataRoute:!1}),qP=Qe.createContext(null);function lU(i,t){let{relative:n}=t===void 0?{}:t;Np()||Gn(!1);let{basename:r,navigator:s}=Qe.useContext(Ec),{hash:o,pathname:a,search:u}=KP(i,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Xl([r,a])),s.createHref({pathname:l,search:u,hash:o})}function Np(){return Qe.useContext(d0)!=null}function h0(){return Np()||Gn(!1),Qe.useContext(d0).location}function JP(i){Qe.useContext(Ec).static||Qe.useLayoutEffect(i)}function uU(){let{isDataRoute:i}=Qe.useContext(Tc);return i?wU():cU()}function cU(){Np()||Gn(!1);let i=Qe.useContext(fS),{basename:t,future:n,navigator:r}=Qe.useContext(Ec),{matches:s}=Qe.useContext(Tc),{pathname:o}=h0(),a=JSON.stringify(WP(s,n.v7_relativeSplatPath)),u=Qe.useRef(!1);return JP(()=>{u.current=!0}),Qe.useCallback(function(c,d){if(d===void 0&&(d={}),!u.current)return;if(typeof c=="number"){r.go(c);return}let p=XP(c,JSON.parse(a),o,d.relative==="path");i==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Xl([t,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[t,r,a,o,i])}function KP(i,t){let{relative:n}=t===void 0?{}:t,{future:r}=Qe.useContext(Ec),{matches:s}=Qe.useContext(Tc),{pathname:o}=h0(),a=JSON.stringify(WP(s,r.v7_relativeSplatPath));return Qe.useMemo(()=>XP(i,JSON.parse(a),o,n==="path"),[i,a,o,n])}function fU(i,t){return dU(i,t)}function dU(i,t,n,r){Np()||Gn(!1);let{navigator:s,static:o}=Qe.useContext(Ec),{matches:a}=Qe.useContext(Tc),u=a[a.length-1],l=u?u.params:{};u&&u.pathname;let c=u?u.pathnameBase:"/";u&&u.route;let d=h0(),p;if(t){var f;let g=typeof t=="string"?Mc(t):t;c==="/"||(f=g.pathname)!=null&&f.startsWith(c)||Gn(!1),p=g}else p=d;let h=p.pathname||"/",m=h;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=FF(i,{pathname:m}),v=yU(y&&y.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Xl([c,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Xl([c,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,n,r);return t&&v?Qe.createElement(d0.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Dl.Pop}},v):v}function hU(){let i=bU(),t=sU(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Qe.createElement(Qe.Fragment,null,Qe.createElement("h2",null,"Unexpected Application Error!"),Qe.createElement("h3",{style:{fontStyle:"italic"}},t),n?Qe.createElement("pre",{style:s},n):null,null)}const pU=Qe.createElement(hU,null);class mU extends Qe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?Qe.createElement(Tc.Provider,{value:this.props.routeContext},Qe.createElement(qP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gU(i){let{routeContext:t,match:n,children:r}=i,s=Qe.useContext(fS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),Qe.createElement(Tc.Provider,{value:t},r)}function yU(i,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),i==null){var o;if(!n)return null;if(n.errors)i=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let a=i,u=(s=n)==null?void 0:s.errors;if(u!=null){let d=a.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);d>=0||Gn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:f,errors:h}=n,m=p.route.loader&&f[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,p,f)=>{let h,m=!1,y=null,v=null;n&&(h=u&&p.route.id?u[p.route.id]:void 0,y=p.route.errorElement||pU,l&&(c<0&&f===0?(SU("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=p.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,f+1)),_=()=>{let x;return h?x=y:m?x=v:p.route.Component?x=Qe.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=d,Qe.createElement(gU,{match:p,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?Qe.createElement(mU,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var QP=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(QP||{}),ZP=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(ZP||{});function vU(i){let t=Qe.useContext(fS);return t||Gn(!1),t}function _U(i){let t=Qe.useContext(aU);return t||Gn(!1),t}function xU(i){let t=Qe.useContext(Tc);return t||Gn(!1),t}function $P(i){let t=xU(),n=t.matches[t.matches.length-1];return n.route.id||Gn(!1),n.route.id}function bU(){var i;let t=Qe.useContext(qP),n=_U(),r=$P();return t!==void 0?t:(i=n.errors)==null?void 0:i[r]}function wU(){let{router:i}=vU(QP.UseNavigateStable),t=$P(ZP.UseNavigateStable),n=Qe.useRef(!1);return JP(()=>{n.current=!0}),Qe.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?i.navigate(s):i.navigate(s,hp({fromRouteId:t},o)))},[i,t])}const KM={};function SU(i,t,n){KM[i]||(KM[i]=!0)}function AU(i,t){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function Mb(i){Gn(!1)}function MU(i){let{basename:t="/",children:n=null,location:r,navigationType:s=Dl.Pop,navigator:o,static:a=!1,future:u}=i;Np()&&Gn(!1);let l=t.replace(/^\/*/,"/"),c=Qe.useMemo(()=>({basename:l,navigator:o,static:a,future:hp({v7_relativeSplatPath:!1},u)}),[l,u,o,a]);typeof r=="string"&&(r=Mc(r));let{pathname:d="/",search:p="",hash:f="",state:h=null,key:m="default"}=r,y=Qe.useMemo(()=>{let v=cS(d,l);return v==null?null:{location:{pathname:v,search:p,hash:f,state:h,key:m},navigationType:s}},[l,d,p,f,h,m,s]);return y==null?null:Qe.createElement(Ec.Provider,{value:c},Qe.createElement(d0.Provider,{children:n,value:y}))}function EU(i){let{children:t,location:n}=i;return fU(Eb(t),n)}new Promise(()=>{});function Eb(i,t){t===void 0&&(t=[]);let n=[];return Qe.Children.forEach(i,(r,s)=>{if(!Qe.isValidElement(r))return;let o=[...t,s];if(r.type===Qe.Fragment){n.push.apply(n,Eb(r.props.children,o));return}r.type!==Mb&&Gn(!1),!r.props.index||!r.props.children||Gn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Eb(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tb(){return Tb=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Tb.apply(this,arguments)}function TU(i,t){if(i==null)return{};var n={},r=Object.keys(i),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=i[s]);return n}function CU(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function RU(i,t){return i.button===0&&(!t||t==="_self")&&!CU(i)}const PU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IU="6";try{window.__reactRouterVersion=IU}catch{}const LU="startTransition",QM=dO[LU];function jU(i){let{basename:t,children:n,future:r,window:s}=i,o=Qe.useRef();o.current==null&&(o.current=kF({window:s,v5Compat:!0}));let a=o.current,[u,l]=Qe.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=Qe.useCallback(p=>{c&&QM?QM(()=>l(p)):l(p)},[l,c]);return Qe.useLayoutEffect(()=>a.listen(d),[a,d]),Qe.useEffect(()=>AU(r),[r]),Qe.createElement(MU,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const DU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eI=Qe.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:u,target:l,to:c,preventScrollReset:d,viewTransition:p}=t,f=TU(t,PU),{basename:h}=Qe.useContext(Ec),m,y=!1;if(typeof c=="string"&&kU.test(c)&&(m=c,DU))try{let x=new URL(window.location.href),b=c.startsWith("//")?new URL(x.protocol+c):new URL(c),S=cS(b.pathname,h);b.origin===x.origin&&S!=null?c=S+b.search+b.hash:y=!0}catch{}let v=lU(c,{relative:s}),g=OU(c,{replace:a,state:u,target:l,preventScrollReset:d,relative:s,viewTransition:p});function _(x){r&&r(x),x.defaultPrevented||g(x)}return Qe.createElement("a",Tb({},f,{href:m||v,onClick:y||o?r:_,ref:n,target:l}))});var ZM;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(ZM||(ZM={}));var $M;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})($M||($M={}));function OU(i,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:u}=t===void 0?{}:t,l=uU(),c=h0(),d=KP(i,{relative:a});return Qe.useCallback(p=>{if(RU(p,n)){p.preventDefault();let f=r!==void 0?r:Zy(c)===Zy(d);l(i,{replace:f,state:s,preventScrollReset:o,relative:a,viewTransition:u})}},[c,l,d,r,s,n,i,o,a,u])}function $y(){return $y=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},$y.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gp="169",Fu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Uu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tI=0,Cb=1,rI=2,BU=3,nI=0,p0=1,jh=2,Co=3,Fo=0,$i=1,Is=2,Ga=0,rc=1,Rb=2,Pb=3,Ib=4,iI=5,Il=100,sI=101,oI=102,aI=103,lI=104,uI=200,cI=201,fI=202,dI=203,ev=204,tv=205,hI=206,pI=207,mI=208,gI=209,yI=210,vI=211,_I=212,xI=213,bI=214,rv=0,nv=1,iv=2,pc=3,sv=4,ov=5,av=6,lv=7,Hp=0,wI=1,SI=2,la=0,AI=1,MI=2,EI=3,dS=4,TI=5,CI=6,RI=7,Lb="attached",PI="detached",m0=300,Ya=301,Kl=302,pp=303,mp=304,cd=306,Uo=1e3,ms=1001,mc=1002,Nn=1003,zp=1004,FU=1004,kl=1005,UU=1005,sn=1006,nc=1007,NU=1007,gs=1008,GU=1008,No=1009,hS=1010,pS=1011,rd=1012,g0=1013,qa=1014,ys=1015,fd=1016,y0=1017,v0=1018,gc=1020,mS=35902,gS=1021,yS=1022,Di=1023,vS=1024,_S=1025,ic=1026,yc=1027,_0=1028,Vp=1029,xS=1030,x0=1031,HU=1032,b0=1033,Dh=33776,kh=33777,Oh=33778,Bh=33779,uv=35840,cv=35841,fv=35842,dv=35843,hv=36196,pv=37492,mv=37496,gv=37808,yv=37809,vv=37810,_v=37811,xv=37812,bv=37813,wv=37814,Sv=37815,Av=37816,Mv=37817,Ev=37818,Tv=37819,Cv=37820,Rv=37821,Fh=36492,Pv=36494,Iv=36495,bS=36283,Lv=36284,jv=36285,Dv=36286,II=2200,LI=2201,jI=2202,vc=2300,Ql=2301,_y=2302,qu=2400,Ju=2401,gp=2402,w0=2500,wS=2501,SS=0,Wp=1,_c=2,DI=3200,AS=3201,zU=3202,VU=3203,tu=0,kI=1,ka="",yi="srgb",fi="srgb-linear",S0="display-p3",Xp="display-p3-linear",yp="linear",tn="srgb",vp="rec709",_p="p3",WU=0,Nu=7680,XU=7681,YU=7682,qU=7683,JU=34055,KU=34056,QU=5386,ZU=512,$U=513,e4=514,t4=515,r4=516,n4=517,i4=518,jb=519,OI=512,BI=513,FI=514,MS=515,UI=516,NI=517,GI=518,HI=519,xp=35044,s4=35048,o4=35040,a4=35045,l4=35049,u4=35041,c4=35046,f4=35050,d4=35042,h4="100",Db="300 es",sa=2e3,bp=2001;let ha=class{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const s=r.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,t);t.target=null}}};const Ri=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eE=1234567;const sc=Math.PI/180,nd=180/Math.PI;function Ds(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ri[i&255]+Ri[i>>8&255]+Ri[i>>16&255]+Ri[i>>24&255]+"-"+Ri[t&255]+Ri[t>>8&255]+"-"+Ri[t>>16&15|64]+Ri[t>>24&255]+"-"+Ri[n&63|128]+Ri[n>>8&255]+"-"+Ri[n>>16&255]+Ri[n>>24&255]+Ri[r&255]+Ri[r>>8&255]+Ri[r>>16&255]+Ri[r>>24&255]).toLowerCase()}function En(i,t,n){return Math.max(t,Math.min(n,i))}function ES(i,t){return(i%t+t)%t}function p4(i,t,n,r,s){return r+(i-t)*(s-r)/(n-t)}function m4(i,t,n){return i!==t?(n-i)/(t-i):0}function Uh(i,t,n){return(1-n)*i+n*t}function g4(i,t,n,r){return Uh(i,t,1-Math.exp(-n*r))}function y4(i,t=1){return t-Math.abs(ES(i,t*2)-t)}function v4(i,t,n){return i<=t?0:i>=n?1:(i=(i-t)/(n-t),i*i*(3-2*i))}function _4(i,t,n){return i<=t?0:i>=n?1:(i=(i-t)/(n-t),i*i*i*(i*(i*6-15)+10))}function x4(i,t){return i+Math.floor(Math.random()*(t-i+1))}function b4(i,t){return i+Math.random()*(t-i)}function w4(i){return i*(.5-Math.random())}function S4(i){i!==void 0&&(eE=i);let t=eE+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function A4(i){return i*sc}function M4(i){return i*nd}function E4(i){return(i&i-1)===0&&i!==0}function T4(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function C4(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function R4(i,t,n,r,s){const o=Math.cos,a=Math.sin,u=o(n/2),l=a(n/2),c=o((t+r)/2),d=a((t+r)/2),p=o((t-r)/2),f=a((t-r)/2),h=o((r-t)/2),m=a((r-t)/2);switch(s){case"XYX":i.set(u*d,l*p,l*f,u*c);break;case"YZY":i.set(l*f,u*d,l*p,u*c);break;case"ZXZ":i.set(l*p,l*f,u*d,u*c);break;case"XZX":i.set(u*d,l*m,l*h,u*c);break;case"YXY":i.set(l*h,u*d,l*m,u*c);break;case"ZYZ":i.set(l*m,l*h,u*d,u*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ki(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function pr(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const A0={DEG2RAD:sc,RAD2DEG:nd,generateUUID:Ds,clamp:En,euclideanModulo:ES,mapLinear:p4,inverseLerp:m4,lerp:Uh,damp:g4,pingpong:y4,smoothstep:v4,smootherstep:_4,randInt:x4,randFloat:b4,randFloatSpread:w4,seededRandom:S4,degToRad:A4,radToDeg:M4,isPowerOfTwo:E4,ceilPowerOfTwo:T4,floorPowerOfTwo:C4,setQuaternionFromProperEuler:R4,normalize:pr,denormalize:Ki};class mt{constructor(t=0,n=0){mt.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,r=this.y,s=t.elements;return this.x=s[0]*n+s[3]*r+s[6],this.y=s[1]*n+s[4]*r+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(En(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y;return n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const r=Math.cos(n),s=Math.sin(n),o=this.x-t.x,a=this.y-t.y;return this.x=o*r-a*s+t.x,this.y=o*s+a*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cr{constructor(t,n,r,s,o,a,u,l,c){cr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,r,s,o,a,u,l,c)}set(t,n,r,s,o,a,u,l,c){const d=this.elements;return d[0]=t,d[1]=s,d[2]=u,d[3]=n,d[4]=o,d[5]=l,d[6]=r,d[7]=a,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,s=n.elements,o=this.elements,a=r[0],u=r[3],l=r[6],c=r[1],d=r[4],p=r[7],f=r[2],h=r[5],m=r[8],y=s[0],v=s[3],g=s[6],_=s[1],x=s[4],b=s[7],S=s[2],T=s[5],M=s[8];return o[0]=a*y+u*_+l*S,o[3]=a*v+u*x+l*T,o[6]=a*g+u*b+l*M,o[1]=c*y+d*_+p*S,o[4]=c*v+d*x+p*T,o[7]=c*g+d*b+p*M,o[2]=f*y+h*_+m*S,o[5]=f*v+h*x+m*T,o[8]=f*g+h*b+m*M,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],d=t[8];return n*a*d-n*u*c-r*o*d+r*u*l+s*o*c-s*a*l}invert(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],d=t[8],p=d*a-u*c,f=u*l-d*o,h=c*o-a*l,m=n*p+r*f+s*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/m;return t[0]=p*y,t[1]=(s*c-d*r)*y,t[2]=(u*r-s*a)*y,t[3]=f*y,t[4]=(d*n-s*l)*y,t[5]=(s*o-u*n)*y,t[6]=h*y,t[7]=(r*l-c*n)*y,t[8]=(a*n-r*o)*y,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,r,s,o,a,u){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*u)+a+t,-s*c,s*l,-s*(-c*a+l*u)+u+n,0,0,1),this}scale(t,n){return this.premultiply(v_.makeScale(t,n)),this}rotate(t){return this.premultiply(v_.makeRotation(-t)),this}translate(t,n){return this.premultiply(v_.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,r=t.elements;for(let s=0;s<9;s++)if(n[s]!==r[s])return!1;return!0}fromArray(t,n=0){for(let r=0;r<9;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const v_=new cr;function zI(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const P4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Pf(i,t){return new P4[i](t)}function wp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function VI(){const i=wp("canvas");return i.style.display="block",i}const tE={};function xy(i){i in tE||(tE[i]=!0,console.warn(i))}function I4(i,t,n){return new Promise(function(r,s){function o(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function L4(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function j4(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const rE=new cr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),nE=new cr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Hd={[fi]:{transfer:yp,primaries:vp,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[yi]:{transfer:tn,primaries:vp,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Xp]:{transfer:yp,primaries:_p,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(nE),fromReference:i=>i.applyMatrix3(rE)},[S0]:{transfer:tn,primaries:_p,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(nE),fromReference:i=>i.applyMatrix3(rE).convertLinearToSRGB()}},D4=new Set([fi,Xp]),Ir={enabled:!0,_workingColorSpace:fi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!D4.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,n){if(this.enabled===!1||t===n||!t||!n)return i;const r=Hd[t].toReference,s=Hd[n].fromReference;return s(r(i))},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return Hd[i].primaries},getTransfer:function(i){return i===ka?yp:Hd[i].transfer},getLuminanceCoefficients:function(i,t=this._workingColorSpace){return i.fromArray(Hd[t].luminanceCoefficients)}};function Gf(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function __(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Wc;class WI{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Wc===void 0&&(Wc=wp("canvas")),Wc.width=t.width,Wc.height=t.height;const r=Wc.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=Wc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=wp("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height),o=s.data;for(let a=0;a<o.length;a++)o[a]=Gf(o[a]/255)*255;return r.putImageData(s,0,0),n}else if(t.data){const n=t.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Gf(n[r]/255)*255):n[r]=Gf(n[r]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let k4=0;class Ku{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:k4++}),this.uuid=Ds(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let a=0,u=s.length;a<u;a++)s[a].isDataTexture?o.push(x_(s[a].image)):o.push(x_(s[a]))}else o=x_(s);r.url=o}return n||(t.images[this.uuid]=r),r}}function x_(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?WI.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let O4=0;class Qr extends ha{constructor(t=Qr.DEFAULT_IMAGE,n=Qr.DEFAULT_MAPPING,r=ms,s=ms,o=sn,a=gs,u=Di,l=No,c=Qr.DEFAULT_ANISOTROPY,d=ka){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:O4++}),this.uuid=Ds(),this.name="",this.source=new Ku(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=u,this.internalFormat=null,this.type=l,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==m0)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Uo:t.x=t.x-Math.floor(t.x);break;case ms:t.x=t.x<0?0:1;break;case mc:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Uo:t.y=t.y-Math.floor(t.y);break;case ms:t.y=t.y<0?0:1;break;case mc:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Qr.DEFAULT_IMAGE=null;Qr.DEFAULT_MAPPING=m0;Qr.DEFAULT_ANISOTROPY=1;class _r{constructor(t=0,n=0,r=0,s=1){_r.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,r,s){return this.x=t,this.y=n,this.z=r,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,r=this.y,s=this.z,o=this.w,a=t.elements;return this.x=a[0]*n+a[4]*r+a[8]*s+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*s+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*s+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*s+a[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,r,s,o;const l=t.elements,c=l[0],d=l[4],p=l[8],f=l[1],h=l[5],m=l[9],y=l[2],v=l[6],g=l[10];if(Math.abs(d-f)<.01&&Math.abs(p-y)<.01&&Math.abs(m-v)<.01){if(Math.abs(d+f)<.1&&Math.abs(p+y)<.1&&Math.abs(m+v)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,b=(h+1)/2,S=(g+1)/2,T=(d+f)/4,M=(p+y)/4,R=(m+v)/4;return x>b&&x>S?x<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(x),s=T/r,o=M/r):b>S?b<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(b),r=T/s,o=R/s):S<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(S),r=M/o,s=R/o),this.set(r,s,o,n),this}let _=Math.sqrt((v-m)*(v-m)+(p-y)*(p-y)+(f-d)*(f-d));return Math.abs(_)<.001&&(_=1),this.x=(v-m)/_,this.y=(p-y)/_,this.z=(f-d)/_,this.w=Math.acos((c+h+g-1)/2),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this.w=t.w+(n.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XI extends ha{constructor(t=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new _r(0,0,t,n),this.scissorTest=!1,this.viewport=new _r(0,0,t,n);const s={width:t,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Qr(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let u=0;u<a;u++)this.textures[u]=o.clone(),this.textures[u].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,n,r=1){if(this.width!==t||this.height!==n||this.depth!==r){this.width=t,this.height=n,this.depth=r;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=t,this.textures[s].image.height=n,this.textures[s].image.depth=r;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,s=t.textures.length;r<s;r++)this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Ku(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Go extends XI{constructor(t=1,n=1,r={}){super(t,n,r),this.isWebGLRenderTarget=!0}}class M0 extends Qr{constructor(t=null,n=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:r,depth:s},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=ms,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class B4 extends Go{constructor(t=1,n=1,r=1,s={}){super(t,n,s),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new M0(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class TS extends Qr{constructor(t=null,n=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:r,depth:s},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=ms,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class F4 extends Go{constructor(t=1,n=1,r=1,s={}){super(t,n,s),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new TS(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class Yr{constructor(t=0,n=0,r=0,s=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=s}static slerpFlat(t,n,r,s,o,a,u){let l=r[s+0],c=r[s+1],d=r[s+2],p=r[s+3];const f=o[a+0],h=o[a+1],m=o[a+2],y=o[a+3];if(u===0){t[n+0]=l,t[n+1]=c,t[n+2]=d,t[n+3]=p;return}if(u===1){t[n+0]=f,t[n+1]=h,t[n+2]=m,t[n+3]=y;return}if(p!==y||l!==f||c!==h||d!==m){let v=1-u;const g=l*f+c*h+d*m+p*y,_=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const S=Math.sqrt(x),T=Math.atan2(S,g*_);v=Math.sin(v*T)/S,u=Math.sin(u*T)/S}const b=u*_;if(l=l*v+f*b,c=c*v+h*b,d=d*v+m*b,p=p*v+y*b,v===1-u){const S=1/Math.sqrt(l*l+c*c+d*d+p*p);l*=S,c*=S,d*=S,p*=S}}t[n]=l,t[n+1]=c,t[n+2]=d,t[n+3]=p}static multiplyQuaternionsFlat(t,n,r,s,o,a){const u=r[s],l=r[s+1],c=r[s+2],d=r[s+3],p=o[a],f=o[a+1],h=o[a+2],m=o[a+3];return t[n]=u*m+d*p+l*h-c*f,t[n+1]=l*m+d*f+c*p-u*h,t[n+2]=c*m+d*h+u*f-l*p,t[n+3]=d*m-u*p-l*f-c*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,r,s){return this._x=t,this._y=n,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const r=t._x,s=t._y,o=t._z,a=t._order,u=Math.cos,l=Math.sin,c=u(r/2),d=u(s/2),p=u(o/2),f=l(r/2),h=l(s/2),m=l(o/2);switch(a){case"XYZ":this._x=f*d*p+c*h*m,this._y=c*h*p-f*d*m,this._z=c*d*m+f*h*p,this._w=c*d*p-f*h*m;break;case"YXZ":this._x=f*d*p+c*h*m,this._y=c*h*p-f*d*m,this._z=c*d*m-f*h*p,this._w=c*d*p+f*h*m;break;case"ZXY":this._x=f*d*p-c*h*m,this._y=c*h*p+f*d*m,this._z=c*d*m+f*h*p,this._w=c*d*p-f*h*m;break;case"ZYX":this._x=f*d*p-c*h*m,this._y=c*h*p+f*d*m,this._z=c*d*m-f*h*p,this._w=c*d*p+f*h*m;break;case"YZX":this._x=f*d*p+c*h*m,this._y=c*h*p+f*d*m,this._z=c*d*m-f*h*p,this._w=c*d*p-f*h*m;break;case"XZY":this._x=f*d*p-c*h*m,this._y=c*h*p-f*d*m,this._z=c*d*m+f*h*p,this._w=c*d*p+f*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const r=n/2,s=Math.sin(r);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,r=n[0],s=n[4],o=n[8],a=n[1],u=n[5],l=n[9],c=n[2],d=n[6],p=n[10],f=r+u+p;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(d-l)*h,this._y=(o-c)*h,this._z=(a-s)*h}else if(r>u&&r>p){const h=2*Math.sqrt(1+r-u-p);this._w=(d-l)/h,this._x=.25*h,this._y=(s+a)/h,this._z=(o+c)/h}else if(u>p){const h=2*Math.sqrt(1+u-r-p);this._w=(o-c)/h,this._x=(s+a)/h,this._y=.25*h,this._z=(l+d)/h}else{const h=2*Math.sqrt(1+p-r-u);this._w=(a-s)/h,this._x=(o+c)/h,this._y=(l+d)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(En(this.dot(t),-1,1)))}rotateTowards(t,n){const r=this.angleTo(t);if(r===0)return this;const s=Math.min(1,n/r);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const r=t._x,s=t._y,o=t._z,a=t._w,u=n._x,l=n._y,c=n._z,d=n._w;return this._x=r*d+a*u+s*c-o*l,this._y=s*d+a*l+o*u-r*c,this._z=o*d+a*c+r*l-s*u,this._w=a*d-r*u-s*l-o*c,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const r=this._x,s=this._y,o=this._z,a=this._w;let u=a*t._w+r*t._x+s*t._y+o*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=a,this._x=r,this._y=s,this._z=o,this;const l=1-u*u;if(l<=Number.EPSILON){const h=1-n;return this._w=h*a+n*this._w,this._x=h*r+n*this._x,this._y=h*s+n*this._y,this._z=h*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,u),p=Math.sin((1-n)*d)/c,f=Math.sin(n*d)/c;return this._w=a*p+this._w*f,this._x=r*p+this._x*f,this._y=s*p+this._y*f,this._z=o*p+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,n,r){return this.copy(t).slerp(n,r)}random(){const t=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(s*Math.sin(t),s*Math.cos(t),o*Math.sin(n),o*Math.cos(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ce{constructor(t=0,n=0,r=0){Ce.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}set(t,n,r){return r===void 0&&(r=this.z),this.x=t,this.y=n,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(iE.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(iE.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,r=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[3]*r+o[6]*s,this.y=o[1]*n+o[4]*r+o[7]*s,this.z=o[2]*n+o[5]*r+o[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,r=this.y,s=this.z,o=t.elements,a=1/(o[3]*n+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*s+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*s+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*s+o[14])*a,this}applyQuaternion(t){const n=this.x,r=this.y,s=this.z,o=t.x,a=t.y,u=t.z,l=t.w,c=2*(a*s-u*r),d=2*(u*n-o*s),p=2*(o*r-a*n);return this.x=n+l*c+a*p-u*d,this.y=r+l*d+u*c-o*p,this.z=s+l*p+o*d-a*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,r=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[4]*r+o[8]*s,this.y=o[1]*n+o[5]*r+o[9]*s,this.z=o[2]*n+o[6]*r+o[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const r=t.x,s=t.y,o=t.z,a=n.x,u=n.y,l=n.z;return this.x=s*l-o*u,this.y=o*a-r*l,this.z=r*u-s*a,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const r=t.dot(this)/n;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return b_.copy(this).projectOnVector(t),this.sub(b_)}reflect(t){return this.sub(b_.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(En(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y,s=this.z-t.z;return n*n+r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,r){const s=Math.sin(n)*t;return this.x=s*Math.sin(r),this.y=Math.cos(n)*t,this.z=s*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=s,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(t),this.y=n,this.z=r*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const b_=new Ce,iE=new Yr;class Hn{constructor(t=new Ce(1/0,1/0,1/0),n=new Ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n+=3)this.expandByPoint(So.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,r=t.count;n<r;n++)this.expandByPoint(So.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=So.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let a=0,u=o.count;a<u;a++)t.isMesh===!0?t.getVertexPosition(a,So):So.fromBufferAttribute(o,a),So.applyMatrix4(t.matrixWorld),this.expandByPoint(So);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),og.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),og.copy(r.boundingBox)),og.applyMatrix4(t.matrixWorld),this.union(og)}const s=t.children;for(let o=0,a=s.length;o<a;o++)this.expandByObject(s[o],n);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,So),So.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,r;return t.normal.x>0?(n=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),n<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(zd),ag.subVectors(this.max,zd),Xc.subVectors(t.a,zd),Yc.subVectors(t.b,zd),qc.subVectors(t.c,zd),gl.subVectors(Yc,Xc),yl.subVectors(qc,Yc),xu.subVectors(Xc,qc);let n=[0,-gl.z,gl.y,0,-yl.z,yl.y,0,-xu.z,xu.y,gl.z,0,-gl.x,yl.z,0,-yl.x,xu.z,0,-xu.x,-gl.y,gl.x,0,-yl.y,yl.x,0,-xu.y,xu.x,0];return!w_(n,Xc,Yc,qc,ag)||(n=[1,0,0,0,1,0,0,0,1],!w_(n,Xc,Yc,qc,ag))?!1:(lg.crossVectors(gl,yl),n=[lg.x,lg.y,lg.z],w_(n,Xc,Yc,qc,ag))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,So).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(So).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(wa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const wa=[new Ce,new Ce,new Ce,new Ce,new Ce,new Ce,new Ce,new Ce],So=new Ce,og=new Hn,Xc=new Ce,Yc=new Ce,qc=new Ce,gl=new Ce,yl=new Ce,xu=new Ce,zd=new Ce,ag=new Ce,lg=new Ce,bu=new Ce;function w_(i,t,n,r,s){for(let o=0,a=i.length-3;o<=a;o+=3){bu.fromArray(i,o);const u=s.x*Math.abs(bu.x)+s.y*Math.abs(bu.y)+s.z*Math.abs(bu.z),l=t.dot(bu),c=n.dot(bu),d=r.dot(bu);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>u)return!1}return!0}const U4=new Hn,Vd=new Ce,S_=new Ce;class Qn{constructor(t=new Ce,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const r=this.center;n!==void 0?r.copy(n):U4.setFromPoints(t).getCenter(r);let s=0;for(let o=0,a=t.length;o<a;o++)s=Math.max(s,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const r=this.center.distanceToSquared(t);return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Vd.subVectors(t,this.center);const n=Vd.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),s=(r-this.radius)*.5;this.center.addScaledVector(Vd,s/r),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(S_.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Vd.copy(t.center).add(S_)),this.expandByPoint(Vd.copy(t.center).sub(S_))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Sa=new Ce,A_=new Ce,ug=new Ce,vl=new Ce,M_=new Ce,cg=new Ce,E_=new Ce;class Cc{constructor(t=new Ce,n=new Ce(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Sa)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=Sa.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(Sa.copy(this.origin).addScaledVector(this.direction,n),Sa.distanceToSquared(t))}distanceSqToSegment(t,n,r,s){A_.copy(t).add(n).multiplyScalar(.5),ug.copy(n).sub(t).normalize(),vl.copy(this.origin).sub(A_);const o=t.distanceTo(n)*.5,a=-this.direction.dot(ug),u=vl.dot(this.direction),l=-vl.dot(ug),c=vl.lengthSq(),d=Math.abs(1-a*a);let p,f,h,m;if(d>0)if(p=a*l-u,f=a*u-l,m=o*d,p>=0)if(f>=-m)if(f<=m){const y=1/d;p*=y,f*=y,h=p*(p+a*f+2*u)+f*(a*p+f+2*l)+c}else f=o,p=Math.max(0,-(a*f+u)),h=-p*p+f*(f+2*l)+c;else f=-o,p=Math.max(0,-(a*f+u)),h=-p*p+f*(f+2*l)+c;else f<=-m?(p=Math.max(0,-(-a*o+u)),f=p>0?-o:Math.min(Math.max(-o,-l),o),h=-p*p+f*(f+2*l)+c):f<=m?(p=0,f=Math.min(Math.max(-o,-l),o),h=f*(f+2*l)+c):(p=Math.max(0,-(a*o+u)),f=p>0?o:Math.min(Math.max(-o,-l),o),h=-p*p+f*(f+2*l)+c);else f=a>0?-o:o,p=Math.max(0,-(a*f+u)),h=-p*p+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,p),s&&s.copy(A_).addScaledVector(ug,f),h}intersectSphere(t,n){Sa.subVectors(t.center,this.origin);const r=Sa.dot(this.direction),s=Sa.dot(Sa)-r*r,o=t.radius*t.radius;if(s>o)return null;const a=Math.sqrt(o-s),u=r-a,l=r+a;return l<0?null:u<0?this.at(l,n):this.at(u,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/n;return r>=0?r:null}intersectPlane(t,n){const r=this.distanceToPlane(t);return r===null?null:this.at(r,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let r,s,o,a,u,l;const c=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,f=this.origin;return c>=0?(r=(t.min.x-f.x)*c,s=(t.max.x-f.x)*c):(r=(t.max.x-f.x)*c,s=(t.min.x-f.x)*c),d>=0?(o=(t.min.y-f.y)*d,a=(t.max.y-f.y)*d):(o=(t.max.y-f.y)*d,a=(t.min.y-f.y)*d),r>a||o>s||((o>r||isNaN(r))&&(r=o),(a<s||isNaN(s))&&(s=a),p>=0?(u=(t.min.z-f.z)*p,l=(t.max.z-f.z)*p):(u=(t.max.z-f.z)*p,l=(t.min.z-f.z)*p),r>l||u>s)||((u>r||r!==r)&&(r=u),(l<s||s!==s)&&(s=l),s<0)?null:this.at(r>=0?r:s,n)}intersectsBox(t){return this.intersectBox(t,Sa)!==null}intersectTriangle(t,n,r,s,o){M_.subVectors(n,t),cg.subVectors(r,t),E_.crossVectors(M_,cg);let a=this.direction.dot(E_),u;if(a>0){if(s)return null;u=1}else if(a<0)u=-1,a=-a;else return null;vl.subVectors(this.origin,t);const l=u*this.direction.dot(cg.crossVectors(vl,cg));if(l<0)return null;const c=u*this.direction.dot(M_.cross(vl));if(c<0||l+c>a)return null;const d=-u*vl.dot(E_);return d<0?null:this.at(d/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gt{constructor(t,n,r,s,o,a,u,l,c,d,p,f,h,m,y,v){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,r,s,o,a,u,l,c,d,p,f,h,m,y,v)}set(t,n,r,s,o,a,u,l,c,d,p,f,h,m,y,v){const g=this.elements;return g[0]=t,g[4]=n,g[8]=r,g[12]=s,g[1]=o,g[5]=a,g[9]=u,g[13]=l,g[2]=c,g[6]=d,g[10]=p,g[14]=f,g[3]=h,g[7]=m,g[11]=y,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gt().fromArray(this.elements)}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(t){const n=this.elements,r=t.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,r=t.elements,s=1/Jc.setFromMatrixColumn(t,0).length(),o=1/Jc.setFromMatrixColumn(t,1).length(),a=1/Jc.setFromMatrixColumn(t,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,r=t.x,s=t.y,o=t.z,a=Math.cos(r),u=Math.sin(r),l=Math.cos(s),c=Math.sin(s),d=Math.cos(o),p=Math.sin(o);if(t.order==="XYZ"){const f=a*d,h=a*p,m=u*d,y=u*p;n[0]=l*d,n[4]=-l*p,n[8]=c,n[1]=h+m*c,n[5]=f-y*c,n[9]=-u*l,n[2]=y-f*c,n[6]=m+h*c,n[10]=a*l}else if(t.order==="YXZ"){const f=l*d,h=l*p,m=c*d,y=c*p;n[0]=f+y*u,n[4]=m*u-h,n[8]=a*c,n[1]=a*p,n[5]=a*d,n[9]=-u,n[2]=h*u-m,n[6]=y+f*u,n[10]=a*l}else if(t.order==="ZXY"){const f=l*d,h=l*p,m=c*d,y=c*p;n[0]=f-y*u,n[4]=-a*p,n[8]=m+h*u,n[1]=h+m*u,n[5]=a*d,n[9]=y-f*u,n[2]=-a*c,n[6]=u,n[10]=a*l}else if(t.order==="ZYX"){const f=a*d,h=a*p,m=u*d,y=u*p;n[0]=l*d,n[4]=m*c-h,n[8]=f*c+y,n[1]=l*p,n[5]=y*c+f,n[9]=h*c-m,n[2]=-c,n[6]=u*l,n[10]=a*l}else if(t.order==="YZX"){const f=a*l,h=a*c,m=u*l,y=u*c;n[0]=l*d,n[4]=y-f*p,n[8]=m*p+h,n[1]=p,n[5]=a*d,n[9]=-u*d,n[2]=-c*d,n[6]=h*p+m,n[10]=f-y*p}else if(t.order==="XZY"){const f=a*l,h=a*c,m=u*l,y=u*c;n[0]=l*d,n[4]=-p,n[8]=c*d,n[1]=f*p+y,n[5]=a*d,n[9]=h*p-m,n[2]=m*p-h,n[6]=u*d,n[10]=y*p+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(N4,t,G4)}lookAt(t,n,r){const s=this.elements;return Cs.subVectors(t,n),Cs.lengthSq()===0&&(Cs.z=1),Cs.normalize(),_l.crossVectors(r,Cs),_l.lengthSq()===0&&(Math.abs(r.z)===1?Cs.x+=1e-4:Cs.z+=1e-4,Cs.normalize(),_l.crossVectors(r,Cs)),_l.normalize(),fg.crossVectors(Cs,_l),s[0]=_l.x,s[4]=fg.x,s[8]=Cs.x,s[1]=_l.y,s[5]=fg.y,s[9]=Cs.y,s[2]=_l.z,s[6]=fg.z,s[10]=Cs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,s=n.elements,o=this.elements,a=r[0],u=r[4],l=r[8],c=r[12],d=r[1],p=r[5],f=r[9],h=r[13],m=r[2],y=r[6],v=r[10],g=r[14],_=r[3],x=r[7],b=r[11],S=r[15],T=s[0],M=s[4],R=s[8],L=s[12],P=s[1],C=s[5],k=s[9],D=s[13],F=s[2],G=s[6],z=s[10],Q=s[14],V=s[3],W=s[7],Y=s[11],J=s[15];return o[0]=a*T+u*P+l*F+c*V,o[4]=a*M+u*C+l*G+c*W,o[8]=a*R+u*k+l*z+c*Y,o[12]=a*L+u*D+l*Q+c*J,o[1]=d*T+p*P+f*F+h*V,o[5]=d*M+p*C+f*G+h*W,o[9]=d*R+p*k+f*z+h*Y,o[13]=d*L+p*D+f*Q+h*J,o[2]=m*T+y*P+v*F+g*V,o[6]=m*M+y*C+v*G+g*W,o[10]=m*R+y*k+v*z+g*Y,o[14]=m*L+y*D+v*Q+g*J,o[3]=_*T+x*P+b*F+S*V,o[7]=_*M+x*C+b*G+S*W,o[11]=_*R+x*k+b*z+S*Y,o[15]=_*L+x*D+b*Q+S*J,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[4],s=t[8],o=t[12],a=t[1],u=t[5],l=t[9],c=t[13],d=t[2],p=t[6],f=t[10],h=t[14],m=t[3],y=t[7],v=t[11],g=t[15];return m*(+o*l*p-s*c*p-o*u*f+r*c*f+s*u*h-r*l*h)+y*(+n*l*h-n*c*f+o*a*f-s*a*h+s*c*d-o*l*d)+v*(+n*c*p-n*u*h-o*a*p+r*a*h+o*u*d-r*c*d)+g*(-s*u*d-n*l*p+n*u*f+s*a*p-r*a*f+r*l*d)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,r){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=n,s[14]=r),this}invert(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],d=t[8],p=t[9],f=t[10],h=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=p*v*c-y*f*c+y*l*h-u*v*h-p*l*g+u*f*g,x=m*f*c-d*v*c-m*l*h+a*v*h+d*l*g-a*f*g,b=d*y*c-m*p*c+m*u*h-a*y*h-d*u*g+a*p*g,S=m*p*l-d*y*l-m*u*f+a*y*f+d*u*v-a*p*v,T=n*_+r*x+s*b+o*S;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/T;return t[0]=_*M,t[1]=(y*f*o-p*v*o-y*s*h+r*v*h+p*s*g-r*f*g)*M,t[2]=(u*v*o-y*l*o+y*s*c-r*v*c-u*s*g+r*l*g)*M,t[3]=(p*l*o-u*f*o-p*s*c+r*f*c+u*s*h-r*l*h)*M,t[4]=x*M,t[5]=(d*v*o-m*f*o+m*s*h-n*v*h-d*s*g+n*f*g)*M,t[6]=(m*l*o-a*v*o-m*s*c+n*v*c+a*s*g-n*l*g)*M,t[7]=(a*f*o-d*l*o+d*s*c-n*f*c-a*s*h+n*l*h)*M,t[8]=b*M,t[9]=(m*p*o-d*y*o-m*r*h+n*y*h+d*r*g-n*p*g)*M,t[10]=(a*y*o-m*u*o+m*r*c-n*y*c-a*r*g+n*u*g)*M,t[11]=(d*u*o-a*p*o-d*r*c+n*p*c+a*r*h-n*u*h)*M,t[12]=S*M,t[13]=(d*y*s-m*p*s+m*r*f-n*y*f-d*r*v+n*p*v)*M,t[14]=(m*u*s-a*y*s-m*r*l+n*y*l+a*r*v-n*u*v)*M,t[15]=(a*p*s-d*u*s+d*r*l-n*p*l-a*r*f+n*u*f)*M,this}scale(t){const n=this.elements,r=t.x,s=t.y,o=t.z;return n[0]*=r,n[4]*=s,n[8]*=o,n[1]*=r,n[5]*=s,n[9]*=o,n[2]*=r,n[6]*=s,n[10]*=o,n[3]*=r,n[7]*=s,n[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,s))}makeTranslation(t,n,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const r=Math.cos(n),s=Math.sin(n),o=1-r,a=t.x,u=t.y,l=t.z,c=o*a,d=o*u;return this.set(c*a+r,c*u-s*l,c*l+s*u,0,c*u+s*l,d*u+r,d*l-s*a,0,c*l-s*u,d*l+s*a,o*l*l+r,0,0,0,0,1),this}makeScale(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,n,r,s,o,a){return this.set(1,r,o,0,t,1,a,0,n,s,1,0,0,0,0,1),this}compose(t,n,r){const s=this.elements,o=n._x,a=n._y,u=n._z,l=n._w,c=o+o,d=a+a,p=u+u,f=o*c,h=o*d,m=o*p,y=a*d,v=a*p,g=u*p,_=l*c,x=l*d,b=l*p,S=r.x,T=r.y,M=r.z;return s[0]=(1-(y+g))*S,s[1]=(h+b)*S,s[2]=(m-x)*S,s[3]=0,s[4]=(h-b)*T,s[5]=(1-(f+g))*T,s[6]=(v+_)*T,s[7]=0,s[8]=(m+x)*M,s[9]=(v-_)*M,s[10]=(1-(f+y))*M,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,n,r){const s=this.elements;let o=Jc.set(s[0],s[1],s[2]).length();const a=Jc.set(s[4],s[5],s[6]).length(),u=Jc.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),t.x=s[12],t.y=s[13],t.z=s[14],Ao.copy(this);const c=1/o,d=1/a,p=1/u;return Ao.elements[0]*=c,Ao.elements[1]*=c,Ao.elements[2]*=c,Ao.elements[4]*=d,Ao.elements[5]*=d,Ao.elements[6]*=d,Ao.elements[8]*=p,Ao.elements[9]*=p,Ao.elements[10]*=p,n.setFromRotationMatrix(Ao),r.x=o,r.y=a,r.z=u,this}makePerspective(t,n,r,s,o,a,u=sa){const l=this.elements,c=2*o/(n-t),d=2*o/(r-s),p=(n+t)/(n-t),f=(r+s)/(r-s);let h,m;if(u===sa)h=-(a+o)/(a-o),m=-2*a*o/(a-o);else if(u===bp)h=-a/(a-o),m=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,n,r,s,o,a,u=sa){const l=this.elements,c=1/(n-t),d=1/(r-s),p=1/(a-o),f=(n+t)*c,h=(r+s)*d;let m,y;if(u===sa)m=(a+o)*p,y=-2*p;else if(u===bp)m=o*p,y=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=y,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const n=this.elements,r=t.elements;for(let s=0;s<16;s++)if(n[s]!==r[s])return!1;return!0}fromArray(t,n=0){for(let r=0;r<16;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t}}const Jc=new Ce,Ao=new Gt,N4=new Ce(0,0,0),G4=new Ce(1,1,1),_l=new Ce,fg=new Ce,Cs=new Ce,sE=new Gt,oE=new Yr;class bs{constructor(t=0,n=0,r=0,s=bs.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],u=s[8],l=s[1],c=s[5],d=s[9],p=s[2],f=s[6],h=s[10];switch(n){case"XYZ":this._y=Math.asin(En(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,h),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-En(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(u,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(En(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-p,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-En(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(u,h));break;case"XZY":this._z=Math.asin(-En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-d,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return sE.makeRotationFromQuaternion(t),this.setFromRotationMatrix(sE,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return oE.setFromEuler(this),this.setFromQuaternion(oE,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bs.DEFAULT_ORDER="XYZ";class oc{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let H4=0;const aE=new Ce,Kc=new Yr,Aa=new Gt,dg=new Ce,Wd=new Ce,z4=new Ce,V4=new Yr,lE=new Ce(1,0,0),uE=new Ce(0,1,0),cE=new Ce(0,0,1),fE={type:"added"},W4={type:"removed"},Qc={type:"childadded",child:null},T_={type:"childremoved",child:null};class br extends ha{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:H4++}),this.uuid=Ds(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=br.DEFAULT_UP.clone();const t=new Ce,n=new bs,r=new Yr,s=new Ce(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Gt},normalMatrix:{value:new cr}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=br.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=br.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new oc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Kc.setFromAxisAngle(t,n),this.quaternion.multiply(Kc),this}rotateOnWorldAxis(t,n){return Kc.setFromAxisAngle(t,n),this.quaternion.premultiply(Kc),this}rotateX(t){return this.rotateOnAxis(lE,t)}rotateY(t){return this.rotateOnAxis(uE,t)}rotateZ(t){return this.rotateOnAxis(cE,t)}translateOnAxis(t,n){return aE.copy(t).applyQuaternion(this.quaternion),this.position.add(aE.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(lE,t)}translateY(t){return this.translateOnAxis(uE,t)}translateZ(t){return this.translateOnAxis(cE,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Aa.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?dg.copy(t):dg.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Wd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Aa.lookAt(Wd,dg,this.up):Aa.lookAt(dg,Wd,this.up),this.quaternion.setFromRotationMatrix(Aa),s&&(Aa.extractRotation(s.matrixWorld),Kc.setFromRotationMatrix(Aa),this.quaternion.premultiply(Kc.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(fE),Qc.child=t,this.dispatchEvent(Qc),Qc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(W4),T_.child=t,this.dispatchEvent(T_),T_.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Aa.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Aa.multiply(t.parent.matrixWorld)),t.applyMatrix4(Aa),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(fE),Qc.child=t,this.dispatchEvent(Qc),Qc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(a!==void 0)return a}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wd,t,z4),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wd,V4,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){const r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,l){return u[l.uuid]===void 0&&(u[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const l=u.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const p=l[c];o(t.shapes,p)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let l=0,c=this.material.length;l<c;l++)u.push(o(t.materials,this.material[l]));s.material=u}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const l=this.animations[u];s.animations.push(o(t.animations,l))}}if(n){const u=a(t.geometries),l=a(t.materials),c=a(t.textures),d=a(t.images),p=a(t.shapes),f=a(t.skeletons),h=a(t.animations),m=a(t.nodes);u.length>0&&(r.geometries=u),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),p.length>0&&(r.shapes=p),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(u){const l=[];for(const c in u){const d=u[c];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){const s=t.children[r];this.add(s.clone())}return this}}br.DEFAULT_UP=new Ce(0,1,0);br.DEFAULT_MATRIX_AUTO_UPDATE=!0;br.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mo=new Ce,Ma=new Ce,C_=new Ce,Ea=new Ce,Zc=new Ce,$c=new Ce,dE=new Ce,R_=new Ce,P_=new Ce,I_=new Ce,L_=new _r,j_=new _r,D_=new _r;class hs{constructor(t=new Ce,n=new Ce,r=new Ce){this.a=t,this.b=n,this.c=r}static getNormal(t,n,r,s){s.subVectors(r,n),Mo.subVectors(t,n),s.cross(Mo);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(t,n,r,s,o){Mo.subVectors(s,n),Ma.subVectors(r,n),C_.subVectors(t,n);const a=Mo.dot(Mo),u=Mo.dot(Ma),l=Mo.dot(C_),c=Ma.dot(Ma),d=Ma.dot(C_),p=a*c-u*u;if(p===0)return o.set(0,0,0),null;const f=1/p,h=(c*l-u*d)*f,m=(a*d-u*l)*f;return o.set(1-h-m,m,h)}static containsPoint(t,n,r,s){return this.getBarycoord(t,n,r,s,Ea)===null?!1:Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1}static getInterpolation(t,n,r,s,o,a,u,l){return this.getBarycoord(t,n,r,s,Ea)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ea.x),l.addScaledVector(a,Ea.y),l.addScaledVector(u,Ea.z),l)}static getInterpolatedAttribute(t,n,r,s,o,a){return L_.setScalar(0),j_.setScalar(0),D_.setScalar(0),L_.fromBufferAttribute(t,n),j_.fromBufferAttribute(t,r),D_.fromBufferAttribute(t,s),a.setScalar(0),a.addScaledVector(L_,o.x),a.addScaledVector(j_,o.y),a.addScaledVector(D_,o.z),a}static isFrontFacing(t,n,r,s){return Mo.subVectors(r,n),Ma.subVectors(t,n),Mo.cross(Ma).dot(s)<0}set(t,n,r){return this.a.copy(t),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(t,n,r,s){return this.a.copy(t[n]),this.b.copy(t[r]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,n,r,s){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Mo.subVectors(this.c,this.b),Ma.subVectors(this.a,this.b),Mo.cross(Ma).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return hs.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return hs.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,r,s,o){return hs.getInterpolation(t,this.a,this.b,this.c,n,r,s,o)}containsPoint(t){return hs.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return hs.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const r=this.a,s=this.b,o=this.c;let a,u;Zc.subVectors(s,r),$c.subVectors(o,r),R_.subVectors(t,r);const l=Zc.dot(R_),c=$c.dot(R_);if(l<=0&&c<=0)return n.copy(r);P_.subVectors(t,s);const d=Zc.dot(P_),p=$c.dot(P_);if(d>=0&&p<=d)return n.copy(s);const f=l*p-d*c;if(f<=0&&l>=0&&d<=0)return a=l/(l-d),n.copy(r).addScaledVector(Zc,a);I_.subVectors(t,o);const h=Zc.dot(I_),m=$c.dot(I_);if(m>=0&&h<=m)return n.copy(o);const y=h*c-l*m;if(y<=0&&c>=0&&m<=0)return u=c/(c-m),n.copy(r).addScaledVector($c,u);const v=d*m-h*p;if(v<=0&&p-d>=0&&h-m>=0)return dE.subVectors(o,s),u=(p-d)/(p-d+(h-m)),n.copy(s).addScaledVector(dE,u);const g=1/(v+y+f);return a=y*g,u=f*g,n.copy(r).addScaledVector(Zc,a).addScaledVector($c,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const YI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xl={h:0,s:0,l:0},hg={h:0,s:0,l:0};function k_(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*6*(2/3-n):i}class wt{constructor(t,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}set(t,n,r){if(n===void 0&&r===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,n,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=yi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Ir.toWorkingColorSpace(this,n),this}setRGB(t,n,r,s=Ir.workingColorSpace){return this.r=t,this.g=n,this.b=r,Ir.toWorkingColorSpace(this,s),this}setHSL(t,n,r,s=Ir.workingColorSpace){if(t=ES(t,1),n=En(n,0,1),r=En(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=k_(a,o,t+1/3),this.g=k_(a,o,t),this.b=k_(a,o,t-1/3)}return Ir.toWorkingColorSpace(this,s),this}setStyle(t,n=yi){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const a=s[1],u=s[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=yi){const r=YI[t.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Gf(t.r),this.g=Gf(t.g),this.b=Gf(t.b),this}copyLinearToSRGB(t){return this.r=__(t.r),this.g=__(t.g),this.b=__(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=yi){return Ir.fromWorkingColorSpace(Pi.copy(this),t),Math.round(En(Pi.r*255,0,255))*65536+Math.round(En(Pi.g*255,0,255))*256+Math.round(En(Pi.b*255,0,255))}getHexString(t=yi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=Ir.workingColorSpace){Ir.fromWorkingColorSpace(Pi.copy(this),n);const r=Pi.r,s=Pi.g,o=Pi.b,a=Math.max(r,s,o),u=Math.min(r,s,o);let l,c;const d=(u+a)/2;if(u===a)l=0,c=0;else{const p=a-u;switch(c=d<=.5?p/(a+u):p/(2-a-u),a){case r:l=(s-o)/p+(s<o?6:0);break;case s:l=(o-r)/p+2;break;case o:l=(r-s)/p+4;break}l/=6}return t.h=l,t.s=c,t.l=d,t}getRGB(t,n=Ir.workingColorSpace){return Ir.fromWorkingColorSpace(Pi.copy(this),n),t.r=Pi.r,t.g=Pi.g,t.b=Pi.b,t}getStyle(t=yi){Ir.fromWorkingColorSpace(Pi.copy(this),t);const n=Pi.r,r=Pi.g,s=Pi.b;return t!==yi?`color(${t} ${n.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(t,n,r){return this.getHSL(xl),this.setHSL(xl.h+t,xl.s+n,xl.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(xl),t.getHSL(hg);const r=Uh(xl.h,hg.h,n),s=Uh(xl.s,hg.s,n),o=Uh(xl.l,hg.l,n);return this.setHSL(r,s,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,r=this.g,s=this.b,o=t.elements;return this.r=o[0]*n+o[3]*r+o[6]*s,this.g=o[1]*n+o[4]*r+o[7]*s,this.b=o[2]*n+o[5]*r+o[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pi=new wt;wt.NAMES=YI;let X4=0;class Tn extends ha{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:X4++}),this.uuid=Ds(),this.name="",this.type="Material",this.blending=rc,this.side=Fo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ev,this.blendDst=tv,this.blendEquation=Il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wt(0,0,0),this.blendAlpha=0,this.depthFunc=pc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nu,this.stencilZFail=Nu,this.stencilZPass=Nu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const r=t[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[n]=r}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==rc&&(r.blending=this.blending),this.side!==Fo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==ev&&(r.blendSrc=this.blendSrc),this.blendDst!==tv&&(r.blendDst=this.blendDst),this.blendEquation!==Il&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==pc&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==jb&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Nu&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Nu&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Nu&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(o){const a=[];for(const u in o){const l=o[u];delete l.metadata,a.push(l)}return a}if(n){const o=s(t.textures),a=s(t.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let r=null;if(n!==null){const s=n.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Jn extends Tn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Oa=Y4();function Y4(){const i=new ArrayBuffer(4),t=new Float32Array(i),n=new Uint32Array(i),r=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,s[l]=24,s[l|256]=24):(r[l]=31744,r[l|256]=64512,s[l]=13,s[l|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),u=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,o[l]=c|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(u[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:s,mantissaTable:o,exponentTable:a,offsetTable:u}}function fs(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=En(i,-65504,65504),Oa.floatView[0]=i;const t=Oa.uint32View[0],n=t>>23&511;return Oa.baseTable[n]+((t&8388607)>>Oa.shiftTable[n])}function xh(i){const t=i>>10;return Oa.uint32View[0]=Oa.mantissaTable[Oa.offsetTable[t]+(i&1023)]+Oa.exponentTable[t],Oa.floatView[0]}const q4={toHalfFloat:fs,fromHalfFloat:xh},Fn=new Ce,pg=new mt;class Tr{constructor(t,n,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=r,this.usage=xp,this.updateRanges=[],this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,r){t*=this.itemSize,r*=n.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[t+s]=n.array[r+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)pg.fromBufferAttribute(this,n),pg.applyMatrix3(t),this.setXY(n,pg.x,pg.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Fn.fromBufferAttribute(this,n),Fn.applyMatrix3(t),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(t){for(let n=0,r=this.count;n<r;n++)Fn.fromBufferAttribute(this,n),Fn.applyMatrix4(t),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)Fn.fromBufferAttribute(this,n),Fn.applyNormalMatrix(t),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)Fn.fromBufferAttribute(this,n),Fn.transformDirection(t),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let r=this.array[t*this.itemSize+n];return this.normalized&&(r=Ki(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=pr(r,this.array)),this.array[t*this.itemSize+n]=r,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=Ki(n,this.array)),n}setX(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=Ki(n,this.array)),n}setY(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=Ki(n,this.array)),n}setZ(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=Ki(n,this.array)),n}setW(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array)),this.array[t+0]=n,this.array[t+1]=r,this}setXYZ(t,n,r,s){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=s,this}setXYZW(t,n,r,s,o){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array),o=pr(o,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=s,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xp&&(t.usage=this.usage),t}}class J4 extends Tr{constructor(t,n,r){super(new Int8Array(t),n,r)}}class K4 extends Tr{constructor(t,n,r){super(new Uint8Array(t),n,r)}}class Q4 extends Tr{constructor(t,n,r){super(new Uint8ClampedArray(t),n,r)}}class Z4 extends Tr{constructor(t,n,r){super(new Int16Array(t),n,r)}}class CS extends Tr{constructor(t,n,r){super(new Uint16Array(t),n,r)}}class $4 extends Tr{constructor(t,n,r){super(new Int32Array(t),n,r)}}class RS extends Tr{constructor(t,n,r){super(new Uint32Array(t),n,r)}}class eN extends Tr{constructor(t,n,r){super(new Uint16Array(t),n,r),this.isFloat16BufferAttribute=!0}getX(t){let n=xh(this.array[t*this.itemSize]);return this.normalized&&(n=Ki(n,this.array)),n}setX(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize]=fs(n),this}getY(t){let n=xh(this.array[t*this.itemSize+1]);return this.normalized&&(n=Ki(n,this.array)),n}setY(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+1]=fs(n),this}getZ(t){let n=xh(this.array[t*this.itemSize+2]);return this.normalized&&(n=Ki(n,this.array)),n}setZ(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+2]=fs(n),this}getW(t){let n=xh(this.array[t*this.itemSize+3]);return this.normalized&&(n=Ki(n,this.array)),n}setW(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+3]=fs(n),this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array)),this.array[t+0]=fs(n),this.array[t+1]=fs(r),this}setXYZ(t,n,r,s){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array)),this.array[t+0]=fs(n),this.array[t+1]=fs(r),this.array[t+2]=fs(s),this}setXYZW(t,n,r,s,o){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array),o=pr(o,this.array)),this.array[t+0]=fs(n),this.array[t+1]=fs(r),this.array[t+2]=fs(s),this.array[t+3]=fs(o),this}}class zt extends Tr{constructor(t,n,r){super(new Float32Array(t),n,r)}}let tN=0;const Js=new Gt,O_=new br,ef=new Ce,Rs=new Hn,Xd=new Hn,li=new Ce;class fr extends ha{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tN++}),this.uuid=Ds(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(zI(t)?RS:CS)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,r=0){this.groups.push({start:t,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new cr().getNormalMatrix(t);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Js.makeRotationFromQuaternion(t),this.applyMatrix4(Js),this}rotateX(t){return Js.makeRotationX(t),this.applyMatrix4(Js),this}rotateY(t){return Js.makeRotationY(t),this.applyMatrix4(Js),this}rotateZ(t){return Js.makeRotationZ(t),this.applyMatrix4(Js),this}translate(t,n,r){return Js.makeTranslation(t,n,r),this.applyMatrix4(Js),this}scale(t,n,r){return Js.makeScale(t,n,r),this.applyMatrix4(Js),this}lookAt(t){return O_.lookAt(t),O_.updateMatrix(),this.applyMatrix4(O_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ef).negate(),this.translate(ef.x,ef.y,ef.z),this}setFromPoints(t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new zt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hn);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ce(-1/0,-1/0,-1/0),new Ce(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let r=0,s=n.length;r<s;r++){const o=n[r];Rs.setFromBufferAttribute(o),this.morphTargetsRelative?(li.addVectors(this.boundingBox.min,Rs.min),this.boundingBox.expandByPoint(li),li.addVectors(this.boundingBox.max,Rs.max),this.boundingBox.expandByPoint(li)):(this.boundingBox.expandByPoint(Rs.min),this.boundingBox.expandByPoint(Rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qn);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ce,1/0);return}if(t){const r=this.boundingSphere.center;if(Rs.setFromBufferAttribute(t),n)for(let o=0,a=n.length;o<a;o++){const u=n[o];Xd.setFromBufferAttribute(u),this.morphTargetsRelative?(li.addVectors(Rs.min,Xd.min),Rs.expandByPoint(li),li.addVectors(Rs.max,Xd.max),Rs.expandByPoint(li)):(Rs.expandByPoint(Xd.min),Rs.expandByPoint(Xd.max))}Rs.getCenter(r);let s=0;for(let o=0,a=t.count;o<a;o++)li.fromBufferAttribute(t,o),s=Math.max(s,r.distanceToSquared(li));if(n)for(let o=0,a=n.length;o<a;o++){const u=n[o],l=this.morphTargetsRelative;for(let c=0,d=u.count;c<d;c++)li.fromBufferAttribute(u,c),l&&(ef.fromBufferAttribute(t,c),li.add(ef)),s=Math.max(s,r.distanceToSquared(li))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,s=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Tr(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),u=[],l=[];for(let R=0;R<r.count;R++)u[R]=new Ce,l[R]=new Ce;const c=new Ce,d=new Ce,p=new Ce,f=new mt,h=new mt,m=new mt,y=new Ce,v=new Ce;function g(R,L,P){c.fromBufferAttribute(r,R),d.fromBufferAttribute(r,L),p.fromBufferAttribute(r,P),f.fromBufferAttribute(o,R),h.fromBufferAttribute(o,L),m.fromBufferAttribute(o,P),d.sub(c),p.sub(c),h.sub(f),m.sub(f);const C=1/(h.x*m.y-m.x*h.y);isFinite(C)&&(y.copy(d).multiplyScalar(m.y).addScaledVector(p,-h.y).multiplyScalar(C),v.copy(p).multiplyScalar(h.x).addScaledVector(d,-m.x).multiplyScalar(C),u[R].add(y),u[L].add(y),u[P].add(y),l[R].add(v),l[L].add(v),l[P].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:t.count}]);for(let R=0,L=_.length;R<L;++R){const P=_[R],C=P.start,k=P.count;for(let D=C,F=C+k;D<F;D+=3)g(t.getX(D+0),t.getX(D+1),t.getX(D+2))}const x=new Ce,b=new Ce,S=new Ce,T=new Ce;function M(R){S.fromBufferAttribute(s,R),T.copy(S);const L=u[R];x.copy(L),x.sub(S.multiplyScalar(S.dot(L))).normalize(),b.crossVectors(T,L);const C=b.dot(l[R])<0?-1:1;a.setXYZW(R,x.x,x.y,x.z,C)}for(let R=0,L=_.length;R<L;++R){const P=_[R],C=P.start,k=P.count;for(let D=C,F=C+k;D<F;D+=3)M(t.getX(D+0)),M(t.getX(D+1)),M(t.getX(D+2))}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Tr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const s=new Ce,o=new Ce,a=new Ce,u=new Ce,l=new Ce,c=new Ce,d=new Ce,p=new Ce;if(t)for(let f=0,h=t.count;f<h;f+=3){const m=t.getX(f+0),y=t.getX(f+1),v=t.getX(f+2);s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,y),a.fromBufferAttribute(n,v),d.subVectors(a,o),p.subVectors(s,o),d.cross(p),u.fromBufferAttribute(r,m),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,v),u.add(d),l.add(d),c.add(d),r.setXYZ(m,u.x,u.y,u.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,h=n.count;f<h;f+=3)s.fromBufferAttribute(n,f+0),o.fromBufferAttribute(n,f+1),a.fromBufferAttribute(n,f+2),d.subVectors(a,o),p.subVectors(s,o),d.cross(p),r.setXYZ(f+0,d.x,d.y,d.z),r.setXYZ(f+1,d.x,d.y,d.z),r.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)li.fromBufferAttribute(t,n),li.normalize(),t.setXYZ(n,li.x,li.y,li.z)}toNonIndexed(){function t(u,l){const c=u.array,d=u.itemSize,p=u.normalized,f=new c.constructor(l.length*d);let h=0,m=0;for(let y=0,v=l.length;y<v;y++){u.isInterleavedBufferAttribute?h=l[y]*u.data.stride+u.offset:h=l[y]*d;for(let g=0;g<d;g++)f[m++]=c[h++]}return new Tr(f,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new fr,r=this.index.array,s=this.attributes;for(const u in s){const l=s[u],c=t(l,r);n.setAttribute(u,c)}const o=this.morphAttributes;for(const u in o){const l=[],c=o[u];for(let d=0,p=c.length;d<p;d++){const f=c[d],h=t(f,r);l.push(h)}n.morphAttributes[u]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let u=0,l=a.length;u<l;u++){const c=a[u];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(t[c]=l[c]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];t.data.attributes[l]=c.toJSON(t.data)}const s={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let p=0,f=c.length;p<f;p++){const h=c[p];d.push(h.toJSON(t.data))}d.length>0&&(s[l]=d,o=!0)}o&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const u=this.boundingSphere;return u!==null&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(n));const s=t.attributes;for(const c in s){const d=s[c];this.setAttribute(c,d.clone(n))}const o=t.morphAttributes;for(const c in o){const d=[],p=o[c];for(let f=0,h=p.length;f<h;f++)d.push(p[f].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let c=0,d=a.length;c<d;c++){const p=a[c];this.addGroup(p.start,p.count,p.materialIndex)}const u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const hE=new Gt,wu=new Cc,mg=new Qn,pE=new Ce,gg=new Ce,yg=new Ce,vg=new Ce,B_=new Ce,_g=new Ce,mE=new Ce,xg=new Ce;class dn extends br{constructor(t=new fr,n=new Jn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(t,n){const r=this.geometry,s=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(s,t);const u=this.morphTargetInfluences;if(o&&u){_g.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const d=u[l],p=o[l];d!==0&&(B_.fromBufferAttribute(p,t),a?_g.addScaledVector(B_,d):_g.addScaledVector(B_.sub(n),d))}n.add(_g)}return n}raycast(t,n){const r=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),mg.copy(r.boundingSphere),mg.applyMatrix4(o),wu.copy(t.ray).recast(t.near),!(mg.containsPoint(wu.origin)===!1&&(wu.intersectSphere(mg,pE)===null||wu.origin.distanceToSquared(pE)>(t.far-t.near)**2))&&(hE.copy(o).invert(),wu.copy(t.ray).applyMatrix4(hE),!(r.boundingBox!==null&&wu.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(t,n,wu)))}_computeIntersections(t,n,r){let s;const o=this.geometry,a=this.material,u=o.index,l=o.attributes.position,c=o.attributes.uv,d=o.attributes.uv1,p=o.attributes.normal,f=o.groups,h=o.drawRange;if(u!==null)if(Array.isArray(a))for(let m=0,y=f.length;m<y;m++){const v=f[m],g=a[v.materialIndex],_=Math.max(v.start,h.start),x=Math.min(u.count,Math.min(v.start+v.count,h.start+h.count));for(let b=_,S=x;b<S;b+=3){const T=u.getX(b),M=u.getX(b+1),R=u.getX(b+2);s=bg(this,g,t,r,c,d,p,T,M,R),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=v.materialIndex,n.push(s))}}else{const m=Math.max(0,h.start),y=Math.min(u.count,h.start+h.count);for(let v=m,g=y;v<g;v+=3){const _=u.getX(v),x=u.getX(v+1),b=u.getX(v+2);s=bg(this,a,t,r,c,d,p,_,x,b),s&&(s.faceIndex=Math.floor(v/3),n.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,y=f.length;m<y;m++){const v=f[m],g=a[v.materialIndex],_=Math.max(v.start,h.start),x=Math.min(l.count,Math.min(v.start+v.count,h.start+h.count));for(let b=_,S=x;b<S;b+=3){const T=b,M=b+1,R=b+2;s=bg(this,g,t,r,c,d,p,T,M,R),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=v.materialIndex,n.push(s))}}else{const m=Math.max(0,h.start),y=Math.min(l.count,h.start+h.count);for(let v=m,g=y;v<g;v+=3){const _=v,x=v+1,b=v+2;s=bg(this,a,t,r,c,d,p,_,x,b),s&&(s.faceIndex=Math.floor(v/3),n.push(s))}}}}function rN(i,t,n,r,s,o,a,u){let l;if(t.side===$i?l=r.intersectTriangle(a,o,s,!0,u):l=r.intersectTriangle(s,o,a,t.side===Fo,u),l===null)return null;xg.copy(u),xg.applyMatrix4(i.matrixWorld);const c=n.ray.origin.distanceTo(xg);return c<n.near||c>n.far?null:{distance:c,point:xg.clone(),object:i}}function bg(i,t,n,r,s,o,a,u,l,c){i.getVertexPosition(u,gg),i.getVertexPosition(l,yg),i.getVertexPosition(c,vg);const d=rN(i,t,n,r,gg,yg,vg,mE);if(d){const p=new Ce;hs.getBarycoord(mE,gg,yg,vg,p),s&&(d.uv=hs.getInterpolatedAttribute(s,u,l,c,p,new mt)),o&&(d.uv1=hs.getInterpolatedAttribute(o,u,l,c,p,new mt)),a&&(d.normal=hs.getInterpolatedAttribute(a,u,l,c,p,new Ce),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const f={a:u,b:l,c,normal:new Ce,materialIndex:0};hs.getNormal(gg,yg,vg,f.normal),d.face=f,d.barycoord=p}return d}class Rc extends fr{constructor(t=1,n=1,r=1,s=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:s,heightSegments:o,depthSegments:a};const u=this;s=Math.floor(s),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],d=[],p=[];let f=0,h=0;m("z","y","x",-1,-1,r,n,t,a,o,0),m("z","y","x",1,-1,r,n,-t,a,o,1),m("x","z","y",1,1,t,r,n,s,a,2),m("x","z","y",1,-1,t,r,-n,s,a,3),m("x","y","z",1,-1,t,n,r,s,o,4),m("x","y","z",-1,-1,t,n,-r,s,o,5),this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(d,3)),this.setAttribute("uv",new zt(p,2));function m(y,v,g,_,x,b,S,T,M,R,L){const P=b/M,C=S/R,k=b/2,D=S/2,F=T/2,G=M+1,z=R+1;let Q=0,V=0;const W=new Ce;for(let Y=0;Y<z;Y++){const J=Y*C-D;for(let ie=0;ie<G;ie++){const I=ie*P-k;W[y]=I*_,W[v]=J*x,W[g]=F,c.push(W.x,W.y,W.z),W[y]=0,W[v]=0,W[g]=T>0?1:-1,d.push(W.x,W.y,W.z),p.push(ie/M),p.push(1-Y/R),Q+=1}}for(let Y=0;Y<R;Y++)for(let J=0;J<M;J++){const ie=f+J+G*Y,I=f+J+G*(Y+1),O=f+(J+1)+G*(Y+1),H=f+(J+1)+G*Y;l.push(ie,I,H),l.push(I,O,H),V+=6}u.addGroup(h,V,L),h+=V,f+=Q}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Rc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function id(i){const t={};for(const n in i){t[n]={};for(const r in i[n]){const s=i[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=s.clone():Array.isArray(s)?t[n][r]=s.slice():t[n][r]=s}}return t}function qi(i){const t={};for(let n=0;n<i.length;n++){const r=id(i[n]);for(const s in r)t[s]=r[s]}return t}function nN(i){const t=[];for(let n=0;n<i.length;n++)t.push(i[n].clone());return t}function qI(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Ir.workingColorSpace}const PS={clone:id,merge:qi};var iN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ho extends Tn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=iN,this.fragmentShader=sN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=id(t.uniforms),this.uniformsGroups=nN(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?n.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?n.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[s]={type:"m4",value:a.toArray()}:n.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Yp extends br{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt,this.coordinateSystem=sa}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const bl=new Ce,gE=new mt,yE=new mt;class gn extends Yp{constructor(t=50,n=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=nd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(sc*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return nd*2*Math.atan(Math.tan(sc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,r){bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bl.x,bl.y).multiplyScalar(-t/bl.z),bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(bl.x,bl.y).multiplyScalar(-t/bl.z)}getViewSize(t,n){return this.getViewBounds(t,gE,yE),n.subVectors(yE,gE)}setViewOffset(t,n,r,s,o,a){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(sc*.5*this.fov)/this.zoom,r=2*n,s=this.aspect*r,o=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*s/l,n-=a.offsetY*r/c,s*=a.width/l,r*=a.height/c}const u=this.filmOffset;u!==0&&(o+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,n,n-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const tf=-90,rf=1;class JI extends br{constructor(t,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new gn(tf,rf,t,n);s.layers=this.layers,this.add(s);const o=new gn(tf,rf,t,n);o.layers=this.layers,this.add(o);const a=new gn(tf,rf,t,n);a.layers=this.layers,this.add(a);const u=new gn(tf,rf,t,n);u.layers=this.layers,this.add(u);const l=new gn(tf,rf,t,n);l.layers=this.layers,this.add(l);const c=new gn(tf,rf,t,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[r,s,o,a,u,l]=n;for(const c of n)this.remove(c);if(t===sa)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===bp)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const c of n)this.add(c),c.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,a,u,l,c,d]=this.children,p=t.getRenderTarget(),f=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,s),t.render(n,o),t.setRenderTarget(r,1,s),t.render(n,a),t.setRenderTarget(r,2,s),t.render(n,u),t.setRenderTarget(r,3,s),t.render(n,l),t.setRenderTarget(r,4,s),t.render(n,c),r.texture.generateMipmaps=y,t.setRenderTarget(r,5,s),t.render(n,d),t.setRenderTarget(p,f,h),t.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class qp extends Qr{constructor(t,n,r,s,o,a,u,l,c,d){t=t!==void 0?t:[],n=n!==void 0?n:Ya,super(t,n,r,s,o,a,u,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class KI extends Go{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},s=[r,r,r,r,r,r];this.texture=new qp(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:sn}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Rc(5,5,5),o=new Ho({name:"CubemapFromEquirect",uniforms:id(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:$i,blending:Ga});o.uniforms.tEquirect.value=n;const a=new dn(s,o),u=n.minFilter;return n.minFilter===gs&&(n.minFilter=sn),new JI(1,10,this).update(t,a),n.minFilter=u,a.geometry.dispose(),a.material.dispose(),this}clear(t,n,r,s){const o=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(n,r,s);t.setRenderTarget(o)}}const F_=new Ce,oN=new Ce,aN=new cr;class Da{constructor(t=new Ce(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,r,s){return this.normal.set(t,n,r),this.constant=s,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,r){const s=F_.subVectors(r,n).cross(oN.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const r=t.delta(F_),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:n.copy(t.start).addScaledVector(r,o)}intersectsLine(t){const n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const r=n||aN.getNormalMatrix(t),s=this.coplanarPoint(F_).applyMatrix4(t),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Su=new Qn,wg=new Ce;class Jp{constructor(t=new Da,n=new Da,r=new Da,s=new Da,o=new Da,a=new Da){this.planes=[t,n,r,s,o,a]}set(t,n,r,s,o,a){const u=this.planes;return u[0].copy(t),u[1].copy(n),u[2].copy(r),u[3].copy(s),u[4].copy(o),u[5].copy(a),this}copy(t){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,n=sa){const r=this.planes,s=t.elements,o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],d=s[5],p=s[6],f=s[7],h=s[8],m=s[9],y=s[10],v=s[11],g=s[12],_=s[13],x=s[14],b=s[15];if(r[0].setComponents(l-o,f-c,v-h,b-g).normalize(),r[1].setComponents(l+o,f+c,v+h,b+g).normalize(),r[2].setComponents(l+a,f+d,v+m,b+_).normalize(),r[3].setComponents(l-a,f-d,v-m,b-_).normalize(),r[4].setComponents(l-u,f-p,v-y,b-x).normalize(),n===sa)r[5].setComponents(l+u,f+p,v+y,b+x).normalize();else if(n===bp)r[5].setComponents(u,p,y,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Su.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Su.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Su)}intersectsSprite(t){return Su.center.set(0,0,0),Su.radius=.7071067811865476,Su.applyMatrix4(t.matrixWorld),this.intersectsSphere(Su)}intersectsSphere(t){const n=this.planes,r=t.center,s=-t.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(t){const n=this.planes;for(let r=0;r<6;r++){const s=n[r];if(wg.x=s.normal.x>0?t.max.x:t.min.x,wg.y=s.normal.y>0?t.max.y:t.min.y,wg.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(wg)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function QI(){let i=null,t=!1,n=null,r=null;function s(o,a){n(o,a),r=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&n!==null&&(r=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){i=o}}}function lN(i){const t=new WeakMap;function n(u,l){const c=u.array,d=u.usage,p=c.byteLength,f=i.createBuffer();i.bindBuffer(l,f),i.bufferData(l,c,d),u.onUploadCallback();let h;if(c instanceof Float32Array)h=i.FLOAT;else if(c instanceof Uint16Array)u.isFloat16BufferAttribute?h=i.HALF_FLOAT:h=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)h=i.SHORT;else if(c instanceof Uint32Array)h=i.UNSIGNED_INT;else if(c instanceof Int32Array)h=i.INT;else if(c instanceof Int8Array)h=i.BYTE;else if(c instanceof Uint8Array)h=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)h=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:h,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version,size:p}}function r(u,l,c){const d=l.array,p=l.updateRanges;if(i.bindBuffer(c,u),p.length===0)i.bufferSubData(c,0,d);else{p.sort((h,m)=>h.start-m.start);let f=0;for(let h=1;h<p.length;h++){const m=p[f],y=p[h];y.start<=m.start+m.count+1?m.count=Math.max(m.count,y.start+y.count-m.start):(++f,p[f]=y)}p.length=f+1;for(let h=0,m=p.length;h<m;h++){const y=p[h];i.bufferSubData(c,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const l=t.get(u);l&&(i.deleteBuffer(l.buffer),t.delete(u))}function a(u,l){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const d=t.get(u);(!d||d.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const c=t.get(u);if(c===void 0)t.set(u,n(u,l));else if(c.version<u.version){if(c.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,u,l),c.version=u.version}}return{get:s,remove:o,update:a}}class rl extends fr{constructor(t=1,n=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:r,heightSegments:s};const o=t/2,a=n/2,u=Math.floor(r),l=Math.floor(s),c=u+1,d=l+1,p=t/u,f=n/l,h=[],m=[],y=[],v=[];for(let g=0;g<d;g++){const _=g*f-a;for(let x=0;x<c;x++){const b=x*p-o;m.push(b,-_,0),y.push(0,0,1),v.push(x/u),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<u;_++){const x=_+c*g,b=_+c*(g+1),S=_+1+c*(g+1),T=_+1+c*g;h.push(x,b,T),h.push(b,S,T)}this.setIndex(h),this.setAttribute("position",new zt(m,3)),this.setAttribute("normal",new zt(y,3)),this.setAttribute("uv",new zt(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rl(t.width,t.height,t.widthSegments,t.heightSegments)}}var uN=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,cN=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dN=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hN=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,pN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,mN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gN=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yN=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,vN=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,_N=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bN=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,SN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AN=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,MN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,IN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,LN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DN=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ON=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,BN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FN=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,UN="gl_FragColor = linearToOutputTexel( gl_FragColor );",NN=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,GN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HN=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zN=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,VN=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XN=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,YN=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qN=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JN=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KN=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,QN=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ZN=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,$N=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,e5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,t5=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,r5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,n5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,i5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,s5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,o5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,a5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,l5=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,u5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,c5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,f5=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,d5=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,h5=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,p5=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,m5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,g5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,y5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,v5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,x5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,b5=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,w5=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,S5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,A5=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,M5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,E5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,T5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,C5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,R5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,P5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,I5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,L5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,j5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,D5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,k5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,O5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,B5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,F5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,U5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,N5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,G5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,H5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,z5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,V5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,W5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,X5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Y5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,q5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,J5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,K5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Q5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Z5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,$5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,iG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hG=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,gG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_G=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,RG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,PG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,NG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hr={alphahash_fragment:uN,alphahash_pars_fragment:cN,alphamap_fragment:fN,alphamap_pars_fragment:dN,alphatest_fragment:hN,alphatest_pars_fragment:pN,aomap_fragment:mN,aomap_pars_fragment:gN,batching_pars_vertex:yN,batching_vertex:vN,begin_vertex:_N,beginnormal_vertex:xN,bsdfs:bN,iridescence_fragment:wN,bumpmap_pars_fragment:SN,clipping_planes_fragment:AN,clipping_planes_pars_fragment:MN,clipping_planes_pars_vertex:EN,clipping_planes_vertex:TN,color_fragment:CN,color_pars_fragment:RN,color_pars_vertex:PN,color_vertex:IN,common:LN,cube_uv_reflection_fragment:jN,defaultnormal_vertex:DN,displacementmap_pars_vertex:kN,displacementmap_vertex:ON,emissivemap_fragment:BN,emissivemap_pars_fragment:FN,colorspace_fragment:UN,colorspace_pars_fragment:NN,envmap_fragment:GN,envmap_common_pars_fragment:HN,envmap_pars_fragment:zN,envmap_pars_vertex:VN,envmap_physical_pars_fragment:t5,envmap_vertex:WN,fog_vertex:XN,fog_pars_vertex:YN,fog_fragment:qN,fog_pars_fragment:JN,gradientmap_pars_fragment:KN,lightmap_pars_fragment:QN,lights_lambert_fragment:ZN,lights_lambert_pars_fragment:$N,lights_pars_begin:e5,lights_toon_fragment:r5,lights_toon_pars_fragment:n5,lights_phong_fragment:i5,lights_phong_pars_fragment:s5,lights_physical_fragment:o5,lights_physical_pars_fragment:a5,lights_fragment_begin:l5,lights_fragment_maps:u5,lights_fragment_end:c5,logdepthbuf_fragment:f5,logdepthbuf_pars_fragment:d5,logdepthbuf_pars_vertex:h5,logdepthbuf_vertex:p5,map_fragment:m5,map_pars_fragment:g5,map_particle_fragment:y5,map_particle_pars_fragment:v5,metalnessmap_fragment:_5,metalnessmap_pars_fragment:x5,morphinstance_vertex:b5,morphcolor_vertex:w5,morphnormal_vertex:S5,morphtarget_pars_vertex:A5,morphtarget_vertex:M5,normal_fragment_begin:E5,normal_fragment_maps:T5,normal_pars_fragment:C5,normal_pars_vertex:R5,normal_vertex:P5,normalmap_pars_fragment:I5,clearcoat_normal_fragment_begin:L5,clearcoat_normal_fragment_maps:j5,clearcoat_pars_fragment:D5,iridescence_pars_fragment:k5,opaque_fragment:O5,packing:B5,premultiplied_alpha_fragment:F5,project_vertex:U5,dithering_fragment:N5,dithering_pars_fragment:G5,roughnessmap_fragment:H5,roughnessmap_pars_fragment:z5,shadowmap_pars_fragment:V5,shadowmap_pars_vertex:W5,shadowmap_vertex:X5,shadowmask_pars_fragment:Y5,skinbase_vertex:q5,skinning_pars_vertex:J5,skinning_vertex:K5,skinnormal_vertex:Q5,specularmap_fragment:Z5,specularmap_pars_fragment:$5,tonemapping_fragment:eG,tonemapping_pars_fragment:tG,transmission_fragment:rG,transmission_pars_fragment:nG,uv_pars_fragment:iG,uv_pars_vertex:sG,uv_vertex:oG,worldpos_vertex:aG,background_vert:lG,background_frag:uG,backgroundCube_vert:cG,backgroundCube_frag:fG,cube_vert:dG,cube_frag:hG,depth_vert:pG,depth_frag:mG,distanceRGBA_vert:gG,distanceRGBA_frag:yG,equirect_vert:vG,equirect_frag:_G,linedashed_vert:xG,linedashed_frag:bG,meshbasic_vert:wG,meshbasic_frag:SG,meshlambert_vert:AG,meshlambert_frag:MG,meshmatcap_vert:EG,meshmatcap_frag:TG,meshnormal_vert:CG,meshnormal_frag:RG,meshphong_vert:PG,meshphong_frag:IG,meshphysical_vert:LG,meshphysical_frag:jG,meshtoon_vert:DG,meshtoon_frag:kG,points_vert:OG,points_frag:BG,shadow_vert:FG,shadow_frag:UG,sprite_vert:NG,sprite_frag:GG},Ct={common:{diffuse:{value:new wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cr},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cr}},envmap:{envMap:{value:null},envMapRotation:{value:new cr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cr},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0},uvTransform:{value:new cr}},sprite:{diffuse:{value:new wt(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cr},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0}}},Io={basic:{uniforms:qi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:hr.meshbasic_vert,fragmentShader:hr.meshbasic_frag},lambert:{uniforms:qi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)}}]),vertexShader:hr.meshlambert_vert,fragmentShader:hr.meshlambert_frag},phong:{uniforms:qi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)},specular:{value:new wt(1118481)},shininess:{value:30}}]),vertexShader:hr.meshphong_vert,fragmentShader:hr.meshphong_frag},standard:{uniforms:qi([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag},toon:{uniforms:qi([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)}}]),vertexShader:hr.meshtoon_vert,fragmentShader:hr.meshtoon_frag},matcap:{uniforms:qi([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:hr.meshmatcap_vert,fragmentShader:hr.meshmatcap_frag},points:{uniforms:qi([Ct.points,Ct.fog]),vertexShader:hr.points_vert,fragmentShader:hr.points_frag},dashed:{uniforms:qi([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hr.linedashed_vert,fragmentShader:hr.linedashed_frag},depth:{uniforms:qi([Ct.common,Ct.displacementmap]),vertexShader:hr.depth_vert,fragmentShader:hr.depth_frag},normal:{uniforms:qi([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:hr.meshnormal_vert,fragmentShader:hr.meshnormal_frag},sprite:{uniforms:qi([Ct.sprite,Ct.fog]),vertexShader:hr.sprite_vert,fragmentShader:hr.sprite_frag},background:{uniforms:{uvTransform:{value:new cr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hr.background_vert,fragmentShader:hr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cr}},vertexShader:hr.backgroundCube_vert,fragmentShader:hr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hr.cube_vert,fragmentShader:hr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hr.equirect_vert,fragmentShader:hr.equirect_frag},distanceRGBA:{uniforms:qi([Ct.common,Ct.displacementmap,{referencePosition:{value:new Ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hr.distanceRGBA_vert,fragmentShader:hr.distanceRGBA_frag},shadow:{uniforms:qi([Ct.lights,Ct.fog,{color:{value:new wt(0)},opacity:{value:1}}]),vertexShader:hr.shadow_vert,fragmentShader:hr.shadow_frag}};Io.physical={uniforms:qi([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cr},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cr},sheen:{value:0},sheenColor:{value:new wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cr},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cr},attenuationDistance:{value:0},attenuationColor:{value:new wt(0)},specularColor:{value:new wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cr},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cr}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag};const Sg={r:0,b:0,g:0},Au=new bs,HG=new Gt;function zG(i,t,n,r,s,o,a){const u=new wt(0);let l=o===!0?0:1,c,d,p=null,f=0,h=null;function m(_){let x=_.isScene===!0?_.background:null;return x&&x.isTexture&&(x=(_.backgroundBlurriness>0?n:t).get(x)),x}function y(_){let x=!1;const b=m(_);b===null?g(u,l):b&&b.isColor&&(g(b,1),x=!0);const S=i.xr.getEnvironmentBlendMode();S==="additive"?r.buffers.color.setClear(0,0,0,1,a):S==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(i.autoClear||x)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function v(_,x){const b=m(x);b&&(b.isCubeTexture||b.mapping===cd)?(d===void 0&&(d=new dn(new Rc(1,1,1),new Ho({name:"BackgroundCubeMaterial",uniforms:id(Io.backgroundCube.uniforms),vertexShader:Io.backgroundCube.vertexShader,fragmentShader:Io.backgroundCube.fragmentShader,side:$i,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(S,T,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),Au.copy(x.backgroundRotation),Au.x*=-1,Au.y*=-1,Au.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Au.y*=-1,Au.z*=-1),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(HG.makeRotationFromEuler(Au)),d.material.toneMapped=Ir.getTransfer(b.colorSpace)!==tn,(p!==b||f!==b.version||h!==i.toneMapping)&&(d.material.needsUpdate=!0,p=b,f=b.version,h=i.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new dn(new rl(2,2),new Ho({name:"BackgroundMaterial",uniforms:id(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=Ir.getTransfer(b.colorSpace)!==tn,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(p!==b||f!==b.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,p=b,f=b.version,h=i.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,x){_.getRGB(Sg,qI(i)),r.buffers.color.setClear(Sg.r,Sg.g,Sg.b,x,a)}return{getClearColor:function(){return u},setClearColor:function(_,x=1){u.set(_),l=x,g(u,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(u,l)},render:y,addToRenderList:v}}function VG(i,t){const n=i.getParameter(i.MAX_VERTEX_ATTRIBS),r={},s=f(null);let o=s,a=!1;function u(P,C,k,D,F){let G=!1;const z=p(D,k,C);o!==z&&(o=z,c(o.object)),G=h(P,D,k,F),G&&m(P,D,k,F),F!==null&&t.update(F,i.ELEMENT_ARRAY_BUFFER),(G||a)&&(a=!1,b(P,C,k,D),F!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function l(){return i.createVertexArray()}function c(P){return i.bindVertexArray(P)}function d(P){return i.deleteVertexArray(P)}function p(P,C,k){const D=k.wireframe===!0;let F=r[P.id];F===void 0&&(F={},r[P.id]=F);let G=F[C.id];G===void 0&&(G={},F[C.id]=G);let z=G[D];return z===void 0&&(z=f(l()),G[D]=z),z}function f(P){const C=[],k=[],D=[];for(let F=0;F<n;F++)C[F]=0,k[F]=0,D[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:k,attributeDivisors:D,object:P,attributes:{},index:null}}function h(P,C,k,D){const F=o.attributes,G=C.attributes;let z=0;const Q=k.getAttributes();for(const V in Q)if(Q[V].location>=0){const Y=F[V];let J=G[V];if(J===void 0&&(V==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),V==="instanceColor"&&P.instanceColor&&(J=P.instanceColor)),Y===void 0||Y.attribute!==J||J&&Y.data!==J.data)return!0;z++}return o.attributesNum!==z||o.index!==D}function m(P,C,k,D){const F={},G=C.attributes;let z=0;const Q=k.getAttributes();for(const V in Q)if(Q[V].location>=0){let Y=G[V];Y===void 0&&(V==="instanceMatrix"&&P.instanceMatrix&&(Y=P.instanceMatrix),V==="instanceColor"&&P.instanceColor&&(Y=P.instanceColor));const J={};J.attribute=Y,Y&&Y.data&&(J.data=Y.data),F[V]=J,z++}o.attributes=F,o.attributesNum=z,o.index=D}function y(){const P=o.newAttributes;for(let C=0,k=P.length;C<k;C++)P[C]=0}function v(P){g(P,0)}function g(P,C){const k=o.newAttributes,D=o.enabledAttributes,F=o.attributeDivisors;k[P]=1,D[P]===0&&(i.enableVertexAttribArray(P),D[P]=1),F[P]!==C&&(i.vertexAttribDivisor(P,C),F[P]=C)}function _(){const P=o.newAttributes,C=o.enabledAttributes;for(let k=0,D=C.length;k<D;k++)C[k]!==P[k]&&(i.disableVertexAttribArray(k),C[k]=0)}function x(P,C,k,D,F,G,z){z===!0?i.vertexAttribIPointer(P,C,k,F,G):i.vertexAttribPointer(P,C,k,D,F,G)}function b(P,C,k,D){y();const F=D.attributes,G=k.getAttributes(),z=C.defaultAttributeValues;for(const Q in G){const V=G[Q];if(V.location>=0){let W=F[Q];if(W===void 0&&(Q==="instanceMatrix"&&P.instanceMatrix&&(W=P.instanceMatrix),Q==="instanceColor"&&P.instanceColor&&(W=P.instanceColor)),W!==void 0){const Y=W.normalized,J=W.itemSize,ie=t.get(W);if(ie===void 0)continue;const I=ie.buffer,O=ie.type,H=ie.bytesPerElement,q=O===i.INT||O===i.UNSIGNED_INT||W.gpuType===g0;if(W.isInterleavedBufferAttribute){const Z=W.data,oe=Z.stride,pe=W.offset;if(Z.isInstancedInterleavedBuffer){for(let be=0;be<V.locationSize;be++)g(V.location+be,Z.meshPerAttribute);P.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let be=0;be<V.locationSize;be++)v(V.location+be);i.bindBuffer(i.ARRAY_BUFFER,I);for(let be=0;be<V.locationSize;be++)x(V.location+be,J/V.locationSize,O,Y,oe*H,(pe+J/V.locationSize*be)*H,q)}else{if(W.isInstancedBufferAttribute){for(let Z=0;Z<V.locationSize;Z++)g(V.location+Z,W.meshPerAttribute);P.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let Z=0;Z<V.locationSize;Z++)v(V.location+Z);i.bindBuffer(i.ARRAY_BUFFER,I);for(let Z=0;Z<V.locationSize;Z++)x(V.location+Z,J/V.locationSize,O,Y,J*H,J/V.locationSize*Z*H,q)}}else if(z!==void 0){const Y=z[Q];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(V.location,Y);break;case 3:i.vertexAttrib3fv(V.location,Y);break;case 4:i.vertexAttrib4fv(V.location,Y);break;default:i.vertexAttrib1fv(V.location,Y)}}}}_()}function S(){R();for(const P in r){const C=r[P];for(const k in C){const D=C[k];for(const F in D)d(D[F].object),delete D[F];delete C[k]}delete r[P]}}function T(P){if(r[P.id]===void 0)return;const C=r[P.id];for(const k in C){const D=C[k];for(const F in D)d(D[F].object),delete D[F];delete C[k]}delete r[P.id]}function M(P){for(const C in r){const k=r[C];if(k[P.id]===void 0)continue;const D=k[P.id];for(const F in D)d(D[F].object),delete D[F];delete k[P.id]}}function R(){L(),a=!0,o!==s&&(o=s,c(o.object))}function L(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:R,resetDefaultState:L,dispose:S,releaseStatesOfGeometry:T,releaseStatesOfProgram:M,initAttributes:y,enableAttribute:v,disableUnusedAttributes:_}}function WG(i,t,n){let r;function s(c){r=c}function o(c,d){i.drawArrays(r,c,d),n.update(d,r,1)}function a(c,d,p){p!==0&&(i.drawArraysInstanced(r,c,d,p),n.update(d,r,p))}function u(c,d,p){if(p===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,d,0,p);let h=0;for(let m=0;m<p;m++)h+=d[m];n.update(h,r,1)}function l(c,d,p,f){if(p===0)return;const h=t.get("WEBGL_multi_draw");if(h===null)for(let m=0;m<c.length;m++)a(c[m],d[m],f[m]);else{h.multiDrawArraysInstancedWEBGL(r,c,0,d,0,f,0,p);let m=0;for(let y=0;y<p;y++)m+=d[y];for(let y=0;y<f.length;y++)n.update(m,r,f[y])}}this.setMode=s,this.render=o,this.renderInstances=a,this.renderMultiDraw=u,this.renderMultiDrawInstances=l}function XG(i,t,n,r){let s;function o(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const M=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(M){return!(M!==Di&&r.convert(M)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(M){const R=M===fd&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(M!==No&&r.convert(M)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==ys&&!R)}function l(M){if(M==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const p=n.logarithmicDepthBuffer===!0,f=n.reverseDepthBuffer===!0&&t.has("EXT_clip_control");if(f===!0){const M=t.get("EXT_clip_control");M.clipControlEXT(M.LOWER_LEFT_EXT,M.ZERO_TO_ONE_EXT)}const h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),m=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=i.getParameter(i.MAX_TEXTURE_SIZE),v=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),g=i.getParameter(i.MAX_VERTEX_ATTRIBS),_=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),x=i.getParameter(i.MAX_VARYING_VECTORS),b=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),S=m>0,T=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:u,precision:c,logarithmicDepthBuffer:p,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:b,vertexTextures:S,maxSamples:T}}function YG(i){const t=this;let n=null,r=0,s=!1,o=!1;const a=new Da,u=new cr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,f){const h=p.length!==0||f||r!==0||s;return s=f,r=p.length,h},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,f){n=d(p,f,0)},this.setState=function(p,f,h){const m=p.clippingPlanes,y=p.clipIntersection,v=p.clipShadows,g=i.get(p);if(!s||m===null||m.length===0||o&&!v)o?d(null):c();else{const _=o?0:r,x=_*4;let b=g.clippingState||null;l.value=b,b=d(m,f,x,h);for(let S=0;S!==x;++S)b[S]=n[S];g.clippingState=b,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function d(p,f,h,m){const y=p!==null?p.length:0;let v=null;if(y!==0){if(v=l.value,m!==!0||v===null){const g=h+y*4,_=f.matrixWorldInverse;u.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let x=0,b=h;x!==y;++x,b+=4)a.copy(p[x]).applyMatrix4(_,u),a.normal.toArray(v,b),v[b+3]=a.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,v}}function qG(i){let t=new WeakMap;function n(a,u){return u===pp?a.mapping=Ya:u===mp&&(a.mapping=Kl),a}function r(a){if(a&&a.isTexture){const u=a.mapping;if(u===pp||u===mp)if(t.has(a)){const l=t.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new KI(l.height);return c.fromEquirectangularTexture(i,a),t.set(a,c),a.addEventListener("dispose",s),n(c.texture,a.mapping)}else return null}}return a}function s(a){const u=a.target;u.removeEventListener("dispose",s);const l=t.get(u);l!==void 0&&(t.delete(u),l.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}class ua extends Yp{constructor(t=-1,n=1,r=1,s=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=r,this.bottom=s,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,r,s,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-t,a=r+t,u=s+n,l=s-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,u-=d*this.view.offsetY,l=u-d*this.view.height}this.projectionMatrix.makeOrthographic(o,a,u,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const If=4,vE=[.125,.215,.35,.446,.526,.582],zu=20,U_=new ua,_E=new wt;let N_=null,G_=0,H_=0,z_=!1;const Gu=(1+Math.sqrt(5))/2,nf=1/Gu,xE=[new Ce(-Gu,nf,0),new Ce(Gu,nf,0),new Ce(-nf,0,Gu),new Ce(nf,0,Gu),new Ce(0,Gu,-nf),new Ce(0,Gu,nf),new Ce(-1,1,-1),new Ce(1,1,-1),new Ce(-1,1,1),new Ce(1,1,1)];class kb{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,r=.1,s=100){N_=this._renderer.getRenderTarget(),G_=this._renderer.getActiveCubeFace(),H_=this._renderer.getActiveMipmapLevel(),z_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,r,s,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=SE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(N_,G_,H_),this._renderer.xr.enabled=z_,t.scissorTest=!1,Ag(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===Ya||t.mapping===Kl?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),N_=this._renderer.getRenderTarget(),G_=this._renderer.getActiveCubeFace(),H_=this._renderer.getActiveMipmapLevel(),z_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:sn,minFilter:sn,generateMipmaps:!1,type:fd,format:Di,colorSpace:fi,depthBuffer:!1},s=bE(t,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bE(t,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=JG(o)),this._blurMaterial=KG(o,t,n)}return s}_compileMaterial(t){const n=new dn(this._lodPlanes[0],t);this._renderer.compile(n,U_)}_sceneToCubeUV(t,n,r,s){const u=new gn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,f=d.toneMapping;d.getClearColor(_E),d.toneMapping=la,d.autoClear=!1;const h=new Jn({name:"PMREM.Background",side:$i,depthWrite:!1,depthTest:!1}),m=new dn(new Rc,h);let y=!1;const v=t.background;v?v.isColor&&(h.color.copy(v),t.background=null,y=!0):(h.color.copy(_E),y=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(u.up.set(0,l[g],0),u.lookAt(c[g],0,0)):_===1?(u.up.set(0,0,l[g]),u.lookAt(0,c[g],0)):(u.up.set(0,l[g],0),u.lookAt(0,0,c[g]));const x=this._cubeSize;Ag(s,_*x,g>2?x:0,x,x),d.setRenderTarget(s),y&&d.render(m,u),d.render(t,u)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=f,d.autoClear=p,t.background=v}_textureToCubeUV(t,n){const r=this._renderer,s=t.mapping===Ya||t.mapping===Kl;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=SE()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=wE());const o=s?this._cubemapMaterial:this._equirectMaterial,a=new dn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=t;const l=this._cubeSize;Ag(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,U_)}_applyPMREM(t){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let o=1;o<s;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),u=xE[(s-o-1)%xE.length];this._blur(t,o-1,o,a,u)}n.autoClear=r}_blur(t,n,r,s,o){const a=this._pingPongRenderTarget;this._halfBlur(t,a,n,r,s,"latitudinal",o),this._halfBlur(a,t,r,r,s,"longitudinal",o)}_halfBlur(t,n,r,s,o,a,u){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new dn(this._lodPlanes[s],c),f=c.uniforms,h=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*h):2*Math.PI/(2*zu-1),y=o/m,v=isFinite(o)?1+Math.floor(d*y):zu;v>zu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${zu}`);const g=[];let _=0;for(let M=0;M<zu;++M){const R=M/y,L=Math.exp(-R*R/2);g.push(L),M===0?_+=L:M<v&&(_+=2*L)}for(let M=0;M<g.length;M++)g[M]=g[M]/_;f.envMap.value=t.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",u&&(f.poleAxis.value=u);const{_lodMax:x}=this;f.dTheta.value=m,f.mipInt.value=x-r;const b=this._sizeLods[s],S=3*b*(s>x-If?s-x+If:0),T=4*(this._cubeSize-b);Ag(n,S,T,3*b,2*b),l.setRenderTarget(n),l.render(p,U_)}}function JG(i){const t=[],n=[],r=[];let s=i;const o=i-If+1+vE.length;for(let a=0;a<o;a++){const u=Math.pow(2,s);n.push(u);let l=1/u;a>i-If?l=vE[a-i+If-1]:a===0&&(l=0),r.push(l);const c=1/(u-2),d=-c,p=1+c,f=[d,d,p,d,p,p,d,d,p,p,d,p],h=6,m=6,y=3,v=2,g=1,_=new Float32Array(y*m*h),x=new Float32Array(v*m*h),b=new Float32Array(g*m*h);for(let T=0;T<h;T++){const M=T%3*2/3-1,R=T>2?0:-1,L=[M,R,0,M+2/3,R,0,M+2/3,R+1,0,M,R,0,M+2/3,R+1,0,M,R+1,0];_.set(L,y*m*T),x.set(f,v*m*T);const P=[T,T,T,T,T,T];b.set(P,g*m*T)}const S=new fr;S.setAttribute("position",new Tr(_,y)),S.setAttribute("uv",new Tr(x,v)),S.setAttribute("faceIndex",new Tr(b,g)),t.push(S),s>If&&s--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function bE(i,t,n){const r=new Go(i,t,n);return r.texture.mapping=cd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ag(i,t,n,r,s){i.viewport.set(t,n,r,s),i.scissor.set(t,n,r,s)}function KG(i,t,n){const r=new Float32Array(zu),s=new Ce(0,1,0);return new Ho({name:"SphericalGaussianBlur",defines:{n:zu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function wE(){return new Ho({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function SE(){return new Ho({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function IS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function QG(i){let t=new WeakMap,n=null;function r(u){if(u&&u.isTexture){const l=u.mapping,c=l===pp||l===mp,d=l===Ya||l===Kl;if(c||d){let p=t.get(u);const f=p!==void 0?p.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==f)return n===null&&(n=new kb(i)),p=c?n.fromEquirectangular(u,p):n.fromCubemap(u,p),p.texture.pmremVersion=u.pmremVersion,t.set(u,p),p.texture;if(p!==void 0)return p.texture;{const h=u.image;return c&&h&&h.height>0||d&&h&&s(h)?(n===null&&(n=new kb(i)),p=c?n.fromEquirectangular(u):n.fromCubemap(u),p.texture.pmremVersion=u.pmremVersion,t.set(u,p),u.addEventListener("dispose",o),p.texture):null}}}return u}function s(u){let l=0;const c=6;for(let d=0;d<c;d++)u[d]!==void 0&&l++;return l===c}function o(u){const l=u.target;l.removeEventListener("dispose",o);const c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function a(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function ZG(i){const t={};function n(r){if(t[r]!==void 0)return t[r];let s;switch(r){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(r)}return t[r]=s,s}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const s=n(r);return s===null&&xy("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function $G(i,t,n,r){const s={},o=new WeakMap;function a(p){const f=p.target;f.index!==null&&t.remove(f.index);for(const m in f.attributes)t.remove(f.attributes[m]);for(const m in f.morphAttributes){const y=f.morphAttributes[m];for(let v=0,g=y.length;v<g;v++)t.remove(y[v])}f.removeEventListener("dispose",a),delete s[f.id];const h=o.get(f);h&&(t.remove(h),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function u(p,f){return s[f.id]===!0||(f.addEventListener("dispose",a),s[f.id]=!0,n.memory.geometries++),f}function l(p){const f=p.attributes;for(const m in f)t.update(f[m],i.ARRAY_BUFFER);const h=p.morphAttributes;for(const m in h){const y=h[m];for(let v=0,g=y.length;v<g;v++)t.update(y[v],i.ARRAY_BUFFER)}}function c(p){const f=[],h=p.index,m=p.attributes.position;let y=0;if(h!==null){const _=h.array;y=h.version;for(let x=0,b=_.length;x<b;x+=3){const S=_[x+0],T=_[x+1],M=_[x+2];f.push(S,T,T,M,M,S)}}else if(m!==void 0){const _=m.array;y=m.version;for(let x=0,b=_.length/3-1;x<b;x+=3){const S=x+0,T=x+1,M=x+2;f.push(S,T,T,M,M,S)}}else return;const v=new(zI(f)?RS:CS)(f,1);v.version=y;const g=o.get(p);g&&t.remove(g),o.set(p,v)}function d(p){const f=o.get(p);if(f){const h=p.index;h!==null&&f.version<h.version&&c(p)}else c(p);return o.get(p)}return{get:u,update:l,getWireframeAttribute:d}}function e6(i,t,n){let r;function s(f){r=f}let o,a;function u(f){o=f.type,a=f.bytesPerElement}function l(f,h){i.drawElements(r,h,o,f*a),n.update(h,r,1)}function c(f,h,m){m!==0&&(i.drawElementsInstanced(r,h,o,f*a,m),n.update(h,r,m))}function d(f,h,m){if(m===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,h,0,o,f,0,m);let v=0;for(let g=0;g<m;g++)v+=h[g];n.update(v,r,1)}function p(f,h,m,y){if(m===0)return;const v=t.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<f.length;g++)c(f[g]/a,h[g],y[g]);else{v.multiDrawElementsInstancedWEBGL(r,h,0,o,f,0,y,0,m);let g=0;for(let _=0;_<m;_++)g+=h[_];for(let _=0;_<y.length;_++)n.update(g,r,y[_])}}this.setMode=s,this.setIndex=u,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function t6(i){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,u){switch(n.calls++,a){case i.TRIANGLES:n.triangles+=u*(o/3);break;case i.LINES:n.lines+=u*(o/2);break;case i.LINE_STRIP:n.lines+=u*(o-1);break;case i.LINE_LOOP:n.lines+=u*o;break;case i.POINTS:n.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:s,update:r}}function r6(i,t,n){const r=new WeakMap,s=new _r;function o(a,u,l){const c=a.morphTargetInfluences,d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=d!==void 0?d.length:0;let f=r.get(u);if(f===void 0||f.count!==p){let L=function(){M.dispose(),r.delete(u),u.removeEventListener("dispose",L)};f!==void 0&&f.texture.dispose();const h=u.morphAttributes.position!==void 0,m=u.morphAttributes.normal!==void 0,y=u.morphAttributes.color!==void 0,v=u.morphAttributes.position||[],g=u.morphAttributes.normal||[],_=u.morphAttributes.color||[];let x=0;h===!0&&(x=1),m===!0&&(x=2),y===!0&&(x=3);let b=u.attributes.position.count*x,S=1;b>t.maxTextureSize&&(S=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const T=new Float32Array(b*S*4*p),M=new M0(T,b,S,p);M.type=ys,M.needsUpdate=!0;const R=x*4;for(let P=0;P<p;P++){const C=v[P],k=g[P],D=_[P],F=b*S*4*P;for(let G=0;G<C.count;G++){const z=G*R;h===!0&&(s.fromBufferAttribute(C,G),T[F+z+0]=s.x,T[F+z+1]=s.y,T[F+z+2]=s.z,T[F+z+3]=0),m===!0&&(s.fromBufferAttribute(k,G),T[F+z+4]=s.x,T[F+z+5]=s.y,T[F+z+6]=s.z,T[F+z+7]=0),y===!0&&(s.fromBufferAttribute(D,G),T[F+z+8]=s.x,T[F+z+9]=s.y,T[F+z+10]=s.z,T[F+z+11]=D.itemSize===4?s.w:1)}}f={count:p,texture:M,size:new mt(b,S)},r.set(u,f),u.addEventListener("dispose",L)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,n);else{let h=0;for(let y=0;y<c.length;y++)h+=c[y];const m=u.morphTargetsRelative?1:1-h;l.getUniforms().setValue(i,"morphTargetBaseInfluence",m),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(i,"morphTargetsTextureSize",f.size)}return{update:o}}function n6(i,t,n,r){let s=new WeakMap;function o(l){const c=r.render.frame,d=l.geometry,p=t.get(l,d);if(s.get(p)!==c&&(t.update(p),s.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",u)===!1&&l.addEventListener("dispose",u),s.get(l)!==c&&(n.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;s.get(f)!==c&&(f.update(),s.set(f,c))}return p}function a(){s=new WeakMap}function u(l){const c=l.target;c.removeEventListener("dispose",u),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}class LS extends Qr{constructor(t,n,r,s,o,a,u,l,c,d=ic){if(d!==ic&&d!==yc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===ic&&(r=qa),r===void 0&&d===yc&&(r=gc),super(null,s,o,a,u,l,d,r,c),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=u!==void 0?u:Nn,this.minFilter=l!==void 0?l:Nn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const ZI=new Qr,AE=new LS(1,1),$I=new M0,eL=new TS,tL=new qp,ME=[],EE=[],TE=new Float32Array(16),CE=new Float32Array(9),RE=new Float32Array(4);function dd(i,t,n){const r=i[0];if(r<=0||r>0)return i;const s=t*n;let o=ME[s];if(o===void 0&&(o=new Float32Array(s),ME[s]=o),t!==0){r.toArray(o,0);for(let a=1,u=0;a!==t;++a)u+=n,i[a].toArray(o,u)}return o}function Zn(i,t){if(i.length!==t.length)return!1;for(let n=0,r=i.length;n<r;n++)if(i[n]!==t[n])return!1;return!0}function $n(i,t){for(let n=0,r=t.length;n<r;n++)i[n]=t[n]}function E0(i,t){let n=EE[t];n===void 0&&(n=new Int32Array(t),EE[t]=n);for(let r=0;r!==t;++r)n[r]=i.allocateTextureUnit();return n}function i6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1f(this.addr,t),n[0]=t)}function s6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zn(n,t))return;i.uniform2fv(this.addr,t),$n(n,t)}}function o6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Zn(n,t))return;i.uniform3fv(this.addr,t),$n(n,t)}}function a6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zn(n,t))return;i.uniform4fv(this.addr,t),$n(n,t)}}function l6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zn(n,t))return;i.uniformMatrix2fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;RE.set(r),i.uniformMatrix2fv(this.addr,!1,RE),$n(n,r)}}function u6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zn(n,t))return;i.uniformMatrix3fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;CE.set(r),i.uniformMatrix3fv(this.addr,!1,CE),$n(n,r)}}function c6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zn(n,t))return;i.uniformMatrix4fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;TE.set(r),i.uniformMatrix4fv(this.addr,!1,TE),$n(n,r)}}function f6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1i(this.addr,t),n[0]=t)}function d6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zn(n,t))return;i.uniform2iv(this.addr,t),$n(n,t)}}function h6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Zn(n,t))return;i.uniform3iv(this.addr,t),$n(n,t)}}function p6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zn(n,t))return;i.uniform4iv(this.addr,t),$n(n,t)}}function m6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1ui(this.addr,t),n[0]=t)}function g6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zn(n,t))return;i.uniform2uiv(this.addr,t),$n(n,t)}}function y6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Zn(n,t))return;i.uniform3uiv(this.addr,t),$n(n,t)}}function v6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zn(n,t))return;i.uniform4uiv(this.addr,t),$n(n,t)}}function _6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s);let o;this.type===i.SAMPLER_2D_SHADOW?(AE.compareFunction=MS,o=AE):o=ZI,n.setTexture2D(t||o,s)}function x6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(t||eL,s)}function b6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(t||tL,s)}function w6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(t||$I,s)}function S6(i){switch(i){case 5126:return i6;case 35664:return s6;case 35665:return o6;case 35666:return a6;case 35674:return l6;case 35675:return u6;case 35676:return c6;case 5124:case 35670:return f6;case 35667:case 35671:return d6;case 35668:case 35672:return h6;case 35669:case 35673:return p6;case 5125:return m6;case 36294:return g6;case 36295:return y6;case 36296:return v6;case 35678:case 36198:case 36298:case 36306:case 35682:return _6;case 35679:case 36299:case 36307:return x6;case 35680:case 36300:case 36308:case 36293:return b6;case 36289:case 36303:case 36311:case 36292:return w6}}function A6(i,t){i.uniform1fv(this.addr,t)}function M6(i,t){const n=dd(t,this.size,2);i.uniform2fv(this.addr,n)}function E6(i,t){const n=dd(t,this.size,3);i.uniform3fv(this.addr,n)}function T6(i,t){const n=dd(t,this.size,4);i.uniform4fv(this.addr,n)}function C6(i,t){const n=dd(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function R6(i,t){const n=dd(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function P6(i,t){const n=dd(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function I6(i,t){i.uniform1iv(this.addr,t)}function L6(i,t){i.uniform2iv(this.addr,t)}function j6(i,t){i.uniform3iv(this.addr,t)}function D6(i,t){i.uniform4iv(this.addr,t)}function k6(i,t){i.uniform1uiv(this.addr,t)}function O6(i,t){i.uniform2uiv(this.addr,t)}function B6(i,t){i.uniform3uiv(this.addr,t)}function F6(i,t){i.uniform4uiv(this.addr,t)}function U6(i,t,n){const r=this.cache,s=t.length,o=E0(n,s);Zn(r,o)||(i.uniform1iv(this.addr,o),$n(r,o));for(let a=0;a!==s;++a)n.setTexture2D(t[a]||ZI,o[a])}function N6(i,t,n){const r=this.cache,s=t.length,o=E0(n,s);Zn(r,o)||(i.uniform1iv(this.addr,o),$n(r,o));for(let a=0;a!==s;++a)n.setTexture3D(t[a]||eL,o[a])}function G6(i,t,n){const r=this.cache,s=t.length,o=E0(n,s);Zn(r,o)||(i.uniform1iv(this.addr,o),$n(r,o));for(let a=0;a!==s;++a)n.setTextureCube(t[a]||tL,o[a])}function H6(i,t,n){const r=this.cache,s=t.length,o=E0(n,s);Zn(r,o)||(i.uniform1iv(this.addr,o),$n(r,o));for(let a=0;a!==s;++a)n.setTexture2DArray(t[a]||$I,o[a])}function z6(i){switch(i){case 5126:return A6;case 35664:return M6;case 35665:return E6;case 35666:return T6;case 35674:return C6;case 35675:return R6;case 35676:return P6;case 5124:case 35670:return I6;case 35667:case 35671:return L6;case 35668:case 35672:return j6;case 35669:case 35673:return D6;case 5125:return k6;case 36294:return O6;case 36295:return B6;case 36296:return F6;case 35678:case 36198:case 36298:case 36306:case 35682:return U6;case 35679:case 36299:case 36307:return N6;case 35680:case 36300:case 36308:case 36293:return G6;case 36289:case 36303:case 36311:case 36292:return H6}}class V6{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=S6(n.type)}}class W6{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=z6(n.type)}}class X6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,r){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const u=s[o];u.setValue(t,n[u.id],r)}}}const V_=/(\w+)(\])?(\[|\.)?/g;function PE(i,t){i.seq.push(t),i.map[t.id]=t}function Y6(i,t,n){const r=i.name,s=r.length;for(V_.lastIndex=0;;){const o=V_.exec(r),a=V_.lastIndex;let u=o[1];const l=o[2]==="]",c=o[3];if(l&&(u=u|0),c===void 0||c==="["&&a+2===s){PE(n,c===void 0?new V6(u,i,t):new W6(u,i,t));break}else{let p=n.map[u];p===void 0&&(p=new X6(u),PE(n,p)),n=p}}}class by{constructor(t,n){this.seq=[],this.map={};const r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const o=t.getActiveUniform(n,s),a=t.getUniformLocation(n,o.name);Y6(o,a,this)}}setValue(t,n,r,s){const o=this.map[n];o!==void 0&&o.setValue(t,r,s)}setOptional(t,n,r){const s=n[r];s!==void 0&&this.setValue(t,r,s)}static upload(t,n,r,s){for(let o=0,a=n.length;o!==a;++o){const u=n[o],l=r[u.id];l.needsUpdate!==!1&&u.setValue(t,l.value,s)}}static seqWithValue(t,n){const r=[];for(let s=0,o=t.length;s!==o;++s){const a=t[s];a.id in n&&r.push(a)}return r}}function IE(i,t,n){const r=i.createShader(t);return i.shaderSource(r,n),i.compileShader(r),r}const q6=37297;let J6=0;function K6(i,t){const n=i.split(`
`),r=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const u=a+1;r.push(`${u===t?">":" "} ${u}: ${n[a]}`)}return r.join(`
`)}function Q6(i){const t=Ir.getPrimaries(Ir.workingColorSpace),n=Ir.getPrimaries(i);let r;switch(t===n?r="":t===_p&&n===vp?r="LinearDisplayP3ToLinearSRGB":t===vp&&n===_p&&(r="LinearSRGBToLinearDisplayP3"),i){case fi:case Xp:return[r,"LinearTransferOETF"];case yi:case S0:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[r,"LinearTransferOETF"]}}function LE(i,t,n){const r=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+K6(i.getShaderSource(t),a)}else return s}function Z6(i,t){const n=Q6(t);return`vec4 ${i}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function $6(i,t){let n;switch(t){case AI:n="Linear";break;case MI:n="Reinhard";break;case EI:n="Cineon";break;case dS:n="ACESFilmic";break;case CI:n="AgX";break;case RI:n="Neutral";break;case TI:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Mg=new Ce;function e8(){Ir.getLuminanceCoefficients(Mg);const i=Mg.x.toFixed(4),t=Mg.y.toFixed(4),n=Mg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function t8(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(bh).join(`
`)}function r8(i){const t=[];for(const n in i){const r=i[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function n8(i,t){const n={},r=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const o=i.getActiveAttrib(t,s),a=o.name;let u=1;o.type===i.FLOAT_MAT2&&(u=2),o.type===i.FLOAT_MAT3&&(u=3),o.type===i.FLOAT_MAT4&&(u=4),n[a]={type:o.type,location:i.getAttribLocation(t,a),locationSize:u}}return n}function bh(i){return i!==""}function jE(i,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function DE(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const i8=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ob(i){return i.replace(i8,o8)}const s8=new Map;function o8(i,t){let n=hr[t];if(n===void 0){const r=s8.get(t);if(r!==void 0)n=hr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r);else throw new Error("Can not resolve #include <"+t+">")}return Ob(n)}const a8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kE(i){return i.replace(a8,l8)}function l8(i,t,n,r){let s="";for(let o=parseInt(t);o<parseInt(n);o++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function OE(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function u8(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===p0?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===jh?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Co&&(t="SHADOWMAP_TYPE_VSM"),t}function c8(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ya:case Kl:t="ENVMAP_TYPE_CUBE";break;case cd:t="ENVMAP_TYPE_CUBE_UV";break}return t}function f8(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Kl:t="ENVMAP_MODE_REFRACTION";break}return t}function d8(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Hp:t="ENVMAP_BLENDING_MULTIPLY";break;case wI:t="ENVMAP_BLENDING_MIX";break;case SI:t="ENVMAP_BLENDING_ADD";break}return t}function h8(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function p8(i,t,n,r){const s=i.getContext(),o=n.defines;let a=n.vertexShader,u=n.fragmentShader;const l=u8(n),c=c8(n),d=f8(n),p=d8(n),f=h8(n),h=t8(n),m=r8(o),y=s.createProgram();let v,g,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(bh).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(bh).join(`
`),g.length>0&&(g+=`
`)):(v=[OE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bh).join(`
`),g=[OE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==la?"#define TONE_MAPPING":"",n.toneMapping!==la?hr.tonemapping_pars_fragment:"",n.toneMapping!==la?$6("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",hr.colorspace_pars_fragment,Z6("linearToOutputTexel",n.outputColorSpace),e8(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(bh).join(`
`)),a=Ob(a),a=jE(a,n),a=DE(a,n),u=Ob(u),u=jE(u,n),u=DE(u,n),a=kE(a),u=kE(u),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",n.glslVersion===Db?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Db?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=_+v+a,b=_+g+u,S=IE(s,s.VERTEX_SHADER,x),T=IE(s,s.FRAGMENT_SHADER,b);s.attachShader(y,S),s.attachShader(y,T),n.index0AttributeName!==void 0?s.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(y,0,"position"),s.linkProgram(y);function M(C){if(i.debug.checkShaderErrors){const k=s.getProgramInfoLog(y).trim(),D=s.getShaderInfoLog(S).trim(),F=s.getShaderInfoLog(T).trim();let G=!0,z=!0;if(s.getProgramParameter(y,s.LINK_STATUS)===!1)if(G=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,y,S,T);else{const Q=LE(s,S,"vertex"),V=LE(s,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(y,s.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+k+`
`+Q+`
`+V)}else k!==""?console.warn("THREE.WebGLProgram: Program Info Log:",k):(D===""||F==="")&&(z=!1);z&&(C.diagnostics={runnable:G,programLog:k,vertexShader:{log:D,prefix:v},fragmentShader:{log:F,prefix:g}})}s.deleteShader(S),s.deleteShader(T),R=new by(s,y),L=n8(s,y)}let R;this.getUniforms=function(){return R===void 0&&M(this),R};let L;this.getAttributes=function(){return L===void 0&&M(this),L};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(y,q6)),P},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=J6++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=T,this}let m8=0;class g8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,r=t.fragmentShader,s=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let r=n.get(t);return r===void 0&&(r=new Set,n.set(t,r)),r}_getShaderStage(t){const n=this.shaderCache;let r=n.get(t);return r===void 0&&(r=new y8(t),n.set(t,r)),r}}class y8{constructor(t){this.id=m8++,this.code=t,this.usedTimes=0}}function v8(i,t,n,r,s,o,a){const u=new oc,l=new g8,c=new Set,d=[],p=s.logarithmicDepthBuffer,f=s.reverseDepthBuffer,h=s.vertexTextures;let m=s.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(P){return c.add(P),P===0?"uv":`uv${P}`}function g(P,C,k,D,F){const G=D.fog,z=F.geometry,Q=P.isMeshStandardMaterial?D.environment:null,V=(P.isMeshStandardMaterial?n:t).get(P.envMap||Q),W=V&&V.mapping===cd?V.image.height:null,Y=y[P.type];P.precision!==null&&(m=s.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const J=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,ie=J!==void 0?J.length:0;let I=0;z.morphAttributes.position!==void 0&&(I=1),z.morphAttributes.normal!==void 0&&(I=2),z.morphAttributes.color!==void 0&&(I=3);let O,H,q,Z;if(Y){const Bt=Io[Y];O=Bt.vertexShader,H=Bt.fragmentShader}else O=P.vertexShader,H=P.fragmentShader,l.update(P),q=l.getVertexShaderID(P),Z=l.getFragmentShaderID(P);const oe=i.getRenderTarget(),pe=F.isInstancedMesh===!0,be=F.isBatchedMesh===!0,me=!!P.map,ce=!!P.matcap,te=!!V,ue=!!P.aoMap,ge=!!P.lightMap,xe=!!P.bumpMap,Le=!!P.normalMap,we=!!P.displacementMap,Ee=!!P.emissiveMap,ae=!!P.metalnessMap,ne=!!P.roughnessMap,Ae=P.anisotropy>0,Be=P.clearcoat>0,Fe=P.dispersion>0,Oe=P.iridescence>0,Je=P.sheen>0,Ve=P.transmission>0,Se=Ae&&!!P.anisotropyMap,We=Be&&!!P.clearcoatMap,Re=Be&&!!P.clearcoatNormalMap,le=Be&&!!P.clearcoatRoughnessMap,de=Oe&&!!P.iridescenceMap,ee=Oe&&!!P.iridescenceThicknessMap,he=Je&&!!P.sheenColorMap,Pe=Je&&!!P.sheenRoughnessMap,ye=!!P.specularMap,De=!!P.specularColorMap,Me=!!P.specularIntensityMap,qe=Ve&&!!P.transmissionMap,ke=Ve&&!!P.thicknessMap,Ye=!!P.gradientMap,dt=!!P.alphaMap,at=P.alphaTest>0,ct=!!P.alphaHash,xt=!!P.extensions;let _t=la;P.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(_t=i.toneMapping);const vt={shaderID:Y,shaderType:P.type,shaderName:P.name,vertexShader:O,fragmentShader:H,defines:P.defines,customVertexShaderID:q,customFragmentShaderID:Z,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:be,batchingColor:be&&F._colorsTexture!==null,instancing:pe,instancingColor:pe&&F.instanceColor!==null,instancingMorph:pe&&F.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:oe===null?i.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:fi,alphaToCoverage:!!P.alphaToCoverage,map:me,matcap:ce,envMap:te,envMapMode:te&&V.mapping,envMapCubeUVHeight:W,aoMap:ue,lightMap:ge,bumpMap:xe,normalMap:Le,displacementMap:h&&we,emissiveMap:Ee,normalMapObjectSpace:Le&&P.normalMapType===kI,normalMapTangentSpace:Le&&P.normalMapType===tu,metalnessMap:ae,roughnessMap:ne,anisotropy:Ae,anisotropyMap:Se,clearcoat:Be,clearcoatMap:We,clearcoatNormalMap:Re,clearcoatRoughnessMap:le,dispersion:Fe,iridescence:Oe,iridescenceMap:de,iridescenceThicknessMap:ee,sheen:Je,sheenColorMap:he,sheenRoughnessMap:Pe,specularMap:ye,specularColorMap:De,specularIntensityMap:Me,transmission:Ve,transmissionMap:qe,thicknessMap:ke,gradientMap:Ye,opaque:P.transparent===!1&&P.blending===rc&&P.alphaToCoverage===!1,alphaMap:dt,alphaTest:at,alphaHash:ct,combine:P.combine,mapUv:me&&v(P.map.channel),aoMapUv:ue&&v(P.aoMap.channel),lightMapUv:ge&&v(P.lightMap.channel),bumpMapUv:xe&&v(P.bumpMap.channel),normalMapUv:Le&&v(P.normalMap.channel),displacementMapUv:we&&v(P.displacementMap.channel),emissiveMapUv:Ee&&v(P.emissiveMap.channel),metalnessMapUv:ae&&v(P.metalnessMap.channel),roughnessMapUv:ne&&v(P.roughnessMap.channel),anisotropyMapUv:Se&&v(P.anisotropyMap.channel),clearcoatMapUv:We&&v(P.clearcoatMap.channel),clearcoatNormalMapUv:Re&&v(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:le&&v(P.clearcoatRoughnessMap.channel),iridescenceMapUv:de&&v(P.iridescenceMap.channel),iridescenceThicknessMapUv:ee&&v(P.iridescenceThicknessMap.channel),sheenColorMapUv:he&&v(P.sheenColorMap.channel),sheenRoughnessMapUv:Pe&&v(P.sheenRoughnessMap.channel),specularMapUv:ye&&v(P.specularMap.channel),specularColorMapUv:De&&v(P.specularColorMap.channel),specularIntensityMapUv:Me&&v(P.specularIntensityMap.channel),transmissionMapUv:qe&&v(P.transmissionMap.channel),thicknessMapUv:ke&&v(P.thicknessMap.channel),alphaMapUv:dt&&v(P.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(Le||Ae),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!z.attributes.uv&&(me||dt),fog:!!G,useFog:P.fog===!0,fogExp2:!!G&&G.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:f,skinning:F.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:I,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:P.dithering,shadowMapEnabled:i.shadowMap.enabled&&k.length>0,shadowMapType:i.shadowMap.type,toneMapping:_t,decodeVideoTexture:me&&P.map.isVideoTexture===!0&&Ir.getTransfer(P.map.colorSpace)===tn,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Is,flipSided:P.side===$i,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:xt&&P.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(xt&&P.extensions.multiDraw===!0||be)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return vt.vertexUv1s=c.has(1),vt.vertexUv2s=c.has(2),vt.vertexUv3s=c.has(3),c.clear(),vt}function _(P){const C=[];if(P.shaderID?C.push(P.shaderID):(C.push(P.customVertexShaderID),C.push(P.customFragmentShaderID)),P.defines!==void 0)for(const k in P.defines)C.push(k),C.push(P.defines[k]);return P.isRawShaderMaterial===!1&&(x(C,P),b(C,P),C.push(i.outputColorSpace)),C.push(P.customProgramCacheKey),C.join()}function x(P,C){P.push(C.precision),P.push(C.outputColorSpace),P.push(C.envMapMode),P.push(C.envMapCubeUVHeight),P.push(C.mapUv),P.push(C.alphaMapUv),P.push(C.lightMapUv),P.push(C.aoMapUv),P.push(C.bumpMapUv),P.push(C.normalMapUv),P.push(C.displacementMapUv),P.push(C.emissiveMapUv),P.push(C.metalnessMapUv),P.push(C.roughnessMapUv),P.push(C.anisotropyMapUv),P.push(C.clearcoatMapUv),P.push(C.clearcoatNormalMapUv),P.push(C.clearcoatRoughnessMapUv),P.push(C.iridescenceMapUv),P.push(C.iridescenceThicknessMapUv),P.push(C.sheenColorMapUv),P.push(C.sheenRoughnessMapUv),P.push(C.specularMapUv),P.push(C.specularColorMapUv),P.push(C.specularIntensityMapUv),P.push(C.transmissionMapUv),P.push(C.thicknessMapUv),P.push(C.combine),P.push(C.fogExp2),P.push(C.sizeAttenuation),P.push(C.morphTargetsCount),P.push(C.morphAttributeCount),P.push(C.numDirLights),P.push(C.numPointLights),P.push(C.numSpotLights),P.push(C.numSpotLightMaps),P.push(C.numHemiLights),P.push(C.numRectAreaLights),P.push(C.numDirLightShadows),P.push(C.numPointLightShadows),P.push(C.numSpotLightShadows),P.push(C.numSpotLightShadowsWithMaps),P.push(C.numLightProbes),P.push(C.shadowMapType),P.push(C.toneMapping),P.push(C.numClippingPlanes),P.push(C.numClipIntersection),P.push(C.depthPacking)}function b(P,C){u.disableAll(),C.supportsVertexTextures&&u.enable(0),C.instancing&&u.enable(1),C.instancingColor&&u.enable(2),C.instancingMorph&&u.enable(3),C.matcap&&u.enable(4),C.envMap&&u.enable(5),C.normalMapObjectSpace&&u.enable(6),C.normalMapTangentSpace&&u.enable(7),C.clearcoat&&u.enable(8),C.iridescence&&u.enable(9),C.alphaTest&&u.enable(10),C.vertexColors&&u.enable(11),C.vertexAlphas&&u.enable(12),C.vertexUv1s&&u.enable(13),C.vertexUv2s&&u.enable(14),C.vertexUv3s&&u.enable(15),C.vertexTangents&&u.enable(16),C.anisotropy&&u.enable(17),C.alphaHash&&u.enable(18),C.batching&&u.enable(19),C.dispersion&&u.enable(20),C.batchingColor&&u.enable(21),P.push(u.mask),u.disableAll(),C.fog&&u.enable(0),C.useFog&&u.enable(1),C.flatShading&&u.enable(2),C.logarithmicDepthBuffer&&u.enable(3),C.reverseDepthBuffer&&u.enable(4),C.skinning&&u.enable(5),C.morphTargets&&u.enable(6),C.morphNormals&&u.enable(7),C.morphColors&&u.enable(8),C.premultipliedAlpha&&u.enable(9),C.shadowMapEnabled&&u.enable(10),C.doubleSided&&u.enable(11),C.flipSided&&u.enable(12),C.useDepthPacking&&u.enable(13),C.dithering&&u.enable(14),C.transmission&&u.enable(15),C.sheen&&u.enable(16),C.opaque&&u.enable(17),C.pointsUvs&&u.enable(18),C.decodeVideoTexture&&u.enable(19),C.alphaToCoverage&&u.enable(20),P.push(u.mask)}function S(P){const C=y[P.type];let k;if(C){const D=Io[C];k=PS.clone(D.uniforms)}else k=P.uniforms;return k}function T(P,C){let k;for(let D=0,F=d.length;D<F;D++){const G=d[D];if(G.cacheKey===C){k=G,++k.usedTimes;break}}return k===void 0&&(k=new p8(i,C,P,o),d.push(k)),k}function M(P){if(--P.usedTimes===0){const C=d.indexOf(P);d[C]=d[d.length-1],d.pop(),P.destroy()}}function R(P){l.remove(P)}function L(){l.dispose()}return{getParameters:g,getProgramCacheKey:_,getUniforms:S,acquireProgram:T,releaseProgram:M,releaseShaderCache:R,programs:d,dispose:L}}function _8(){let i=new WeakMap;function t(a){return i.has(a)}function n(a){let u=i.get(a);return u===void 0&&(u={},i.set(a,u)),u}function r(a){i.delete(a)}function s(a,u,l){i.get(a)[u]=l}function o(){i=new WeakMap}return{has:t,get:n,remove:r,update:s,dispose:o}}function x8(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function BE(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function FE(){const i=[];let t=0;const n=[],r=[],s=[];function o(){t=0,n.length=0,r.length=0,s.length=0}function a(p,f,h,m,y,v){let g=i[t];return g===void 0?(g={id:p.id,object:p,geometry:f,material:h,groupOrder:m,renderOrder:p.renderOrder,z:y,group:v},i[t]=g):(g.id=p.id,g.object=p,g.geometry=f,g.material=h,g.groupOrder=m,g.renderOrder=p.renderOrder,g.z=y,g.group=v),t++,g}function u(p,f,h,m,y,v){const g=a(p,f,h,m,y,v);h.transmission>0?r.push(g):h.transparent===!0?s.push(g):n.push(g)}function l(p,f,h,m,y,v){const g=a(p,f,h,m,y,v);h.transmission>0?r.unshift(g):h.transparent===!0?s.unshift(g):n.unshift(g)}function c(p,f){n.length>1&&n.sort(p||x8),r.length>1&&r.sort(f||BE),s.length>1&&s.sort(f||BE)}function d(){for(let p=t,f=i.length;p<f;p++){const h=i[p];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:s,init:o,push:u,unshift:l,finish:d,sort:c}}function b8(){let i=new WeakMap;function t(r,s){const o=i.get(r);let a;return o===void 0?(a=new FE,i.set(r,[a])):s>=o.length?(a=new FE,o.push(a)):a=o[s],a}function n(){i=new WeakMap}return{get:t,dispose:n}}function w8(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ce,color:new wt};break;case"SpotLight":n={position:new Ce,direction:new Ce,color:new wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ce,color:new wt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ce,skyColor:new wt,groundColor:new wt};break;case"RectAreaLight":n={color:new wt,position:new Ce,halfWidth:new Ce,halfHeight:new Ce};break}return i[t.id]=n,n}}}function S8(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=n,n}}}let A8=0;function M8(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function E8(i){const t=new w8,n=S8(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new Ce);const s=new Ce,o=new Gt,a=new Gt;function u(c){let d=0,p=0,f=0;for(let L=0;L<9;L++)r.probe[L].set(0,0,0);let h=0,m=0,y=0,v=0,g=0,_=0,x=0,b=0,S=0,T=0,M=0;c.sort(M8);for(let L=0,P=c.length;L<P;L++){const C=c[L],k=C.color,D=C.intensity,F=C.distance,G=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)d+=k.r*D,p+=k.g*D,f+=k.b*D;else if(C.isLightProbe){for(let z=0;z<9;z++)r.probe[z].addScaledVector(C.sh.coefficients[z],D);M++}else if(C.isDirectionalLight){const z=t.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),C.castShadow){const Q=C.shadow,V=n.get(C);V.shadowIntensity=Q.intensity,V.shadowBias=Q.bias,V.shadowNormalBias=Q.normalBias,V.shadowRadius=Q.radius,V.shadowMapSize=Q.mapSize,r.directionalShadow[h]=V,r.directionalShadowMap[h]=G,r.directionalShadowMatrix[h]=C.shadow.matrix,_++}r.directional[h]=z,h++}else if(C.isSpotLight){const z=t.get(C);z.position.setFromMatrixPosition(C.matrixWorld),z.color.copy(k).multiplyScalar(D),z.distance=F,z.coneCos=Math.cos(C.angle),z.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),z.decay=C.decay,r.spot[y]=z;const Q=C.shadow;if(C.map&&(r.spotLightMap[S]=C.map,S++,Q.updateMatrices(C),C.castShadow&&T++),r.spotLightMatrix[y]=Q.matrix,C.castShadow){const V=n.get(C);V.shadowIntensity=Q.intensity,V.shadowBias=Q.bias,V.shadowNormalBias=Q.normalBias,V.shadowRadius=Q.radius,V.shadowMapSize=Q.mapSize,r.spotShadow[y]=V,r.spotShadowMap[y]=G,b++}y++}else if(C.isRectAreaLight){const z=t.get(C);z.color.copy(k).multiplyScalar(D),z.halfWidth.set(C.width*.5,0,0),z.halfHeight.set(0,C.height*.5,0),r.rectArea[v]=z,v++}else if(C.isPointLight){const z=t.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),z.distance=C.distance,z.decay=C.decay,C.castShadow){const Q=C.shadow,V=n.get(C);V.shadowIntensity=Q.intensity,V.shadowBias=Q.bias,V.shadowNormalBias=Q.normalBias,V.shadowRadius=Q.radius,V.shadowMapSize=Q.mapSize,V.shadowCameraNear=Q.camera.near,V.shadowCameraFar=Q.camera.far,r.pointShadow[m]=V,r.pointShadowMap[m]=G,r.pointShadowMatrix[m]=C.shadow.matrix,x++}r.point[m]=z,m++}else if(C.isHemisphereLight){const z=t.get(C);z.skyColor.copy(C.color).multiplyScalar(D),z.groundColor.copy(C.groundColor).multiplyScalar(D),r.hemi[g]=z,g++}}v>0&&(i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ct.LTC_FLOAT_1,r.rectAreaLTC2=Ct.LTC_FLOAT_2):(r.rectAreaLTC1=Ct.LTC_HALF_1,r.rectAreaLTC2=Ct.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=p,r.ambient[2]=f;const R=r.hash;(R.directionalLength!==h||R.pointLength!==m||R.spotLength!==y||R.rectAreaLength!==v||R.hemiLength!==g||R.numDirectionalShadows!==_||R.numPointShadows!==x||R.numSpotShadows!==b||R.numSpotMaps!==S||R.numLightProbes!==M)&&(r.directional.length=h,r.spot.length=y,r.rectArea.length=v,r.point.length=m,r.hemi.length=g,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=b+S-T,r.spotLightMap.length=S,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=M,R.directionalLength=h,R.pointLength=m,R.spotLength=y,R.rectAreaLength=v,R.hemiLength=g,R.numDirectionalShadows=_,R.numPointShadows=x,R.numSpotShadows=b,R.numSpotMaps=S,R.numLightProbes=M,r.version=A8++)}function l(c,d){let p=0,f=0,h=0,m=0,y=0;const v=d.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const x=c[g];if(x.isDirectionalLight){const b=r.directional[p];b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),p++}else if(x.isSpotLight){const b=r.spot[h];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),h++}else if(x.isRectAreaLight){const b=r.rectArea[m];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),a.identity(),o.copy(x.matrixWorld),o.premultiply(v),a.extractRotation(o),b.halfWidth.set(x.width*.5,0,0),b.halfHeight.set(0,x.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),m++}else if(x.isPointLight){const b=r.point[f];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),f++}else if(x.isHemisphereLight){const b=r.hemi[y];b.direction.setFromMatrixPosition(x.matrixWorld),b.direction.transformDirection(v),y++}}}return{setup:u,setupView:l,state:r}}function UE(i){const t=new E8(i),n=[],r=[];function s(d){c.camera=d,n.length=0,r.length=0}function o(d){n.push(d)}function a(d){r.push(d)}function u(){t.setup(n)}function l(d){t.setupView(n,d)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:u,setupLightsView:l,pushLight:o,pushShadow:a}}function T8(i){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let u;return a===void 0?(u=new UE(i),t.set(s,[u])):o>=a.length?(u=new UE(i),a.push(u)):u=a[o],u}function r(){t=new WeakMap}return{get:n,dispose:r}}class T0 extends Tn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=DI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class C0 extends Tn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const C8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,R8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function P8(i,t,n){let r=new Jp;const s=new mt,o=new mt,a=new _r,u=new T0({depthPacking:AS}),l=new C0,c={},d=n.maxTextureSize,p={[Fo]:$i,[$i]:Fo,[Is]:Is},f=new Ho({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:C8,fragmentShader:R8}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const m=new fr;m.setAttribute("position",new Tr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new dn(m,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p0;let g=this.type;this.render=function(T,M,R){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||T.length===0)return;const L=i.getRenderTarget(),P=i.getActiveCubeFace(),C=i.getActiveMipmapLevel(),k=i.state;k.setBlending(Ga),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const D=g!==Co&&this.type===Co,F=g===Co&&this.type!==Co;for(let G=0,z=T.length;G<z;G++){const Q=T[G],V=Q.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;s.copy(V.mapSize);const W=V.getFrameExtents();if(s.multiply(W),o.copy(V.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(o.x=Math.floor(d/W.x),s.x=o.x*W.x,V.mapSize.x=o.x),s.y>d&&(o.y=Math.floor(d/W.y),s.y=o.y*W.y,V.mapSize.y=o.y)),V.map===null||D===!0||F===!0){const J=this.type!==Co?{minFilter:Nn,magFilter:Nn}:{};V.map!==null&&V.map.dispose(),V.map=new Go(s.x,s.y,J),V.map.texture.name=Q.name+".shadowMap",V.camera.updateProjectionMatrix()}i.setRenderTarget(V.map),i.clear();const Y=V.getViewportCount();for(let J=0;J<Y;J++){const ie=V.getViewport(J);a.set(o.x*ie.x,o.y*ie.y,o.x*ie.z,o.y*ie.w),k.viewport(a),V.updateMatrices(Q,J),r=V.getFrustum(),b(M,R,V.camera,Q,this.type)}V.isPointLightShadow!==!0&&this.type===Co&&_(V,R),V.needsUpdate=!1}g=this.type,v.needsUpdate=!1,i.setRenderTarget(L,P,C)};function _(T,M){const R=t.update(y);f.defines.VSM_SAMPLES!==T.blurSamples&&(f.defines.VSM_SAMPLES=T.blurSamples,h.defines.VSM_SAMPLES=T.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Go(s.x,s.y)),f.uniforms.shadow_pass.value=T.map.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,i.setRenderTarget(T.mapPass),i.clear(),i.renderBufferDirect(M,null,R,f,y,null),h.uniforms.shadow_pass.value=T.mapPass.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,i.setRenderTarget(T.map),i.clear(),i.renderBufferDirect(M,null,R,h,y,null)}function x(T,M,R,L){let P=null;const C=R.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(C!==void 0)P=C;else if(P=R.isPointLight===!0?l:u,i.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const k=P.uuid,D=M.uuid;let F=c[k];F===void 0&&(F={},c[k]=F);let G=F[D];G===void 0&&(G=P.clone(),F[D]=G,M.addEventListener("dispose",S)),P=G}if(P.visible=M.visible,P.wireframe=M.wireframe,L===Co?P.side=M.shadowSide!==null?M.shadowSide:M.side:P.side=M.shadowSide!==null?M.shadowSide:p[M.side],P.alphaMap=M.alphaMap,P.alphaTest=M.alphaTest,P.map=M.map,P.clipShadows=M.clipShadows,P.clippingPlanes=M.clippingPlanes,P.clipIntersection=M.clipIntersection,P.displacementMap=M.displacementMap,P.displacementScale=M.displacementScale,P.displacementBias=M.displacementBias,P.wireframeLinewidth=M.wireframeLinewidth,P.linewidth=M.linewidth,R.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const k=i.properties.get(P);k.light=R}return P}function b(T,M,R,L,P){if(T.visible===!1)return;if(T.layers.test(M.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&P===Co)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,T.matrixWorld);const D=t.update(T),F=T.material;if(Array.isArray(F)){const G=D.groups;for(let z=0,Q=G.length;z<Q;z++){const V=G[z],W=F[V.materialIndex];if(W&&W.visible){const Y=x(T,W,L,P);T.onBeforeShadow(i,T,M,R,D,Y,V),i.renderBufferDirect(R,null,D,Y,T,V),T.onAfterShadow(i,T,M,R,D,Y,V)}}}else if(F.visible){const G=x(T,F,L,P);T.onBeforeShadow(i,T,M,R,D,G,null),i.renderBufferDirect(R,null,D,G,T,null),T.onAfterShadow(i,T,M,R,D,G,null)}}const k=T.children;for(let D=0,F=k.length;D<F;D++)b(k[D],M,R,L,P)}function S(T){T.target.removeEventListener("dispose",S);for(const R in c){const L=c[R],P=T.target.uuid;P in L&&(L[P].dispose(),delete L[P])}}}const I8={[rv]:nv,[iv]:av,[sv]:lv,[pc]:ov,[nv]:rv,[av]:iv,[lv]:sv,[ov]:pc};function L8(i){function t(){let Me=!1;const qe=new _r;let ke=null;const Ye=new _r(0,0,0,0);return{setMask:function(dt){ke!==dt&&!Me&&(i.colorMask(dt,dt,dt,dt),ke=dt)},setLocked:function(dt){Me=dt},setClear:function(dt,at,ct,xt,_t){_t===!0&&(dt*=xt,at*=xt,ct*=xt),qe.set(dt,at,ct,xt),Ye.equals(qe)===!1&&(i.clearColor(dt,at,ct,xt),Ye.copy(qe))},reset:function(){Me=!1,ke=null,Ye.set(-1,0,0,0)}}}function n(){let Me=!1,qe=!1,ke=null,Ye=null,dt=null;return{setReversed:function(at){qe=at},setTest:function(at){at?q(i.DEPTH_TEST):Z(i.DEPTH_TEST)},setMask:function(at){ke!==at&&!Me&&(i.depthMask(at),ke=at)},setFunc:function(at){if(qe&&(at=I8[at]),Ye!==at){switch(at){case rv:i.depthFunc(i.NEVER);break;case nv:i.depthFunc(i.ALWAYS);break;case iv:i.depthFunc(i.LESS);break;case pc:i.depthFunc(i.LEQUAL);break;case sv:i.depthFunc(i.EQUAL);break;case ov:i.depthFunc(i.GEQUAL);break;case av:i.depthFunc(i.GREATER);break;case lv:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ye=at}},setLocked:function(at){Me=at},setClear:function(at){dt!==at&&(i.clearDepth(at),dt=at)},reset:function(){Me=!1,ke=null,Ye=null,dt=null}}}function r(){let Me=!1,qe=null,ke=null,Ye=null,dt=null,at=null,ct=null,xt=null,_t=null;return{setTest:function(vt){Me||(vt?q(i.STENCIL_TEST):Z(i.STENCIL_TEST))},setMask:function(vt){qe!==vt&&!Me&&(i.stencilMask(vt),qe=vt)},setFunc:function(vt,Bt,qt){(ke!==vt||Ye!==Bt||dt!==qt)&&(i.stencilFunc(vt,Bt,qt),ke=vt,Ye=Bt,dt=qt)},setOp:function(vt,Bt,qt){(at!==vt||ct!==Bt||xt!==qt)&&(i.stencilOp(vt,Bt,qt),at=vt,ct=Bt,xt=qt)},setLocked:function(vt){Me=vt},setClear:function(vt){_t!==vt&&(i.clearStencil(vt),_t=vt)},reset:function(){Me=!1,qe=null,ke=null,Ye=null,dt=null,at=null,ct=null,xt=null,_t=null}}}const s=new t,o=new n,a=new r,u=new WeakMap,l=new WeakMap;let c={},d={},p=new WeakMap,f=[],h=null,m=!1,y=null,v=null,g=null,_=null,x=null,b=null,S=null,T=new wt(0,0,0),M=0,R=!1,L=null,P=null,C=null,k=null,D=null;const F=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,z=0;const Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(Q)[1]),G=z>=1):Q.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),G=z>=2);let V=null,W={};const Y=i.getParameter(i.SCISSOR_BOX),J=i.getParameter(i.VIEWPORT),ie=new _r().fromArray(Y),I=new _r().fromArray(J);function O(Me,qe,ke,Ye){const dt=new Uint8Array(4),at=i.createTexture();i.bindTexture(Me,at),i.texParameteri(Me,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Me,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ct=0;ct<ke;ct++)Me===i.TEXTURE_3D||Me===i.TEXTURE_2D_ARRAY?i.texImage3D(qe,0,i.RGBA,1,1,Ye,0,i.RGBA,i.UNSIGNED_BYTE,dt):i.texImage2D(qe+ct,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,dt);return at}const H={};H[i.TEXTURE_2D]=O(i.TEXTURE_2D,i.TEXTURE_2D,1),H[i.TEXTURE_CUBE_MAP]=O(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),H[i.TEXTURE_2D_ARRAY]=O(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),H[i.TEXTURE_3D]=O(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),q(i.DEPTH_TEST),o.setFunc(pc),ge(!1),xe(Cb),q(i.CULL_FACE),te(Ga);function q(Me){c[Me]!==!0&&(i.enable(Me),c[Me]=!0)}function Z(Me){c[Me]!==!1&&(i.disable(Me),c[Me]=!1)}function oe(Me,qe){return d[Me]!==qe?(i.bindFramebuffer(Me,qe),d[Me]=qe,Me===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=qe),Me===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=qe),!0):!1}function pe(Me,qe){let ke=f,Ye=!1;if(Me){ke=p.get(qe),ke===void 0&&(ke=[],p.set(qe,ke));const dt=Me.textures;if(ke.length!==dt.length||ke[0]!==i.COLOR_ATTACHMENT0){for(let at=0,ct=dt.length;at<ct;at++)ke[at]=i.COLOR_ATTACHMENT0+at;ke.length=dt.length,Ye=!0}}else ke[0]!==i.BACK&&(ke[0]=i.BACK,Ye=!0);Ye&&i.drawBuffers(ke)}function be(Me){return h!==Me?(i.useProgram(Me),h=Me,!0):!1}const me={[Il]:i.FUNC_ADD,[sI]:i.FUNC_SUBTRACT,[oI]:i.FUNC_REVERSE_SUBTRACT};me[aI]=i.MIN,me[lI]=i.MAX;const ce={[uI]:i.ZERO,[cI]:i.ONE,[fI]:i.SRC_COLOR,[ev]:i.SRC_ALPHA,[yI]:i.SRC_ALPHA_SATURATE,[mI]:i.DST_COLOR,[hI]:i.DST_ALPHA,[dI]:i.ONE_MINUS_SRC_COLOR,[tv]:i.ONE_MINUS_SRC_ALPHA,[gI]:i.ONE_MINUS_DST_COLOR,[pI]:i.ONE_MINUS_DST_ALPHA,[vI]:i.CONSTANT_COLOR,[_I]:i.ONE_MINUS_CONSTANT_COLOR,[xI]:i.CONSTANT_ALPHA,[bI]:i.ONE_MINUS_CONSTANT_ALPHA};function te(Me,qe,ke,Ye,dt,at,ct,xt,_t,vt){if(Me===Ga){m===!0&&(Z(i.BLEND),m=!1);return}if(m===!1&&(q(i.BLEND),m=!0),Me!==iI){if(Me!==y||vt!==R){if((v!==Il||x!==Il)&&(i.blendEquation(i.FUNC_ADD),v=Il,x=Il),vt)switch(Me){case rc:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Rb:i.blendFunc(i.ONE,i.ONE);break;case Pb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Ib:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case rc:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Rb:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Pb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Ib:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}g=null,_=null,b=null,S=null,T.set(0,0,0),M=0,y=Me,R=vt}return}dt=dt||qe,at=at||ke,ct=ct||Ye,(qe!==v||dt!==x)&&(i.blendEquationSeparate(me[qe],me[dt]),v=qe,x=dt),(ke!==g||Ye!==_||at!==b||ct!==S)&&(i.blendFuncSeparate(ce[ke],ce[Ye],ce[at],ce[ct]),g=ke,_=Ye,b=at,S=ct),(xt.equals(T)===!1||_t!==M)&&(i.blendColor(xt.r,xt.g,xt.b,_t),T.copy(xt),M=_t),y=Me,R=!1}function ue(Me,qe){Me.side===Is?Z(i.CULL_FACE):q(i.CULL_FACE);let ke=Me.side===$i;qe&&(ke=!ke),ge(ke),Me.blending===rc&&Me.transparent===!1?te(Ga):te(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.blendColor,Me.blendAlpha,Me.premultipliedAlpha),o.setFunc(Me.depthFunc),o.setTest(Me.depthTest),o.setMask(Me.depthWrite),s.setMask(Me.colorWrite);const Ye=Me.stencilWrite;a.setTest(Ye),Ye&&(a.setMask(Me.stencilWriteMask),a.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),a.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),we(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?q(i.SAMPLE_ALPHA_TO_COVERAGE):Z(i.SAMPLE_ALPHA_TO_COVERAGE)}function ge(Me){L!==Me&&(Me?i.frontFace(i.CW):i.frontFace(i.CCW),L=Me)}function xe(Me){Me!==tI?(q(i.CULL_FACE),Me!==P&&(Me===Cb?i.cullFace(i.BACK):Me===rI?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Z(i.CULL_FACE),P=Me}function Le(Me){Me!==C&&(G&&i.lineWidth(Me),C=Me)}function we(Me,qe,ke){Me?(q(i.POLYGON_OFFSET_FILL),(k!==qe||D!==ke)&&(i.polygonOffset(qe,ke),k=qe,D=ke)):Z(i.POLYGON_OFFSET_FILL)}function Ee(Me){Me?q(i.SCISSOR_TEST):Z(i.SCISSOR_TEST)}function ae(Me){Me===void 0&&(Me=i.TEXTURE0+F-1),V!==Me&&(i.activeTexture(Me),V=Me)}function ne(Me,qe,ke){ke===void 0&&(V===null?ke=i.TEXTURE0+F-1:ke=V);let Ye=W[ke];Ye===void 0&&(Ye={type:void 0,texture:void 0},W[ke]=Ye),(Ye.type!==Me||Ye.texture!==qe)&&(V!==ke&&(i.activeTexture(ke),V=ke),i.bindTexture(Me,qe||H[Me]),Ye.type=Me,Ye.texture=qe)}function Ae(){const Me=W[V];Me!==void 0&&Me.type!==void 0&&(i.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function Be(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Fe(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Oe(){try{i.texSubImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Je(){try{i.texSubImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ve(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Se(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function We(){try{i.texStorage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Re(){try{i.texStorage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function le(){try{i.texImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function de(){try{i.texImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ee(Me){ie.equals(Me)===!1&&(i.scissor(Me.x,Me.y,Me.z,Me.w),ie.copy(Me))}function he(Me){I.equals(Me)===!1&&(i.viewport(Me.x,Me.y,Me.z,Me.w),I.copy(Me))}function Pe(Me,qe){let ke=l.get(qe);ke===void 0&&(ke=new WeakMap,l.set(qe,ke));let Ye=ke.get(Me);Ye===void 0&&(Ye=i.getUniformBlockIndex(qe,Me.name),ke.set(Me,Ye))}function ye(Me,qe){const Ye=l.get(qe).get(Me);u.get(qe)!==Ye&&(i.uniformBlockBinding(qe,Ye,Me.__bindingPointIndex),u.set(qe,Ye))}function De(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},V=null,W={},d={},p=new WeakMap,f=[],h=null,m=!1,y=null,v=null,g=null,_=null,x=null,b=null,S=null,T=new wt(0,0,0),M=0,R=!1,L=null,P=null,C=null,k=null,D=null,ie.set(0,0,i.canvas.width,i.canvas.height),I.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:q,disable:Z,bindFramebuffer:oe,drawBuffers:pe,useProgram:be,setBlending:te,setMaterial:ue,setFlipSided:ge,setCullFace:xe,setLineWidth:Le,setPolygonOffset:we,setScissorTest:Ee,activeTexture:ae,bindTexture:ne,unbindTexture:Ae,compressedTexImage2D:Be,compressedTexImage3D:Fe,texImage2D:le,texImage3D:de,updateUBOMapping:Pe,uniformBlockBinding:ye,texStorage2D:We,texStorage3D:Re,texSubImage2D:Oe,texSubImage3D:Je,compressedTexSubImage2D:Ve,compressedTexSubImage3D:Se,scissor:ee,viewport:he,reset:De}}function j8(i,t){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>t?(i.repeat.x=1,i.repeat.y=n/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function D8(i,t){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>t?(i.repeat.x=t/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=n/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function k8(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Bb(i,t,n,r){const s=O8(r);switch(n){case gS:return i*t;case vS:return i*t;case _S:return i*t*2;case _0:return i*t/s.components*s.byteLength;case Vp:return i*t/s.components*s.byteLength;case xS:return i*t*2/s.components*s.byteLength;case x0:return i*t*2/s.components*s.byteLength;case yS:return i*t*3/s.components*s.byteLength;case Di:return i*t*4/s.components*s.byteLength;case b0:return i*t*4/s.components*s.byteLength;case Dh:case kh:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Oh:case Bh:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case cv:case dv:return Math.max(i,16)*Math.max(t,8)/4;case uv:case fv:return Math.max(i,8)*Math.max(t,8)/2;case hv:case pv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case mv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case gv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case yv:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case vv:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case _v:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case xv:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case bv:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case wv:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case Sv:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case Av:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case Mv:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case Ev:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case Tv:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case Cv:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case Rv:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case Fh:case Pv:case Iv:return Math.ceil(i/4)*Math.ceil(t/4)*16;case bS:case Lv:return Math.ceil(i/4)*Math.ceil(t/4)*8;case jv:case Dv:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function O8(i){switch(i){case No:case hS:return{byteLength:1,components:1};case rd:case pS:case fd:return{byteLength:2,components:1};case y0:case v0:return{byteLength:2,components:4};case qa:case g0:case ys:return{byteLength:4,components:1};case mS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const B8={contain:j8,cover:D8,fill:k8,getByteLength:Bb};function F8(i,t,n,r,s,o,a){const u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new mt,d=new WeakMap;let p;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(ae,ne){return h?new OffscreenCanvas(ae,ne):wp("canvas")}function y(ae,ne,Ae){let Be=1;const Fe=Ee(ae);if((Fe.width>Ae||Fe.height>Ae)&&(Be=Ae/Math.max(Fe.width,Fe.height)),Be<1)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap||typeof VideoFrame<"u"&&ae instanceof VideoFrame){const Oe=Math.floor(Be*Fe.width),Je=Math.floor(Be*Fe.height);p===void 0&&(p=m(Oe,Je));const Ve=ne?m(Oe,Je):p;return Ve.width=Oe,Ve.height=Je,Ve.getContext("2d").drawImage(ae,0,0,Oe,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+Oe+"x"+Je+")."),Ve}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),ae;return ae}function v(ae){return ae.generateMipmaps&&ae.minFilter!==Nn&&ae.minFilter!==sn}function g(ae){i.generateMipmap(ae)}function _(ae,ne,Ae,Be,Fe=!1){if(ae!==null){if(i[ae]!==void 0)return i[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Oe=ne;if(ne===i.RED&&(Ae===i.FLOAT&&(Oe=i.R32F),Ae===i.HALF_FLOAT&&(Oe=i.R16F),Ae===i.UNSIGNED_BYTE&&(Oe=i.R8)),ne===i.RED_INTEGER&&(Ae===i.UNSIGNED_BYTE&&(Oe=i.R8UI),Ae===i.UNSIGNED_SHORT&&(Oe=i.R16UI),Ae===i.UNSIGNED_INT&&(Oe=i.R32UI),Ae===i.BYTE&&(Oe=i.R8I),Ae===i.SHORT&&(Oe=i.R16I),Ae===i.INT&&(Oe=i.R32I)),ne===i.RG&&(Ae===i.FLOAT&&(Oe=i.RG32F),Ae===i.HALF_FLOAT&&(Oe=i.RG16F),Ae===i.UNSIGNED_BYTE&&(Oe=i.RG8)),ne===i.RG_INTEGER&&(Ae===i.UNSIGNED_BYTE&&(Oe=i.RG8UI),Ae===i.UNSIGNED_SHORT&&(Oe=i.RG16UI),Ae===i.UNSIGNED_INT&&(Oe=i.RG32UI),Ae===i.BYTE&&(Oe=i.RG8I),Ae===i.SHORT&&(Oe=i.RG16I),Ae===i.INT&&(Oe=i.RG32I)),ne===i.RGB_INTEGER&&(Ae===i.UNSIGNED_BYTE&&(Oe=i.RGB8UI),Ae===i.UNSIGNED_SHORT&&(Oe=i.RGB16UI),Ae===i.UNSIGNED_INT&&(Oe=i.RGB32UI),Ae===i.BYTE&&(Oe=i.RGB8I),Ae===i.SHORT&&(Oe=i.RGB16I),Ae===i.INT&&(Oe=i.RGB32I)),ne===i.RGBA_INTEGER&&(Ae===i.UNSIGNED_BYTE&&(Oe=i.RGBA8UI),Ae===i.UNSIGNED_SHORT&&(Oe=i.RGBA16UI),Ae===i.UNSIGNED_INT&&(Oe=i.RGBA32UI),Ae===i.BYTE&&(Oe=i.RGBA8I),Ae===i.SHORT&&(Oe=i.RGBA16I),Ae===i.INT&&(Oe=i.RGBA32I)),ne===i.RGB&&Ae===i.UNSIGNED_INT_5_9_9_9_REV&&(Oe=i.RGB9_E5),ne===i.RGBA){const Je=Fe?yp:Ir.getTransfer(Be);Ae===i.FLOAT&&(Oe=i.RGBA32F),Ae===i.HALF_FLOAT&&(Oe=i.RGBA16F),Ae===i.UNSIGNED_BYTE&&(Oe=Je===tn?i.SRGB8_ALPHA8:i.RGBA8),Ae===i.UNSIGNED_SHORT_4_4_4_4&&(Oe=i.RGBA4),Ae===i.UNSIGNED_SHORT_5_5_5_1&&(Oe=i.RGB5_A1)}return(Oe===i.R16F||Oe===i.R32F||Oe===i.RG16F||Oe===i.RG32F||Oe===i.RGBA16F||Oe===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Oe}function x(ae,ne){let Ae;return ae?ne===null||ne===qa||ne===gc?Ae=i.DEPTH24_STENCIL8:ne===ys?Ae=i.DEPTH32F_STENCIL8:ne===rd&&(Ae=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ne===null||ne===qa||ne===gc?Ae=i.DEPTH_COMPONENT24:ne===ys?Ae=i.DEPTH_COMPONENT32F:ne===rd&&(Ae=i.DEPTH_COMPONENT16),Ae}function b(ae,ne){return v(ae)===!0||ae.isFramebufferTexture&&ae.minFilter!==Nn&&ae.minFilter!==sn?Math.log2(Math.max(ne.width,ne.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?ne.mipmaps.length:1}function S(ae){const ne=ae.target;ne.removeEventListener("dispose",S),M(ne),ne.isVideoTexture&&d.delete(ne)}function T(ae){const ne=ae.target;ne.removeEventListener("dispose",T),L(ne)}function M(ae){const ne=r.get(ae);if(ne.__webglInit===void 0)return;const Ae=ae.source,Be=f.get(Ae);if(Be){const Fe=Be[ne.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&R(ae),Object.keys(Be).length===0&&f.delete(Ae)}r.remove(ae)}function R(ae){const ne=r.get(ae);i.deleteTexture(ne.__webglTexture);const Ae=ae.source,Be=f.get(Ae);delete Be[ne.__cacheKey],a.memory.textures--}function L(ae){const ne=r.get(ae);if(ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(ne.__webglFramebuffer[Be]))for(let Fe=0;Fe<ne.__webglFramebuffer[Be].length;Fe++)i.deleteFramebuffer(ne.__webglFramebuffer[Be][Fe]);else i.deleteFramebuffer(ne.__webglFramebuffer[Be]);ne.__webglDepthbuffer&&i.deleteRenderbuffer(ne.__webglDepthbuffer[Be])}else{if(Array.isArray(ne.__webglFramebuffer))for(let Be=0;Be<ne.__webglFramebuffer.length;Be++)i.deleteFramebuffer(ne.__webglFramebuffer[Be]);else i.deleteFramebuffer(ne.__webglFramebuffer);if(ne.__webglDepthbuffer&&i.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let Be=0;Be<ne.__webglColorRenderbuffer.length;Be++)ne.__webglColorRenderbuffer[Be]&&i.deleteRenderbuffer(ne.__webglColorRenderbuffer[Be]);ne.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}const Ae=ae.textures;for(let Be=0,Fe=Ae.length;Be<Fe;Be++){const Oe=r.get(Ae[Be]);Oe.__webglTexture&&(i.deleteTexture(Oe.__webglTexture),a.memory.textures--),r.remove(Ae[Be])}r.remove(ae)}let P=0;function C(){P=0}function k(){const ae=P;return ae>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+s.maxTextures),P+=1,ae}function D(ae){const ne=[];return ne.push(ae.wrapS),ne.push(ae.wrapT),ne.push(ae.wrapR||0),ne.push(ae.magFilter),ne.push(ae.minFilter),ne.push(ae.anisotropy),ne.push(ae.internalFormat),ne.push(ae.format),ne.push(ae.type),ne.push(ae.generateMipmaps),ne.push(ae.premultiplyAlpha),ne.push(ae.flipY),ne.push(ae.unpackAlignment),ne.push(ae.colorSpace),ne.join()}function F(ae,ne){const Ae=r.get(ae);if(ae.isVideoTexture&&Le(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&Ae.__version!==ae.version){const Be=ae.image;if(Be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{I(Ae,ae,ne);return}}n.bindTexture(i.TEXTURE_2D,Ae.__webglTexture,i.TEXTURE0+ne)}function G(ae,ne){const Ae=r.get(ae);if(ae.version>0&&Ae.__version!==ae.version){I(Ae,ae,ne);return}n.bindTexture(i.TEXTURE_2D_ARRAY,Ae.__webglTexture,i.TEXTURE0+ne)}function z(ae,ne){const Ae=r.get(ae);if(ae.version>0&&Ae.__version!==ae.version){I(Ae,ae,ne);return}n.bindTexture(i.TEXTURE_3D,Ae.__webglTexture,i.TEXTURE0+ne)}function Q(ae,ne){const Ae=r.get(ae);if(ae.version>0&&Ae.__version!==ae.version){O(Ae,ae,ne);return}n.bindTexture(i.TEXTURE_CUBE_MAP,Ae.__webglTexture,i.TEXTURE0+ne)}const V={[Uo]:i.REPEAT,[ms]:i.CLAMP_TO_EDGE,[mc]:i.MIRRORED_REPEAT},W={[Nn]:i.NEAREST,[zp]:i.NEAREST_MIPMAP_NEAREST,[kl]:i.NEAREST_MIPMAP_LINEAR,[sn]:i.LINEAR,[nc]:i.LINEAR_MIPMAP_NEAREST,[gs]:i.LINEAR_MIPMAP_LINEAR},Y={[OI]:i.NEVER,[HI]:i.ALWAYS,[BI]:i.LESS,[MS]:i.LEQUAL,[FI]:i.EQUAL,[GI]:i.GEQUAL,[UI]:i.GREATER,[NI]:i.NOTEQUAL};function J(ae,ne){if(ne.type===ys&&t.has("OES_texture_float_linear")===!1&&(ne.magFilter===sn||ne.magFilter===nc||ne.magFilter===kl||ne.magFilter===gs||ne.minFilter===sn||ne.minFilter===nc||ne.minFilter===kl||ne.minFilter===gs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(ae,i.TEXTURE_WRAP_S,V[ne.wrapS]),i.texParameteri(ae,i.TEXTURE_WRAP_T,V[ne.wrapT]),(ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ae,i.TEXTURE_WRAP_R,V[ne.wrapR]),i.texParameteri(ae,i.TEXTURE_MAG_FILTER,W[ne.magFilter]),i.texParameteri(ae,i.TEXTURE_MIN_FILTER,W[ne.minFilter]),ne.compareFunction&&(i.texParameteri(ae,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ae,i.TEXTURE_COMPARE_FUNC,Y[ne.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(ne.magFilter===Nn||ne.minFilter!==kl&&ne.minFilter!==gs||ne.type===ys&&t.has("OES_texture_float_linear")===!1)return;if(ne.anisotropy>1||r.get(ne).__currentAnisotropy){const Ae=t.get("EXT_texture_filter_anisotropic");i.texParameterf(ae,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,s.getMaxAnisotropy())),r.get(ne).__currentAnisotropy=ne.anisotropy}}}function ie(ae,ne){let Ae=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,ne.addEventListener("dispose",S));const Be=ne.source;let Fe=f.get(Be);Fe===void 0&&(Fe={},f.set(Be,Fe));const Oe=D(ne);if(Oe!==ae.__cacheKey){Fe[Oe]===void 0&&(Fe[Oe]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Ae=!0),Fe[Oe].usedTimes++;const Je=Fe[ae.__cacheKey];Je!==void 0&&(Fe[ae.__cacheKey].usedTimes--,Je.usedTimes===0&&R(ne)),ae.__cacheKey=Oe,ae.__webglTexture=Fe[Oe].texture}return Ae}function I(ae,ne,Ae){let Be=i.TEXTURE_2D;(ne.isDataArrayTexture||ne.isCompressedArrayTexture)&&(Be=i.TEXTURE_2D_ARRAY),ne.isData3DTexture&&(Be=i.TEXTURE_3D);const Fe=ie(ae,ne),Oe=ne.source;n.bindTexture(Be,ae.__webglTexture,i.TEXTURE0+Ae);const Je=r.get(Oe);if(Oe.version!==Je.__version||Fe===!0){n.activeTexture(i.TEXTURE0+Ae);const Ve=Ir.getPrimaries(Ir.workingColorSpace),Se=ne.colorSpace===ka?null:Ir.getPrimaries(ne.colorSpace),We=ne.colorSpace===ka||Ve===Se?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,ne.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,ne.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,We);let Re=y(ne.image,!1,s.maxTextureSize);Re=we(ne,Re);const le=o.convert(ne.format,ne.colorSpace),de=o.convert(ne.type);let ee=_(ne.internalFormat,le,de,ne.colorSpace,ne.isVideoTexture);J(Be,ne);let he;const Pe=ne.mipmaps,ye=ne.isVideoTexture!==!0,De=Je.__version===void 0||Fe===!0,Me=Oe.dataReady,qe=b(ne,Re);if(ne.isDepthTexture)ee=x(ne.format===yc,ne.type),De&&(ye?n.texStorage2D(i.TEXTURE_2D,1,ee,Re.width,Re.height):n.texImage2D(i.TEXTURE_2D,0,ee,Re.width,Re.height,0,le,de,null));else if(ne.isDataTexture)if(Pe.length>0){ye&&De&&n.texStorage2D(i.TEXTURE_2D,qe,ee,Pe[0].width,Pe[0].height);for(let ke=0,Ye=Pe.length;ke<Ye;ke++)he=Pe[ke],ye?Me&&n.texSubImage2D(i.TEXTURE_2D,ke,0,0,he.width,he.height,le,de,he.data):n.texImage2D(i.TEXTURE_2D,ke,ee,he.width,he.height,0,le,de,he.data);ne.generateMipmaps=!1}else ye?(De&&n.texStorage2D(i.TEXTURE_2D,qe,ee,Re.width,Re.height),Me&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,Re.width,Re.height,le,de,Re.data)):n.texImage2D(i.TEXTURE_2D,0,ee,Re.width,Re.height,0,le,de,Re.data);else if(ne.isCompressedTexture)if(ne.isCompressedArrayTexture){ye&&De&&n.texStorage3D(i.TEXTURE_2D_ARRAY,qe,ee,Pe[0].width,Pe[0].height,Re.depth);for(let ke=0,Ye=Pe.length;ke<Ye;ke++)if(he=Pe[ke],ne.format!==Di)if(le!==null)if(ye){if(Me)if(ne.layerUpdates.size>0){const dt=Bb(he.width,he.height,ne.format,ne.type);for(const at of ne.layerUpdates){const ct=he.data.subarray(at*dt/he.data.BYTES_PER_ELEMENT,(at+1)*dt/he.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ke,0,0,at,he.width,he.height,1,le,ct,0,0)}ne.clearLayerUpdates()}else n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ke,0,0,0,he.width,he.height,Re.depth,le,he.data,0,0)}else n.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ke,ee,he.width,he.height,Re.depth,0,he.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ye?Me&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,ke,0,0,0,he.width,he.height,Re.depth,le,de,he.data):n.texImage3D(i.TEXTURE_2D_ARRAY,ke,ee,he.width,he.height,Re.depth,0,le,de,he.data)}else{ye&&De&&n.texStorage2D(i.TEXTURE_2D,qe,ee,Pe[0].width,Pe[0].height);for(let ke=0,Ye=Pe.length;ke<Ye;ke++)he=Pe[ke],ne.format!==Di?le!==null?ye?Me&&n.compressedTexSubImage2D(i.TEXTURE_2D,ke,0,0,he.width,he.height,le,he.data):n.compressedTexImage2D(i.TEXTURE_2D,ke,ee,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ye?Me&&n.texSubImage2D(i.TEXTURE_2D,ke,0,0,he.width,he.height,le,de,he.data):n.texImage2D(i.TEXTURE_2D,ke,ee,he.width,he.height,0,le,de,he.data)}else if(ne.isDataArrayTexture)if(ye){if(De&&n.texStorage3D(i.TEXTURE_2D_ARRAY,qe,ee,Re.width,Re.height,Re.depth),Me)if(ne.layerUpdates.size>0){const ke=Bb(Re.width,Re.height,ne.format,ne.type);for(const Ye of ne.layerUpdates){const dt=Re.data.subarray(Ye*ke/Re.data.BYTES_PER_ELEMENT,(Ye+1)*ke/Re.data.BYTES_PER_ELEMENT);n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ye,Re.width,Re.height,1,le,de,dt)}ne.clearLayerUpdates()}else n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,le,de,Re.data)}else n.texImage3D(i.TEXTURE_2D_ARRAY,0,ee,Re.width,Re.height,Re.depth,0,le,de,Re.data);else if(ne.isData3DTexture)ye?(De&&n.texStorage3D(i.TEXTURE_3D,qe,ee,Re.width,Re.height,Re.depth),Me&&n.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,le,de,Re.data)):n.texImage3D(i.TEXTURE_3D,0,ee,Re.width,Re.height,Re.depth,0,le,de,Re.data);else if(ne.isFramebufferTexture){if(De)if(ye)n.texStorage2D(i.TEXTURE_2D,qe,ee,Re.width,Re.height);else{let ke=Re.width,Ye=Re.height;for(let dt=0;dt<qe;dt++)n.texImage2D(i.TEXTURE_2D,dt,ee,ke,Ye,0,le,de,null),ke>>=1,Ye>>=1}}else if(Pe.length>0){if(ye&&De){const ke=Ee(Pe[0]);n.texStorage2D(i.TEXTURE_2D,qe,ee,ke.width,ke.height)}for(let ke=0,Ye=Pe.length;ke<Ye;ke++)he=Pe[ke],ye?Me&&n.texSubImage2D(i.TEXTURE_2D,ke,0,0,le,de,he):n.texImage2D(i.TEXTURE_2D,ke,ee,le,de,he);ne.generateMipmaps=!1}else if(ye){if(De){const ke=Ee(Re);n.texStorage2D(i.TEXTURE_2D,qe,ee,ke.width,ke.height)}Me&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,le,de,Re)}else n.texImage2D(i.TEXTURE_2D,0,ee,le,de,Re);v(ne)&&g(Be),Je.__version=Oe.version,ne.onUpdate&&ne.onUpdate(ne)}ae.__version=ne.version}function O(ae,ne,Ae){if(ne.image.length!==6)return;const Be=ie(ae,ne),Fe=ne.source;n.bindTexture(i.TEXTURE_CUBE_MAP,ae.__webglTexture,i.TEXTURE0+Ae);const Oe=r.get(Fe);if(Fe.version!==Oe.__version||Be===!0){n.activeTexture(i.TEXTURE0+Ae);const Je=Ir.getPrimaries(Ir.workingColorSpace),Ve=ne.colorSpace===ka?null:Ir.getPrimaries(ne.colorSpace),Se=ne.colorSpace===ka||Je===Ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,ne.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,ne.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const We=ne.isCompressedTexture||ne.image[0].isCompressedTexture,Re=ne.image[0]&&ne.image[0].isDataTexture,le=[];for(let Ye=0;Ye<6;Ye++)!We&&!Re?le[Ye]=y(ne.image[Ye],!0,s.maxCubemapSize):le[Ye]=Re?ne.image[Ye].image:ne.image[Ye],le[Ye]=we(ne,le[Ye]);const de=le[0],ee=o.convert(ne.format,ne.colorSpace),he=o.convert(ne.type),Pe=_(ne.internalFormat,ee,he,ne.colorSpace),ye=ne.isVideoTexture!==!0,De=Oe.__version===void 0||Be===!0,Me=Fe.dataReady;let qe=b(ne,de);J(i.TEXTURE_CUBE_MAP,ne);let ke;if(We){ye&&De&&n.texStorage2D(i.TEXTURE_CUBE_MAP,qe,Pe,de.width,de.height);for(let Ye=0;Ye<6;Ye++){ke=le[Ye].mipmaps;for(let dt=0;dt<ke.length;dt++){const at=ke[dt];ne.format!==Di?ee!==null?ye?Me&&n.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt,0,0,at.width,at.height,ee,at.data):n.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt,Pe,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ye?Me&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt,0,0,at.width,at.height,ee,he,at.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt,Pe,at.width,at.height,0,ee,he,at.data)}}}else{if(ke=ne.mipmaps,ye&&De){ke.length>0&&qe++;const Ye=Ee(le[0]);n.texStorage2D(i.TEXTURE_CUBE_MAP,qe,Pe,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(Re){ye?Me&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,le[Ye].width,le[Ye].height,ee,he,le[Ye].data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Pe,le[Ye].width,le[Ye].height,0,ee,he,le[Ye].data);for(let dt=0;dt<ke.length;dt++){const ct=ke[dt].image[Ye].image;ye?Me&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt+1,0,0,ct.width,ct.height,ee,he,ct.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt+1,Pe,ct.width,ct.height,0,ee,he,ct.data)}}else{ye?Me&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,ee,he,le[Ye]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Pe,ee,he,le[Ye]);for(let dt=0;dt<ke.length;dt++){const at=ke[dt];ye?Me&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt+1,0,0,ee,he,at.image[Ye]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,dt+1,Pe,ee,he,at.image[Ye])}}}v(ne)&&g(i.TEXTURE_CUBE_MAP),Oe.__version=Fe.version,ne.onUpdate&&ne.onUpdate(ne)}ae.__version=ne.version}function H(ae,ne,Ae,Be,Fe,Oe){const Je=o.convert(Ae.format,Ae.colorSpace),Ve=o.convert(Ae.type),Se=_(Ae.internalFormat,Je,Ve,Ae.colorSpace);if(!r.get(ne).__hasExternalTextures){const Re=Math.max(1,ne.width>>Oe),le=Math.max(1,ne.height>>Oe);Fe===i.TEXTURE_3D||Fe===i.TEXTURE_2D_ARRAY?n.texImage3D(Fe,Oe,Se,Re,le,ne.depth,0,Je,Ve,null):n.texImage2D(Fe,Oe,Se,Re,le,0,Je,Ve,null)}n.bindFramebuffer(i.FRAMEBUFFER,ae),xe(ne)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Be,Fe,r.get(Ae).__webglTexture,0,ge(ne)):(Fe===i.TEXTURE_2D||Fe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Be,Fe,r.get(Ae).__webglTexture,Oe),n.bindFramebuffer(i.FRAMEBUFFER,null)}function q(ae,ne,Ae){if(i.bindRenderbuffer(i.RENDERBUFFER,ae),ne.depthBuffer){const Be=ne.depthTexture,Fe=Be&&Be.isDepthTexture?Be.type:null,Oe=x(ne.stencilBuffer,Fe),Je=ne.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ve=ge(ne);xe(ne)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ve,Oe,ne.width,ne.height):Ae?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ve,Oe,ne.width,ne.height):i.renderbufferStorage(i.RENDERBUFFER,Oe,ne.width,ne.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Je,i.RENDERBUFFER,ae)}else{const Be=ne.textures;for(let Fe=0;Fe<Be.length;Fe++){const Oe=Be[Fe],Je=o.convert(Oe.format,Oe.colorSpace),Ve=o.convert(Oe.type),Se=_(Oe.internalFormat,Je,Ve,Oe.colorSpace),We=ge(ne);Ae&&xe(ne)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,We,Se,ne.width,ne.height):xe(ne)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,We,Se,ne.width,ne.height):i.renderbufferStorage(i.RENDERBUFFER,Se,ne.width,ne.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Z(ae,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(i.FRAMEBUFFER,ae),!(ne.depthTexture&&ne.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),F(ne.depthTexture,0);const Be=r.get(ne.depthTexture).__webglTexture,Fe=ge(ne);if(ne.depthTexture.format===ic)xe(ne)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0);else if(ne.depthTexture.format===yc)xe(ne)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0);else throw new Error("Unknown depthTexture format")}function oe(ae){const ne=r.get(ae),Ae=ae.isWebGLCubeRenderTarget===!0;if(ne.__boundDepthTexture!==ae.depthTexture){const Be=ae.depthTexture;if(ne.__depthDisposeCallback&&ne.__depthDisposeCallback(),Be){const Fe=()=>{delete ne.__boundDepthTexture,delete ne.__depthDisposeCallback,Be.removeEventListener("dispose",Fe)};Be.addEventListener("dispose",Fe),ne.__depthDisposeCallback=Fe}ne.__boundDepthTexture=Be}if(ae.depthTexture&&!ne.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");Z(ne.__webglFramebuffer,ae)}else if(Ae){ne.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)if(n.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer[Be]),ne.__webglDepthbuffer[Be]===void 0)ne.__webglDepthbuffer[Be]=i.createRenderbuffer(),q(ne.__webglDepthbuffer[Be],ae,!1);else{const Fe=ae.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=ne.__webglDepthbuffer[Be];i.bindRenderbuffer(i.RENDERBUFFER,Oe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Fe,i.RENDERBUFFER,Oe)}}else if(n.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),ne.__webglDepthbuffer===void 0)ne.__webglDepthbuffer=i.createRenderbuffer(),q(ne.__webglDepthbuffer,ae,!1);else{const Be=ae.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Fe=ne.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Fe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Be,i.RENDERBUFFER,Fe)}n.bindFramebuffer(i.FRAMEBUFFER,null)}function pe(ae,ne,Ae){const Be=r.get(ae);ne!==void 0&&H(Be.__webglFramebuffer,ae,ae.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Ae!==void 0&&oe(ae)}function be(ae){const ne=ae.texture,Ae=r.get(ae),Be=r.get(ne);ae.addEventListener("dispose",T);const Fe=ae.textures,Oe=ae.isWebGLCubeRenderTarget===!0,Je=Fe.length>1;if(Je||(Be.__webglTexture===void 0&&(Be.__webglTexture=i.createTexture()),Be.__version=ne.version,a.memory.textures++),Oe){Ae.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(ne.mipmaps&&ne.mipmaps.length>0){Ae.__webglFramebuffer[Ve]=[];for(let Se=0;Se<ne.mipmaps.length;Se++)Ae.__webglFramebuffer[Ve][Se]=i.createFramebuffer()}else Ae.__webglFramebuffer[Ve]=i.createFramebuffer()}else{if(ne.mipmaps&&ne.mipmaps.length>0){Ae.__webglFramebuffer=[];for(let Ve=0;Ve<ne.mipmaps.length;Ve++)Ae.__webglFramebuffer[Ve]=i.createFramebuffer()}else Ae.__webglFramebuffer=i.createFramebuffer();if(Je)for(let Ve=0,Se=Fe.length;Ve<Se;Ve++){const We=r.get(Fe[Ve]);We.__webglTexture===void 0&&(We.__webglTexture=i.createTexture(),a.memory.textures++)}if(ae.samples>0&&xe(ae)===!1){Ae.__webglMultisampledFramebuffer=i.createFramebuffer(),Ae.__webglColorRenderbuffer=[],n.bindFramebuffer(i.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Fe.length;Ve++){const Se=Fe[Ve];Ae.__webglColorRenderbuffer[Ve]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ae.__webglColorRenderbuffer[Ve]);const We=o.convert(Se.format,Se.colorSpace),Re=o.convert(Se.type),le=_(Se.internalFormat,We,Re,Se.colorSpace,ae.isXRRenderTarget===!0),de=ge(ae);i.renderbufferStorageMultisample(i.RENDERBUFFER,de,le,ae.width,ae.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.RENDERBUFFER,Ae.__webglColorRenderbuffer[Ve])}i.bindRenderbuffer(i.RENDERBUFFER,null),ae.depthBuffer&&(Ae.__webglDepthRenderbuffer=i.createRenderbuffer(),q(Ae.__webglDepthRenderbuffer,ae,!0)),n.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Oe){n.bindTexture(i.TEXTURE_CUBE_MAP,Be.__webglTexture),J(i.TEXTURE_CUBE_MAP,ne);for(let Ve=0;Ve<6;Ve++)if(ne.mipmaps&&ne.mipmaps.length>0)for(let Se=0;Se<ne.mipmaps.length;Se++)H(Ae.__webglFramebuffer[Ve][Se],ae,ne,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,Se);else H(Ae.__webglFramebuffer[Ve],ae,ne,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);v(ne)&&g(i.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Je){for(let Ve=0,Se=Fe.length;Ve<Se;Ve++){const We=Fe[Ve],Re=r.get(We);n.bindTexture(i.TEXTURE_2D,Re.__webglTexture),J(i.TEXTURE_2D,We),H(Ae.__webglFramebuffer,ae,We,i.COLOR_ATTACHMENT0+Ve,i.TEXTURE_2D,0),v(We)&&g(i.TEXTURE_2D)}n.unbindTexture()}else{let Ve=i.TEXTURE_2D;if((ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(Ve=ae.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),n.bindTexture(Ve,Be.__webglTexture),J(Ve,ne),ne.mipmaps&&ne.mipmaps.length>0)for(let Se=0;Se<ne.mipmaps.length;Se++)H(Ae.__webglFramebuffer[Se],ae,ne,i.COLOR_ATTACHMENT0,Ve,Se);else H(Ae.__webglFramebuffer,ae,ne,i.COLOR_ATTACHMENT0,Ve,0);v(ne)&&g(Ve),n.unbindTexture()}ae.depthBuffer&&oe(ae)}function me(ae){const ne=ae.textures;for(let Ae=0,Be=ne.length;Ae<Be;Ae++){const Fe=ne[Ae];if(v(Fe)){const Oe=ae.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Je=r.get(Fe).__webglTexture;n.bindTexture(Oe,Je),g(Oe),n.unbindTexture()}}}const ce=[],te=[];function ue(ae){if(ae.samples>0){if(xe(ae)===!1){const ne=ae.textures,Ae=ae.width,Be=ae.height;let Fe=i.COLOR_BUFFER_BIT;const Oe=ae.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Je=r.get(ae),Ve=ne.length>1;if(Ve)for(let Se=0;Se<ne.length;Se++)n.bindFramebuffer(i.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.RENDERBUFFER,null),n.bindFramebuffer(i.FRAMEBUFFER,Je.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.TEXTURE_2D,null,0);n.bindFramebuffer(i.READ_FRAMEBUFFER,Je.__webglMultisampledFramebuffer),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Je.__webglFramebuffer);for(let Se=0;Se<ne.length;Se++){if(ae.resolveDepthBuffer&&(ae.depthBuffer&&(Fe|=i.DEPTH_BUFFER_BIT),ae.stencilBuffer&&ae.resolveStencilBuffer&&(Fe|=i.STENCIL_BUFFER_BIT)),Ve){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Je.__webglColorRenderbuffer[Se]);const We=r.get(ne[Se]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,We,0)}i.blitFramebuffer(0,0,Ae,Be,0,0,Ae,Be,Fe,i.NEAREST),l===!0&&(ce.length=0,te.length=0,ce.push(i.COLOR_ATTACHMENT0+Se),ae.depthBuffer&&ae.resolveDepthBuffer===!1&&(ce.push(Oe),te.push(Oe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,te)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ce))}if(n.bindFramebuffer(i.READ_FRAMEBUFFER,null),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ve)for(let Se=0;Se<ne.length;Se++){n.bindFramebuffer(i.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.RENDERBUFFER,Je.__webglColorRenderbuffer[Se]);const We=r.get(ne[Se]).__webglTexture;n.bindFramebuffer(i.FRAMEBUFFER,Je.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.TEXTURE_2D,We,0)}n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Je.__webglMultisampledFramebuffer)}else if(ae.depthBuffer&&ae.resolveDepthBuffer===!1&&l){const ne=ae.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[ne])}}}function ge(ae){return Math.min(s.maxSamples,ae.samples)}function xe(ae){const ne=r.get(ae);return ae.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&ne.__useRenderToTexture!==!1}function Le(ae){const ne=a.render.frame;d.get(ae)!==ne&&(d.set(ae,ne),ae.update())}function we(ae,ne){const Ae=ae.colorSpace,Be=ae.format,Fe=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||Ae!==fi&&Ae!==ka&&(Ir.getTransfer(Ae)===tn?(Be!==Di||Fe!==No)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ae)),ne}function Ee(ae){return typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement?(c.width=ae.naturalWidth||ae.width,c.height=ae.naturalHeight||ae.height):typeof VideoFrame<"u"&&ae instanceof VideoFrame?(c.width=ae.displayWidth,c.height=ae.displayHeight):(c.width=ae.width,c.height=ae.height),c}this.allocateTextureUnit=k,this.resetTextureUnits=C,this.setTexture2D=F,this.setTexture2DArray=G,this.setTexture3D=z,this.setTextureCube=Q,this.rebindTextures=pe,this.setupRenderTarget=be,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=ue,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=H,this.useMultisampledRTT=xe}function rL(i,t){function n(r,s=ka){let o;const a=Ir.getTransfer(s);if(r===No)return i.UNSIGNED_BYTE;if(r===y0)return i.UNSIGNED_SHORT_4_4_4_4;if(r===v0)return i.UNSIGNED_SHORT_5_5_5_1;if(r===mS)return i.UNSIGNED_INT_5_9_9_9_REV;if(r===hS)return i.BYTE;if(r===pS)return i.SHORT;if(r===rd)return i.UNSIGNED_SHORT;if(r===g0)return i.INT;if(r===qa)return i.UNSIGNED_INT;if(r===ys)return i.FLOAT;if(r===fd)return i.HALF_FLOAT;if(r===gS)return i.ALPHA;if(r===yS)return i.RGB;if(r===Di)return i.RGBA;if(r===vS)return i.LUMINANCE;if(r===_S)return i.LUMINANCE_ALPHA;if(r===ic)return i.DEPTH_COMPONENT;if(r===yc)return i.DEPTH_STENCIL;if(r===_0)return i.RED;if(r===Vp)return i.RED_INTEGER;if(r===xS)return i.RG;if(r===x0)return i.RG_INTEGER;if(r===b0)return i.RGBA_INTEGER;if(r===Dh||r===kh||r===Oh||r===Bh)if(a===tn)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===Dh)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===kh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Oh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Bh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===Dh)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===kh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Oh)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Bh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===uv||r===cv||r===fv||r===dv)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===uv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===cv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===fv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===dv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===hv||r===pv||r===mv)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(r===hv||r===pv)return a===tn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===mv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===gv||r===yv||r===vv||r===_v||r===xv||r===bv||r===wv||r===Sv||r===Av||r===Mv||r===Ev||r===Tv||r===Cv||r===Rv)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(r===gv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===yv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===vv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===_v)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===xv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===bv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===wv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Sv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Av)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Mv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Ev)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Tv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Cv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Rv)return a===tn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Fh||r===Pv||r===Iv)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(r===Fh)return a===tn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Pv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Iv)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===bS||r===Lv||r===jv||r===Dv)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(r===Fh)return o.COMPRESSED_RED_RGTC1_EXT;if(r===Lv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===jv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Dv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===gc?i.UNSIGNED_INT_24_8:i[r]!==void 0?i[r]:null}return{convert:n}}class nL extends gn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class oo extends br{constructor(){super(),this.isGroup=!0,this.type="Group"}}const U8={type:"move"};class W_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ce),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const r of t.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,r){let s=null,o=null,a=null;const u=this._targetRay,l=this._grip,c=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(c&&t.hand){a=!0;for(const y of t.hand.values()){const v=n.getJointPose(y,r),g=this._getHandJoint(c,y);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const d=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],f=d.position.distanceTo(p.position),h=.02,m=.005;c.inputState.pinching&&f>h+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&f<=h-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=n.getPose(t.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));u!==null&&(s=n.getPose(t.targetRaySpace,r),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(U8)))}return u!==null&&(u.visible=s!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const r=new oo;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[n.jointName]=r,t.add(r)}return t.joints[n.jointName]}}const N8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,G8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class H8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,r){if(this.texture===null){const s=new Qr,o=t.properties.get(s);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){const n=t.cameras[0].viewport,r=new Ho({vertexShader:N8,fragmentShader:G8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new dn(new rl(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class z8 extends ha{constructor(t,n){super();const r=this;let s=null,o=1,a=null,u="local-floor",l=1,c=null,d=null,p=null,f=null,h=null,m=null;const y=new H8,v=n.getContextAttributes();let g=null,_=null;const x=[],b=[],S=new mt;let T=null;const M=new gn;M.layers.enable(1),M.viewport=new _r;const R=new gn;R.layers.enable(2),R.viewport=new _r;const L=[M,R],P=new nL;P.layers.enable(1),P.layers.enable(2);let C=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let H=x[O];return H===void 0&&(H=new W_,x[O]=H),H.getTargetRaySpace()},this.getControllerGrip=function(O){let H=x[O];return H===void 0&&(H=new W_,x[O]=H),H.getGripSpace()},this.getHand=function(O){let H=x[O];return H===void 0&&(H=new W_,x[O]=H),H.getHandSpace()};function D(O){const H=b.indexOf(O.inputSource);if(H===-1)return;const q=x[H];q!==void 0&&(q.update(O.inputSource,O.frame,c||a),q.dispatchEvent({type:O.type,data:O.inputSource}))}function F(){s.removeEventListener("select",D),s.removeEventListener("selectstart",D),s.removeEventListener("selectend",D),s.removeEventListener("squeeze",D),s.removeEventListener("squeezestart",D),s.removeEventListener("squeezeend",D),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",G);for(let O=0;O<x.length;O++){const H=b[O];H!==null&&(b[O]=null,x[O].disconnect(H))}C=null,k=null,y.reset(),t.setRenderTarget(g),h=null,f=null,p=null,s=null,_=null,I.stop(),r.isPresenting=!1,t.setPixelRatio(T),t.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){o=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){u=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(O){c=O},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return p},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(O){if(s=O,s!==null){if(g=t.getRenderTarget(),s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",F),s.addEventListener("inputsourceschange",G),v.xrCompatible!==!0&&await n.makeXRCompatible(),T=t.getPixelRatio(),t.getSize(S),s.renderState.layers===void 0){const H={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(s,n,H),s.updateRenderState({baseLayer:h}),t.setPixelRatio(1),t.setSize(h.framebufferWidth,h.framebufferHeight,!1),_=new Go(h.framebufferWidth,h.framebufferHeight,{format:Di,type:No,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil})}else{let H=null,q=null,Z=null;v.depth&&(Z=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,H=v.stencil?yc:ic,q=v.stencil?gc:qa);const oe={colorFormat:n.RGBA8,depthFormat:Z,scaleFactor:o};p=new XRWebGLBinding(s,n),f=p.createProjectionLayer(oe),s.updateRenderState({layers:[f]}),t.setPixelRatio(1),t.setSize(f.textureWidth,f.textureHeight,!1),_=new Go(f.textureWidth,f.textureHeight,{format:Di,type:No,depthTexture:new LS(f.textureWidth,f.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await s.requestReferenceSpace(u),I.setContext(s),I.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function G(O){for(let H=0;H<O.removed.length;H++){const q=O.removed[H],Z=b.indexOf(q);Z>=0&&(b[Z]=null,x[Z].disconnect(q))}for(let H=0;H<O.added.length;H++){const q=O.added[H];let Z=b.indexOf(q);if(Z===-1){for(let pe=0;pe<x.length;pe++)if(pe>=b.length){b.push(q),Z=pe;break}else if(b[pe]===null){b[pe]=q,Z=pe;break}if(Z===-1)break}const oe=x[Z];oe&&oe.connect(q)}}const z=new Ce,Q=new Ce;function V(O,H,q){z.setFromMatrixPosition(H.matrixWorld),Q.setFromMatrixPosition(q.matrixWorld);const Z=z.distanceTo(Q),oe=H.projectionMatrix.elements,pe=q.projectionMatrix.elements,be=oe[14]/(oe[10]-1),me=oe[14]/(oe[10]+1),ce=(oe[9]+1)/oe[5],te=(oe[9]-1)/oe[5],ue=(oe[8]-1)/oe[0],ge=(pe[8]+1)/pe[0],xe=be*ue,Le=be*ge,we=Z/(-ue+ge),Ee=we*-ue;if(H.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(Ee),O.translateZ(we),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert(),oe[10]===-1)O.projectionMatrix.copy(H.projectionMatrix),O.projectionMatrixInverse.copy(H.projectionMatrixInverse);else{const ae=be+we,ne=me+we,Ae=xe-Ee,Be=Le+(Z-Ee),Fe=ce*me/ne*ae,Oe=te*me/ne*ae;O.projectionMatrix.makePerspective(Ae,Be,Fe,Oe,ae,ne),O.projectionMatrixInverse.copy(O.projectionMatrix).invert()}}function W(O,H){H===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(H.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(s===null)return;let H=O.near,q=O.far;y.texture!==null&&(y.depthNear>0&&(H=y.depthNear),y.depthFar>0&&(q=y.depthFar)),P.near=R.near=M.near=H,P.far=R.far=M.far=q,(C!==P.near||k!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),C=P.near,k=P.far);const Z=O.parent,oe=P.cameras;W(P,Z);for(let pe=0;pe<oe.length;pe++)W(oe[pe],Z);oe.length===2?V(P,M,R):P.projectionMatrix.copy(M.projectionMatrix),Y(O,P,Z)};function Y(O,H,q){q===null?O.matrix.copy(H.matrixWorld):(O.matrix.copy(q.matrixWorld),O.matrix.invert(),O.matrix.multiply(H.matrixWorld)),O.matrix.decompose(O.position,O.quaternion,O.scale),O.updateMatrixWorld(!0),O.projectionMatrix.copy(H.projectionMatrix),O.projectionMatrixInverse.copy(H.projectionMatrixInverse),O.isPerspectiveCamera&&(O.fov=nd*2*Math.atan(1/O.projectionMatrix.elements[5]),O.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(O){l=O,f!==null&&(f.fixedFoveation=O),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=O)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(P)};let J=null;function ie(O,H){if(d=H.getViewerPose(c||a),m=H,d!==null){const q=d.views;h!==null&&(t.setRenderTargetFramebuffer(_,h.framebuffer),t.setRenderTarget(_));let Z=!1;q.length!==P.cameras.length&&(P.cameras.length=0,Z=!0);for(let pe=0;pe<q.length;pe++){const be=q[pe];let me=null;if(h!==null)me=h.getViewport(be);else{const te=p.getViewSubImage(f,be);me=te.viewport,pe===0&&(t.setRenderTargetTextures(_,te.colorTexture,f.ignoreDepthValues?void 0:te.depthStencilTexture),t.setRenderTarget(_))}let ce=L[pe];ce===void 0&&(ce=new gn,ce.layers.enable(pe),ce.viewport=new _r,L[pe]=ce),ce.matrix.fromArray(be.transform.matrix),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.projectionMatrix.fromArray(be.projectionMatrix),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert(),ce.viewport.set(me.x,me.y,me.width,me.height),pe===0&&(P.matrix.copy(ce.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Z===!0&&P.cameras.push(ce)}const oe=s.enabledFeatures;if(oe&&oe.includes("depth-sensing")){const pe=p.getDepthInformation(q[0]);pe&&pe.isValid&&pe.texture&&y.init(t,pe,s.renderState)}}for(let q=0;q<x.length;q++){const Z=b[q],oe=x[q];Z!==null&&oe!==void 0&&oe.update(Z,H,c||a)}J&&J(O,H),H.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:H}),m=null}const I=new QI;I.setAnimationLoop(ie),this.setAnimationLoop=function(O){J=O},this.dispose=function(){}}}const Mu=new bs,V8=new Gt;function W8(i,t){function n(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function r(v,g){g.color.getRGB(v.fogColor.value,qI(i)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function s(v,g,_,x,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(v,g):g.isMeshToonMaterial?(o(v,g),p(v,g)):g.isMeshPhongMaterial?(o(v,g),d(v,g)):g.isMeshStandardMaterial?(o(v,g),f(v,g),g.isMeshPhysicalMaterial&&h(v,g,b)):g.isMeshMatcapMaterial?(o(v,g),m(v,g)):g.isMeshDepthMaterial?o(v,g):g.isMeshDistanceMaterial?(o(v,g),y(v,g)):g.isMeshNormalMaterial?o(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&u(v,g)):g.isPointsMaterial?l(v,g,_,x):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,n(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===$i&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,n(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===$i&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,n(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,n(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const _=t.get(g),x=_.envMap,b=_.envMapRotation;x&&(v.envMap.value=x,Mu.copy(b),Mu.x*=-1,Mu.y*=-1,Mu.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Mu.y*=-1,Mu.z*=-1),v.envMapRotation.value.setFromMatrix4(V8.makeRotationFromEuler(Mu)),v.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform))}function u(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,_,x){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=x*.5,g.map&&(v.map.value=g.map,n(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function d(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function p(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function f(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,_){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===$i&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,g){g.matcap&&(v.matcap.value=g.matcap)}function y(v,g){const _=t.get(g).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function X8(i,t,n,r){let s={},o={},a=[];const u=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,x){const b=x.program;r.uniformBlockBinding(_,b)}function c(_,x){let b=s[_.id];b===void 0&&(m(_),b=d(_),s[_.id]=b,_.addEventListener("dispose",v));const S=x.program;r.updateUBOMapping(_,S);const T=t.render.frame;o[_.id]!==T&&(f(_),o[_.id]=T)}function d(_){const x=p();_.__bindingPointIndex=x;const b=i.createBuffer(),S=_.__size,T=_.usage;return i.bindBuffer(i.UNIFORM_BUFFER,b),i.bufferData(i.UNIFORM_BUFFER,S,T),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,b),b}function p(){for(let _=0;_<u;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const x=s[_.id],b=_.uniforms,S=_.__cache;i.bindBuffer(i.UNIFORM_BUFFER,x);for(let T=0,M=b.length;T<M;T++){const R=Array.isArray(b[T])?b[T]:[b[T]];for(let L=0,P=R.length;L<P;L++){const C=R[L];if(h(C,T,L,S)===!0){const k=C.__offset,D=Array.isArray(C.value)?C.value:[C.value];let F=0;for(let G=0;G<D.length;G++){const z=D[G],Q=y(z);typeof z=="number"||typeof z=="boolean"?(C.__data[0]=z,i.bufferSubData(i.UNIFORM_BUFFER,k+F,C.__data)):z.isMatrix3?(C.__data[0]=z.elements[0],C.__data[1]=z.elements[1],C.__data[2]=z.elements[2],C.__data[3]=0,C.__data[4]=z.elements[3],C.__data[5]=z.elements[4],C.__data[6]=z.elements[5],C.__data[7]=0,C.__data[8]=z.elements[6],C.__data[9]=z.elements[7],C.__data[10]=z.elements[8],C.__data[11]=0):(z.toArray(C.__data,F),F+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,k,C.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function h(_,x,b,S){const T=_.value,M=x+"_"+b;if(S[M]===void 0)return typeof T=="number"||typeof T=="boolean"?S[M]=T:S[M]=T.clone(),!0;{const R=S[M];if(typeof T=="number"||typeof T=="boolean"){if(R!==T)return S[M]=T,!0}else if(R.equals(T)===!1)return R.copy(T),!0}return!1}function m(_){const x=_.uniforms;let b=0;const S=16;for(let M=0,R=x.length;M<R;M++){const L=Array.isArray(x[M])?x[M]:[x[M]];for(let P=0,C=L.length;P<C;P++){const k=L[P],D=Array.isArray(k.value)?k.value:[k.value];for(let F=0,G=D.length;F<G;F++){const z=D[F],Q=y(z),V=b%S,W=V%Q.boundary,Y=V+W;b+=W,Y!==0&&S-Y<Q.storage&&(b+=S-Y),k.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=b,b+=Q.storage}}}const T=b%S;return T>0&&(b+=S-T),_.__size=b,_.__cache={},this}function y(_){const x={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(x.boundary=4,x.storage=4):_.isVector2?(x.boundary=8,x.storage=8):_.isVector3||_.isColor?(x.boundary=16,x.storage=12):_.isVector4?(x.boundary=16,x.storage=16):_.isMatrix3?(x.boundary=48,x.storage=48):_.isMatrix4?(x.boundary=64,x.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),x}function v(_){const x=_.target;x.removeEventListener("dispose",v);const b=a.indexOf(x.__bindingPointIndex);a.splice(b,1),i.deleteBuffer(s[x.id]),delete s[x.id],delete o[x.id]}function g(){for(const _ in s)i.deleteBuffer(s[_]);a=[],s={},o={}}return{bind:l,update:c,dispose:g}}class iL{constructor(t={}){const{canvas:n=VI(),context:r=null,depth:s=!0,stencil:o=!1,alpha:a=!1,antialias:u=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1}=t;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=a;const h=new Uint32Array(4),m=new Int32Array(4);let y=null,v=null;const g=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=yi,this.toneMapping=la,this.toneMappingExposure=1;const x=this;let b=!1,S=0,T=0,M=null,R=-1,L=null;const P=new _r,C=new _r;let k=null;const D=new wt(0);let F=0,G=n.width,z=n.height,Q=1,V=null,W=null;const Y=new _r(0,0,G,z),J=new _r(0,0,G,z);let ie=!1;const I=new Jp;let O=!1,H=!1;const q=new Gt,Z=new Gt,oe=new Ce,pe=new _r,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let me=!1;function ce(){return M===null?Q:1}let te=r;function ue(ve,He){return n.getContext(ve,He)}try{const ve={alpha:!0,depth:s,stencil:o,antialias:u,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Gp}`),n.addEventListener("webglcontextlost",Ye,!1),n.addEventListener("webglcontextrestored",dt,!1),n.addEventListener("webglcontextcreationerror",at,!1),te===null){const He="webgl2";if(te=ue(He,ve),te===null)throw ue(He)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ve){throw console.error("THREE.WebGLRenderer: "+ve.message),ve}let ge,xe,Le,we,Ee,ae,ne,Ae,Be,Fe,Oe,Je,Ve,Se,We,Re,le,de,ee,he,Pe,ye,De,Me;function qe(){ge=new ZG(te),ge.init(),ye=new rL(te,ge),xe=new XG(te,ge,t,ye),Le=new L8(te),xe.reverseDepthBuffer&&Le.buffers.depth.setReversed(!0),we=new t6(te),Ee=new _8,ae=new F8(te,ge,Le,Ee,xe,ye,we),ne=new qG(x),Ae=new QG(x),Be=new lN(te),De=new VG(te,Be),Fe=new $G(te,Be,we,De),Oe=new n6(te,Fe,Be,we),ee=new r6(te,xe,ae),Re=new YG(Ee),Je=new v8(x,ne,Ae,ge,xe,De,Re),Ve=new W8(x,Ee),Se=new b8,We=new T8(ge),de=new zG(x,ne,Ae,Le,Oe,f,l),le=new P8(x,Oe,xe),Me=new X8(te,we,xe,Le),he=new WG(te,ge,we),Pe=new e6(te,ge,we),we.programs=Je.programs,x.capabilities=xe,x.extensions=ge,x.properties=Ee,x.renderLists=Se,x.shadowMap=le,x.state=Le,x.info=we}qe();const ke=new z8(x,te);this.xr=ke,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const ve=ge.get("WEBGL_lose_context");ve&&ve.loseContext()},this.forceContextRestore=function(){const ve=ge.get("WEBGL_lose_context");ve&&ve.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(ve){ve!==void 0&&(Q=ve,this.setSize(G,z,!1))},this.getSize=function(ve){return ve.set(G,z)},this.setSize=function(ve,He,ze=!0){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}G=ve,z=He,n.width=Math.floor(ve*Q),n.height=Math.floor(He*Q),ze===!0&&(n.style.width=ve+"px",n.style.height=He+"px"),this.setViewport(0,0,ve,He)},this.getDrawingBufferSize=function(ve){return ve.set(G*Q,z*Q).floor()},this.setDrawingBufferSize=function(ve,He,ze){G=ve,z=He,Q=ze,n.width=Math.floor(ve*ze),n.height=Math.floor(He*ze),this.setViewport(0,0,ve,He)},this.getCurrentViewport=function(ve){return ve.copy(P)},this.getViewport=function(ve){return ve.copy(Y)},this.setViewport=function(ve,He,ze,et){ve.isVector4?Y.set(ve.x,ve.y,ve.z,ve.w):Y.set(ve,He,ze,et),Le.viewport(P.copy(Y).multiplyScalar(Q).round())},this.getScissor=function(ve){return ve.copy(J)},this.setScissor=function(ve,He,ze,et){ve.isVector4?J.set(ve.x,ve.y,ve.z,ve.w):J.set(ve,He,ze,et),Le.scissor(C.copy(J).multiplyScalar(Q).round())},this.getScissorTest=function(){return ie},this.setScissorTest=function(ve){Le.setScissorTest(ie=ve)},this.setOpaqueSort=function(ve){V=ve},this.setTransparentSort=function(ve){W=ve},this.getClearColor=function(ve){return ve.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(ve=!0,He=!0,ze=!0){let et=0;if(ve){let je=!1;if(M!==null){const gt=M.texture.format;je=gt===b0||gt===x0||gt===Vp}if(je){const gt=M.texture.type,ot=gt===No||gt===qa||gt===rd||gt===gc||gt===y0||gt===v0,st=de.getClearColor(),ut=de.getClearAlpha(),Pt=st.r,Tt=st.g,At=st.b;ot?(h[0]=Pt,h[1]=Tt,h[2]=At,h[3]=ut,te.clearBufferuiv(te.COLOR,0,h)):(m[0]=Pt,m[1]=Tt,m[2]=At,m[3]=ut,te.clearBufferiv(te.COLOR,0,m))}else et|=te.COLOR_BUFFER_BIT}He&&(et|=te.DEPTH_BUFFER_BIT,te.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),ze&&(et|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(et)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ye,!1),n.removeEventListener("webglcontextrestored",dt,!1),n.removeEventListener("webglcontextcreationerror",at,!1),Se.dispose(),We.dispose(),Ee.dispose(),ne.dispose(),Ae.dispose(),Oe.dispose(),De.dispose(),Me.dispose(),Je.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",Wt),ke.removeEventListener("sessionend",tr),Jt.stop()};function Ye(ve){ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const ve=we.autoReset,He=le.enabled,ze=le.autoUpdate,et=le.needsUpdate,je=le.type;qe(),we.autoReset=ve,le.enabled=He,le.autoUpdate=ze,le.needsUpdate=et,le.type=je}function at(ve){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ve.statusMessage)}function ct(ve){const He=ve.target;He.removeEventListener("dispose",ct),xt(He)}function xt(ve){_t(ve),Ee.remove(ve)}function _t(ve){const He=Ee.get(ve).programs;He!==void 0&&(He.forEach(function(ze){Je.releaseProgram(ze)}),ve.isShaderMaterial&&Je.releaseShaderCache(ve))}this.renderBufferDirect=function(ve,He,ze,et,je,gt){He===null&&(He=be);const ot=je.isMesh&&je.matrixWorld.determinant()<0,st=Ss(ve,He,ze,et,je);Le.setMaterial(et,ot);let ut=ze.index,Pt=1;if(et.wireframe===!0){if(ut=Fe.getWireframeAttribute(ze),ut===void 0)return;Pt=2}const Tt=ze.drawRange,At=ze.attributes.position;let Kt=Tt.start*Pt,ir=(Tt.start+Tt.count)*Pt;gt!==null&&(Kt=Math.max(Kt,gt.start*Pt),ir=Math.min(ir,(gt.start+gt.count)*Pt)),ut!==null?(Kt=Math.max(Kt,0),ir=Math.min(ir,ut.count)):At!=null&&(Kt=Math.max(Kt,0),ir=Math.min(ir,At.count));const rr=ir-Kt;if(rr<0||rr===1/0)return;De.setup(je,et,st,ze,ut);let Qt,Et=he;if(ut!==null&&(Qt=Be.get(ut),Et=Pe,Et.setIndex(Qt)),je.isMesh)et.wireframe===!0?(Le.setLineWidth(et.wireframeLinewidth*ce()),Et.setMode(te.LINES)):Et.setMode(te.TRIANGLES);else if(je.isLine){let jt=et.linewidth;jt===void 0&&(jt=1),Le.setLineWidth(jt*ce()),je.isLineSegments?Et.setMode(te.LINES):je.isLineLoop?Et.setMode(te.LINE_LOOP):Et.setMode(te.LINE_STRIP)}else je.isPoints?Et.setMode(te.POINTS):je.isSprite&&Et.setMode(te.TRIANGLES);if(je.isBatchedMesh)if(je._multiDrawInstances!==null)Et.renderMultiDrawInstances(je._multiDrawStarts,je._multiDrawCounts,je._multiDrawCount,je._multiDrawInstances);else if(ge.get("WEBGL_multi_draw"))Et.renderMultiDraw(je._multiDrawStarts,je._multiDrawCounts,je._multiDrawCount);else{const jt=je._multiDrawStarts,nr=je._multiDrawCounts,Yt=je._multiDrawCount,qr=ut?Be.get(ut).bytesPerElement:1,xn=Ee.get(et).currentProgram.getUniforms();for(let Rr=0;Rr<Yt;Rr++)xn.setValue(te,"_gl_DrawID",Rr),Et.render(jt[Rr]/qr,nr[Rr])}else if(je.isInstancedMesh)Et.renderInstances(Kt,rr,je.count);else if(ze.isInstancedBufferGeometry){const jt=ze._maxInstanceCount!==void 0?ze._maxInstanceCount:1/0,nr=Math.min(ze.instanceCount,jt);Et.renderInstances(Kt,rr,nr)}else Et.render(Kt,rr)};function vt(ve,He,ze){ve.transparent===!0&&ve.side===Is&&ve.forceSinglePass===!1?(ve.side=$i,ve.needsUpdate=!0,Xr(ve,He,ze),ve.side=Fo,ve.needsUpdate=!0,Xr(ve,He,ze),ve.side=Is):Xr(ve,He,ze)}this.compile=function(ve,He,ze=null){ze===null&&(ze=ve),v=We.get(ze),v.init(He),_.push(v),ze.traverseVisible(function(je){je.isLight&&je.layers.test(He.layers)&&(v.pushLight(je),je.castShadow&&v.pushShadow(je))}),ve!==ze&&ve.traverseVisible(function(je){je.isLight&&je.layers.test(He.layers)&&(v.pushLight(je),je.castShadow&&v.pushShadow(je))}),v.setupLights();const et=new Set;return ve.traverse(function(je){if(!(je.isMesh||je.isPoints||je.isLine||je.isSprite))return;const gt=je.material;if(gt)if(Array.isArray(gt))for(let ot=0;ot<gt.length;ot++){const st=gt[ot];vt(st,ze,je),et.add(st)}else vt(gt,ze,je),et.add(gt)}),_.pop(),v=null,et},this.compileAsync=function(ve,He,ze=null){const et=this.compile(ve,He,ze);return new Promise(je=>{function gt(){if(et.forEach(function(ot){Ee.get(ot).currentProgram.isReady()&&et.delete(ot)}),et.size===0){je(ve);return}setTimeout(gt,10)}ge.get("KHR_parallel_shader_compile")!==null?gt():setTimeout(gt,10)})};let Bt=null;function qt(ve){Bt&&Bt(ve)}function Wt(){Jt.stop()}function tr(){Jt.start()}const Jt=new QI;Jt.setAnimationLoop(qt),typeof self<"u"&&Jt.setContext(self),this.setAnimationLoop=function(ve){Bt=ve,ke.setAnimationLoop(ve),ve===null?Jt.stop():Jt.start()},ke.addEventListener("sessionstart",Wt),ke.addEventListener("sessionend",tr),this.render=function(ve,He){if(He!==void 0&&He.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;if(ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),He.parent===null&&He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(He),He=ke.getCamera()),ve.isScene===!0&&ve.onBeforeRender(x,ve,He,M),v=We.get(ve,_.length),v.init(He),_.push(v),Z.multiplyMatrices(He.projectionMatrix,He.matrixWorldInverse),I.setFromProjectionMatrix(Z),H=this.localClippingEnabled,O=Re.init(this.clippingPlanes,H),y=Se.get(ve,g.length),y.init(),g.push(y),ke.enabled===!0&&ke.isPresenting===!0){const gt=x.xr.getDepthSensingMesh();gt!==null&&Lr(gt,He,-1/0,x.sortObjects)}Lr(ve,He,0,x.sortObjects),y.finish(),x.sortObjects===!0&&y.sort(V,W),me=ke.enabled===!1||ke.isPresenting===!1||ke.hasDepthSensing()===!1,me&&de.addToRenderList(y,ve),this.info.render.frame++,O===!0&&Re.beginShadows();const ze=v.state.shadowsArray;le.render(ze,ve,He),O===!0&&Re.endShadows(),this.info.autoReset===!0&&this.info.reset();const et=y.opaque,je=y.transmissive;if(v.setupLights(),He.isArrayCamera){const gt=He.cameras;if(je.length>0)for(let ot=0,st=gt.length;ot<st;ot++){const ut=gt[ot];dr(et,je,ve,ut)}me&&de.render(ve);for(let ot=0,st=gt.length;ot<st;ot++){const ut=gt[ot];Cr(y,ve,ut,ut.viewport)}}else je.length>0&&dr(et,je,ve,He),me&&de.render(ve),Cr(y,ve,He);M!==null&&(ae.updateMultisampleRenderTarget(M),ae.updateRenderTargetMipmap(M)),ve.isScene===!0&&ve.onAfterRender(x,ve,He),De.resetDefaultState(),R=-1,L=null,_.pop(),_.length>0?(v=_[_.length-1],O===!0&&Re.setGlobalState(x.clippingPlanes,v.state.camera)):v=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function Lr(ve,He,ze,et){if(ve.visible===!1)return;if(ve.layers.test(He.layers)){if(ve.isGroup)ze=ve.renderOrder;else if(ve.isLOD)ve.autoUpdate===!0&&ve.update(He);else if(ve.isLight)v.pushLight(ve),ve.castShadow&&v.pushShadow(ve);else if(ve.isSprite){if(!ve.frustumCulled||I.intersectsSprite(ve)){et&&pe.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Z);const ot=Oe.update(ve),st=ve.material;st.visible&&y.push(ve,ot,st,ze,pe.z,null)}}else if((ve.isMesh||ve.isLine||ve.isPoints)&&(!ve.frustumCulled||I.intersectsObject(ve))){const ot=Oe.update(ve),st=ve.material;if(et&&(ve.boundingSphere!==void 0?(ve.boundingSphere===null&&ve.computeBoundingSphere(),pe.copy(ve.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),pe.copy(ot.boundingSphere.center)),pe.applyMatrix4(ve.matrixWorld).applyMatrix4(Z)),Array.isArray(st)){const ut=ot.groups;for(let Pt=0,Tt=ut.length;Pt<Tt;Pt++){const At=ut[Pt],Kt=st[At.materialIndex];Kt&&Kt.visible&&y.push(ve,ot,Kt,ze,pe.z,At)}}else st.visible&&y.push(ve,ot,st,ze,pe.z,null)}}const gt=ve.children;for(let ot=0,st=gt.length;ot<st;ot++)Lr(gt[ot],He,ze,et)}function Cr(ve,He,ze,et){const je=ve.opaque,gt=ve.transmissive,ot=ve.transparent;v.setupLightsView(ze),O===!0&&Re.setGlobalState(x.clippingPlanes,ze),et&&Le.viewport(P.copy(et)),je.length>0&&Mr(je,He,ze),gt.length>0&&Mr(gt,He,ze),ot.length>0&&Mr(ot,He,ze),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function dr(ve,He,ze,et){if((ze.isScene===!0?ze.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[et.id]===void 0&&(v.state.transmissionRenderTarget[et.id]=new Go(1,1,{generateMipmaps:!0,type:ge.has("EXT_color_buffer_half_float")||ge.has("EXT_color_buffer_float")?fd:No,minFilter:gs,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ir.workingColorSpace}));const gt=v.state.transmissionRenderTarget[et.id],ot=et.viewport||P;gt.setSize(ot.z,ot.w);const st=x.getRenderTarget();x.setRenderTarget(gt),x.getClearColor(D),F=x.getClearAlpha(),F<1&&x.setClearColor(16777215,.5),x.clear(),me&&de.render(ze);const ut=x.toneMapping;x.toneMapping=la;const Pt=et.viewport;if(et.viewport!==void 0&&(et.viewport=void 0),v.setupLightsView(et),O===!0&&Re.setGlobalState(x.clippingPlanes,et),Mr(ve,ze,et),ae.updateMultisampleRenderTarget(gt),ae.updateRenderTargetMipmap(gt),ge.has("WEBGL_multisampled_render_to_texture")===!1){let Tt=!1;for(let At=0,Kt=He.length;At<Kt;At++){const ir=He[At],rr=ir.object,Qt=ir.geometry,Et=ir.material,jt=ir.group;if(Et.side===Is&&rr.layers.test(et.layers)){const nr=Et.side;Et.side=$i,Et.needsUpdate=!0,Dn(rr,ze,et,Qt,Et,jt),Et.side=nr,Et.needsUpdate=!0,Tt=!0}}Tt===!0&&(ae.updateMultisampleRenderTarget(gt),ae.updateRenderTargetMipmap(gt))}x.setRenderTarget(st),x.setClearColor(D,F),Pt!==void 0&&(et.viewport=Pt),x.toneMapping=ut}function Mr(ve,He,ze){const et=He.isScene===!0?He.overrideMaterial:null;for(let je=0,gt=ve.length;je<gt;je++){const ot=ve[je],st=ot.object,ut=ot.geometry,Pt=et===null?ot.material:et,Tt=ot.group;st.layers.test(ze.layers)&&Dn(st,He,ze,ut,Pt,Tt)}}function Dn(ve,He,ze,et,je,gt){ve.onBeforeRender(x,He,ze,et,je,gt),ve.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,ve.matrixWorld),ve.normalMatrix.getNormalMatrix(ve.modelViewMatrix),je.onBeforeRender(x,He,ze,et,ve,gt),je.transparent===!0&&je.side===Is&&je.forceSinglePass===!1?(je.side=$i,je.needsUpdate=!0,x.renderBufferDirect(ze,He,et,je,ve,gt),je.side=Fo,je.needsUpdate=!0,x.renderBufferDirect(ze,He,et,je,ve,gt),je.side=Is):x.renderBufferDirect(ze,He,et,je,ve,gt),ve.onAfterRender(x,He,ze,et,je,gt)}function Xr(ve,He,ze){He.isScene!==!0&&(He=be);const et=Ee.get(ve),je=v.state.lights,gt=v.state.shadowsArray,ot=je.state.version,st=Je.getParameters(ve,je.state,gt,He,ze),ut=Je.getProgramCacheKey(st);let Pt=et.programs;et.environment=ve.isMeshStandardMaterial?He.environment:null,et.fog=He.fog,et.envMap=(ve.isMeshStandardMaterial?Ae:ne).get(ve.envMap||et.environment),et.envMapRotation=et.environment!==null&&ve.envMap===null?He.environmentRotation:ve.envMapRotation,Pt===void 0&&(ve.addEventListener("dispose",ct),Pt=new Map,et.programs=Pt);let Tt=Pt.get(ut);if(Tt!==void 0){if(et.currentProgram===Tt&&et.lightsStateVersion===ot)return Ns(ve,st),Tt}else st.uniforms=Je.getUniforms(ve),ve.onBeforeCompile(st,x),Tt=Je.acquireProgram(st,ut),Pt.set(ut,Tt),et.uniforms=st.uniforms;const At=et.uniforms;return(!ve.isShaderMaterial&&!ve.isRawShaderMaterial||ve.clipping===!0)&&(At.clippingPlanes=Re.uniform),Ns(ve,st),et.needsLights=Ge(ve),et.lightsStateVersion=ot,et.needsLights&&(At.ambientLightColor.value=je.state.ambient,At.lightProbe.value=je.state.probe,At.directionalLights.value=je.state.directional,At.directionalLightShadows.value=je.state.directionalShadow,At.spotLights.value=je.state.spot,At.spotLightShadows.value=je.state.spotShadow,At.rectAreaLights.value=je.state.rectArea,At.ltc_1.value=je.state.rectAreaLTC1,At.ltc_2.value=je.state.rectAreaLTC2,At.pointLights.value=je.state.point,At.pointLightShadows.value=je.state.pointShadow,At.hemisphereLights.value=je.state.hemi,At.directionalShadowMap.value=je.state.directionalShadowMap,At.directionalShadowMatrix.value=je.state.directionalShadowMatrix,At.spotShadowMap.value=je.state.spotShadowMap,At.spotLightMatrix.value=je.state.spotLightMatrix,At.spotLightMap.value=je.state.spotLightMap,At.pointShadowMap.value=je.state.pointShadowMap,At.pointShadowMatrix.value=je.state.pointShadowMatrix),et.currentProgram=Tt,et.uniformsList=null,Tt}function ei(ve){if(ve.uniformsList===null){const He=ve.currentProgram.getUniforms();ve.uniformsList=by.seqWithValue(He.seq,ve.uniforms)}return ve.uniformsList}function Ns(ve,He){const ze=Ee.get(ve);ze.outputColorSpace=He.outputColorSpace,ze.batching=He.batching,ze.batchingColor=He.batchingColor,ze.instancing=He.instancing,ze.instancingColor=He.instancingColor,ze.instancingMorph=He.instancingMorph,ze.skinning=He.skinning,ze.morphTargets=He.morphTargets,ze.morphNormals=He.morphNormals,ze.morphColors=He.morphColors,ze.morphTargetsCount=He.morphTargetsCount,ze.numClippingPlanes=He.numClippingPlanes,ze.numIntersection=He.numClipIntersection,ze.vertexAlphas=He.vertexAlphas,ze.vertexTangents=He.vertexTangents,ze.toneMapping=He.toneMapping}function Ss(ve,He,ze,et,je){He.isScene!==!0&&(He=be),ae.resetTextureUnits();const gt=He.fog,ot=et.isMeshStandardMaterial?He.environment:null,st=M===null?x.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:fi,ut=(et.isMeshStandardMaterial?Ae:ne).get(et.envMap||ot),Pt=et.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,Tt=!!ze.attributes.tangent&&(!!et.normalMap||et.anisotropy>0),At=!!ze.morphAttributes.position,Kt=!!ze.morphAttributes.normal,ir=!!ze.morphAttributes.color;let rr=la;et.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(rr=x.toneMapping);const Qt=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,Et=Qt!==void 0?Qt.length:0,jt=Ee.get(et),nr=v.state.lights;if(O===!0&&(H===!0||ve!==L)){const Hr=ve===L&&et.id===R;Re.setState(et,ve,Hr)}let Yt=!1;et.version===jt.__version?(jt.needsLights&&jt.lightsStateVersion!==nr.state.version||jt.outputColorSpace!==st||je.isBatchedMesh&&jt.batching===!1||!je.isBatchedMesh&&jt.batching===!0||je.isBatchedMesh&&jt.batchingColor===!0&&je.colorTexture===null||je.isBatchedMesh&&jt.batchingColor===!1&&je.colorTexture!==null||je.isInstancedMesh&&jt.instancing===!1||!je.isInstancedMesh&&jt.instancing===!0||je.isSkinnedMesh&&jt.skinning===!1||!je.isSkinnedMesh&&jt.skinning===!0||je.isInstancedMesh&&jt.instancingColor===!0&&je.instanceColor===null||je.isInstancedMesh&&jt.instancingColor===!1&&je.instanceColor!==null||je.isInstancedMesh&&jt.instancingMorph===!0&&je.morphTexture===null||je.isInstancedMesh&&jt.instancingMorph===!1&&je.morphTexture!==null||jt.envMap!==ut||et.fog===!0&&jt.fog!==gt||jt.numClippingPlanes!==void 0&&(jt.numClippingPlanes!==Re.numPlanes||jt.numIntersection!==Re.numIntersection)||jt.vertexAlphas!==Pt||jt.vertexTangents!==Tt||jt.morphTargets!==At||jt.morphNormals!==Kt||jt.morphColors!==ir||jt.toneMapping!==rr||jt.morphTargetsCount!==Et)&&(Yt=!0):(Yt=!0,jt.__version=et.version);let qr=jt.currentProgram;Yt===!0&&(qr=Xr(et,He,je));let xn=!1,Rr=!1,ti=!1;const Or=qr.getUniforms(),ri=jt.uniforms;if(Le.useProgram(qr.program)&&(xn=!0,Rr=!0,ti=!0),et.id!==R&&(R=et.id,Rr=!0),xn||L!==ve){xe.reverseDepthBuffer?(q.copy(ve.projectionMatrix),L4(q),j4(q),Or.setValue(te,"projectionMatrix",q)):Or.setValue(te,"projectionMatrix",ve.projectionMatrix),Or.setValue(te,"viewMatrix",ve.matrixWorldInverse);const Hr=Or.map.cameraPosition;Hr!==void 0&&Hr.setValue(te,oe.setFromMatrixPosition(ve.matrixWorld)),xe.logarithmicDepthBuffer&&Or.setValue(te,"logDepthBufFC",2/(Math.log(ve.far+1)/Math.LN2)),(et.isMeshPhongMaterial||et.isMeshToonMaterial||et.isMeshLambertMaterial||et.isMeshBasicMaterial||et.isMeshStandardMaterial||et.isShaderMaterial)&&Or.setValue(te,"isOrthographic",ve.isOrthographicCamera===!0),L!==ve&&(L=ve,Rr=!0,ti=!0)}if(je.isSkinnedMesh){Or.setOptional(te,je,"bindMatrix"),Or.setOptional(te,je,"bindMatrixInverse");const Hr=je.skeleton;Hr&&(Hr.boneTexture===null&&Hr.computeBoneTexture(),Or.setValue(te,"boneTexture",Hr.boneTexture,ae))}je.isBatchedMesh&&(Or.setOptional(te,je,"batchingTexture"),Or.setValue(te,"batchingTexture",je._matricesTexture,ae),Or.setOptional(te,je,"batchingIdTexture"),Or.setValue(te,"batchingIdTexture",je._indirectTexture,ae),Or.setOptional(te,je,"batchingColorTexture"),je._colorsTexture!==null&&Or.setValue(te,"batchingColorTexture",je._colorsTexture,ae));const Fi=ze.morphAttributes;if((Fi.position!==void 0||Fi.normal!==void 0||Fi.color!==void 0)&&ee.update(je,ze,qr),(Rr||jt.receiveShadow!==je.receiveShadow)&&(jt.receiveShadow=je.receiveShadow,Or.setValue(te,"receiveShadow",je.receiveShadow)),et.isMeshGouraudMaterial&&et.envMap!==null&&(ri.envMap.value=ut,ri.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),et.isMeshStandardMaterial&&et.envMap===null&&He.environment!==null&&(ri.envMapIntensity.value=He.environmentIntensity),Rr&&(Or.setValue(te,"toneMappingExposure",x.toneMappingExposure),jt.needsLights&&po(ri,ti),gt&&et.fog===!0&&Ve.refreshFogUniforms(ri,gt),Ve.refreshMaterialUniforms(ri,et,Q,z,v.state.transmissionRenderTarget[ve.id]),by.upload(te,ei(jt),ri,ae)),et.isShaderMaterial&&et.uniformsNeedUpdate===!0&&(by.upload(te,ei(jt),ri,ae),et.uniformsNeedUpdate=!1),et.isSpriteMaterial&&Or.setValue(te,"center",je.center),Or.setValue(te,"modelViewMatrix",je.modelViewMatrix),Or.setValue(te,"normalMatrix",je.normalMatrix),Or.setValue(te,"modelMatrix",je.matrixWorld),et.isShaderMaterial||et.isRawShaderMaterial){const Hr=et.uniformsGroups;for(let zn=0,Gs=Hr.length;zn<Gs;zn++){const As=Hr[zn];Me.update(As,qr),Me.bind(As,qr)}}return qr}function po(ve,He){ve.ambientLightColor.needsUpdate=He,ve.lightProbe.needsUpdate=He,ve.directionalLights.needsUpdate=He,ve.directionalLightShadows.needsUpdate=He,ve.pointLights.needsUpdate=He,ve.pointLightShadows.needsUpdate=He,ve.spotLights.needsUpdate=He,ve.spotLightShadows.needsUpdate=He,ve.rectAreaLights.needsUpdate=He,ve.hemisphereLights.needsUpdate=He}function Ge(ve){return ve.isMeshLambertMaterial||ve.isMeshToonMaterial||ve.isMeshPhongMaterial||ve.isMeshStandardMaterial||ve.isShadowMaterial||ve.isShaderMaterial&&ve.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ve,He,ze){Ee.get(ve.texture).__webglTexture=He,Ee.get(ve.depthTexture).__webglTexture=ze;const et=Ee.get(ve);et.__hasExternalTextures=!0,et.__autoAllocateDepthBuffer=ze===void 0,et.__autoAllocateDepthBuffer||ge.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),et.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ve,He){const ze=Ee.get(ve);ze.__webglFramebuffer=He,ze.__useDefaultFramebuffer=He===void 0},this.setRenderTarget=function(ve,He=0,ze=0){M=ve,S=He,T=ze;let et=!0,je=null,gt=!1,ot=!1;if(ve){const ut=Ee.get(ve);if(ut.__useDefaultFramebuffer!==void 0)Le.bindFramebuffer(te.FRAMEBUFFER,null),et=!1;else if(ut.__webglFramebuffer===void 0)ae.setupRenderTarget(ve);else if(ut.__hasExternalTextures)ae.rebindTextures(ve,Ee.get(ve.texture).__webglTexture,Ee.get(ve.depthTexture).__webglTexture);else if(ve.depthBuffer){const At=ve.depthTexture;if(ut.__boundDepthTexture!==At){if(At!==null&&Ee.has(At)&&(ve.width!==At.image.width||ve.height!==At.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ae.setupDepthRenderbuffer(ve)}}const Pt=ve.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(ot=!0);const Tt=Ee.get(ve).__webglFramebuffer;ve.isWebGLCubeRenderTarget?(Array.isArray(Tt[He])?je=Tt[He][ze]:je=Tt[He],gt=!0):ve.samples>0&&ae.useMultisampledRTT(ve)===!1?je=Ee.get(ve).__webglMultisampledFramebuffer:Array.isArray(Tt)?je=Tt[ze]:je=Tt,P.copy(ve.viewport),C.copy(ve.scissor),k=ve.scissorTest}else P.copy(Y).multiplyScalar(Q).floor(),C.copy(J).multiplyScalar(Q).floor(),k=ie;if(Le.bindFramebuffer(te.FRAMEBUFFER,je)&&et&&Le.drawBuffers(ve,je),Le.viewport(P),Le.scissor(C),Le.setScissorTest(k),gt){const ut=Ee.get(ve.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+He,ut.__webglTexture,ze)}else if(ot){const ut=Ee.get(ve.texture),Pt=He||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,ut.__webglTexture,ze||0,Pt)}R=-1},this.readRenderTargetPixels=function(ve,He,ze,et,je,gt,ot){if(!(ve&&ve.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let st=Ee.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&ot!==void 0&&(st=st[ot]),st){Le.bindFramebuffer(te.FRAMEBUFFER,st);try{const ut=ve.texture,Pt=ut.format,Tt=ut.type;if(!xe.textureFormatReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!xe.textureTypeReadable(Tt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}He>=0&&He<=ve.width-et&&ze>=0&&ze<=ve.height-je&&te.readPixels(He,ze,et,je,ye.convert(Pt),ye.convert(Tt),gt)}finally{const ut=M!==null?Ee.get(M).__webglFramebuffer:null;Le.bindFramebuffer(te.FRAMEBUFFER,ut)}}},this.readRenderTargetPixelsAsync=async function(ve,He,ze,et,je,gt,ot){if(!(ve&&ve.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let st=Ee.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&ot!==void 0&&(st=st[ot]),st){const ut=ve.texture,Pt=ut.format,Tt=ut.type;if(!xe.textureFormatReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xe.textureTypeReadable(Tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(He>=0&&He<=ve.width-et&&ze>=0&&ze<=ve.height-je){Le.bindFramebuffer(te.FRAMEBUFFER,st);const At=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,At),te.bufferData(te.PIXEL_PACK_BUFFER,gt.byteLength,te.STREAM_READ),te.readPixels(He,ze,et,je,ye.convert(Pt),ye.convert(Tt),0);const Kt=M!==null?Ee.get(M).__webglFramebuffer:null;Le.bindFramebuffer(te.FRAMEBUFFER,Kt);const ir=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await I4(te,ir,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,At),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,gt),te.deleteBuffer(At),te.deleteSync(ir),gt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ve,He=null,ze=0){ve.isTexture!==!0&&(xy("WebGLRenderer: copyFramebufferToTexture function signature has changed."),He=arguments[0]||null,ve=arguments[1]);const et=Math.pow(2,-ze),je=Math.floor(ve.image.width*et),gt=Math.floor(ve.image.height*et),ot=He!==null?He.x:0,st=He!==null?He.y:0;ae.setTexture2D(ve,0),te.copyTexSubImage2D(te.TEXTURE_2D,ze,0,0,ot,st,je,gt),Le.unbindTexture()},this.copyTextureToTexture=function(ve,He,ze=null,et=null,je=0){ve.isTexture!==!0&&(xy("WebGLRenderer: copyTextureToTexture function signature has changed."),et=arguments[0]||null,ve=arguments[1],He=arguments[2],je=arguments[3]||0,ze=null);let gt,ot,st,ut,Pt,Tt;ze!==null?(gt=ze.max.x-ze.min.x,ot=ze.max.y-ze.min.y,st=ze.min.x,ut=ze.min.y):(gt=ve.image.width,ot=ve.image.height,st=0,ut=0),et!==null?(Pt=et.x,Tt=et.y):(Pt=0,Tt=0);const At=ye.convert(He.format),Kt=ye.convert(He.type);ae.setTexture2D(He,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,He.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,He.unpackAlignment);const ir=te.getParameter(te.UNPACK_ROW_LENGTH),rr=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Qt=te.getParameter(te.UNPACK_SKIP_PIXELS),Et=te.getParameter(te.UNPACK_SKIP_ROWS),jt=te.getParameter(te.UNPACK_SKIP_IMAGES),nr=ve.isCompressedTexture?ve.mipmaps[je]:ve.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,nr.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,nr.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,st),te.pixelStorei(te.UNPACK_SKIP_ROWS,ut),ve.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,je,Pt,Tt,gt,ot,At,Kt,nr.data):ve.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,je,Pt,Tt,nr.width,nr.height,At,nr.data):te.texSubImage2D(te.TEXTURE_2D,je,Pt,Tt,gt,ot,At,Kt,nr),te.pixelStorei(te.UNPACK_ROW_LENGTH,ir),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,rr),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Qt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Et),te.pixelStorei(te.UNPACK_SKIP_IMAGES,jt),je===0&&He.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(ve,He,ze=null,et=null,je=0){ve.isTexture!==!0&&(xy("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ze=arguments[0]||null,et=arguments[1]||null,ve=arguments[2],He=arguments[3],je=arguments[4]||0);let gt,ot,st,ut,Pt,Tt,At,Kt,ir;const rr=ve.isCompressedTexture?ve.mipmaps[je]:ve.image;ze!==null?(gt=ze.max.x-ze.min.x,ot=ze.max.y-ze.min.y,st=ze.max.z-ze.min.z,ut=ze.min.x,Pt=ze.min.y,Tt=ze.min.z):(gt=rr.width,ot=rr.height,st=rr.depth,ut=0,Pt=0,Tt=0),et!==null?(At=et.x,Kt=et.y,ir=et.z):(At=0,Kt=0,ir=0);const Qt=ye.convert(He.format),Et=ye.convert(He.type);let jt;if(He.isData3DTexture)ae.setTexture3D(He,0),jt=te.TEXTURE_3D;else if(He.isDataArrayTexture||He.isCompressedArrayTexture)ae.setTexture2DArray(He,0),jt=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,He.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,He.unpackAlignment);const nr=te.getParameter(te.UNPACK_ROW_LENGTH),Yt=te.getParameter(te.UNPACK_IMAGE_HEIGHT),qr=te.getParameter(te.UNPACK_SKIP_PIXELS),xn=te.getParameter(te.UNPACK_SKIP_ROWS),Rr=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,rr.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,rr.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ut),te.pixelStorei(te.UNPACK_SKIP_ROWS,Pt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Tt),ve.isDataTexture||ve.isData3DTexture?te.texSubImage3D(jt,je,At,Kt,ir,gt,ot,st,Qt,Et,rr.data):He.isCompressedArrayTexture?te.compressedTexSubImage3D(jt,je,At,Kt,ir,gt,ot,st,Qt,rr.data):te.texSubImage3D(jt,je,At,Kt,ir,gt,ot,st,Qt,Et,rr),te.pixelStorei(te.UNPACK_ROW_LENGTH,nr),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Yt),te.pixelStorei(te.UNPACK_SKIP_PIXELS,qr),te.pixelStorei(te.UNPACK_SKIP_ROWS,xn),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Rr),je===0&&He.generateMipmaps&&te.generateMipmap(jt),Le.unbindTexture()},this.initRenderTarget=function(ve){Ee.get(ve).__webglFramebuffer===void 0&&ae.setupRenderTarget(ve)},this.initTexture=function(ve){ve.isCubeTexture?ae.setTextureCube(ve,0):ve.isData3DTexture?ae.setTexture3D(ve,0):ve.isDataArrayTexture||ve.isCompressedArrayTexture?ae.setTexture2DArray(ve,0):ae.setTexture2D(ve,0),Le.unbindTexture()},this.resetState=function(){S=0,T=0,M=null,Le.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return sa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===S0?"display-p3":"srgb",n.unpackColorSpace=Ir.workingColorSpace===Xp?"display-p3":"srgb"}}class R0{constructor(t,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new wt(t),this.density=n}clone(){return new R0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class P0{constructor(t,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new wt(t),this.near=n,this.far=r}clone(){return new P0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class jS extends br{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new bs,this.environmentIntensity=1,this.environmentRotation=new bs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class hd{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=xp,this.updateRanges=[],this.version=0,this.uuid=Ds()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,r){t*=this.stride,r*=n.stride;for(let s=0,o=this.stride;s<o;s++)this.array[t+s]=n.array[r+s];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ds()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ds()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yi=new Ce;class Ja{constructor(t,n,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,r=this.data.count;n<r;n++)Yi.fromBufferAttribute(this,n),Yi.applyMatrix4(t),this.setXYZ(n,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)Yi.fromBufferAttribute(this,n),Yi.applyNormalMatrix(t),this.setXYZ(n,Yi.x,Yi.y,Yi.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)Yi.fromBufferAttribute(this,n),Yi.transformDirection(t),this.setXYZ(n,Yi.x,Yi.y,Yi.z);return this}getComponent(t,n){let r=this.array[t*this.data.stride+this.offset+n];return this.normalized&&(r=Ki(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=pr(r,this.array)),this.data.array[t*this.data.stride+this.offset+n]=r,this}setX(t,n){return this.normalized&&(n=pr(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=pr(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=pr(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=pr(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=Ki(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=Ki(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=Ki(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=Ki(n,this.array)),n}setXY(t,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this}setXYZ(t,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=s,this}setXYZW(t,n,r,s,o){return t=t*this.data.stride+this.offset,this.normalized&&(n=pr(n,this.array),r=pr(r,this.array),s=pr(s,this.array),o=pr(o,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=s,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return new Tr(new this.array.constructor(n),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ja(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class DS extends Tn{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let sf;const Yd=new Ce,of=new Ce,af=new Ce,lf=new mt,qd=new mt,sL=new Gt,Eg=new Ce,Jd=new Ce,Tg=new Ce,NE=new mt,X_=new mt,GE=new mt;class oL extends br{constructor(t=new DS){if(super(),this.isSprite=!0,this.type="Sprite",sf===void 0){sf=new fr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new hd(n,5);sf.setIndex([0,1,2,0,2,3]),sf.setAttribute("position",new Ja(r,3,0,!1)),sf.setAttribute("uv",new Ja(r,2,3,!1))}this.geometry=sf,this.material=t,this.center=new mt(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),of.setFromMatrixScale(this.matrixWorld),sL.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),af.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&of.multiplyScalar(-af.z);const r=this.material.rotation;let s,o;r!==0&&(o=Math.cos(r),s=Math.sin(r));const a=this.center;Cg(Eg.set(-.5,-.5,0),af,a,of,s,o),Cg(Jd.set(.5,-.5,0),af,a,of,s,o),Cg(Tg.set(.5,.5,0),af,a,of,s,o),NE.set(0,0),X_.set(1,0),GE.set(1,1);let u=t.ray.intersectTriangle(Eg,Jd,Tg,!1,Yd);if(u===null&&(Cg(Jd.set(-.5,.5,0),af,a,of,s,o),X_.set(0,1),u=t.ray.intersectTriangle(Eg,Tg,Jd,!1,Yd),u===null))return;const l=t.ray.origin.distanceTo(Yd);l<t.near||l>t.far||n.push({distance:l,point:Yd.clone(),uv:hs.getInterpolation(Yd,Eg,Jd,Tg,NE,X_,GE,new mt),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function Cg(i,t,n,r,s,o){lf.subVectors(i,n).addScalar(.5).multiply(r),s!==void 0?(qd.x=o*lf.x-s*lf.y,qd.y=s*lf.x+o*lf.y):qd.copy(lf),i.copy(t),i.x+=qd.x,i.y+=qd.y,i.applyMatrix4(sL)}const Rg=new Ce,HE=new Ce;class aL extends br{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const n=t.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,n=0,r=0){n=Math.abs(n);const s=this.levels;let o;for(o=0;o<s.length&&!(n<s[o].distance);o++);return s.splice(o,0,{distance:n,hysteresis:r,object:t}),this.add(t),this}removeLevel(t){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===t){const s=n.splice(r,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const n=this.levels;if(n.length>0){let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),t<o)break}return n[r-1].object}return null}raycast(t,n){if(this.levels.length>0){Rg.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(Rg);this.getObjectForDistance(s).raycast(t,n)}}update(t){const n=this.levels;if(n.length>1){Rg.setFromMatrixPosition(t.matrixWorld),HE.setFromMatrixPosition(this.matrixWorld);const r=Rg.distanceTo(HE)/t.zoom;n[0].object.visible=!0;let s,o;for(s=1,o=n.length;s<o;s++){let a=n[s].distance;if(n[s].object.visible&&(a-=a*n[s].hysteresis),r>=a)n[s-1].object.visible=!1,n[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<o;s++)n[s].object.visible=!1}}toJSON(t){const n=super.toJSON(t);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let s=0,o=r.length;s<o;s++){const a=r[s];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const zE=new Ce,VE=new _r,WE=new _r,Y8=new Ce,XE=new Gt,Pg=new Ce,Y_=new Qn,YE=new Gt,q_=new Cc;class I0 extends dn{constructor(t,n){super(t,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Lb,this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hn),this.boundingBox.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Pg),this.boundingBox.expandByPoint(Pg)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qn),this.boundingSphere.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Pg),this.boundingSphere.expandByPoint(Pg)}copy(t,n){return super.copy(t,n),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,n){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Y_.copy(this.boundingSphere),Y_.applyMatrix4(s),t.ray.intersectsSphere(Y_)!==!1&&(YE.copy(s).invert(),q_.copy(t.ray).applyMatrix4(YE),!(this.boundingBox!==null&&q_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,n,q_)))}getVertexPosition(t,n){return super.getVertexPosition(t,n),this.applyBoneTransform(t,n),n}bind(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new _r,n=this.geometry.attributes.skinWeight;for(let r=0,s=n.count;r<s;r++){t.fromBufferAttribute(n,r);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),n.setXYZW(r,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Lb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===PI?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,n){const r=this.skeleton,s=this.geometry;VE.fromBufferAttribute(s.attributes.skinIndex,t),WE.fromBufferAttribute(s.attributes.skinWeight,t),zE.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const a=WE.getComponent(o);if(a!==0){const u=VE.getComponent(o);XE.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),n.addScaledVector(Y8.copy(zE).applyMatrix4(XE),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}class Kp extends br{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ca extends Qr{constructor(t=null,n=1,r=1,s,o,a,u,l,c=Nn,d=Nn,p,f){super(null,a,u,l,c,d,s,o,p,f),this.isDataTexture=!0,this.image={data:t,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qE=new Gt,q8=new Gt;class pd{constructor(t=[],n=[]){this.uuid=Ds(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Gt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const r=new Gt;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const t=this.bones,n=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,a=t.length;o<a;o++){const u=t[o]?t[o].matrixWorld:q8;qE.multiplyMatrices(u,n[o]),qE.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new pd(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const r=new ca(n,t,t,Di,ys);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(t){for(let n=0,r=this.bones.length;n<r;n++){const s=this.bones[n];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let r=0,s=t.bones.length;r<s;r++){const o=t.bones[r];let a=n[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new Kp),this.bones.push(a),this.boneInverses.push(new Gt().fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let s=0,o=n.length;s<o;s++){const a=n[s];t.bones.push(a.uuid);const u=r[s];t.boneInverses.push(u.toArray())}return t}}class Ka extends Tr{constructor(t,n,r,s=1){super(t,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const uf=new Gt,JE=new Gt,Ig=[],KE=new Hn,J8=new Gt,Kd=new dn,Qd=new Qn;class L0 extends dn{constructor(t,n,r){super(t,n),this.isInstancedMesh=!0,this.instanceMatrix=new Ka(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,J8)}computeBoundingBox(){const t=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Hn),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,uf),KE.copy(t.boundingBox).applyMatrix4(uf),this.boundingBox.union(KE)}computeBoundingSphere(){const t=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qn),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,uf),Qd.copy(t.boundingSphere).applyMatrix4(uf),this.boundingSphere.union(Qd)}copy(t,n){return super.copy(t,n),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,n){n.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,n){n.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,n){const r=n.morphTargetInfluences,s=this.morphTexture.source.data.data,o=r.length+1,a=t*o+1;for(let u=0;u<r.length;u++)r[u]=s[a+u]}raycast(t,n){const r=this.matrixWorld,s=this.count;if(Kd.geometry=this.geometry,Kd.material=this.material,Kd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Qd.copy(this.boundingSphere),Qd.applyMatrix4(r),t.ray.intersectsSphere(Qd)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,uf),JE.multiplyMatrices(r,uf),Kd.matrixWorld=JE,Kd.raycast(t,Ig);for(let a=0,u=Ig.length;a<u;a++){const l=Ig[a];l.instanceId=o,l.object=this,n.push(l)}Ig.length=0}}setColorAt(t,n){this.instanceColor===null&&(this.instanceColor=new Ka(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,n){n.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,n){const r=n.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new ca(new Float32Array(s*this.count),s,this.count,_0,ys));const o=this.morphTexture.source.data.data;let a=0;for(let c=0;c<r.length;c++)a+=r[c];const u=this.geometry.morphTargetsRelative?1:1-a,l=s*t;o[l]=u,o.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function K8(i,t){return i.z-t.z}function Q8(i,t){return t.z-i.z}class Z8{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=t.start,a.count=t.count,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const wl=new Gt,J_=new Gt,$8=new Gt,eH=new wt(1,1,1),QE=new Gt,K_=new Jp,Lg=new Hn,Eu=new Qn,Zd=new Ce,ZE=new Ce,tH=new Ce,Q_=new Z8,Ii=new dn,jg=[];function rH(i,t,n=0){const r=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let o=0;o<s;o++)for(let a=0;a<r;a++)t.setComponent(o+n,a,i.getComponent(o,a))}else t.array.set(i.array,n*r);t.needsUpdate=!0}class lL extends dn{get maxInstanceCount(){return this._maxInstanceCount}constructor(t,n,r=n*2,s){super(new fr,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=t,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4),r=new ca(n,t,t,Di,ys);this._matricesTexture=r}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const n=new Uint32Array(t*t),r=new ca(n,t,t,Vp,qa);this._indirectTexture=r}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const n=new Float32Array(t*t*4).fill(1),r=new ca(n,t,t,Di,ys);r.colorSpace=Ir.workingColorSpace,this._colorsTexture=r}_initializeGeometry(t){const n=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in t.attributes){const a=t.getAttribute(o),{array:u,itemSize:l,normalized:c}=a,d=new u.constructor(r*l),p=new Tr(d,l,c);n.setAttribute(o,p)}if(t.getIndex()!==null){const o=r>65535?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Tr(o,1))}this._geometryInitialized=!0}}_validateGeometry(t){const n=this.geometry;if(!!t.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!t.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=t.getAttribute(r),o=n.getAttribute(r);if(s.itemSize!==o.itemSize||s.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hn);const t=this.boundingBox,n=this._drawInfo;t.makeEmpty();for(let r=0,s=n.length;r<s;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,wl),this.getBoundingBoxAt(o,Lg).applyMatrix4(wl),t.union(Lg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qn);const t=this.boundingSphere,n=this._drawInfo;t.makeEmpty();for(let r=0,s=n.length;r<s;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,wl),this.getBoundingSphereAt(o,Eu).applyMatrix4(wl),t.union(Eu)}}addInstance(t){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(s=this._availableInstanceIds.pop(),this._drawInfo[s]=r):(s=this._drawInfo.length,this._drawInfo.push(r));const o=this._matricesTexture,a=o.image.data;$8.toArray(a,s*16),o.needsUpdate=!0;const u=this._colorsTexture;return u&&(eH.toArray(u.image.data,s*4),u.needsUpdate=!0),s}addGeometry(t,n=-1,r=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,u=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),n===-1?s.vertexCount=t.getAttribute("position").count:s.vertexCount=n,o===null?s.vertexStart=0:s.vertexStart=o.vertexStart+o.vertexCount;const c=t.getIndex(),d=c!==null;if(d&&(r===-1?s.indexCount=c.count:s.indexCount=r,o===null?s.indexStart=0:s.indexStart=o.indexStart+o.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._geometryCount;return this._geometryCount++,a.push(s),u.push({start:d?s.indexStart:s.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Hn,sphereInitialized:!1,sphere:new Qn}),this.setGeometryAt(p,t),p}setGeometryAt(t,n){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=r.getIndex()!==null,o=r.getIndex(),a=n.getIndex(),u=this._reservedRanges[t];if(s&&a.count>u.indexCount||n.attributes.position.count>u.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=u.vertexStart,c=u.vertexCount;for(const h in r.attributes){const m=n.getAttribute(h),y=r.getAttribute(h);rH(m,y,l);const v=m.itemSize;for(let g=m.count,_=c;g<_;g++){const x=l+g;for(let b=0;b<v;b++)y.setComponent(x,b,0)}y.needsUpdate=!0,y.addUpdateRange(l*v,c*v)}if(s){const h=u.indexStart;for(let m=0;m<a.count;m++)o.setX(h+m,l+a.getX(m));for(let m=a.count,y=u.indexCount;m<y;m++)o.setX(h+m,l);o.needsUpdate=!0,o.addUpdateRange(h,u.indexCount)}const d=this._bounds[t];n.boundingBox!==null?(d.box.copy(n.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,n.boundingSphere!==null?(d.sphere.copy(n.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const p=this._drawRanges[t],f=n.getAttribute("position");return p.count=s?a.count:f.count,this._visibilityChanged=!0,t}deleteInstance(t){const n=this._drawInfo;return t>=n.length||n[t].active===!1?this:(n[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this)}getBoundingBoxAt(t,n){if(t>=this._geometryCount)return null;const r=this._bounds[t],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,u=o.attributes.position,l=this._drawRanges[t];for(let c=l.start,d=l.start+l.count;c<d;c++){let p=c;a&&(p=a.getX(p)),s.expandByPoint(Zd.fromBufferAttribute(u,p))}r.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(t,n){if(t>=this._geometryCount)return null;const r=this._bounds[t],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(t,Lg),Lg.getCenter(s.center);const a=o.index,u=o.attributes.position,l=this._drawRanges[t];let c=0;for(let d=l.start,p=l.start+l.count;d<p;d++){let f=d;a&&(f=a.getX(f)),Zd.fromBufferAttribute(u,f),c=Math.max(c,s.center.distanceToSquared(Zd))}s.radius=Math.sqrt(c),r.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(t,n){const r=this._drawInfo,s=this._matricesTexture,o=this._matricesTexture.image.data;return t>=r.length||r[t].active===!1?this:(n.toArray(o,t*16),s.needsUpdate=!0,this)}getMatrixAt(t,n){const r=this._drawInfo,s=this._matricesTexture.image.data;return t>=r.length||r[t].active===!1?null:n.fromArray(s,t*16)}setColorAt(t,n){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,s=this._colorsTexture.image.data,o=this._drawInfo;return t>=o.length||o[t].active===!1?this:(n.toArray(s,t*4),r.needsUpdate=!0,this)}getColorAt(t,n){const r=this._colorsTexture.image.data,s=this._drawInfo;return t>=s.length||s[t].active===!1?null:n.fromArray(r,t*4)}setVisibleAt(t,n){const r=this._drawInfo;return t>=r.length||r[t].active===!1||r[t].visible===n?this:(r[t].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(t){const n=this._drawInfo;return t>=n.length||n[t].active===!1?!1:n[t].visible}setGeometryIdAt(t,n){const r=this._drawInfo;return t>=r.length||r[t].active===!1||n<0||n>=this._geometryCount?null:(r[t].geometryIndex=n,this)}getGeometryIdAt(t){const n=this._drawInfo;return t>=n.length||n[t].active===!1?-1:n[t].geometryIndex}getGeometryRangeAt(t,n={}){if(t<0||t>=this._geometryCount)return null;const r=this._drawRanges[t];return n.start=r.start,n.count=r.count,n}raycast(t,n){const r=this._drawInfo,s=this._drawRanges,o=this.matrixWorld,a=this.geometry;Ii.material=this.material,Ii.geometry.index=a.index,Ii.geometry.attributes=a.attributes,Ii.geometry.boundingBox===null&&(Ii.geometry.boundingBox=new Hn),Ii.geometry.boundingSphere===null&&(Ii.geometry.boundingSphere=new Qn);for(let u=0,l=r.length;u<l;u++){if(!r[u].visible||!r[u].active)continue;const c=r[u].geometryIndex,d=s[c];Ii.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,Ii.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,Ii.geometry.boundingBox),this.getBoundingSphereAt(c,Ii.geometry.boundingSphere),Ii.raycast(t,jg);for(let p=0,f=jg.length;p<f;p++){const h=jg[p];h.object=this,h.batchId=u,n.push(h)}jg.length=0}Ii.material=null,Ii.geometry.index=null,Ii.geometry.attributes={},Ii.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(n=>({...n})),this._reservedRanges=t._reservedRanges.map(n=>({...n})),this._drawInfo=t._drawInfo.map(n=>({...n})),this._bounds=t._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,n,r,s,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),u=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,f=this.perObjectFrustumCulled,h=this._indirectTexture,m=h.image.data;f&&(QE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),K_.setFromProjectionMatrix(QE,t.coordinateSystem));let y=0;if(this.sortObjects){J_.copy(this.matrixWorld).invert(),Zd.setFromMatrixPosition(r.matrixWorld).applyMatrix4(J_),ZE.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(J_);for(let _=0,x=l.length;_<x;_++)if(l[_].visible&&l[_].active){const b=l[_].geometryIndex;this.getMatrixAt(_,wl),this.getBoundingSphereAt(b,Eu).applyMatrix4(wl);let S=!1;if(f&&(S=!K_.intersectsSphere(Eu)),!S){const T=tH.subVectors(Eu.center,Zd).dot(ZE);Q_.push(p[b],T,_)}}const v=Q_.list,g=this.customSort;g===null?v.sort(o.transparent?Q8:K8):g.call(this,v,r);for(let _=0,x=v.length;_<x;_++){const b=v[_];c[y]=b.start*u,d[y]=b.count,m[y]=b.index,y++}Q_.reset()}else for(let v=0,g=l.length;v<g;v++)if(l[v].visible&&l[v].active){const _=l[v].geometryIndex;let x=!1;if(f&&(this.getMatrixAt(v,wl),this.getBoundingSphereAt(_,Eu).applyMatrix4(wl),x=!K_.intersectsSphere(Eu)),!x){const b=p[_];c[y]=b.start*u,d[y]=b.count,m[y]=v,y++}}h.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(t,n,r,s,o,a){this.onBeforeRender(t,null,s,o,a)}}class xi extends Tn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const kv=new Ce,Ov=new Ce,$E=new Gt,$d=new Cc,Dg=new Qn,Z_=new Ce,eT=new Ce;class da extends br{constructor(t=new fr,n=new xi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[0];for(let s=1,o=n.count;s<o;s++)kv.fromBufferAttribute(n,s-1),Ov.fromBufferAttribute(n,s),r[s]=r[s-1],r[s]+=kv.distanceTo(Ov);t.setAttribute("lineDistance",new zt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const r=this.geometry,s=this.matrixWorld,o=t.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Dg.copy(r.boundingSphere),Dg.applyMatrix4(s),Dg.radius+=o,t.ray.intersectsSphere(Dg)===!1)return;$E.copy(s).invert(),$d.copy(t.ray).applyMatrix4($E);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,c=this.isLineSegments?2:1,d=r.index,f=r.attributes.position;if(d!==null){const h=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count);for(let y=h,v=m-1;y<v;y+=c){const g=d.getX(y),_=d.getX(y+1),x=kg(this,t,$d,l,g,_);x&&n.push(x)}if(this.isLineLoop){const y=d.getX(m-1),v=d.getX(h),g=kg(this,t,$d,l,y,v);g&&n.push(g)}}else{const h=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);for(let y=h,v=m-1;y<v;y+=c){const g=kg(this,t,$d,l,y,y+1);g&&n.push(g)}if(this.isLineLoop){const y=kg(this,t,$d,l,m-1,h);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function kg(i,t,n,r,s,o){const a=i.geometry.attributes.position;if(kv.fromBufferAttribute(a,s),Ov.fromBufferAttribute(a,o),n.distanceSqToSegment(kv,Ov,Z_,eT)>r)return;Z_.applyMatrix4(i.matrixWorld);const l=t.ray.origin.distanceTo(Z_);if(!(l<t.near||l>t.far))return{distance:l,point:eT.clone().applyMatrix4(i.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:i}}const tT=new Ce,rT=new Ce;class fo extends da{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[];for(let s=0,o=n.count;s<o;s+=2)tT.fromBufferAttribute(n,s),rT.fromBufferAttribute(n,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+tT.distanceTo(rT);t.setAttribute("lineDistance",new zt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class j0 extends da{constructor(t,n){super(t,n),this.isLineLoop=!0,this.type="LineLoop"}}class Qp extends Tn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const nT=new Gt,Fb=new Cc,Og=new Qn,Bg=new Ce;class D0 extends br{constructor(t=new fr,n=new Qp){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const r=this.geometry,s=this.matrixWorld,o=t.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Og.copy(r.boundingSphere),Og.applyMatrix4(s),Og.radius+=o,t.ray.intersectsSphere(Og)===!1)return;nT.copy(s).invert(),Fb.copy(t.ray).applyMatrix4(nT);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,c=r.index,p=r.attributes.position;if(c!==null){const f=Math.max(0,a.start),h=Math.min(c.count,a.start+a.count);for(let m=f,y=h;m<y;m++){const v=c.getX(m);Bg.fromBufferAttribute(p,v),iT(Bg,v,l,s,t,n,this)}}else{const f=Math.max(0,a.start),h=Math.min(p.count,a.start+a.count);for(let m=f,y=h;m<y;m++)Bg.fromBufferAttribute(p,m),iT(Bg,m,l,s,t,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function iT(i,t,n,r,s,o,a){const u=Fb.distanceSqToPoint(i);if(u<n){const l=new Ce;Fb.closestPointToPoint(i,l),l.applyMatrix4(r);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;o.push({distance:c,distanceToRay:Math.sqrt(u),point:l,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class nH extends Qr{constructor(t,n,r,s,o,a,u,l,c){super(t,n,r,s,o,a,u,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:sn,this.magFilter=o!==void 0?o:sn,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,t.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class iH extends Qr{constructor(t,n){super({width:t,height:n}),this.isFramebufferTexture=!0,this.magFilter=Nn,this.minFilter=Nn,this.generateMipmaps=!1,this.needsUpdate=!0}}class k0 extends Qr{constructor(t,n,r,s,o,a,u,l,c,d,p,f){super(null,a,u,l,c,d,s,o,p,f),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class sH extends k0{constructor(t,n,r,s,o,a){super(t,n,r,o,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=ms,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class oH extends k0{constructor(t,n,r){super(void 0,t[0].width,t[0].height,n,r,Ya),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class aH extends Qr{constructor(t,n,r,s,o,a,u,l,c){super(t,n,r,s,o,a,u,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Vo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,n){const r=this.getUtoTmapping(t);return this.getPoint(r,n)}getPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return n}getSpacedPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPointAt(r/t));return n}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,s=this.getPoint(0),o=0;n.push(0);for(let a=1;a<=t;a++)r=this.getPoint(a/t),o+=r.distanceTo(s),n.push(o),s=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,n){const r=this.getLengths();let s=0;const o=r.length;let a;n?a=n:a=t*r[o-1];let u=0,l=o-1,c;for(;u<=l;)if(s=Math.floor(u+(l-u)/2),c=r[s]-a,c<0)u=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,r[s]===a)return s/(o-1);const d=r[s],f=r[s+1]-d,h=(a-d)/f;return(s+h)/(o-1)}getTangent(t,n){let s=t-1e-4,o=t+1e-4;s<0&&(s=0),o>1&&(o=1);const a=this.getPoint(s),u=this.getPoint(o),l=n||(a.isVector2?new mt:new Ce);return l.copy(u).sub(a).normalize(),l}getTangentAt(t,n){const r=this.getUtoTmapping(t);return this.getTangent(r,n)}computeFrenetFrames(t,n){const r=new Ce,s=[],o=[],a=[],u=new Ce,l=new Gt;for(let h=0;h<=t;h++){const m=h/t;s[h]=this.getTangentAt(m,new Ce)}o[0]=new Ce,a[0]=new Ce;let c=Number.MAX_VALUE;const d=Math.abs(s[0].x),p=Math.abs(s[0].y),f=Math.abs(s[0].z);d<=c&&(c=d,r.set(1,0,0)),p<=c&&(c=p,r.set(0,1,0)),f<=c&&r.set(0,0,1),u.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],u),a[0].crossVectors(s[0],o[0]);for(let h=1;h<=t;h++){if(o[h]=o[h-1].clone(),a[h]=a[h-1].clone(),u.crossVectors(s[h-1],s[h]),u.length()>Number.EPSILON){u.normalize();const m=Math.acos(En(s[h-1].dot(s[h]),-1,1));o[h].applyMatrix4(l.makeRotationAxis(u,m))}a[h].crossVectors(s[h],o[h])}if(n===!0){let h=Math.acos(En(o[0].dot(o[t]),-1,1));h/=t,s[0].dot(u.crossVectors(o[0],o[t]))>0&&(h=-h);for(let m=1;m<=t;m++)o[m].applyMatrix4(l.makeRotationAxis(s[m],h*m)),a[m].crossVectors(s[m],o[m])}return{tangents:s,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class O0 extends Vo{constructor(t=0,n=0,r=1,s=1,o=0,a=Math.PI*2,u=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=n,this.xRadius=r,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=u,this.aRotation=l}getPoint(t,n=new mt){const r=n,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(a?o=0:o=s),this.aClockwise===!0&&!a&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+t*o;let l=this.aX+this.xRadius*Math.cos(u),c=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*d-h*p+this.aX,c=f*p+h*d+this.aY}return r.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class uL extends O0{constructor(t,n,r,s,o,a){super(t,n,r,r,s,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function kS(){let i=0,t=0,n=0,r=0;function s(o,a,u,l){i=o,t=u,n=-3*o+3*a-2*u-l,r=2*o-2*a+u+l}return{initCatmullRom:function(o,a,u,l,c){s(a,u,c*(u-o),c*(l-a))},initNonuniformCatmullRom:function(o,a,u,l,c,d,p){let f=(a-o)/c-(u-o)/(c+d)+(u-a)/d,h=(u-a)/d-(l-a)/(d+p)+(l-u)/p;f*=d,h*=d,s(a,u,f,h)},calc:function(o){const a=o*o,u=a*o;return i+t*o+n*a+r*u}}}const Fg=new Ce,$_=new kS,ex=new kS,tx=new kS;class cL extends Vo{constructor(t=[],n=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=n,this.curveType=r,this.tension=s}getPoint(t,n=new Ce){const r=n,s=this.points,o=s.length,a=(o-(this.closed?0:1))*t;let u=Math.floor(a),l=a-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:l===0&&u===o-1&&(u=o-2,l=1);let c,d;this.closed||u>0?c=s[(u-1)%o]:(Fg.subVectors(s[0],s[1]).add(s[0]),c=Fg);const p=s[u%o],f=s[(u+1)%o];if(this.closed||u+2<o?d=s[(u+2)%o]:(Fg.subVectors(s[o-1],s[o-2]).add(s[o-1]),d=Fg),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(p),h),y=Math.pow(p.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(d),h);y<1e-4&&(y=1),m<1e-4&&(m=y),v<1e-4&&(v=y),$_.initNonuniformCatmullRom(c.x,p.x,f.x,d.x,m,y,v),ex.initNonuniformCatmullRom(c.y,p.y,f.y,d.y,m,y,v),tx.initNonuniformCatmullRom(c.z,p.z,f.z,d.z,m,y,v)}else this.curveType==="catmullrom"&&($_.initCatmullRom(c.x,p.x,f.x,d.x,this.tension),ex.initCatmullRom(c.y,p.y,f.y,d.y,this.tension),tx.initCatmullRom(c.z,p.z,f.z,d.z,this.tension));return r.set($_.calc(l),ex.calc(l),tx.calc(l)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(new Ce().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function sT(i,t,n,r,s){const o=(r-t)*.5,a=(s-n)*.5,u=i*i,l=i*u;return(2*n-2*r+o+a)*l+(-3*n+3*r-2*o-a)*u+o*i+n}function lH(i,t){const n=1-i;return n*n*t}function uH(i,t){return 2*(1-i)*i*t}function cH(i,t){return i*i*t}function Nh(i,t,n,r){return lH(i,t)+uH(i,n)+cH(i,r)}function fH(i,t){const n=1-i;return n*n*n*t}function dH(i,t){const n=1-i;return 3*n*n*i*t}function hH(i,t){return 3*(1-i)*i*i*t}function pH(i,t){return i*i*i*t}function Gh(i,t,n,r,s){return fH(i,t)+dH(i,n)+hH(i,r)+pH(i,s)}class OS extends Vo{constructor(t=new mt,n=new mt,r=new mt,s=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=n,this.v2=r,this.v3=s}getPoint(t,n=new mt){const r=n,s=this.v0,o=this.v1,a=this.v2,u=this.v3;return r.set(Gh(t,s.x,o.x,a.x,u.x),Gh(t,s.y,o.y,a.y,u.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class fL extends Vo{constructor(t=new Ce,n=new Ce,r=new Ce,s=new Ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=n,this.v2=r,this.v3=s}getPoint(t,n=new Ce){const r=n,s=this.v0,o=this.v1,a=this.v2,u=this.v3;return r.set(Gh(t,s.x,o.x,a.x,u.x),Gh(t,s.y,o.y,a.y,u.y),Gh(t,s.z,o.z,a.z,u.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class BS extends Vo{constructor(t=new mt,n=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=n}getPoint(t,n=new mt){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new mt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class dL extends Vo{constructor(t=new Ce,n=new Ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=n}getPoint(t,n=new Ce){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new Ce){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class FS extends Vo{constructor(t=new mt,n=new mt,r=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new mt){const r=n,s=this.v0,o=this.v1,a=this.v2;return r.set(Nh(t,s.x,o.x,a.x),Nh(t,s.y,o.y,a.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class US extends Vo{constructor(t=new Ce,n=new Ce,r=new Ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new Ce){const r=n,s=this.v0,o=this.v1,a=this.v2;return r.set(Nh(t,s.x,o.x,a.x),Nh(t,s.y,o.y,a.y),Nh(t,s.z,o.z,a.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class NS extends Vo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,n=new mt){const r=n,s=this.points,o=(s.length-1)*t,a=Math.floor(o),u=o-a,l=s[a===0?a:a-1],c=s[a],d=s[a>s.length-2?s.length-1:a+1],p=s[a>s.length-3?s.length-1:a+2];return r.set(sT(u,l.x,c.x,d.x,p.x),sT(u,l.y,c.y,d.y,p.y)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(new mt().fromArray(s))}return this}}var Bv=Object.freeze({__proto__:null,ArcCurve:uL,CatmullRomCurve3:cL,CubicBezierCurve:OS,CubicBezierCurve3:fL,EllipseCurve:O0,LineCurve:BS,LineCurve3:dL,QuadraticBezierCurve:FS,QuadraticBezierCurve3:US,SplineCurve:NS});class hL extends Vo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(n)){const r=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Bv[r](n,t))}return this}getPoint(t,n){const r=t*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=r){const a=s[o]-r,u=this.curves[o],l=u.getLength(),c=l===0?0:1-a/l;return u.getPointAt(c,n)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let n=0;for(let r=0,s=this.curves.length;r<s;r++)n+=this.curves[r].getLength(),t.push(n);return this.cacheLengths=t,t}getSpacedPoints(t=40){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return this.autoClose&&n.push(n[0]),n}getPoints(t=12){const n=[];let r;for(let s=0,o=this.curves;s<o.length;s++){const a=o[s],u=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,l=a.getPoints(u);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(t){super.copy(t),this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const s=t.curves[n];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const s=this.curves[n];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const s=t.curves[n];this.curves.push(new Bv[s.type]().fromJSON(s))}return this}}class Sp extends hL{constructor(t){super(),this.type="Path",this.currentPoint=new mt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let n=1,r=t.length;n<r;n++)this.lineTo(t[n].x,t[n].y);return this}moveTo(t,n){return this.currentPoint.set(t,n),this}lineTo(t,n){const r=new BS(this.currentPoint.clone(),new mt(t,n));return this.curves.push(r),this.currentPoint.set(t,n),this}quadraticCurveTo(t,n,r,s){const o=new FS(this.currentPoint.clone(),new mt(t,n),new mt(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}bezierCurveTo(t,n,r,s,o,a){const u=new OS(this.currentPoint.clone(),new mt(t,n),new mt(r,s),new mt(o,a));return this.curves.push(u),this.currentPoint.set(o,a),this}splineThru(t){const n=[this.currentPoint.clone()].concat(t),r=new NS(n);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,n,r,s,o,a){const u=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(t+u,n+l,r,s,o,a),this}absarc(t,n,r,s,o,a){return this.absellipse(t,n,r,r,s,o,a),this}ellipse(t,n,r,s,o,a,u,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+c,n+d,r,s,o,a,u,l),this}absellipse(t,n,r,s,o,a,u,l){const c=new O0(t,n,r,s,o,a,u,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Zp extends fr{constructor(t=[new mt(0,-.5),new mt(.5,0),new mt(0,.5)],n=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:r,phiLength:s},n=Math.floor(n),s=En(s,0,Math.PI*2);const o=[],a=[],u=[],l=[],c=[],d=1/n,p=new Ce,f=new mt,h=new Ce,m=new Ce,y=new Ce;let v=0,g=0;for(let _=0;_<=t.length-1;_++)switch(_){case 0:v=t[_+1].x-t[_].x,g=t[_+1].y-t[_].y,h.x=g*1,h.y=-v,h.z=g*0,y.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case t.length-1:l.push(y.x,y.y,y.z);break;default:v=t[_+1].x-t[_].x,g=t[_+1].y-t[_].y,h.x=g*1,h.y=-v,h.z=g*0,m.copy(h),h.x+=y.x,h.y+=y.y,h.z+=y.z,h.normalize(),l.push(h.x,h.y,h.z),y.copy(m)}for(let _=0;_<=n;_++){const x=r+_*d*s,b=Math.sin(x),S=Math.cos(x);for(let T=0;T<=t.length-1;T++){p.x=t[T].x*b,p.y=t[T].y,p.z=t[T].x*S,a.push(p.x,p.y,p.z),f.x=_/n,f.y=T/(t.length-1),u.push(f.x,f.y);const M=l[3*T+0]*b,R=l[3*T+1],L=l[3*T+0]*S;c.push(M,R,L)}}for(let _=0;_<n;_++)for(let x=0;x<t.length-1;x++){const b=x+_*t.length,S=b,T=b+t.length,M=b+t.length+1,R=b+1;o.push(S,T,R),o.push(M,R,T)}this.setIndex(o),this.setAttribute("position",new zt(a,3)),this.setAttribute("uv",new zt(u,2)),this.setAttribute("normal",new zt(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zp(t.points,t.segments,t.phiStart,t.phiLength)}}class B0 extends Zp{constructor(t=1,n=1,r=4,s=8){const o=new Sp;o.absarc(0,-n/2,t,Math.PI*1.5,0),o.absarc(0,n/2,t,0,Math.PI*.5),super(o.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:t,length:n,capSegments:r,radialSegments:s}}static fromJSON(t){return new B0(t.radius,t.length,t.capSegments,t.radialSegments)}}class F0 extends fr{constructor(t=1,n=32,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:r,thetaLength:s},n=Math.max(3,n);const o=[],a=[],u=[],l=[],c=new Ce,d=new mt;a.push(0,0,0),u.push(0,0,1),l.push(.5,.5);for(let p=0,f=3;p<=n;p++,f+=3){const h=r+p/n*s;c.x=t*Math.cos(h),c.y=t*Math.sin(h),a.push(c.x,c.y,c.z),u.push(0,0,1),d.x=(a[f]/t+1)/2,d.y=(a[f+1]/t+1)/2,l.push(d.x,d.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new zt(a,3)),this.setAttribute("normal",new zt(u,3)),this.setAttribute("uv",new zt(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new F0(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class md extends fr{constructor(t=1,n=1,r=1,s=32,o=1,a=!1,u=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:r,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:u,thetaLength:l};const c=this;s=Math.floor(s),o=Math.floor(o);const d=[],p=[],f=[],h=[];let m=0;const y=[],v=r/2;let g=0;_(),a===!1&&(t>0&&x(!0),n>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new zt(p,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(h,2));function _(){const b=new Ce,S=new Ce;let T=0;const M=(n-t)/r;for(let R=0;R<=o;R++){const L=[],P=R/o,C=P*(n-t)+t;for(let k=0;k<=s;k++){const D=k/s,F=D*l+u,G=Math.sin(F),z=Math.cos(F);S.x=C*G,S.y=-P*r+v,S.z=C*z,p.push(S.x,S.y,S.z),b.set(G,M,z).normalize(),f.push(b.x,b.y,b.z),h.push(D,1-P),L.push(m++)}y.push(L)}for(let R=0;R<s;R++)for(let L=0;L<o;L++){const P=y[L][R],C=y[L+1][R],k=y[L+1][R+1],D=y[L][R+1];t>0&&(d.push(P,C,D),T+=3),n>0&&(d.push(C,k,D),T+=3)}c.addGroup(g,T,0),g+=T}function x(b){const S=m,T=new mt,M=new Ce;let R=0;const L=b===!0?t:n,P=b===!0?1:-1;for(let k=1;k<=s;k++)p.push(0,v*P,0),f.push(0,P,0),h.push(.5,.5),m++;const C=m;for(let k=0;k<=s;k++){const F=k/s*l+u,G=Math.cos(F),z=Math.sin(F);M.x=L*z,M.y=v*P,M.z=L*G,p.push(M.x,M.y,M.z),f.push(0,P,0),T.x=G*.5+.5,T.y=z*.5*P+.5,h.push(T.x,T.y),m++}for(let k=0;k<s;k++){const D=S+k,F=C+k;b===!0?d.push(F,F+1,D):d.push(F+1,F,D),R+=3}c.addGroup(g,R,b===!0?1:2),g+=R}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new md(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class U0 extends md{constructor(t=1,n=1,r=32,s=1,o=!1,a=0,u=Math.PI*2){super(0,t,n,r,s,o,a,u),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:u}}static fromJSON(t){return new U0(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ru extends fr{constructor(t=[],n=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:r,detail:s};const o=[],a=[];u(s),c(r),d(),this.setAttribute("position",new zt(o,3)),this.setAttribute("normal",new zt(o.slice(),3)),this.setAttribute("uv",new zt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(_){const x=new Ce,b=new Ce,S=new Ce;for(let T=0;T<n.length;T+=3)h(n[T+0],x),h(n[T+1],b),h(n[T+2],S),l(x,b,S,_)}function l(_,x,b,S){const T=S+1,M=[];for(let R=0;R<=T;R++){M[R]=[];const L=_.clone().lerp(b,R/T),P=x.clone().lerp(b,R/T),C=T-R;for(let k=0;k<=C;k++)k===0&&R===T?M[R][k]=L:M[R][k]=L.clone().lerp(P,k/C)}for(let R=0;R<T;R++)for(let L=0;L<2*(T-R)-1;L++){const P=Math.floor(L/2);L%2===0?(f(M[R][P+1]),f(M[R+1][P]),f(M[R][P])):(f(M[R][P+1]),f(M[R+1][P+1]),f(M[R+1][P]))}}function c(_){const x=new Ce;for(let b=0;b<o.length;b+=3)x.x=o[b+0],x.y=o[b+1],x.z=o[b+2],x.normalize().multiplyScalar(_),o[b+0]=x.x,o[b+1]=x.y,o[b+2]=x.z}function d(){const _=new Ce;for(let x=0;x<o.length;x+=3){_.x=o[x+0],_.y=o[x+1],_.z=o[x+2];const b=v(_)/2/Math.PI+.5,S=g(_)/Math.PI+.5;a.push(b,1-S)}m(),p()}function p(){for(let _=0;_<a.length;_+=6){const x=a[_+0],b=a[_+2],S=a[_+4],T=Math.max(x,b,S),M=Math.min(x,b,S);T>.9&&M<.1&&(x<.2&&(a[_+0]+=1),b<.2&&(a[_+2]+=1),S<.2&&(a[_+4]+=1))}}function f(_){o.push(_.x,_.y,_.z)}function h(_,x){const b=_*3;x.x=t[b+0],x.y=t[b+1],x.z=t[b+2]}function m(){const _=new Ce,x=new Ce,b=new Ce,S=new Ce,T=new mt,M=new mt,R=new mt;for(let L=0,P=0;L<o.length;L+=9,P+=6){_.set(o[L+0],o[L+1],o[L+2]),x.set(o[L+3],o[L+4],o[L+5]),b.set(o[L+6],o[L+7],o[L+8]),T.set(a[P+0],a[P+1]),M.set(a[P+2],a[P+3]),R.set(a[P+4],a[P+5]),S.copy(_).add(x).add(b).divideScalar(3);const C=v(S);y(T,P+0,_,C),y(M,P+2,x,C),y(R,P+4,b,C)}}function y(_,x,b,S){S<0&&_.x===1&&(a[x]=_.x-1),b.x===0&&b.z===0&&(a[x]=S/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ru(t.vertices,t.indices,t.radius,t.details)}}class N0 extends ru{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,t,n),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new N0(t.radius,t.detail)}}const Ug=new Ce,Ng=new Ce,rx=new Ce,Gg=new hs;class pL extends fr{constructor(t=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:n},t!==null){const s=Math.pow(10,4),o=Math.cos(sc*n),a=t.getIndex(),u=t.getAttribute("position"),l=a?a.count:u.count,c=[0,0,0],d=["a","b","c"],p=new Array(3),f={},h=[];for(let m=0;m<l;m+=3){a?(c[0]=a.getX(m),c[1]=a.getX(m+1),c[2]=a.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:y,b:v,c:g}=Gg;if(y.fromBufferAttribute(u,c[0]),v.fromBufferAttribute(u,c[1]),g.fromBufferAttribute(u,c[2]),Gg.getNormal(rx),p[0]=`${Math.round(y.x*s)},${Math.round(y.y*s)},${Math.round(y.z*s)}`,p[1]=`${Math.round(v.x*s)},${Math.round(v.y*s)},${Math.round(v.z*s)}`,p[2]=`${Math.round(g.x*s)},${Math.round(g.y*s)},${Math.round(g.z*s)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const x=(_+1)%3,b=p[_],S=p[x],T=Gg[d[_]],M=Gg[d[x]],R=`${b}_${S}`,L=`${S}_${b}`;L in f&&f[L]?(rx.dot(f[L].normal)<=o&&(h.push(T.x,T.y,T.z),h.push(M.x,M.y,M.z)),f[L]=null):R in f||(f[R]={index0:c[_],index1:c[x],normal:rx.clone()})}}for(const m in f)if(f[m]){const{index0:y,index1:v}=f[m];Ug.fromBufferAttribute(u,y),Ng.fromBufferAttribute(u,v),h.push(Ug.x,Ug.y,Ug.z),h.push(Ng.x,Ng.y,Ng.z)}this.setAttribute("position",new zt(h,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class ac extends Sp{constructor(t){super(t),this.uuid=Ds(),this.type="Shape",this.holes=[]}getPointsHoles(t){const n=[];for(let r=0,s=this.holes.length;r<s;r++)n[r]=this.holes[r].getPoints(t);return n}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const s=t.holes[n];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const s=this.holes[n];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const s=t.holes[n];this.holes.push(new Sp().fromJSON(s))}return this}}const mH={triangulate:function(i,t,n=2){const r=t&&t.length,s=r?t[0]*n:i.length;let o=mL(i,0,s,n,!0);const a=[];if(!o||o.next===o.prev)return a;let u,l,c,d,p,f,h;if(r&&(o=xH(i,t,o,n)),i.length>80*n){u=c=i[0],l=d=i[1];for(let m=n;m<s;m+=n)p=i[m],f=i[m+1],p<u&&(u=p),f<l&&(l=f),p>c&&(c=p),f>d&&(d=f);h=Math.max(c-u,d-l),h=h!==0?32767/h:0}return Ap(o,a,n,u,l,h,0),a}};function mL(i,t,n,r,s){let o,a;if(s===IH(i,t,n,r)>0)for(o=t;o<n;o+=r)a=oT(o,i[o],i[o+1],a);else for(o=n-r;o>=t;o-=r)a=oT(o,i[o],i[o+1],a);return a&&G0(a,a.next)&&(Ep(a),a=a.next),a}function xc(i,t){if(!i)return i;t||(t=i);let n=i,r;do if(r=!1,!n.steiner&&(G0(n,n.next)||yn(n.prev,n,n.next)===0)){if(Ep(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Ap(i,t,n,r,s,o,a){if(!i)return;!a&&o&&MH(i,r,s,o);let u=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,o?yH(i,r,s,o):gH(i)){t.push(l.i/n|0),t.push(i.i/n|0),t.push(c.i/n|0),Ep(i),i=c.next,u=c.next;continue}if(i=c,i===u){a?a===1?(i=vH(xc(i),t,n),Ap(i,t,n,r,s,o,2)):a===2&&_H(i,t,n,r,s,o):Ap(xc(i),t,n,r,s,o,1);break}}}function gH(i){const t=i.prev,n=i,r=i.next;if(yn(t,n,r)>=0)return!1;const s=t.x,o=n.x,a=r.x,u=t.y,l=n.y,c=r.y,d=s<o?s<a?s:a:o<a?o:a,p=u<l?u<c?u:c:l<c?l:c,f=s>o?s>a?s:a:o>a?o:a,h=u>l?u>c?u:c:l>c?l:c;let m=r.next;for(;m!==t;){if(m.x>=d&&m.x<=f&&m.y>=p&&m.y<=h&&Lf(s,u,o,l,a,c,m.x,m.y)&&yn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function yH(i,t,n,r){const s=i.prev,o=i,a=i.next;if(yn(s,o,a)>=0)return!1;const u=s.x,l=o.x,c=a.x,d=s.y,p=o.y,f=a.y,h=u<l?u<c?u:c:l<c?l:c,m=d<p?d<f?d:f:p<f?p:f,y=u>l?u>c?u:c:l>c?l:c,v=d>p?d>f?d:f:p>f?p:f,g=Ub(h,m,t,n,r),_=Ub(y,v,t,n,r);let x=i.prevZ,b=i.nextZ;for(;x&&x.z>=g&&b&&b.z<=_;){if(x.x>=h&&x.x<=y&&x.y>=m&&x.y<=v&&x!==s&&x!==a&&Lf(u,d,l,p,c,f,x.x,x.y)&&yn(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=h&&b.x<=y&&b.y>=m&&b.y<=v&&b!==s&&b!==a&&Lf(u,d,l,p,c,f,b.x,b.y)&&yn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=h&&x.x<=y&&x.y>=m&&x.y<=v&&x!==s&&x!==a&&Lf(u,d,l,p,c,f,x.x,x.y)&&yn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=_;){if(b.x>=h&&b.x<=y&&b.y>=m&&b.y<=v&&b!==s&&b!==a&&Lf(u,d,l,p,c,f,b.x,b.y)&&yn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function vH(i,t,n){let r=i;do{const s=r.prev,o=r.next.next;!G0(s,o)&&gL(s,r,r.next,o)&&Mp(s,o)&&Mp(o,s)&&(t.push(s.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Ep(r),Ep(r.next),r=i=o),r=r.next}while(r!==i);return xc(r)}function _H(i,t,n,r,s,o){let a=i;do{let u=a.next.next;for(;u!==a.prev;){if(a.i!==u.i&&CH(a,u)){let l=yL(a,u);a=xc(a,a.next),l=xc(l,l.next),Ap(a,t,n,r,s,o,0),Ap(l,t,n,r,s,o,0);return}u=u.next}a=a.next}while(a!==i)}function xH(i,t,n,r){const s=[];let o,a,u,l,c;for(o=0,a=t.length;o<a;o++)u=t[o]*r,l=o<a-1?t[o+1]*r:i.length,c=mL(i,u,l,r,!1),c===c.next&&(c.steiner=!0),s.push(TH(c));for(s.sort(bH),o=0;o<s.length;o++)n=wH(s[o],n);return n}function bH(i,t){return i.x-t.x}function wH(i,t){const n=SH(i,t);if(!n)return t;const r=yL(n,i);return xc(r,r.next),xc(n,n.next)}function SH(i,t){let n=t,r=-1/0,s;const o=i.x,a=i.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const f=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=o&&f>r&&(r=f,s=n.x<n.next.x?n:n.next,f===o))return s}n=n.next}while(n!==t);if(!s)return null;const u=s,l=s.x,c=s.y;let d=1/0,p;n=s;do o>=n.x&&n.x>=l&&o!==n.x&&Lf(a<c?o:r,a,l,c,a<c?r:o,a,n.x,n.y)&&(p=Math.abs(a-n.y)/(o-n.x),Mp(n,i)&&(p<d||p===d&&(n.x>s.x||n.x===s.x&&AH(s,n)))&&(s=n,d=p)),n=n.next;while(n!==u);return s}function AH(i,t){return yn(i.prev,i,t.prev)<0&&yn(t.next,i,i.next)<0}function MH(i,t,n,r){let s=i;do s.z===0&&(s.z=Ub(s.x,s.y,t,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,EH(s)}function EH(i){let t,n,r,s,o,a,u,l,c=1;do{for(n=i,i=null,o=null,a=0;n;){for(a++,r=n,u=0,t=0;t<c&&(u++,r=r.nextZ,!!r);t++);for(l=c;u>0||l>0&&r;)u!==0&&(l===0||!r||n.z<=r.z)?(s=n,n=n.nextZ,u--):(s=r,r=r.nextZ,l--),o?o.nextZ=s:i=s,s.prevZ=o,o=s;n=r}o.nextZ=null,c*=2}while(a>1);return i}function Ub(i,t,n,r,s){return i=(i-n)*s|0,t=(t-r)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function TH(i){let t=i,n=i;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==i);return n}function Lf(i,t,n,r,s,o,a,u){return(s-a)*(t-u)>=(i-a)*(o-u)&&(i-a)*(r-u)>=(n-a)*(t-u)&&(n-a)*(o-u)>=(s-a)*(r-u)}function CH(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!RH(i,t)&&(Mp(i,t)&&Mp(t,i)&&PH(i,t)&&(yn(i.prev,i,t.prev)||yn(i,t.prev,t))||G0(i,t)&&yn(i.prev,i,i.next)>0&&yn(t.prev,t,t.next)>0)}function yn(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function G0(i,t){return i.x===t.x&&i.y===t.y}function gL(i,t,n,r){const s=zg(yn(i,t,n)),o=zg(yn(i,t,r)),a=zg(yn(n,r,i)),u=zg(yn(n,r,t));return!!(s!==o&&a!==u||s===0&&Hg(i,n,t)||o===0&&Hg(i,r,t)||a===0&&Hg(n,i,r)||u===0&&Hg(n,t,r))}function Hg(i,t,n){return t.x<=Math.max(i.x,n.x)&&t.x>=Math.min(i.x,n.x)&&t.y<=Math.max(i.y,n.y)&&t.y>=Math.min(i.y,n.y)}function zg(i){return i>0?1:i<0?-1:0}function RH(i,t){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==t.i&&n.next.i!==t.i&&gL(n,n.next,i,t))return!0;n=n.next}while(n!==i);return!1}function Mp(i,t){return yn(i.prev,i,i.next)<0?yn(i,t,i.next)>=0&&yn(i,i.prev,t)>=0:yn(i,t,i.prev)<0||yn(i,i.next,t)<0}function PH(i,t){let n=i,r=!1;const s=(i.x+t.x)/2,o=(i.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&s<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==i);return r}function yL(i,t){const n=new Nb(i.i,i.x,i.y),r=new Nb(t.i,t.x,t.y),s=i.next,o=t.prev;return i.next=t,t.prev=i,n.next=s,s.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function oT(i,t,n,r){const s=new Nb(i,t,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Ep(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Nb(i,t,n){this.i=i,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function IH(i,t,n,r){let s=0;for(let o=t,a=n-r;o<n;o+=r)s+=(i[a]-i[o])*(i[o+1]+i[a+1]),a=o;return s}class fa{static area(t){const n=t.length;let r=0;for(let s=n-1,o=0;o<n;s=o++)r+=t[s].x*t[o].y-t[o].x*t[s].y;return r*.5}static isClockWise(t){return fa.area(t)<0}static triangulateShape(t,n){const r=[],s=[],o=[];aT(t),lT(r,t);let a=t.length;n.forEach(aT);for(let l=0;l<n.length;l++)s.push(a),a+=n[l].length,lT(r,n[l]);const u=mH.triangulate(r,s);for(let l=0;l<u.length;l+=3)o.push(u.slice(l,l+3));return o}}function aT(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function lT(i,t){for(let n=0;n<t.length;n++)i.push(t[n].x),i.push(t[n].y)}class H0 extends fr{constructor(t=new ac([new mt(.5,.5),new mt(-.5,.5),new mt(-.5,-.5),new mt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const r=this,s=[],o=[];for(let u=0,l=t.length;u<l;u++){const c=t[u];a(c)}this.setAttribute("position",new zt(s,3)),this.setAttribute("uv",new zt(o,2)),this.computeVertexNormals();function a(u){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:h-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:LH;let x,b=!1,S,T,M,R;g&&(x=g.getSpacedPoints(d),b=!0,f=!1,S=g.computeFrenetFrames(d,!1),T=new Ce,M=new Ce,R=new Ce),f||(v=0,h=0,m=0,y=0);const L=u.extractPoints(c);let P=L.shape;const C=L.holes;if(!fa.isClockWise(P)){P=P.reverse();for(let ce=0,te=C.length;ce<te;ce++){const ue=C[ce];fa.isClockWise(ue)&&(C[ce]=ue.reverse())}}const D=fa.triangulateShape(P,C),F=P;for(let ce=0,te=C.length;ce<te;ce++){const ue=C[ce];P=P.concat(ue)}function G(ce,te,ue){return te||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().addScaledVector(te,ue)}const z=P.length,Q=D.length;function V(ce,te,ue){let ge,xe,Le;const we=ce.x-te.x,Ee=ce.y-te.y,ae=ue.x-ce.x,ne=ue.y-ce.y,Ae=we*we+Ee*Ee,Be=we*ne-Ee*ae;if(Math.abs(Be)>Number.EPSILON){const Fe=Math.sqrt(Ae),Oe=Math.sqrt(ae*ae+ne*ne),Je=te.x-Ee/Fe,Ve=te.y+we/Fe,Se=ue.x-ne/Oe,We=ue.y+ae/Oe,Re=((Se-Je)*ne-(We-Ve)*ae)/(we*ne-Ee*ae);ge=Je+we*Re-ce.x,xe=Ve+Ee*Re-ce.y;const le=ge*ge+xe*xe;if(le<=2)return new mt(ge,xe);Le=Math.sqrt(le/2)}else{let Fe=!1;we>Number.EPSILON?ae>Number.EPSILON&&(Fe=!0):we<-Number.EPSILON?ae<-Number.EPSILON&&(Fe=!0):Math.sign(Ee)===Math.sign(ne)&&(Fe=!0),Fe?(ge=-Ee,xe=we,Le=Math.sqrt(Ae)):(ge=we,xe=Ee,Le=Math.sqrt(Ae/2))}return new mt(ge/Le,xe/Le)}const W=[];for(let ce=0,te=F.length,ue=te-1,ge=ce+1;ce<te;ce++,ue++,ge++)ue===te&&(ue=0),ge===te&&(ge=0),W[ce]=V(F[ce],F[ue],F[ge]);const Y=[];let J,ie=W.concat();for(let ce=0,te=C.length;ce<te;ce++){const ue=C[ce];J=[];for(let ge=0,xe=ue.length,Le=xe-1,we=ge+1;ge<xe;ge++,Le++,we++)Le===xe&&(Le=0),we===xe&&(we=0),J[ge]=V(ue[ge],ue[Le],ue[we]);Y.push(J),ie=ie.concat(J)}for(let ce=0;ce<v;ce++){const te=ce/v,ue=h*Math.cos(te*Math.PI/2),ge=m*Math.sin(te*Math.PI/2)+y;for(let xe=0,Le=F.length;xe<Le;xe++){const we=G(F[xe],W[xe],ge);Z(we.x,we.y,-ue)}for(let xe=0,Le=C.length;xe<Le;xe++){const we=C[xe];J=Y[xe];for(let Ee=0,ae=we.length;Ee<ae;Ee++){const ne=G(we[Ee],J[Ee],ge);Z(ne.x,ne.y,-ue)}}}const I=m+y;for(let ce=0;ce<z;ce++){const te=f?G(P[ce],ie[ce],I):P[ce];b?(M.copy(S.normals[0]).multiplyScalar(te.x),T.copy(S.binormals[0]).multiplyScalar(te.y),R.copy(x[0]).add(M).add(T),Z(R.x,R.y,R.z)):Z(te.x,te.y,0)}for(let ce=1;ce<=d;ce++)for(let te=0;te<z;te++){const ue=f?G(P[te],ie[te],I):P[te];b?(M.copy(S.normals[ce]).multiplyScalar(ue.x),T.copy(S.binormals[ce]).multiplyScalar(ue.y),R.copy(x[ce]).add(M).add(T),Z(R.x,R.y,R.z)):Z(ue.x,ue.y,p/d*ce)}for(let ce=v-1;ce>=0;ce--){const te=ce/v,ue=h*Math.cos(te*Math.PI/2),ge=m*Math.sin(te*Math.PI/2)+y;for(let xe=0,Le=F.length;xe<Le;xe++){const we=G(F[xe],W[xe],ge);Z(we.x,we.y,p+ue)}for(let xe=0,Le=C.length;xe<Le;xe++){const we=C[xe];J=Y[xe];for(let Ee=0,ae=we.length;Ee<ae;Ee++){const ne=G(we[Ee],J[Ee],ge);b?Z(ne.x,ne.y+x[d-1].y,x[d-1].x+ue):Z(ne.x,ne.y,p+ue)}}}O(),H();function O(){const ce=s.length/3;if(f){let te=0,ue=z*te;for(let ge=0;ge<Q;ge++){const xe=D[ge];oe(xe[2]+ue,xe[1]+ue,xe[0]+ue)}te=d+v*2,ue=z*te;for(let ge=0;ge<Q;ge++){const xe=D[ge];oe(xe[0]+ue,xe[1]+ue,xe[2]+ue)}}else{for(let te=0;te<Q;te++){const ue=D[te];oe(ue[2],ue[1],ue[0])}for(let te=0;te<Q;te++){const ue=D[te];oe(ue[0]+z*d,ue[1]+z*d,ue[2]+z*d)}}r.addGroup(ce,s.length/3-ce,0)}function H(){const ce=s.length/3;let te=0;q(F,te),te+=F.length;for(let ue=0,ge=C.length;ue<ge;ue++){const xe=C[ue];q(xe,te),te+=xe.length}r.addGroup(ce,s.length/3-ce,1)}function q(ce,te){let ue=ce.length;for(;--ue>=0;){const ge=ue;let xe=ue-1;xe<0&&(xe=ce.length-1);for(let Le=0,we=d+v*2;Le<we;Le++){const Ee=z*Le,ae=z*(Le+1),ne=te+ge+Ee,Ae=te+xe+Ee,Be=te+xe+ae,Fe=te+ge+ae;pe(ne,Ae,Be,Fe)}}}function Z(ce,te,ue){l.push(ce),l.push(te),l.push(ue)}function oe(ce,te,ue){be(ce),be(te),be(ue);const ge=s.length/3,xe=_.generateTopUV(r,s,ge-3,ge-2,ge-1);me(xe[0]),me(xe[1]),me(xe[2])}function pe(ce,te,ue,ge){be(ce),be(te),be(ge),be(te),be(ue),be(ge);const xe=s.length/3,Le=_.generateSideWallUV(r,s,xe-6,xe-3,xe-2,xe-1);me(Le[0]),me(Le[1]),me(Le[3]),me(Le[1]),me(Le[2]),me(Le[3])}function be(ce){s.push(l[ce*3+0]),s.push(l[ce*3+1]),s.push(l[ce*3+2])}function me(ce){o.push(ce.x),o.push(ce.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return jH(n,r,t)}static fromJSON(t,n){const r=[];for(let o=0,a=t.shapes.length;o<a;o++){const u=n[t.shapes[o]];r.push(u)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new Bv[s.type]().fromJSON(s)),new H0(r,t.options)}}const LH={generateTopUV:function(i,t,n,r,s){const o=t[n*3],a=t[n*3+1],u=t[r*3],l=t[r*3+1],c=t[s*3],d=t[s*3+1];return[new mt(o,a),new mt(u,l),new mt(c,d)]},generateSideWallUV:function(i,t,n,r,s,o){const a=t[n*3],u=t[n*3+1],l=t[n*3+2],c=t[r*3],d=t[r*3+1],p=t[r*3+2],f=t[s*3],h=t[s*3+1],m=t[s*3+2],y=t[o*3],v=t[o*3+1],g=t[o*3+2];return Math.abs(u-d)<Math.abs(a-c)?[new mt(a,1-l),new mt(c,1-p),new mt(f,1-m),new mt(y,1-g)]:[new mt(u,1-l),new mt(d,1-p),new mt(h,1-m),new mt(v,1-g)]}};function jH(i,t,n){if(n.shapes=[],Array.isArray(i))for(let r=0,s=i.length;r<s;r++){const o=i[r];n.shapes.push(o.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},t),t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class z0 extends ru{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,t,n),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new z0(t.radius,t.detail)}}class $p extends ru{constructor(t=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,t,n),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new $p(t.radius,t.detail)}}class V0 extends fr{constructor(t=.5,n=1,r=32,s=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:r,phiSegments:s,thetaStart:o,thetaLength:a},r=Math.max(3,r),s=Math.max(1,s);const u=[],l=[],c=[],d=[];let p=t;const f=(n-t)/s,h=new Ce,m=new mt;for(let y=0;y<=s;y++){for(let v=0;v<=r;v++){const g=o+v/r*a;h.x=p*Math.cos(g),h.y=p*Math.sin(g),l.push(h.x,h.y,h.z),c.push(0,0,1),m.x=(h.x/n+1)/2,m.y=(h.y/n+1)/2,d.push(m.x,m.y)}p+=f}for(let y=0;y<s;y++){const v=y*(r+1);for(let g=0;g<r;g++){const _=g+v,x=_,b=_+r+1,S=_+r+2,T=_+1;u.push(x,b,T),u.push(b,S,T)}}this.setIndex(u),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new V0(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class W0 extends fr{constructor(t=new ac([new mt(0,.5),new mt(-.5,-.5),new mt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:n};const r=[],s=[],o=[],a=[];let u=0,l=0;if(Array.isArray(t)===!1)c(t);else for(let d=0;d<t.length;d++)c(t[d]),this.addGroup(u,l,d),u+=l,l=0;this.setIndex(r),this.setAttribute("position",new zt(s,3)),this.setAttribute("normal",new zt(o,3)),this.setAttribute("uv",new zt(a,2));function c(d){const p=s.length/3,f=d.extractPoints(n);let h=f.shape;const m=f.holes;fa.isClockWise(h)===!1&&(h=h.reverse());for(let v=0,g=m.length;v<g;v++){const _=m[v];fa.isClockWise(_)===!0&&(m[v]=_.reverse())}const y=fa.triangulateShape(h,m);for(let v=0,g=m.length;v<g;v++){const _=m[v];h=h.concat(_)}for(let v=0,g=h.length;v<g;v++){const _=h[v];s.push(_.x,_.y,0),o.push(0,0,1),a.push(_.x,_.y)}for(let v=0,g=y.length;v<g;v++){const _=y[v],x=_[0]+p,b=_[1]+p,S=_[2]+p;r.push(x,b,S),l+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes;return DH(n,t)}static fromJSON(t,n){const r=[];for(let s=0,o=t.shapes.length;s<o;s++){const a=n[t.shapes[s]];r.push(a)}return new W0(r,t.curveSegments)}}function DH(i,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class em extends fr{constructor(t=1,n=32,r=16,s=0,o=Math.PI*2,a=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:r,phiStart:s,phiLength:o,thetaStart:a,thetaLength:u},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+u,Math.PI);let c=0;const d=[],p=new Ce,f=new Ce,h=[],m=[],y=[],v=[];for(let g=0;g<=r;g++){const _=[],x=g/r;let b=0;g===0&&a===0?b=.5/n:g===r&&l===Math.PI&&(b=-.5/n);for(let S=0;S<=n;S++){const T=S/n;p.x=-t*Math.cos(s+T*o)*Math.sin(a+x*u),p.y=t*Math.cos(a+x*u),p.z=t*Math.sin(s+T*o)*Math.sin(a+x*u),m.push(p.x,p.y,p.z),f.copy(p).normalize(),y.push(f.x,f.y,f.z),v.push(T+b,1-x),_.push(c++)}d.push(_)}for(let g=0;g<r;g++)for(let _=0;_<n;_++){const x=d[g][_+1],b=d[g][_],S=d[g+1][_],T=d[g+1][_+1];(g!==0||a>0)&&h.push(x,b,T),(g!==r-1||l<Math.PI)&&h.push(b,S,T)}this.setIndex(h),this.setAttribute("position",new zt(m,3)),this.setAttribute("normal",new zt(y,3)),this.setAttribute("uv",new zt(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new em(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class X0 extends ru{constructor(t=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,t,n),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new X0(t.radius,t.detail)}}class Y0 extends fr{constructor(t=1,n=.4,r=12,s=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:r,tubularSegments:s,arc:o},r=Math.floor(r),s=Math.floor(s);const a=[],u=[],l=[],c=[],d=new Ce,p=new Ce,f=new Ce;for(let h=0;h<=r;h++)for(let m=0;m<=s;m++){const y=m/s*o,v=h/r*Math.PI*2;p.x=(t+n*Math.cos(v))*Math.cos(y),p.y=(t+n*Math.cos(v))*Math.sin(y),p.z=n*Math.sin(v),u.push(p.x,p.y,p.z),d.x=t*Math.cos(y),d.y=t*Math.sin(y),f.subVectors(p,d).normalize(),l.push(f.x,f.y,f.z),c.push(m/s),c.push(h/r)}for(let h=1;h<=r;h++)for(let m=1;m<=s;m++){const y=(s+1)*h+m-1,v=(s+1)*(h-1)+m-1,g=(s+1)*(h-1)+m,_=(s+1)*h+m;a.push(y,v,_),a.push(v,g,_)}this.setIndex(a),this.setAttribute("position",new zt(u,3)),this.setAttribute("normal",new zt(l,3)),this.setAttribute("uv",new zt(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Y0(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class q0 extends fr{constructor(t=1,n=.4,r=64,s=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:r,radialSegments:s,p:o,q:a},r=Math.floor(r),s=Math.floor(s);const u=[],l=[],c=[],d=[],p=new Ce,f=new Ce,h=new Ce,m=new Ce,y=new Ce,v=new Ce,g=new Ce;for(let x=0;x<=r;++x){const b=x/r*o*Math.PI*2;_(b,o,a,t,h),_(b+.01,o,a,t,m),v.subVectors(m,h),g.addVectors(m,h),y.crossVectors(v,g),g.crossVectors(y,v),y.normalize(),g.normalize();for(let S=0;S<=s;++S){const T=S/s*Math.PI*2,M=-n*Math.cos(T),R=n*Math.sin(T);p.x=h.x+(M*g.x+R*y.x),p.y=h.y+(M*g.y+R*y.y),p.z=h.z+(M*g.z+R*y.z),l.push(p.x,p.y,p.z),f.subVectors(p,h).normalize(),c.push(f.x,f.y,f.z),d.push(x/r),d.push(S/s)}}for(let x=1;x<=r;x++)for(let b=1;b<=s;b++){const S=(s+1)*(x-1)+(b-1),T=(s+1)*x+(b-1),M=(s+1)*x+b,R=(s+1)*(x-1)+b;u.push(S,T,R),u.push(T,M,R)}this.setIndex(u),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(d,2));function _(x,b,S,T,M){const R=Math.cos(x),L=Math.sin(x),P=S/b*x,C=Math.cos(P);M.x=T*(2+C)*.5*R,M.y=T*(2+C)*L*.5,M.z=T*Math.sin(P)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new q0(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class J0 extends fr{constructor(t=new US(new Ce(-1,-1,0),new Ce(-1,1,0),new Ce(1,1,0)),n=64,r=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:r,radialSegments:s,closed:o};const a=t.computeFrenetFrames(n,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const u=new Ce,l=new Ce,c=new mt;let d=new Ce;const p=[],f=[],h=[],m=[];y(),this.setIndex(m),this.setAttribute("position",new zt(p,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(h,2));function y(){for(let x=0;x<n;x++)v(x);v(o===!1?n:0),_(),g()}function v(x){d=t.getPointAt(x/n,d);const b=a.normals[x],S=a.binormals[x];for(let T=0;T<=s;T++){const M=T/s*Math.PI*2,R=Math.sin(M),L=-Math.cos(M);l.x=L*b.x+R*S.x,l.y=L*b.y+R*S.y,l.z=L*b.z+R*S.z,l.normalize(),f.push(l.x,l.y,l.z),u.x=d.x+r*l.x,u.y=d.y+r*l.y,u.z=d.z+r*l.z,p.push(u.x,u.y,u.z)}}function g(){for(let x=1;x<=n;x++)for(let b=1;b<=s;b++){const S=(s+1)*(x-1)+(b-1),T=(s+1)*x+(b-1),M=(s+1)*x+b,R=(s+1)*(x-1)+b;m.push(S,T,R),m.push(T,M,R)}}function _(){for(let x=0;x<=n;x++)for(let b=0;b<=s;b++)c.x=x/n,c.y=b/s,h.push(c.x,c.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new J0(new Bv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class vL extends fr{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const n=[],r=new Set,s=new Ce,o=new Ce;if(t.index!==null){const a=t.attributes.position,u=t.index;let l=t.groups;l.length===0&&(l=[{start:0,count:u.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const p=l[c],f=p.start,h=p.count;for(let m=f,y=f+h;m<y;m+=3)for(let v=0;v<3;v++){const g=u.getX(m+v),_=u.getX(m+(v+1)%3);s.fromBufferAttribute(a,g),o.fromBufferAttribute(a,_),uT(s,o,r)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}}else{const a=t.attributes.position;for(let u=0,l=a.count/3;u<l;u++)for(let c=0;c<3;c++){const d=3*u+c,p=3*u+(c+1)%3;s.fromBufferAttribute(a,d),o.fromBufferAttribute(a,p),uT(s,o,r)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new zt(n,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function uT(i,t,n){const r=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return n.has(r)===!0||n.has(s)===!0?!1:(n.add(r),n.add(s),!0)}var cT=Object.freeze({__proto__:null,BoxGeometry:Rc,CapsuleGeometry:B0,CircleGeometry:F0,ConeGeometry:U0,CylinderGeometry:md,DodecahedronGeometry:N0,EdgesGeometry:pL,ExtrudeGeometry:H0,IcosahedronGeometry:z0,LatheGeometry:Zp,OctahedronGeometry:$p,PlaneGeometry:rl,PolyhedronGeometry:ru,RingGeometry:V0,ShapeGeometry:W0,SphereGeometry:em,TetrahedronGeometry:X0,TorusGeometry:Y0,TorusKnotGeometry:q0,TubeGeometry:J0,WireframeGeometry:vL});class _L extends Tn{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class xL extends Ho{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Pc extends Tn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Cn extends Pc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class bL extends Tn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wt(16777215),this.specular=new wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class wL extends Tn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class SL extends Tn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class AL extends Tn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ML extends Tn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class EL extends xi{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Qu(i,t,n){return!i||!n&&i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function TL(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function CL(i){function t(s,o){return i[s]-i[o]}const n=i.length,r=new Array(n);for(let s=0;s!==n;++s)r[s]=s;return r.sort(t),r}function Gb(i,t,n){const r=i.length,s=new i.constructor(r);for(let o=0,a=0;a!==r;++o){const u=n[o]*t;for(let l=0;l!==t;++l)s[a++]=i[u+l]}return s}function GS(i,t,n,r){let s=1,o=i[0];for(;o!==void 0&&o[r]===void 0;)o=i[s++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(t.push(o.time),n.push.apply(n,a)),o=i[s++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(t.push(o.time),a.toArray(n,n.length)),o=i[s++];while(o!==void 0);else do a=o[r],a!==void 0&&(t.push(o.time),n.push(a)),o=i[s++];while(o!==void 0)}function kH(i,t,n,r,s=30){const o=i.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],d=c.getValueSize(),p=[],f=[];for(let h=0;h<c.times.length;++h){const m=c.times[h]*s;if(!(m<n||m>=r)){p.push(c.times[h]);for(let y=0;y<d;++y)f.push(c.values[h*d+y])}}p.length!==0&&(c.times=Qu(p,c.times.constructor),c.values=Qu(f,c.values.constructor),a.push(c))}o.tracks=a;let u=1/0;for(let l=0;l<o.tracks.length;++l)u>o.tracks[l].times[0]&&(u=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*u);return o.resetDuration(),o}function OH(i,t=0,n=i,r=30){r<=0&&(r=30);const s=n.tracks.length,o=t/r;for(let a=0;a<s;++a){const u=n.tracks[a],l=u.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(g){return g.name===u.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let f=0;const h=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);const m=u.times.length-1;let y;if(o<=u.times[0]){const g=d,_=p-d;y=u.values.slice(g,_)}else if(o>=u.times[m]){const g=m*p+d,_=g+p-d;y=u.values.slice(g,_)}else{const g=u.createInterpolant(),_=d,x=p-d;g.evaluate(o),y=g.resultBuffer.slice(_,x)}l==="quaternion"&&new Yr().fromArray(y).normalize().conjugate().toArray(y);const v=c.times.length;for(let g=0;g<v;++g){const _=g*h+f;if(l==="quaternion")Yr.multiplyQuaternionsFlat(c.values,_,y,0,c.values,_);else{const x=h-f*2;for(let b=0;b<x;++b)c.values[_+b]-=y[b]}}}return i.blendMode=wS,i}const BH={convertArray:Qu,isTypedArray:TL,getKeyframeOrder:CL,sortedArray:Gb,flattenJSON:GS,subclip:kH,makeClipAdditive:OH};class Ic{constructor(t,n,r,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let r=this._cachedIndex,s=n[r],o=n[r-1];e:{t:{let a;r:{n:if(!(t<s)){for(let u=r+2;;){if(s===void 0){if(t<o)break n;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(o=s,s=n[++r],t<s)break t}a=n.length;break r}if(!(t>=o)){const u=n[1];t<u&&(r=2,o=u);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(s=o,o=n[--r-1],t>=o)break t}a=r,r=0;break r}break e}for(;r<a;){const u=r+a>>>1;t<n[u]?a=u:r=u+1}if(s=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=t*s;for(let a=0;a!==s;++a)n[a]=r[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RL extends Ic{constructor(t,n,r,s){super(t,n,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:qu,endingEnd:qu}}intervalChanged_(t,n,r){const s=this.parameterPositions;let o=t-2,a=t+1,u=s[o],l=s[a];if(u===void 0)switch(this.getSettings_().endingStart){case Ju:o=t,u=2*n-r;break;case gp:o=s.length-2,u=n+s[o]-s[o+1];break;default:o=t,u=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Ju:a=t,l=2*r-n;break;case gp:a=1,l=r+s[1]-s[0];break;default:a=t-1,l=n}const c=(r-n)*.5,d=this.valueSize;this._weightPrev=c/(n-u),this._weightNext=c/(l-r),this._offsetPrev=o*d,this._offsetNext=a*d}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,u=this.valueSize,l=t*u,c=l-u,d=this._offsetPrev,p=this._offsetNext,f=this._weightPrev,h=this._weightNext,m=(r-n)/(s-n),y=m*m,v=y*m,g=-f*v+2*f*y-f*m,_=(1+f)*v+(-1.5-2*f)*y+(-.5+f)*m+1,x=(-1-h)*v+(1.5+h)*y+.5*m,b=h*v-h*y;for(let S=0;S!==u;++S)o[S]=g*a[d+S]+_*a[c+S]+x*a[l+S]+b*a[p+S];return o}}class HS extends Ic{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,u=this.valueSize,l=t*u,c=l-u,d=(r-n)/(s-n),p=1-d;for(let f=0;f!==u;++f)o[f]=a[c+f]*p+a[l+f]*d;return o}}class PL extends Ic{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Wo{constructor(t,n,r,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Qu(n,this.TimeBufferType),this.values=Qu(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(t);else{r={name:t.name,times:Qu(t.times,Array),values:Qu(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(r.interpolation=s)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new PL(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new HS(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new RL(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case vc:n=this.InterpolantFactoryMethodDiscrete;break;case Ql:n=this.InterpolantFactoryMethodLinear;break;case _y:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vc;case this.InterpolantFactoryMethodLinear:return Ql;case this.InterpolantFactoryMethodSmooth:return _y}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]*=t}return this}trim(t,n){const r=this.times,s=r.length;let o=0,a=s-1;for(;o!==s&&r[o]<t;)++o;for(;a!==-1&&r[a]>n;)--a;if(++a,o!==0||a!==s){o>=a&&(a=Math.max(a,1),o=a-1);const u=this.getValueSize();this.times=r.slice(o,a),this.values=this.values.slice(o*u,a*u)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let u=0;u!==o;u++){const l=r[u];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,l),t=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,l,a),t=!1;break}a=l}if(s!==void 0&&TL(s))for(let u=0,l=s.length;u!==l;++u){const c=s[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===_y,o=t.length-1;let a=1;for(let u=1;u<o;++u){let l=!1;const c=t[u],d=t[u+1];if(c!==d&&(u!==1||c!==t[0]))if(s)l=!0;else{const p=u*r,f=p-r,h=p+r;for(let m=0;m!==r;++m){const y=n[p+m];if(y!==n[f+m]||y!==n[h+m]){l=!0;break}}}if(l){if(u!==a){t[a]=t[u];const p=u*r,f=a*r;for(let h=0;h!==r;++h)n[f+h]=n[p+h]}++a}}if(o>0){t[a]=t[o];for(let u=o*r,l=a*r,c=0;c!==r;++c)n[l+c]=n[u+c];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=n.slice(0,a*r)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),r=this.constructor,s=new r(this.name,t,n);return s.createInterpolant=this.createInterpolant,s}}Wo.prototype.TimeBufferType=Float32Array;Wo.prototype.ValueBufferType=Float32Array;Wo.prototype.DefaultInterpolation=Ql;class Lc extends Wo{constructor(t,n,r){super(t,n,r)}}Lc.prototype.ValueTypeName="bool";Lc.prototype.ValueBufferType=Array;Lc.prototype.DefaultInterpolation=vc;Lc.prototype.InterpolantFactoryMethodLinear=void 0;Lc.prototype.InterpolantFactoryMethodSmooth=void 0;class zS extends Wo{}zS.prototype.ValueTypeName="color";class Qa extends Wo{}Qa.prototype.ValueTypeName="number";class IL extends Ic{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,u=this.valueSize,l=(r-n)/(s-n);let c=t*u;for(let d=c+u;c!==d;c+=4)Yr.slerpFlat(o,0,a,c-u,a,c,l);return o}}class Za extends Wo{InterpolantFactoryMethodLinear(t){return new IL(this.times,this.values,this.getValueSize(),t)}}Za.prototype.ValueTypeName="quaternion";Za.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends Wo{constructor(t,n,r){super(t,n,r)}}jc.prototype.ValueTypeName="string";jc.prototype.ValueBufferType=Array;jc.prototype.DefaultInterpolation=vc;jc.prototype.InterpolantFactoryMethodLinear=void 0;jc.prototype.InterpolantFactoryMethodSmooth=void 0;class $a extends Wo{}$a.prototype.ValueTypeName="vector";class bc{constructor(t="",n=-1,r=[],s=w0){this.name=t,this.tracks=r,this.duration=n,this.blendMode=s,this.uuid=Ds(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],r=t.tracks,s=1/(t.fps||1);for(let a=0,u=r.length;a!==u;++a)n.push(UH(r[a]).scale(s));const o=new this(t.name,t.duration,n,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const n=[],r=t.tracks,s={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,a=r.length;o!==a;++o)n.push(Wo.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(t,n,r,s){const o=n.length,a=[];for(let u=0;u<o;u++){let l=[],c=[];l.push((u+o-1)%o,u,(u+1)%o),c.push(0,1,0);const d=CL(l);l=Gb(l,1,d),c=Gb(c,1,d),!s&&l[0]===0&&(l.push(o),c.push(c[0])),a.push(new Qa(".morphTargetInfluences["+n[u].name+"]",l,c).scale(1/r))}return new this(t,-1,a)}static findByName(t,n){let r=t;if(!Array.isArray(t)){const s=t;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===n)return r[s];return null}static CreateClipsFromMorphTargetSequences(t,n,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,l=t.length;u<l;u++){const c=t[u],d=c.name.match(o);if(d&&d.length>1){const p=d[1];let f=s[p];f||(s[p]=f=[]),f.push(c)}}const a=[];for(const u in s)a.push(this.CreateFromMorphTargetSequence(u,s[u],n,r));return a}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,f,h,m,y){if(h.length!==0){const v=[],g=[];GS(h,v,g,m),v.length!==0&&y.push(new p(f,v,g))}},s=[],o=t.name||"default",a=t.fps||30,u=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let p=0;p<c.length;p++){const f=c[p].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let m;for(m=0;m<f.length;m++)if(f[m].morphTargets)for(let y=0;y<f[m].morphTargets.length;y++)h[f[m].morphTargets[y]]=-1;for(const y in h){const v=[],g=[];for(let _=0;_!==f[m].morphTargets.length;++_){const x=f[m];v.push(x.time),g.push(x.morphTarget===y?1:0)}s.push(new Qa(".morphTargetInfluence["+y+"]",v,g))}l=h.length*a}else{const h=".bones["+n[p].name+"]";r($a,h+".position",f,"pos",s),r(Za,h+".quaternion",f,"rot",s),r($a,h+".scale",f,"scl",s)}}return s.length===0?null:new this(o,l,s,u)}resetDuration(){const t=this.tracks;let n=0;for(let r=0,s=t.length;r!==s;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function FH(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qa;case"vector":case"vector2":case"vector3":case"vector4":return $a;case"color":return zS;case"quaternion":return Za;case"bool":case"boolean":return Lc;case"string":return jc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function UH(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=FH(i.type);if(i.times===void 0){const n=[],r=[];GS(i.keys,n,r,"value"),i.times=n,i.values=r}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Ua={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class VS{constructor(t,n,r){const s=this;let o=!1,a=0,u=0,l;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(d){u++,o===!1&&s.onStart!==void 0&&s.onStart(d,a,u),o=!0},this.itemEnd=function(d){a++,s.onProgress!==void 0&&s.onProgress(d,a,u),a===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,p){return c.push(d,p),this},this.removeHandler=function(d){const p=c.indexOf(d);return p!==-1&&c.splice(p,2),this},this.getHandler=function(d){for(let p=0,f=c.length;p<f;p+=2){const h=c[p],m=c[p+1];if(h.global&&(h.lastIndex=0),h.test(d))return m}return null}}}const jf=new VS;class bi{constructor(t){this.manager=t!==void 0?t:jf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const r=this;return new Promise(function(s,o){r.load(t,s,n,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}bi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ta={};class NH extends Error{constructor(t,n){super(t),this.response=n}}class es extends bi{constructor(t){super(t)}load(t,n,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Ua.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(o),this.manager.itemEnd(t)},0),o;if(Ta[t]!==void 0){Ta[t].push({onLoad:n,onProgress:r,onError:s});return}Ta[t]=[],Ta[t].push({onLoad:n,onProgress:r,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Ta[t],p=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),h=f?parseInt(f):0,m=h!==0;let y=0;const v=new ReadableStream({start(g){_();function _(){p.read().then(({done:x,value:b})=>{if(x)g.close();else{y+=b.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:y,total:h});for(let T=0,M=d.length;T<M;T++){const R=d[T];R.onProgress&&R.onProgress(S)}g.enqueue(b),_()}},x=>{g.error(x)})}}});return new Response(v)}else throw new NH(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,u));case"json":return c.json();default:if(u===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(u),f=p&&p[1]?p[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(m=>h.decode(m))}}}).then(c=>{Ua.add(t,c);const d=Ta[t];delete Ta[t];for(let p=0,f=d.length;p<f;p++){const h=d[p];h.onLoad&&h.onLoad(c)}}).catch(c=>{const d=Ta[t];if(d===void 0)throw this.manager.itemError(t),c;delete Ta[t];for(let p=0,f=d.length;p<f;p++){const h=d[p];h.onError&&h.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class GH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new es(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{n(o.parse(JSON.parse(u)))}catch(l){s?s(l):console.error(l),o.manager.itemError(t)}},r,s)}parse(t){const n=[];for(let r=0;r<t.length;r++){const s=bc.parse(t[r]);n.push(s)}return n}}class HH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=[],u=new k0,l=new es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function d(p){l.load(t[p],function(f){const h=o.parse(f,!0);a[p]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(u.minFilter=sn),u.image=a,u.format=h.format,u.needsUpdate=!0,n&&n(u))},r,s)}if(Array.isArray(t))for(let p=0,f=t.length;p<f;++p)d(p);else l.load(t,function(p){const f=o.parse(p,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let m=0;m<h;m++){a[m]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)a[m].mipmaps.push(f.mipmaps[m*f.mipmapCount+y]),a[m].format=f.format,a[m].width=f.width,a[m].height=f.height}u.image=a}else u.image.width=f.width,u.image.height=f.height,u.mipmaps=f.mipmaps;f.mipmapCount===1&&(u.minFilter=sn),u.format=f.format,u.needsUpdate=!0,n&&n(u)},r,s);return u}}class Tp extends bi{constructor(t){super(t)}load(t,n,r,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=Ua.get(t);if(a!==void 0)return o.manager.itemStart(t),setTimeout(function(){n&&n(a),o.manager.itemEnd(t)},0),a;const u=wp("img");function l(){d(),Ua.add(t,this),n&&n(this),o.manager.itemEnd(t)}function c(p){d(),s&&s(p),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){u.removeEventListener("load",l,!1),u.removeEventListener("error",c,!1)}return u.addEventListener("load",l,!1),u.addEventListener("error",c,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}class zH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=new qp;o.colorSpace=yi;const a=new Tp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let u=0;function l(c){a.load(t[c],function(d){o.images[c]=d,u++,u===6&&(o.needsUpdate=!0,n&&n(o))},void 0,s)}for(let c=0;c<t.length;++c)l(c);return o}}class VH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new ca,u=new es(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(t,function(l){let c;try{c=o.parse(l)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:ms,a.wrapT=c.wrapT!==void 0?c.wrapT:ms,a.magFilter=c.magFilter!==void 0?c.magFilter:sn,a.minFilter=c.minFilter!==void 0?c.minFilter:sn,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=gs),c.mipmapCount===1&&(a.minFilter=sn),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,n&&n(a,c)},r,s),a}}class WS extends bi{constructor(t){super(t)}load(t,n,r,s){const o=new Qr,a=new Tp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(u){o.image=u,o.needsUpdate=!0,n!==void 0&&n(o)},r,s),o}}class nu extends br{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new wt(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class LL extends nu{constructor(t,n,r){super(t,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(br.DEFAULT_UP),this.updateMatrix(),this.groundColor=new wt(n)}copy(t,n){return super.copy(t,n),this.groundColor.copy(t.groundColor),this}}const nx=new Gt,fT=new Ce,dT=new Ce;class XS{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jp,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new _r(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,r=this.matrix;fT.setFromMatrixPosition(t.matrixWorld),n.position.copy(fT),dT.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(dT),n.updateMatrixWorld(),nx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(nx)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class WH extends XS{constructor(){super(new gn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const n=this.camera,r=nd*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=t.distance||n.far;(r!==n.fov||s!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=s,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class K0 extends nu{constructor(t,n,r=0,s=Math.PI/3,o=0,a=2){super(t,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(br.DEFAULT_UP),this.updateMatrix(),this.target=new br,this.distance=r,this.angle=s,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new WH}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const hT=new Gt,eh=new Ce,ix=new Ce;class XH extends XS{constructor(){super(new gn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new _r(2,1,1,1),new _r(0,1,1,1),new _r(3,1,1,1),new _r(1,1,1,1),new _r(3,0,1,1),new _r(1,0,1,1)],this._cubeDirections=[new Ce(1,0,0),new Ce(-1,0,0),new Ce(0,0,1),new Ce(0,0,-1),new Ce(0,1,0),new Ce(0,-1,0)],this._cubeUps=[new Ce(0,1,0),new Ce(0,1,0),new Ce(0,1,0),new Ce(0,1,0),new Ce(0,0,1),new Ce(0,0,-1)]}updateMatrices(t,n=0){const r=this.camera,s=this.matrix,o=t.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),eh.setFromMatrixPosition(t.matrixWorld),r.position.copy(eh),ix.copy(r.position),ix.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(ix),r.updateMatrixWorld(),s.makeTranslation(-eh.x,-eh.y,-eh.z),hT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hT)}}class Q0 extends nu{constructor(t,n,r=0,s=2){super(t,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new XH}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class YH extends XS{constructor(){super(new ua(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Z0 extends nu{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(br.DEFAULT_UP),this.updateMatrix(),this.target=new br,this.shadow=new YH}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class jL extends nu{constructor(t,n){super(t,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class DL extends nu{constructor(t,n,r=10,s=10){super(t,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const n=super.toJSON(t);return n.object.width=this.width,n.object.height=this.height,n}}class kL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ce)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const r=t.x,s=t.y,o=t.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*s),n.addScaledVector(a[2],.488603*o),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*s)),n.addScaledVector(a[5],1.092548*(s*o)),n.addScaledVector(a[6],.315392*(3*o*o-1)),n.addScaledVector(a[7],1.092548*(r*o)),n.addScaledVector(a[8],.546274*(r*r-s*s)),n}getIrradianceAt(t,n){const r=t.x,s=t.y,o=t.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*s),n.addScaledVector(a[2],2*.511664*o),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*s),n.addScaledVector(a[5],2*.429043*s*o),n.addScaledVector(a[6],.743125*o*o-.247708),n.addScaledVector(a[7],2*.429043*r*o),n.addScaledVector(a[8],.429043*(r*r-s*s)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(t.coefficients[r],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(t.coefficients[r],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(t,n+s*3);return this}toArray(t=[],n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(t,n+s*3);return t}static getBasisAt(t,n){const r=t.x,s=t.y,o=t.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*s,n[5]=1.092548*s*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-s*s)}}class OL extends nu{constructor(t=new kL,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const n=super.toJSON(t);return n.object.sh=this.sh.toArray(),n}}class $0 extends bi{constructor(t){super(t),this.textures={}}load(t,n,r,s){const o=this,a=new es(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(u){try{n(o.parse(JSON.parse(u)))}catch(l){s?s(l):console.error(l),o.manager.itemError(t)}},r,s)}parse(t){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new wt().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const a=t.uniforms[o];switch(s.uniforms[o]={},a.type){case"t":s.uniforms[o].value=r(a.value);break;case"c":s.uniforms[o].value=new wt().setHex(a.value);break;case"v2":s.uniforms[o].value=new mt().fromArray(a.value);break;case"v3":s.uniforms[o].value=new Ce().fromArray(a.value);break;case"v4":s.uniforms[o].value=new _r().fromArray(a.value);break;case"m3":s.uniforms[o].value=new cr().fromArray(a.value);break;case"m4":s.uniforms[o].value=new Gt().fromArray(a.value);break;default:s.uniforms[o].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)s.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=r(t.map)),t.matcap!==void 0&&(s.matcap=r(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=r(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new mt().fromArray(o)}return t.displacementMap!==void 0&&(s.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=r(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=r(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=r(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=r(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=r(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new mt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=r(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=r(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=r(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=r(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=r(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return $0.createMaterialFromType(t)}static createMaterialFromType(t){const n={ShadowMaterial:_L,SpriteMaterial:DS,RawShaderMaterial:xL,ShaderMaterial:Ho,PointsMaterial:Qp,MeshPhysicalMaterial:Cn,MeshStandardMaterial:Pc,MeshPhongMaterial:bL,MeshToonMaterial:wL,MeshNormalMaterial:SL,MeshLambertMaterial:AL,MeshDepthMaterial:T0,MeshDistanceMaterial:C0,MeshBasicMaterial:Jn,MeshMatcapMaterial:ML,LineDashedMaterial:EL,LineBasicMaterial:xi,Material:Tn};return new n[t]}}class ks{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let n="";for(let r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(t){const n=t.lastIndexOf("/");return n===-1?"./":t.slice(0,n+1)}static resolveURL(t,n){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(t)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:n+t)}}class YS extends fr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class BL extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new es(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(u){try{n(o.parse(JSON.parse(u)))}catch(l){s?s(l):console.error(l),o.manager.itemError(t)}},r,s)}parse(t){const n={},r={};function s(h,m){if(n[m]!==void 0)return n[m];const v=h.interleavedBuffers[m],g=o(h,v.buffer),_=Pf(v.type,g),x=new hd(_,v.stride);return x.uuid=v.uuid,n[m]=x,x}function o(h,m){if(r[m]!==void 0)return r[m];const v=h.arrayBuffers[m],g=new Uint32Array(v).buffer;return r[m]=g,g}const a=t.isInstancedBufferGeometry?new YS:new fr,u=t.data.index;if(u!==void 0){const h=Pf(u.type,u.array);a.setIndex(new Tr(h,1))}const l=t.data.attributes;for(const h in l){const m=l[h];let y;if(m.isInterleavedBufferAttribute){const v=s(t.data,m.data);y=new Ja(v,m.itemSize,m.offset,m.normalized)}else{const v=Pf(m.type,m.array),g=m.isInstancedBufferAttribute?Ka:Tr;y=new g(v,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),m.usage!==void 0&&y.setUsage(m.usage),a.setAttribute(h,y)}const c=t.data.morphAttributes;if(c)for(const h in c){const m=c[h],y=[];for(let v=0,g=m.length;v<g;v++){const _=m[v];let x;if(_.isInterleavedBufferAttribute){const b=s(t.data,_.data);x=new Ja(b,_.itemSize,_.offset,_.normalized)}else{const b=Pf(_.type,_.array);x=new Tr(b,_.itemSize,_.normalized)}_.name!==void 0&&(x.name=_.name),y.push(x)}a.morphAttributes[h]=y}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(let h=0,m=p.length;h!==m;++h){const y=p[h];a.addGroup(y.start,y.count,y.materialIndex)}const f=t.data.boundingSphere;if(f!==void 0){const h=new Ce;f.center!==void 0&&h.fromArray(f.center),a.boundingSphere=new Qn(h,f.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class qH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=this.path===""?ks.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const u=new es(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(l){let c=null;try{c=JSON.parse(l)}catch(p){s!==void 0&&s(p),console.error("THREE:ObjectLoader: Can't parse "+t+".",p.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(c,n)},r,s)}async loadAsync(t,n){const r=this,s=this.path===""?ks.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const o=new es(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(t,n),u=JSON.parse(a),l=u.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await r.parseAsync(u)}parse(t,n){const r=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){n!==void 0&&n(c)}),u=this.parseTextures(t.textures,a),l=this.parseMaterials(t.materials,u),c=this.parseObject(t.object,o,l,u,r),d=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),n!==void 0){let p=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(c)}return c}async parseAsync(t){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,r),o=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,o),u=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,s,u,a,n),c=this.parseSkeletons(t.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(t){const n={};if(t!==void 0)for(let r=0,s=t.length;r<s;r++){const o=new ac().fromJSON(t[r]);n[o.uuid]=o}return n}parseSkeletons(t,n){const r={},s={};if(n.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),t!==void 0)for(let o=0,a=t.length;o<a;o++){const u=new pd().fromJSON(t[o],s);r[u.uuid]=u}return r}parseGeometries(t,n){const r={};if(t!==void 0){const s=new BL;for(let o=0,a=t.length;o<a;o++){let u;const l=t[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(l);break;default:l.type in cT?u=cT[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}u.uuid=l.uuid,l.name!==void 0&&(u.name=l.name),l.userData!==void 0&&(u.userData=l.userData),r[l.uuid]=u}}return r}parseMaterials(t,n){const r={},s={};if(t!==void 0){const o=new $0;o.setTextures(n);for(let a=0,u=t.length;a<u;a++){const l=t[a];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),s[l.uuid]=r[l.uuid]}}return s}parseAnimations(t){const n={};if(t!==void 0)for(let r=0;r<t.length;r++){const s=t[r],o=bc.parse(s);n[o.uuid]=o}return n}parseImages(t,n){const r=this,s={};let o;function a(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function u(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(d)}else return l.data?{data:Pf(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){const l=new VS(n);o=new Tp(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,d=t.length;c<d;c++){const p=t[c],f=p.url;if(Array.isArray(f)){const h=[];for(let m=0,y=f.length;m<y;m++){const v=f[m],g=u(v);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new ca(g.data,g.width,g.height)))}s[p.uuid]=new Ku(h)}else{const h=u(p.url);s[p.uuid]=new Ku(h)}}}return s}async parseImagesAsync(t){const n=this,r={};let s;async function o(a){if(typeof a=="string"){const u=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return await s.loadAsync(l)}else return a.data?{data:Pf(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new Tp(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,u=t.length;a<u;a++){const l=t[a],c=l.url;if(Array.isArray(c)){const d=[];for(let p=0,f=c.length;p<f;p++){const h=c[p],m=await o(h);m!==null&&(m instanceof HTMLImageElement?d.push(m):d.push(new ca(m.data,m.width,m.height)))}r[l.uuid]=new Ku(d)}else{const d=await o(l.url);r[l.uuid]=new Ku(d)}}}return r}parseTextures(t,n){function r(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const s={};if(t!==void 0)for(let o=0,a=t.length;o<a;o++){const u=t[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),n[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const l=n[u.image],c=l.data;let d;Array.isArray(c)?(d=new qp,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new ca:d=new Qr,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=u.uuid,u.name!==void 0&&(d.name=u.name),u.mapping!==void 0&&(d.mapping=r(u.mapping,JH)),u.channel!==void 0&&(d.channel=u.channel),u.offset!==void 0&&d.offset.fromArray(u.offset),u.repeat!==void 0&&d.repeat.fromArray(u.repeat),u.center!==void 0&&d.center.fromArray(u.center),u.rotation!==void 0&&(d.rotation=u.rotation),u.wrap!==void 0&&(d.wrapS=r(u.wrap[0],pT),d.wrapT=r(u.wrap[1],pT)),u.format!==void 0&&(d.format=u.format),u.internalFormat!==void 0&&(d.internalFormat=u.internalFormat),u.type!==void 0&&(d.type=u.type),u.colorSpace!==void 0&&(d.colorSpace=u.colorSpace),u.minFilter!==void 0&&(d.minFilter=r(u.minFilter,mT)),u.magFilter!==void 0&&(d.magFilter=r(u.magFilter,mT)),u.anisotropy!==void 0&&(d.anisotropy=u.anisotropy),u.flipY!==void 0&&(d.flipY=u.flipY),u.generateMipmaps!==void 0&&(d.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(d.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(d.compareFunction=u.compareFunction),u.userData!==void 0&&(d.userData=u.userData),s[u.uuid]=d}return s}parseObject(t,n,r,s,o){let a;function u(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let m=0,y=f.length;m<y;m++){const v=f[m];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),h.push(r[v])}return h}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return s[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),s[f]}let d,p;switch(t.type){case"Scene":a=new jS,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new wt(t.background):a.background=c(t.background)),t.environment!==void 0&&(a.environment=c(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new P0(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new R0(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new gn(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new ua(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new jL(t.color,t.intensity);break;case"DirectionalLight":a=new Z0(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new Q0(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new DL(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new K0(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new LL(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new OL().fromJSON(t);break;case"SkinnedMesh":d=u(t.geometry),p=l(t.material),a=new I0(d,p),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":d=u(t.geometry),p=l(t.material),a=new dn(d,p);break;case"InstancedMesh":d=u(t.geometry),p=l(t.material);const f=t.count,h=t.instanceMatrix,m=t.instanceColor;a=new L0(d,p,f),a.instanceMatrix=new Ka(new Float32Array(h.array),16),m!==void 0&&(a.instanceColor=new Ka(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":d=u(t.geometry),p=l(t.material),a=new lL(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,p),a.geometry=d,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._visibility=t.visibility,a._active=t.active,a._bounds=t.bounds.map(y=>{const v=new Hn;v.min.fromArray(y.boxMin),v.max.fromArray(y.boxMax);const g=new Qn;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:v,sphereInitialized:y.sphereInitialized,sphere:g}}),a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._geometryCount=t.geometryCount,a._matricesTexture=c(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=c(t.colorsTexture.uuid));break;case"LOD":a=new aL;break;case"Line":a=new da(u(t.geometry),l(t.material));break;case"LineLoop":a=new j0(u(t.geometry),l(t.material));break;case"LineSegments":a=new fo(u(t.geometry),l(t.material));break;case"PointCloud":case"Points":a=new D0(u(t.geometry),l(t.material));break;case"Sprite":a=new oL(l(t.material));break;case"Group":a=new oo;break;case"Bone":a=new Kp;break;default:a=new br}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const f=t.children;for(let h=0;h<f.length;h++)a.add(this.parseObject(f[h],n,r,s,o))}if(t.animations!==void 0){const f=t.animations;for(let h=0;h<f.length;h++){const m=f[h];a.animations.push(o[m])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const f=t.levels;for(let h=0;h<f.length;h++){const m=f[h],y=a.getObjectByProperty("uuid",m.object);y!==void 0&&a.addLevel(y,m.distance,m.hysteresis)}}return a}bindSkeletons(t,n){Object.keys(n).length!==0&&t.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=n[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}bindLightTargets(t){t.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,s=t.getObjectByProperty("uuid",r);s!==void 0?n.target=s:n.target=new br}})}}const JH={UVMapping:m0,CubeReflectionMapping:Ya,CubeRefractionMapping:Kl,EquirectangularReflectionMapping:pp,EquirectangularRefractionMapping:mp,CubeUVReflectionMapping:cd},pT={RepeatWrapping:Uo,ClampToEdgeWrapping:ms,MirroredRepeatWrapping:mc},mT={NearestFilter:Nn,NearestMipmapNearestFilter:zp,NearestMipmapLinearFilter:kl,LinearFilter:sn,LinearMipmapNearestFilter:nc,LinearMipmapLinearFilter:gs};class qS extends bi{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,n,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=Ua.get(t);if(a!==void 0){if(o.manager.itemStart(t),a.then){a.then(c=>{n&&n(c),o.manager.itemEnd(t)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){n&&n(a),o.manager.itemEnd(t)},0),a}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const l=fetch(t,u).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ua.add(t,c),n&&n(c),o.manager.itemEnd(t),c}).catch(function(c){s&&s(c),Ua.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Ua.add(t,l),o.manager.itemStart(t)}}let Vg;class JS{static getContext(){return Vg===void 0&&(Vg=new(window.AudioContext||window.webkitAudioContext)),Vg}static setContext(t){Vg=t}}class KH extends bi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new es(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{const c=l.slice(0);JS.getContext().decodeAudioData(c,function(p){n(p)}).catch(u)}catch(c){u(c)}},r,s);function u(l){s?s(l):console.error(l),o.manager.itemError(t)}}}const gT=new Gt,yT=new Gt,Tu=new Gt;class QH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const n=this._cache;if(n.focus!==t.focus||n.fov!==t.fov||n.aspect!==t.aspect*this.aspect||n.near!==t.near||n.far!==t.far||n.zoom!==t.zoom||n.eyeSep!==this.eyeSep){n.focus=t.focus,n.fov=t.fov,n.aspect=t.aspect*this.aspect,n.near=t.near,n.far=t.far,n.zoom=t.zoom,n.eyeSep=this.eyeSep,Tu.copy(t.projectionMatrix);const s=n.eyeSep/2,o=s*n.near/n.focus,a=n.near*Math.tan(sc*n.fov*.5)/n.zoom;let u,l;yT.elements[12]=-s,gT.elements[12]=s,u=-a*n.aspect+o,l=a*n.aspect+o,Tu.elements[0]=2*n.near/(l-u),Tu.elements[8]=(l+u)/(l-u),this.cameraL.projectionMatrix.copy(Tu),u=-a*n.aspect-o,l=a*n.aspect-o,Tu.elements[0]=2*n.near/(l-u),Tu.elements[8]=(l+u)/(l-u),this.cameraR.projectionMatrix.copy(Tu)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(yT),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(gT)}}class KS{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=vT();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}function vT(){return performance.now()}const Cu=new Ce,_T=new Yr,ZH=new Ce,Ru=new Ce;class $H extends br{constructor(){super(),this.type="AudioListener",this.context=JS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cu,_T,ZH),Ru.set(0,0,-1).applyQuaternion(_T),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Cu.x,s),n.positionY.linearRampToValueAtTime(Cu.y,s),n.positionZ.linearRampToValueAtTime(Cu.z,s),n.forwardX.linearRampToValueAtTime(Ru.x,s),n.forwardY.linearRampToValueAtTime(Ru.y,s),n.forwardZ.linearRampToValueAtTime(Ru.z,s),n.upX.linearRampToValueAtTime(r.x,s),n.upY.linearRampToValueAtTime(r.y,s),n.upZ.linearRampToValueAtTime(r.z,s)}else n.setPosition(Cu.x,Cu.y,Cu.z),n.setOrientation(Ru.x,Ru.y,Ru.z,r.x,r.y,r.z)}}class FL extends br{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Pu=new Ce,xT=new Yr,e9=new Ce,Iu=new Ce;class t9 extends FL{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,n,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Pu,xT,e9),Iu.set(0,0,1).applyQuaternion(xT);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Pu.x,r),n.positionY.linearRampToValueAtTime(Pu.y,r),n.positionZ.linearRampToValueAtTime(Pu.z,r),n.orientationX.linearRampToValueAtTime(Iu.x,r),n.orientationY.linearRampToValueAtTime(Iu.y,r),n.orientationZ.linearRampToValueAtTime(Iu.z,r)}else n.setPosition(Pu.x,Pu.y,Pu.z),n.setOrientation(Iu.x,Iu.y,Iu.z)}}class r9{constructor(t,n=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)t+=n[r];return t/n.length}}class UL{constructor(t,n,r){this.binding=t,this.valueSize=r;let s,o,a;switch(n){case"quaternion":s=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const r=this.buffer,s=this.valueSize,o=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let u=0;u!==s;++u)r[o+u]=r[u];a=n}else{a+=n;const u=n/a;this._mixBufferRegion(r,o,0,u,s)}this.cumulativeWeight=a}accumulateAdditive(t){const n=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,s,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,r=this.buffer,s=t*n+n,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,s,l,1-o,n)}a>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){u.setValue(r,s);break}}saveOriginalState(){const t=this.binding,n=this.buffer,r=this.valueSize,s=r*this._origIndex;t.getValue(n,s);for(let o=r,a=s;o!==a;++o)n[o]=n[s+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let r=t;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[t+r]}_select(t,n,r,s,o){if(s>=.5)for(let a=0;a!==o;++a)t[n+a]=t[r+a]}_slerp(t,n,r,s){Yr.slerpFlat(t,n,t,n,t,r,s)}_slerpAdditive(t,n,r,s,o){const a=this._workIndex*o;Yr.multiplyQuaternionsFlat(t,a,t,n,t,r),Yr.slerpFlat(t,n,t,n,t,a,s)}_lerp(t,n,r,s,o){const a=1-s;for(let u=0;u!==o;++u){const l=n+u;t[l]=t[l]*a+t[r+u]*s}}_lerpAdditive(t,n,r,s,o){for(let a=0;a!==o;++a){const u=n+a;t[u]=t[u]+t[r+a]*s}}}const QS="\\[\\]\\.:\\/",n9=new RegExp("["+QS+"]","g"),ZS="[^"+QS+"]",i9="[^"+QS.replace("\\.","")+"]",s9=/((?:WC+[\/:])*)/.source.replace("WC",ZS),o9=/(WCOD+)?/.source.replace("WCOD",i9),a9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ZS),l9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ZS),u9=new RegExp("^"+s9+o9+a9+l9+"$"),c9=["material","materials","bones","map"];class f9{constructor(t,n,r){const s=r||Pr.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,s)}getValue(t,n){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(t,n)}setValue(t,n){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].unbind()}}class Pr{constructor(t,n,r){this.path=n,this.parsedPath=r||Pr.parseTrackName(n),this.node=Pr.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new Pr.Composite(t,n,r):new Pr(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(n9,"")}static parseTrackName(t){const n=u9.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);c9.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const u=o[a];if(u.name===n||u.uuid===n)return u;const l=r(u.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=Pr.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===c){c=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(c!==void 0){if(t[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[c]}}const a=t[s];if(a===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Pr.Composite=f9;Pr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Pr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Pr.prototype.GetterByBindingType=[Pr.prototype._getValue_direct,Pr.prototype._getValue_array,Pr.prototype._getValue_arrayElement,Pr.prototype._getValue_toArray];Pr.prototype.SetterByBindingTypeAndVersioning=[[Pr.prototype._setValue_direct,Pr.prototype._setValue_direct_setNeedsUpdate,Pr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_array,Pr.prototype._setValue_array_setNeedsUpdate,Pr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_arrayElement,Pr.prototype._setValue_arrayElement_setNeedsUpdate,Pr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_fromArray,Pr.prototype._setValue_fromArray_setNeedsUpdate,Pr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class d9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ds(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let r=0,s=arguments.length;r!==s;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const t=this._objects,n=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length;let u,l=t.length,c=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const f=arguments[d],h=f.uuid;let m=n[h];if(m===void 0){m=l++,n[h]=m,t.push(f);for(let y=0,v=a;y!==v;++y)o[y].push(new Pr(f,r[y],s[y]))}else if(m<c){u=t[m];const y=--c,v=t[y];n[v.uuid]=m,t[m]=v,n[h]=y,t[y]=f;for(let g=0,_=a;g!==_;++g){const x=o[g],b=x[y];let S=x[m];x[m]=b,S===void 0&&(S=new Pr(f,r[g],s[g])),x[y]=S}}else t[m]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_;for(let a=0,u=arguments.length;a!==u;++a){const l=arguments[a],c=l.uuid,d=n[c];if(d!==void 0&&d>=o){const p=o++,f=t[p];n[f.uuid]=d,t[d]=f,n[c]=p,t[p]=l;for(let h=0,m=s;h!==m;++h){const y=r[h],v=y[p],g=y[d];y[d]=v,y[p]=g}}}this.nCachedObjects_=o}uncache(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_,a=t.length;for(let u=0,l=arguments.length;u!==l;++u){const c=arguments[u],d=c.uuid,p=n[d];if(p!==void 0)if(delete n[d],p<o){const f=--o,h=t[f],m=--a,y=t[m];n[h.uuid]=p,t[p]=h,n[y.uuid]=f,t[f]=y,t.pop();for(let v=0,g=s;v!==g;++v){const _=r[v],x=_[f],b=_[m];_[p]=x,_[f]=b,_.pop()}}else{const f=--a,h=t[f];f>0&&(n[h.uuid]=p),t[p]=h,t.pop();for(let m=0,y=s;m!==y;++m){const v=r[m];v[p]=v[f],v.pop()}}}this.nCachedObjects_=o}subscribe_(t,n){const r=this._bindingsIndicesByPath;let s=r[t];const o=this._bindings;if(s!==void 0)return o[s];const a=this._paths,u=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,p=new Array(c);s=o.length,r[t]=s,a.push(t),u.push(n),o.push(p);for(let f=d,h=l.length;f!==h;++f){const m=l[f];p[f]=new Pr(m,t,n)}return p}unsubscribe_(t){const n=this._bindingsIndicesByPath,r=n[t];if(r!==void 0){const s=this._paths,o=this._parsedPaths,a=this._bindings,u=a.length-1,l=a[u],c=t[u];n[c]=r,a[r]=l,a.pop(),o[r]=o[u],o.pop(),s[r]=s[u],s.pop()}}}class NL{constructor(t,n,r=null,s=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=s;const o=n.tracks,a=o.length,u=new Array(a),l={endingStart:qu,endingEnd:qu};for(let c=0;c!==a;++c){const d=o[c].createInterpolant(null);u[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=u,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,r){if(t.fadeOut(n),this.fadeIn(n),r){const s=this._clip.duration,o=t._clip.duration,a=o/s,u=s/o;t.warp(1,a,n),this.warp(u,1,n)}return this}crossFadeTo(t,n,r){return t.crossFadeFrom(this,n,r)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,r){const s=this._mixer,o=s.time,a=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const l=u.parameterPositions,c=u.sampleValues;return l[0]=o,l[1]=o+r,c[0]=t/a,c[1]=n/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,r,s){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const l=(t-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(t);const a=this._updateTime(n),u=this._updateWeight(t);if(u>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case wS:for(let d=0,p=l.length;d!==p;++d)l[d].evaluate(a),c[d].accumulateAdditive(u);break;case w0:default:for(let d=0,p=l.length;d!==p;++d)l[d].evaluate(a),c[d].accumulate(s,u)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(t)[0];n*=s,t>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const s=r.evaluate(t)[0];n*=s,t>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,r=this.loop;let s=this.time+t,o=this._loopCount;const a=r===jI;if(t===0)return o===-1?s:a&&(o&1)===1?n-s:s;if(r===II){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=n||s<0){const u=Math.floor(s/n);s-=n*u,o+=Math.abs(u);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const c=t<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(a&&(o&1)===1)return n-s}return s}_setEndings(t,n,r){const s=this._interpolantSettings;r?(s.endingStart=Ju,s.endingEnd=Ju):(t?s.endingStart=this.zeroSlopeAtStart?Ju:qu:s.endingStart=gp,n?s.endingEnd=this.zeroSlopeAtEnd?Ju:qu:s.endingEnd=gp)}_scheduleFading(t,n,r){const s=this._mixer,o=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const u=a.parameterPositions,l=a.sampleValues;return u[0]=o,l[0]=n,u[1]=o+t,l[1]=r,this}}const h9=new Float32Array(1);class p9 extends ha{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const r=t._localRoot||this._root,s=t._clip.tracks,o=s.length,a=t._propertyBindings,u=t._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let p=0;p!==o;++p){const f=s[p],h=f.name;let m=d[h];if(m!==void 0)++m.referenceCount,a[p]=m;else{if(m=a[p],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,h));continue}const y=n&&n._propertyBindings[p].binding.parsedPath;m=new UL(Pr.create(r,h,y),f.ValueTypeName,f.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,h),a[p]=m}u[p].resultBuffer=m.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const r=(t._localRoot||this._root).uuid,s=t._clip.uuid,o=this._actionsByClip[s];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,s,r)}const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,r){const s=this._actions,o=this._actionsByClip;let a=o[n];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[n]=a;else{const u=a.knownActions;t._byClipCacheIndex=u.length,u.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[r]=t}_removeInactiveAction(t){const n=this._actions,r=n[n.length-1],s=t._cacheIndex;r._cacheIndex=s,n[s]=r,n.pop(),t._cacheIndex=null;const o=t._clip.uuid,a=this._actionsByClip,u=a[o],l=u.knownActions,c=l[l.length-1],d=t._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),t._byClipCacheIndex=null;const p=u.actionByRoot,f=(t._localRoot||this._root).uuid;delete p[f],l.length===0&&delete a[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const n=this._actions,r=t._cacheIndex,s=this._nActiveActions++,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_takeBackAction(t){const n=this._actions,r=t._cacheIndex,s=--this._nActiveActions,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_addInactiveBinding(t,n,r){const s=this._bindingsByRootAndName,o=this._bindings;let a=s[n];a===void 0&&(a={},s[n]=a),a[r]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const n=this._bindings,r=t.binding,s=r.rootNode.uuid,o=r.path,a=this._bindingsByRootAndName,u=a[s],l=n[n.length-1],c=t._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete u[o],Object.keys(u).length===0&&delete a[s]}_lendBinding(t){const n=this._bindings,r=t._cacheIndex,s=this._nActiveBindings++,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_takeBackBinding(t){const n=this._bindings,r=t._cacheIndex,s=--this._nActiveBindings,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=t[n];return r===void 0&&(r=new HS(new Float32Array(2),new Float32Array(2),1,h9),r.__cacheIndex=n,t[n]=r),r}_takeBackControlInterpolant(t){const n=this._controlInterpolants,r=t.__cacheIndex,s=--this._nActiveControlInterpolants,o=n[s];t.__cacheIndex=s,n[s]=t,o.__cacheIndex=r,n[r]=o}clipAction(t,n,r){const s=n||this._root,o=s.uuid;let a=typeof t=="string"?bc.findByName(s,t):t;const u=a!==null?a.uuid:t,l=this._actionsByClip[u];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=w0),l!==void 0){const p=l.actionByRoot[o];if(p!==void 0&&p.blendMode===r)return p;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const d=new NL(this,a,n,r);return this._bindAction(d,c),this._addInactiveAction(d,u,o),d}existingAction(t,n){const r=n||this._root,s=r.uuid,o=typeof t=="string"?bc.findByName(r,t):t,a=o?o.uuid:t,u=this._actionsByClip[a];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const t=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;const n=this._actions,r=this._nActiveActions,s=this.time+=t,o=Math.sign(t),a=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(s,t,o,a);const u=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)u[c].apply(a);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,r=t.uuid,s=this._actionsByClip,o=s[r];if(o!==void 0){const a=o.knownActions;for(let u=0,l=a.length;u!==l;++u){const c=a[u];this._deactivateAction(c);const d=c._cacheIndex,p=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=d,n[d]=p,n.pop(),this._removeInactiveBindingsForAction(c)}delete s[r]}}uncacheRoot(t){const n=t.uuid,r=this._actionsByClip;for(const a in r){const u=r[a].actionByRoot,l=u[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,o=s[n];if(o!==void 0)for(const a in o){const u=o[a];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(t,n){const r=this.existingAction(t,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class $S{constructor(t){this.value=t}clone(){return new $S(this.value.clone===void 0?this.value:this.value.clone())}}let m9=0;class g9 extends ha{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:m9++}),this.name="",this.usage=xp,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const n=this.uniforms.indexOf(t);return n!==-1&&this.uniforms.splice(n,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const n=t.uniforms;this.uniforms.length=0;for(let r=0,s=n.length;r<s;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class y9 extends hd{constructor(t,n,r=1){super(t,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const n=super.clone(t);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(t){const n=super.toJSON(t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class v9{constructor(t,n,r,s,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,n){return this.type=t,this.elementSize=n,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const bT=new Gt;class GL{constructor(t,n,r=0,s=1/0){this.ray=new Cc(t,n),this.near=r,this.far=s,this.camera=null,this.layers=new oc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(t){return bT.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bT),this}intersectObject(t,n=!0,r=[]){return Hb(t,this,r,n),r.sort(wT),r}intersectObjects(t,n=!0,r=[]){for(let s=0,o=t.length;s<o;s++)Hb(t[s],this,r,n);return r.sort(wT),r}}function wT(i,t){return i.distance-t.distance}function Hb(i,t,n,r){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,n)===!1&&(s=!1),s===!0&&r===!0){const o=i.children;for(let a=0,u=o.length;a<u;a++)Hb(o[a],t,n,!0)}}class Fv{constructor(t=1,n=0,r=0){return this.radius=t,this.phi=n,this.theta=r,this}set(t,n,r){return this.radius=t,this.phi=n,this.theta=r,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(En(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _9{constructor(t=1,n=0,r=0){return this.radius=t,this.theta=n,this.y=r,this}set(t,n,r){return this.radius=t,this.theta=n,this.y=r,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class e2{constructor(t,n,r,s){e2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,n,r,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,n=0){for(let r=0;r<4;r++)this.elements[r]=t[r+n];return this}set(t,n,r,s){const o=this.elements;return o[0]=t,o[2]=n,o[1]=r,o[3]=s,this}}const ST=new mt;class x9{constructor(t=new mt(1/0,1/0),n=new mt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=ST.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ST).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const AT=new Ce,Wg=new Ce;class b9{constructor(t=new Ce,n=new Ce){this.start=t,this.end=n}set(t,n){return this.start.copy(t),this.end.copy(n),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){AT.subVectors(t,this.start),Wg.subVectors(this.end,this.start);const r=Wg.dot(Wg);let o=Wg.dot(AT)/r;return n&&(o=En(o,0,1)),o}closestPointToPoint(t,n,r){const s=this.closestPointToPointParameter(t,n);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const MT=new Ce;class w9 extends br{constructor(t,n){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new fr,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,u=1,l=32;a<l;a++,u++){const c=a/l*Math.PI*2,d=u/l*Math.PI*2;s.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new zt(s,3));const o=new xi({fog:!1,toneMapped:!1});this.cone=new fo(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),MT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(MT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sl=new Ce,Xg=new Gt,sx=new Gt;class S9 extends fo{constructor(t){const n=HL(t),r=new fr,s=[],o=[],a=new wt(0,0,1),u=new wt(0,1,0);for(let c=0;c<n.length;c++){const d=n[c];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(a.r,a.g,a.b),o.push(u.r,u.g,u.b))}r.setAttribute("position",new zt(s,3)),r.setAttribute("color",new zt(o,3));const l=new xi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,r=this.geometry,s=r.getAttribute("position");sx.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<n.length;o++){const u=n[o];u.parent&&u.parent.isBone&&(Xg.multiplyMatrices(sx,u.matrixWorld),Sl.setFromMatrixPosition(Xg),s.setXYZ(a,Sl.x,Sl.y,Sl.z),Xg.multiplyMatrices(sx,u.parent.matrixWorld),Sl.setFromMatrixPosition(Xg),s.setXYZ(a+1,Sl.x,Sl.y,Sl.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HL(i){const t=[];i.isBone===!0&&t.push(i);for(let n=0;n<i.children.length;n++)t.push.apply(t,HL(i.children[n]));return t}class A9 extends dn{constructor(t,n,r){const s=new em(n,4,2),o=new Jn({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=t,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const M9=new Ce,ET=new wt,TT=new wt;class E9 extends br{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const s=new $p(n);s.rotateY(Math.PI*.5),this.material=new Jn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),a=new Float32Array(o.count*3);s.setAttribute("color",new Tr(a,3)),this.add(new dn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=t.geometry.getAttribute("color");ET.copy(this.light.color),TT.copy(this.light.groundColor);for(let r=0,s=n.count;r<s;r++){const o=r<s/2?ET:TT;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(M9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class T9 extends fo{constructor(t=10,n=10,r=4473924,s=8947848){r=new wt(r),s=new wt(s);const o=n/2,a=t/n,u=t/2,l=[],c=[];for(let f=0,h=0,m=-u;f<=n;f++,m+=a){l.push(-u,0,m,u,0,m),l.push(m,0,-u,m,0,u);const y=f===o?r:s;y.toArray(c,h),h+=3,y.toArray(c,h),h+=3,y.toArray(c,h),h+=3,y.toArray(c,h),h+=3}const d=new fr;d.setAttribute("position",new zt(l,3)),d.setAttribute("color",new zt(c,3));const p=new xi({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class C9 extends fo{constructor(t=10,n=16,r=8,s=64,o=4473924,a=8947848){o=new wt(o),a=new wt(a);const u=[],l=[];if(n>1)for(let p=0;p<n;p++){const f=p/n*(Math.PI*2),h=Math.sin(f)*t,m=Math.cos(f)*t;u.push(0,0,0),u.push(h,0,m);const y=p&1?o:a;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let p=0;p<r;p++){const f=p&1?o:a,h=t-t/r*p;for(let m=0;m<s;m++){let y=m/s*(Math.PI*2),v=Math.sin(y)*h,g=Math.cos(y)*h;u.push(v,0,g),l.push(f.r,f.g,f.b),y=(m+1)/s*(Math.PI*2),v=Math.sin(y)*h,g=Math.cos(y)*h,u.push(v,0,g),l.push(f.r,f.g,f.b)}}const c=new fr;c.setAttribute("position",new zt(u,3)),c.setAttribute("color",new zt(l,3));const d=new xi({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const CT=new Ce,Yg=new Ce,RT=new Ce;class R9 extends br{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let s=new fr;s.setAttribute("position",new zt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new xi({fog:!1,toneMapped:!1});this.lightPlane=new da(s,o),this.add(this.lightPlane),s=new fr,s.setAttribute("position",new zt([0,0,0,0,0,1],3)),this.targetLine=new da(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),CT.setFromMatrixPosition(this.light.matrixWorld),Yg.setFromMatrixPosition(this.light.target.matrixWorld),RT.subVectors(Yg,CT),this.lightPlane.lookAt(Yg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Yg),this.targetLine.scale.z=RT.length()}}const qg=new Ce,An=new Yp;class P9 extends fo{constructor(t){const n=new fr,r=new xi({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],a={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(m,y){l(m),l(y)}function l(m){s.push(0,0,0),o.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(s.length/3-1)}n.setAttribute("position",new zt(s,3)),n.setAttribute("color",new zt(o,3)),super(n,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new wt(16755200),d=new wt(16711680),p=new wt(43775),f=new wt(16777215),h=new wt(3355443);this.setColors(c,d,p,f,h)}setColors(t,n,r,s,o){const u=this.geometry.getAttribute("color");u.setXYZ(0,t.r,t.g,t.b),u.setXYZ(1,t.r,t.g,t.b),u.setXYZ(2,t.r,t.g,t.b),u.setXYZ(3,t.r,t.g,t.b),u.setXYZ(4,t.r,t.g,t.b),u.setXYZ(5,t.r,t.g,t.b),u.setXYZ(6,t.r,t.g,t.b),u.setXYZ(7,t.r,t.g,t.b),u.setXYZ(8,t.r,t.g,t.b),u.setXYZ(9,t.r,t.g,t.b),u.setXYZ(10,t.r,t.g,t.b),u.setXYZ(11,t.r,t.g,t.b),u.setXYZ(12,t.r,t.g,t.b),u.setXYZ(13,t.r,t.g,t.b),u.setXYZ(14,t.r,t.g,t.b),u.setXYZ(15,t.r,t.g,t.b),u.setXYZ(16,t.r,t.g,t.b),u.setXYZ(17,t.r,t.g,t.b),u.setXYZ(18,t.r,t.g,t.b),u.setXYZ(19,t.r,t.g,t.b),u.setXYZ(20,t.r,t.g,t.b),u.setXYZ(21,t.r,t.g,t.b),u.setXYZ(22,t.r,t.g,t.b),u.setXYZ(23,t.r,t.g,t.b),u.setXYZ(24,n.r,n.g,n.b),u.setXYZ(25,n.r,n.g,n.b),u.setXYZ(26,n.r,n.g,n.b),u.setXYZ(27,n.r,n.g,n.b),u.setXYZ(28,n.r,n.g,n.b),u.setXYZ(29,n.r,n.g,n.b),u.setXYZ(30,n.r,n.g,n.b),u.setXYZ(31,n.r,n.g,n.b),u.setXYZ(32,r.r,r.g,r.b),u.setXYZ(33,r.r,r.g,r.b),u.setXYZ(34,r.r,r.g,r.b),u.setXYZ(35,r.r,r.g,r.b),u.setXYZ(36,r.r,r.g,r.b),u.setXYZ(37,r.r,r.g,r.b),u.setXYZ(38,s.r,s.g,s.b),u.setXYZ(39,s.r,s.g,s.b),u.setXYZ(40,o.r,o.g,o.b),u.setXYZ(41,o.r,o.g,o.b),u.setXYZ(42,o.r,o.g,o.b),u.setXYZ(43,o.r,o.g,o.b),u.setXYZ(44,o.r,o.g,o.b),u.setXYZ(45,o.r,o.g,o.b),u.setXYZ(46,o.r,o.g,o.b),u.setXYZ(47,o.r,o.g,o.b),u.setXYZ(48,o.r,o.g,o.b),u.setXYZ(49,o.r,o.g,o.b),u.needsUpdate=!0}update(){const t=this.geometry,n=this.pointMap,r=1,s=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ln("c",n,t,An,0,0,-1),Ln("t",n,t,An,0,0,1),Ln("n1",n,t,An,-1,-1,-1),Ln("n2",n,t,An,r,-1,-1),Ln("n3",n,t,An,-1,s,-1),Ln("n4",n,t,An,r,s,-1),Ln("f1",n,t,An,-1,-1,1),Ln("f2",n,t,An,r,-1,1),Ln("f3",n,t,An,-1,s,1),Ln("f4",n,t,An,r,s,1),Ln("u1",n,t,An,r*.7,s*1.1,-1),Ln("u2",n,t,An,-1*.7,s*1.1,-1),Ln("u3",n,t,An,0,s*2,-1),Ln("cf1",n,t,An,-1,0,1),Ln("cf2",n,t,An,r,0,1),Ln("cf3",n,t,An,0,-1,1),Ln("cf4",n,t,An,0,s,1),Ln("cn1",n,t,An,-1,0,-1),Ln("cn2",n,t,An,r,0,-1),Ln("cn3",n,t,An,0,-1,-1),Ln("cn4",n,t,An,0,s,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ln(i,t,n,r,s,o,a){qg.set(s,o,a).unproject(r);const u=t[i];if(u!==void 0){const l=n.getAttribute("position");for(let c=0,d=u.length;c<d;c++)l.setXYZ(u[c],qg.x,qg.y,qg.z)}}const Jg=new Hn;class I9 extends fo{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new fr;o.setIndex(new Tr(r,1)),o.setAttribute("position",new Tr(s,3)),super(o,new xi({color:n,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Jg.setFromObject(this.object),Jg.isEmpty())return;const n=Jg.min,r=Jg.max,s=this.geometry.attributes.position,o=s.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,n){return super.copy(t,n),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class L9 extends fo{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new fr;o.setIndex(new Tr(r,1)),o.setAttribute("position",new zt(s,3)),super(o,new xi({color:n,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class j9 extends da{constructor(t,n=1,r=16776960){const s=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new fr;a.setAttribute("position",new zt(o,3)),a.computeBoundingSphere(),super(a,new xi({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=n;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new fr;l.setAttribute("position",new zt(u,3)),l.computeBoundingSphere(),this.add(new dn(l,new Jn({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const PT=new Ce;let Kg,ox;class D9 extends br{constructor(t=new Ce(0,0,1),n=new Ce(0,0,0),r=1,s=16776960,o=r*.2,a=o*.2){super(),this.type="ArrowHelper",Kg===void 0&&(Kg=new fr,Kg.setAttribute("position",new zt([0,0,0,0,1,0],3)),ox=new md(0,.5,1,5,1),ox.translate(0,-.5,0)),this.position.copy(n),this.line=new da(Kg,new xi({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new dn(ox,new Jn({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,o,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{PT.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle(PT,n)}}setLength(t,n=t*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class k9 extends fo{constructor(t=1){const n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new fr;s.setAttribute("position",new zt(n,3)),s.setAttribute("color",new zt(r,3));const o=new xi({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(t,n,r){const s=new wt,o=this.geometry.attributes.color.array;return s.set(t),s.toArray(o,0),s.toArray(o,3),s.set(n),s.toArray(o,6),s.toArray(o,9),s.set(r),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class O9{constructor(){this.type="ShapePath",this.color=new wt,this.subPaths=[],this.currentPath=null}moveTo(t,n){return this.currentPath=new Sp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,n),this}lineTo(t,n){return this.currentPath.lineTo(t,n),this}quadraticCurveTo(t,n,r,s){return this.currentPath.quadraticCurveTo(t,n,r,s),this}bezierCurveTo(t,n,r,s,o,a){return this.currentPath.bezierCurveTo(t,n,r,s,o,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(g){const _=[];for(let x=0,b=g.length;x<b;x++){const S=g[x],T=new ac;T.curves=S.curves,_.push(T)}return _}function r(g,_){const x=_.length;let b=!1;for(let S=x-1,T=0;T<x;S=T++){let M=_[S],R=_[T],L=R.x-M.x,P=R.y-M.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(M=_[T],L=-L,R=_[S],P=-P),g.y<M.y||g.y>R.y)continue;if(g.y===M.y){if(g.x===M.x)return!0}else{const C=P*(g.x-M.x)-L*(g.y-M.y);if(C===0)return!0;if(C<0)continue;b=!b}}else{if(g.y!==M.y)continue;if(R.x<=g.x&&g.x<=M.x||M.x<=g.x&&g.x<=R.x)return!0}}return b}const s=fa.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,u,l;const c=[];if(o.length===1)return u=o[0],l=new ac,l.curves=u.curves,c.push(l),c;let d=!s(o[0].getPoints());d=t?!d:d;const p=[],f=[];let h=[],m=0,y;f[m]=void 0,h[m]=[];for(let g=0,_=o.length;g<_;g++)u=o[g],y=u.getPoints(),a=s(y),a=t?!a:a,a?(!d&&f[m]&&m++,f[m]={s:new ac,p:y},f[m].s.curves=u.curves,d&&m++,h[m]=[]):h[m].push({h:u,p:y[0]});if(!f[0])return n(o);if(f.length>1){let g=!1,_=0;for(let x=0,b=f.length;x<b;x++)p[x]=[];for(let x=0,b=f.length;x<b;x++){const S=h[x];for(let T=0;T<S.length;T++){const M=S[T];let R=!0;for(let L=0;L<f.length;L++)r(M.p,f[L].p)&&(x!==L&&_++,R?(R=!1,p[L].push(M)):g=!0);R&&p[x].push(M)}}_>0&&g===!1&&(h=p)}let v;for(let g=0,_=f.length;g<_;g++){l=f[g].s,c.push(l),v=h[g];for(let x=0,b=v.length;x<b;x++)l.holes.push(v[x].h)}return c}}class B9 extends ha{constructor(t,n=null){super(),this.object=t,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class F9 extends Go{constructor(t=1,n=1,r=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(t,n,{...s,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gp);const zL=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dS,AddEquation:Il,AddOperation:SI,AdditiveAnimationBlendMode:wS,AdditiveBlending:Rb,AgXToneMapping:CI,AlphaFormat:gS,AlwaysCompare:HI,AlwaysDepth:nv,AlwaysStencilFunc:jb,AmbientLight:jL,AnimationAction:NL,AnimationClip:bc,AnimationLoader:GH,AnimationMixer:p9,AnimationObjectGroup:d9,AnimationUtils:BH,ArcCurve:uL,ArrayCamera:nL,ArrowHelper:D9,AttachedBindMode:Lb,Audio:FL,AudioAnalyser:r9,AudioContext:JS,AudioListener:$H,AudioLoader:KH,AxesHelper:k9,BackSide:$i,BasicDepthPacking:DI,BasicShadowMap:nI,BatchedMesh:lL,Bone:Kp,BooleanKeyframeTrack:Lc,Box2:x9,Box3:Hn,Box3Helper:L9,BoxGeometry:Rc,BoxHelper:I9,BufferAttribute:Tr,BufferGeometry:fr,BufferGeometryLoader:BL,ByteType:hS,Cache:Ua,Camera:Yp,CameraHelper:P9,CanvasTexture:aH,CapsuleGeometry:B0,CatmullRomCurve3:cL,CineonToneMapping:EI,CircleGeometry:F0,ClampToEdgeWrapping:ms,Clock:KS,Color:wt,ColorKeyframeTrack:zS,ColorManagement:Ir,CompressedArrayTexture:sH,CompressedCubeTexture:oH,CompressedTexture:k0,CompressedTextureLoader:HH,ConeGeometry:U0,ConstantAlphaFactor:xI,ConstantColorFactor:vI,Controls:B9,CubeCamera:JI,CubeReflectionMapping:Ya,CubeRefractionMapping:Kl,CubeTexture:qp,CubeTextureLoader:zH,CubeUVReflectionMapping:cd,CubicBezierCurve:OS,CubicBezierCurve3:fL,CubicInterpolant:RL,CullFaceBack:Cb,CullFaceFront:rI,CullFaceFrontBack:BU,CullFaceNone:tI,Curve:Vo,CurvePath:hL,CustomBlending:iI,CustomToneMapping:TI,CylinderGeometry:md,Cylindrical:_9,Data3DTexture:TS,DataArrayTexture:M0,DataTexture:ca,DataTextureLoader:VH,DataUtils:q4,DecrementStencilOp:qU,DecrementWrapStencilOp:KU,DefaultLoadingManager:jf,DepthFormat:ic,DepthStencilFormat:yc,DepthTexture:LS,DetachedBindMode:PI,DirectionalLight:Z0,DirectionalLightHelper:R9,DiscreteInterpolant:PL,DisplayP3ColorSpace:S0,DodecahedronGeometry:N0,DoubleSide:Is,DstAlphaFactor:hI,DstColorFactor:mI,DynamicCopyUsage:f4,DynamicDrawUsage:s4,DynamicReadUsage:l4,EdgesGeometry:pL,EllipseCurve:O0,EqualCompare:FI,EqualDepth:sv,EqualStencilFunc:e4,EquirectangularReflectionMapping:pp,EquirectangularRefractionMapping:mp,Euler:bs,EventDispatcher:ha,ExtrudeGeometry:H0,FileLoader:es,Float16BufferAttribute:eN,Float32BufferAttribute:zt,FloatType:ys,Fog:P0,FogExp2:R0,FramebufferTexture:iH,FrontSide:Fo,Frustum:Jp,GLBufferAttribute:v9,GLSL1:h4,GLSL3:Db,GreaterCompare:UI,GreaterDepth:av,GreaterEqualCompare:GI,GreaterEqualDepth:ov,GreaterEqualStencilFunc:i4,GreaterStencilFunc:r4,GridHelper:T9,Group:oo,HalfFloatType:fd,HemisphereLight:LL,HemisphereLightHelper:E9,IcosahedronGeometry:z0,ImageBitmapLoader:qS,ImageLoader:Tp,ImageUtils:WI,IncrementStencilOp:YU,IncrementWrapStencilOp:JU,InstancedBufferAttribute:Ka,InstancedBufferGeometry:YS,InstancedInterleavedBuffer:y9,InstancedMesh:L0,Int16BufferAttribute:Z4,Int32BufferAttribute:$4,Int8BufferAttribute:J4,IntType:g0,InterleavedBuffer:hd,InterleavedBufferAttribute:Ja,Interpolant:Ic,InterpolateDiscrete:vc,InterpolateLinear:Ql,InterpolateSmooth:_y,InvertStencilOp:QU,KeepStencilOp:Nu,KeyframeTrack:Wo,LOD:aL,LatheGeometry:Zp,Layers:oc,LessCompare:BI,LessDepth:iv,LessEqualCompare:MS,LessEqualDepth:pc,LessEqualStencilFunc:t4,LessStencilFunc:$U,Light:nu,LightProbe:OL,Line:da,Line3:b9,LineBasicMaterial:xi,LineCurve:BS,LineCurve3:dL,LineDashedMaterial:EL,LineLoop:j0,LineSegments:fo,LinearDisplayP3ColorSpace:Xp,LinearFilter:sn,LinearInterpolant:HS,LinearMipMapLinearFilter:GU,LinearMipMapNearestFilter:NU,LinearMipmapLinearFilter:gs,LinearMipmapNearestFilter:nc,LinearSRGBColorSpace:fi,LinearToneMapping:AI,LinearTransfer:yp,Loader:bi,LoaderUtils:ks,LoadingManager:VS,LoopOnce:II,LoopPingPong:jI,LoopRepeat:LI,LuminanceAlphaFormat:_S,LuminanceFormat:vS,MOUSE:Fu,Material:Tn,MaterialLoader:$0,MathUtils:A0,Matrix2:e2,Matrix3:cr,Matrix4:Gt,MaxEquation:lI,Mesh:dn,MeshBasicMaterial:Jn,MeshDepthMaterial:T0,MeshDistanceMaterial:C0,MeshLambertMaterial:AL,MeshMatcapMaterial:ML,MeshNormalMaterial:SL,MeshPhongMaterial:bL,MeshPhysicalMaterial:Cn,MeshStandardMaterial:Pc,MeshToonMaterial:wL,MinEquation:aI,MirroredRepeatWrapping:mc,MixOperation:wI,MultiplyBlending:Ib,MultiplyOperation:Hp,NearestFilter:Nn,NearestMipMapLinearFilter:UU,NearestMipMapNearestFilter:FU,NearestMipmapLinearFilter:kl,NearestMipmapNearestFilter:zp,NeutralToneMapping:RI,NeverCompare:OI,NeverDepth:rv,NeverStencilFunc:ZU,NoBlending:Ga,NoColorSpace:ka,NoToneMapping:la,NormalAnimationBlendMode:w0,NormalBlending:rc,NotEqualCompare:NI,NotEqualDepth:lv,NotEqualStencilFunc:n4,NumberKeyframeTrack:Qa,Object3D:br,ObjectLoader:qH,ObjectSpaceNormalMap:kI,OctahedronGeometry:$p,OneFactor:cI,OneMinusConstantAlphaFactor:bI,OneMinusConstantColorFactor:_I,OneMinusDstAlphaFactor:pI,OneMinusDstColorFactor:gI,OneMinusSrcAlphaFactor:tv,OneMinusSrcColorFactor:dI,OrthographicCamera:ua,P3Primaries:_p,PCFShadowMap:p0,PCFSoftShadowMap:jh,PMREMGenerator:kb,Path:Sp,PerspectiveCamera:gn,Plane:Da,PlaneGeometry:rl,PlaneHelper:j9,PointLight:Q0,PointLightHelper:A9,Points:D0,PointsMaterial:Qp,PolarGridHelper:C9,PolyhedronGeometry:ru,PositionalAudio:t9,PropertyBinding:Pr,PropertyMixer:UL,QuadraticBezierCurve:FS,QuadraticBezierCurve3:US,Quaternion:Yr,QuaternionKeyframeTrack:Za,QuaternionLinearInterpolant:IL,RED_GREEN_RGTC2_Format:jv,RED_RGTC1_Format:bS,REVISION:Gp,RGBADepthPacking:AS,RGBAFormat:Di,RGBAIntegerFormat:b0,RGBA_ASTC_10x10_Format:Tv,RGBA_ASTC_10x5_Format:Av,RGBA_ASTC_10x6_Format:Mv,RGBA_ASTC_10x8_Format:Ev,RGBA_ASTC_12x10_Format:Cv,RGBA_ASTC_12x12_Format:Rv,RGBA_ASTC_4x4_Format:gv,RGBA_ASTC_5x4_Format:yv,RGBA_ASTC_5x5_Format:vv,RGBA_ASTC_6x5_Format:_v,RGBA_ASTC_6x6_Format:xv,RGBA_ASTC_8x5_Format:bv,RGBA_ASTC_8x6_Format:wv,RGBA_ASTC_8x8_Format:Sv,RGBA_BPTC_Format:Fh,RGBA_ETC2_EAC_Format:mv,RGBA_PVRTC_2BPPV1_Format:dv,RGBA_PVRTC_4BPPV1_Format:fv,RGBA_S3TC_DXT1_Format:kh,RGBA_S3TC_DXT3_Format:Oh,RGBA_S3TC_DXT5_Format:Bh,RGBDepthPacking:zU,RGBFormat:yS,RGBIntegerFormat:HU,RGB_BPTC_SIGNED_Format:Pv,RGB_BPTC_UNSIGNED_Format:Iv,RGB_ETC1_Format:hv,RGB_ETC2_Format:pv,RGB_PVRTC_2BPPV1_Format:cv,RGB_PVRTC_4BPPV1_Format:uv,RGB_S3TC_DXT1_Format:Dh,RGDepthPacking:VU,RGFormat:xS,RGIntegerFormat:x0,RawShaderMaterial:xL,Ray:Cc,Raycaster:GL,Rec709Primaries:vp,RectAreaLight:DL,RedFormat:_0,RedIntegerFormat:Vp,ReinhardToneMapping:MI,RenderTarget:XI,RepeatWrapping:Uo,ReplaceStencilOp:XU,ReverseSubtractEquation:oI,RingGeometry:V0,SIGNED_RED_GREEN_RGTC2_Format:Dv,SIGNED_RED_RGTC1_Format:Lv,SRGBColorSpace:yi,SRGBTransfer:tn,Scene:jS,ShaderChunk:hr,ShaderLib:Io,ShaderMaterial:Ho,ShadowMaterial:_L,Shape:ac,ShapeGeometry:W0,ShapePath:O9,ShapeUtils:fa,ShortType:pS,Skeleton:pd,SkeletonHelper:S9,SkinnedMesh:I0,Source:Ku,Sphere:Qn,SphereGeometry:em,Spherical:Fv,SphericalHarmonics3:kL,SplineCurve:NS,SpotLight:K0,SpotLightHelper:w9,Sprite:oL,SpriteMaterial:DS,SrcAlphaFactor:ev,SrcAlphaSaturateFactor:yI,SrcColorFactor:fI,StaticCopyUsage:c4,StaticDrawUsage:xp,StaticReadUsage:a4,StereoCamera:QH,StreamCopyUsage:d4,StreamDrawUsage:o4,StreamReadUsage:u4,StringKeyframeTrack:jc,SubtractEquation:sI,SubtractiveBlending:Pb,TOUCH:Uu,TangentSpaceNormalMap:tu,TetrahedronGeometry:X0,Texture:Qr,TextureLoader:WS,TextureUtils:B8,TorusGeometry:Y0,TorusKnotGeometry:q0,Triangle:hs,TriangleFanDrawMode:_c,TriangleStripDrawMode:Wp,TrianglesDrawMode:SS,TubeGeometry:J0,UVMapping:m0,Uint16BufferAttribute:CS,Uint32BufferAttribute:RS,Uint8BufferAttribute:K4,Uint8ClampedBufferAttribute:Q4,Uniform:$S,UniformsGroup:g9,UniformsLib:Ct,UniformsUtils:PS,UnsignedByteType:No,UnsignedInt248Type:gc,UnsignedInt5999Type:mS,UnsignedIntType:qa,UnsignedShort4444Type:y0,UnsignedShort5551Type:v0,UnsignedShortType:rd,VSMShadowMap:Co,Vector2:mt,Vector3:Ce,Vector4:_r,VectorKeyframeTrack:$a,VideoTexture:nH,WebGL3DRenderTarget:F4,WebGLArrayRenderTarget:B4,WebGLCoordinateSystem:sa,WebGLCubeRenderTarget:KI,WebGLMultipleRenderTargets:F9,WebGLRenderTarget:Go,WebGLRenderer:iL,WebGLUtils:rL,WebGPUCoordinateSystem:bp,WireframeGeometry:vL,WrapAroundEnding:gp,ZeroCurvatureEnding:qu,ZeroFactor:uI,ZeroSlopeEnding:Ju,ZeroStencilOp:WU,createCanvasElement:VI},Symbol.toStringTag,{value:"Module"}));var VL={exports:{}},Dc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Dc.ConcurrentRoot=1;Dc.ContinuousEventPriority=4;Dc.DefaultEventPriority=16;Dc.DiscreteEventPriority=1;Dc.IdleEventPriority=536870912;Dc.LegacyRoot=0;VL.exports=Dc;var Df=VL.exports;function U9(i){let t;const n=new Set,r=(c,d)=>{const p=typeof c=="function"?c(t):c;if(p!==t){const f=t;t=d?p:Object.assign({},t,p),n.forEach(h=>h(t,f))}},s=()=>t,o=(c,d=s,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=d(t);function h(){const m=d(t);if(!p(f,m)){const y=f;c(f=m,y)}}return n.add(h),()=>n.delete(h)},l={setState:r,getState:s,subscribe:(c,d,p)=>d||p?o(c,d,p):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=i(r,s,l),l}const N9=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),IT=N9?Qe.useEffect:Qe.useLayoutEffect;function G9(i){const t=typeof i=="function"?U9(i):i,n=(r=t.getState,s=Object.is)=>{const[,o]=Qe.useReducer(v=>v+1,0),a=t.getState(),u=Qe.useRef(a),l=Qe.useRef(r),c=Qe.useRef(s),d=Qe.useRef(!1),p=Qe.useRef();p.current===void 0&&(p.current=r(a));let f,h=!1;(u.current!==a||l.current!==r||c.current!==s||d.current)&&(f=r(a),h=!s(p.current,f)),IT(()=>{h&&(p.current=f),u.current=a,l.current=r,c.current=s,d.current=!1});const m=Qe.useRef(a);IT(()=>{const v=()=>{try{const _=t.getState(),x=l.current(_);c.current(p.current,x)||(u.current=_,p.current=x,o())}catch{d.current=!0,o()}},g=t.subscribe(v);return t.getState()!==m.current&&v(),g},[]);const y=h?f:p.current;return Qe.useDebugValue(y),y};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const s=r.length<=0;return{value:r.shift(),done:s}}}},n}const H9=i=>typeof i=="object"&&typeof i.then=="function",Zu=[];function WL(i,t,n=(r,s)=>r===s){if(i===t)return!0;if(!i||!t)return!1;const r=i.length;if(t.length!==r)return!1;for(let s=0;s<r;s++)if(!n(i[s],t[s]))return!1;return!0}function XL(i,t=null,n=!1,r={}){t===null&&(t=[i]);for(const o of Zu)if(WL(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}const s={keys:t,equal:r.equal,remove:()=>{const o=Zu.indexOf(s);o!==-1&&Zu.splice(o,1)},promise:(H9(i)?i:i(...t)).then(o=>{s.response=o,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(o=>s.error=o)};if(Zu.push(s),!n)throw s.promise}const YL=(i,t,n)=>XL(i,t,!1,n),z9=(i,t,n)=>void XL(i,t,!0,n),V9=i=>{if(i===void 0||i.length===0)Zu.splice(0,Zu.length);else{const t=Zu.find(n=>WL(i,n.keys,n.equal));t&&t.remove()}};var qL={exports:{}},JL={exports:{}},KL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(V,W){var Y=V.length;V.push(W);e:for(;0<Y;){var J=Y-1>>>1,ie=V[J];if(0<s(ie,W))V[J]=W,V[Y]=ie,Y=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],Y=V.pop();if(Y!==W){V[0]=Y;e:for(var J=0,ie=V.length,I=ie>>>1;J<I;){var O=2*(J+1)-1,H=V[O],q=O+1,Z=V[q];if(0>s(H,Y))q<ie&&0>s(Z,H)?(V[J]=Z,V[q]=Y,J=q):(V[J]=H,V[O]=Y,J=O);else if(q<ie&&0>s(Z,Y))V[J]=Z,V[q]=Y,J=q;else break e}}return W}function s(V,W){var Y=V.sortIndex-W.sortIndex;return Y!==0?Y:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var l=[],c=[],d=1,p=null,f=3,h=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,t(l,W);else break;W=n(c)}}function b(V){if(y=!1,x(V),!m)if(n(l)!==null)m=!0,z(S);else{var W=n(c);W!==null&&Q(b,W.startTime-V)}}function S(V,W){m=!1,y&&(y=!1,g(R),R=-1),h=!0;var Y=f;try{for(x(W),p=n(l);p!==null&&(!(p.expirationTime>W)||V&&!C());){var J=p.callback;if(typeof J=="function"){p.callback=null,f=p.priorityLevel;var ie=J(p.expirationTime<=W);W=i.unstable_now(),typeof ie=="function"?p.callback=ie:p===n(l)&&r(l),x(W)}else r(l);p=n(l)}if(p!==null)var I=!0;else{var O=n(c);O!==null&&Q(b,O.startTime-W),I=!1}return I}finally{p=null,f=Y,h=!1}}var T=!1,M=null,R=-1,L=5,P=-1;function C(){return!(i.unstable_now()-P<L)}function k(){if(M!==null){var V=i.unstable_now();P=V;var W=!0;try{W=M(!0,V)}finally{W?D():(T=!1,M=null)}}else T=!1}var D;if(typeof _=="function")D=function(){_(k)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=k,D=function(){G.postMessage(null)}}else D=function(){v(k,0)};function z(V){M=V,T||(T=!0,D())}function Q(V,W){R=v(function(){V(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){m||h||(m=!0,z(S))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return n(l)},i.unstable_next=function(V){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Y=f;f=W;try{return V()}finally{f=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=f;f=V;try{return W()}finally{f=Y}},i.unstable_scheduleCallback=function(V,W,Y){var J=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?J+Y:J):Y=J,V){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Y+ie,V={id:d++,callback:W,priorityLevel:V,startTime:Y,expirationTime:ie,sortIndex:-1},Y>J?(V.sortIndex=Y,t(c,V),n(l)===null&&V===n(c)&&(y?(g(R),R=-1):y=!0,Q(b,Y-J))):(V.sortIndex=ie,t(l,V),m||h||(m=!0,z(S))),V},i.unstable_shouldYield=C,i.unstable_wrapCallback=function(V){var W=f;return function(){var Y=f;f=W;try{return V.apply(this,arguments)}finally{f=Y}}}})(KL);JL.exports=KL;var zb=JL.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W9=function(t){var n={},r=Qe,s=zb,o=Object.assign;function a(w){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+w,U=1;U<arguments.length;U++)A+="&args[]="+encodeURIComponent(arguments[U]);return"Minified React error #"+w+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),S=Symbol.iterator;function T(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}function M(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case c:return"Portal";case f:return"Profiler";case p:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case m:return(w.displayName||"Context")+".Consumer";case h:return(w._context.displayName||"Context")+".Provider";case y:var A=w.render;return w=w.displayName,w||(w=A.displayName||A.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case _:return A=w.displayName||null,A!==null?A:M(w.type)||"Memo";case x:A=w._payload,w=w._init;try{return M(w(A))}catch{}}return null}function R(w){var A=w.type;switch(w.tag){case 24:return"Cache";case 9:return(A.displayName||"Context")+".Consumer";case 10:return(A._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=A.render,w=w.displayName||w.name||"",A.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return A;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(A);case 8:return A===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A}return null}function L(w){var A=w,U=w;if(w.alternate)for(;A.return;)A=A.return;else{w=A;do A=w,A.flags&4098&&(U=A.return),w=A.return;while(w)}return A.tag===3?U:null}function P(w){if(L(w)!==w)throw Error(a(188))}function C(w){var A=w.alternate;if(!A){if(A=L(w),A===null)throw Error(a(188));return A!==w?null:w}for(var U=w,X=A;;){var $=U.return;if($===null)break;var fe=$.alternate;if(fe===null){if(X=$.return,X!==null){U=X;continue}break}if($.child===fe.child){for(fe=$.child;fe;){if(fe===U)return P($),w;if(fe===X)return P($),A;fe=fe.sibling}throw Error(a(188))}if(U.return!==X.return)U=$,X=fe;else{for(var Ne=!1,$e=$.child;$e;){if($e===U){Ne=!0,U=$,X=fe;break}if($e===X){Ne=!0,X=$,U=fe;break}$e=$e.sibling}if(!Ne){for($e=fe.child;$e;){if($e===U){Ne=!0,U=fe,X=$;break}if($e===X){Ne=!0,X=fe,U=$;break}$e=$e.sibling}if(!Ne)throw Error(a(189))}}if(U.alternate!==X)throw Error(a(190))}if(U.tag!==3)throw Error(a(188));return U.stateNode.current===U?w:A}function k(w){return w=C(w),w!==null?D(w):null}function D(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var A=D(w);if(A!==null)return A;w=w.sibling}return null}function F(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var A=F(w);if(A!==null)return A}w=w.sibling}return null}var G=Array.isArray,z=t.getPublicInstance,Q=t.getRootHostContext,V=t.getChildHostContext,W=t.prepareForCommit,Y=t.resetAfterCommit,J=t.createInstance,ie=t.appendInitialChild,I=t.finalizeInitialChildren,O=t.prepareUpdate,H=t.shouldSetTextContent,q=t.createTextInstance,Z=t.scheduleTimeout,oe=t.cancelTimeout,pe=t.noTimeout,be=t.isPrimaryRenderer,me=t.supportsMutation,ce=t.supportsPersistence,te=t.supportsHydration,ue=t.getInstanceFromNode,ge=t.preparePortalMount,xe=t.getCurrentEventPriority,Le=t.detachDeletedInstance,we=t.supportsMicrotasks,Ee=t.scheduleMicrotask,ae=t.supportsTestSelectors,ne=t.findFiberRoot,Ae=t.getBoundingRect,Be=t.getTextContent,Fe=t.isHiddenSubtree,Oe=t.matchAccessibilityRole,Je=t.setFocusIfFocusable,Ve=t.setupIntersectionObserver,Se=t.appendChild,We=t.appendChildToContainer,Re=t.commitTextUpdate,le=t.commitMount,de=t.commitUpdate,ee=t.insertBefore,he=t.insertInContainerBefore,Pe=t.removeChild,ye=t.removeChildFromContainer,De=t.resetTextContent,Me=t.hideInstance,qe=t.hideTextInstance,ke=t.unhideInstance,Ye=t.unhideTextInstance,dt=t.clearContainer,at=t.cloneInstance,ct=t.createContainerChildSet,xt=t.appendChildToContainerChildSet,_t=t.finalizeContainerChildren,vt=t.replaceContainerChildren,Bt=t.cloneHiddenInstance,qt=t.cloneHiddenTextInstance,Wt=t.canHydrateInstance,tr=t.canHydrateTextInstance,Jt=t.canHydrateSuspenseInstance,Lr=t.isSuspenseInstancePending,Cr=t.isSuspenseInstanceFallback,dr=t.registerSuspenseInstanceRetry,Mr=t.getNextHydratableSibling,Dn=t.getFirstHydratableChild,Xr=t.getFirstHydratableChildWithinContainer,ei=t.getFirstHydratableChildWithinSuspenseInstance,Ns=t.hydrateInstance,Ss=t.hydrateTextInstance,po=t.hydrateSuspenseInstance,Ge=t.getNextHydratableInstanceAfterSuspenseInstance,ve=t.commitHydratedContainer,He=t.commitHydratedSuspenseInstance,ze=t.clearSuspenseBoundary,et=t.clearSuspenseBoundaryFromContainer,je=t.shouldDeleteUnhydratedTailInstances,gt=t.didNotMatchHydratedContainerTextInstance,ot=t.didNotMatchHydratedTextInstance,st;function ut(w){if(st===void 0)try{throw Error()}catch(U){var A=U.stack.trim().match(/\n( *(at )?)/);st=A&&A[1]||""}return`
`+st+w}var Pt=!1;function Tt(w,A){if(!w||Pt)return"";Pt=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(A)if(A=function(){throw Error()},Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(St){var X=St}Reflect.construct(w,[],A)}else{try{A.call()}catch(St){X=St}w.call(A.prototype)}else{try{throw Error()}catch(St){X=St}w()}}catch(St){if(St&&X&&typeof St.stack=="string"){for(var $=St.stack.split(`
`),fe=X.stack.split(`
`),Ne=$.length-1,$e=fe.length-1;1<=Ne&&0<=$e&&$[Ne]!==fe[$e];)$e--;for(;1<=Ne&&0<=$e;Ne--,$e--)if($[Ne]!==fe[$e]){if(Ne!==1||$e!==1)do if(Ne--,$e--,0>$e||$[Ne]!==fe[$e]){var pt=`
`+$[Ne].replace(" at new "," at ");return w.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",w.displayName)),pt}while(1<=Ne&&0<=$e);break}}}finally{Pt=!1,Error.prepareStackTrace=U}return(w=w?w.displayName||w.name:"")?ut(w):""}var At=Object.prototype.hasOwnProperty,Kt=[],ir=-1;function rr(w){return{current:w}}function Qt(w){0>ir||(w.current=Kt[ir],Kt[ir]=null,ir--)}function Et(w,A){ir++,Kt[ir]=w.current,w.current=A}var jt={},nr=rr(jt),Yt=rr(!1),qr=jt;function xn(w,A){var U=w.type.contextTypes;if(!U)return jt;var X=w.stateNode;if(X&&X.__reactInternalMemoizedUnmaskedChildContext===A)return X.__reactInternalMemoizedMaskedChildContext;var $={},fe;for(fe in U)$[fe]=A[fe];return X&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=A,w.__reactInternalMemoizedMaskedChildContext=$),$}function Rr(w){return w=w.childContextTypes,w!=null}function ti(){Qt(Yt),Qt(nr)}function Or(w,A,U){if(nr.current!==jt)throw Error(a(168));Et(nr,A),Et(Yt,U)}function ri(w,A,U){var X=w.stateNode;if(A=A.childContextTypes,typeof X.getChildContext!="function")return U;X=X.getChildContext();for(var $ in X)if(!($ in A))throw Error(a(108,R(w)||"Unknown",$));return o({},U,X)}function Fi(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||jt,qr=nr.current,Et(nr,w),Et(Yt,Yt.current),!0}function Hr(w,A,U){var X=w.stateNode;if(!X)throw Error(a(169));U?(w=ri(w,A,qr),X.__reactInternalMemoizedMergedChildContext=w,Qt(Yt),Qt(nr),Et(nr,w)):Qt(Yt),Et(Yt,U)}var zn=Math.clz32?Math.clz32:ou,Gs=Math.log,As=Math.LN2;function ou(w){return w>>>=0,w===0?32:31-(Gs(w)/As|0)|0}var ns=64,is=4194304;function kn(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Xo(w,A){var U=w.pendingLanes;if(U===0)return 0;var X=0,$=w.suspendedLanes,fe=w.pingedLanes,Ne=U&268435455;if(Ne!==0){var $e=Ne&~$;$e!==0?X=kn($e):(fe&=Ne,fe!==0&&(X=kn(fe)))}else Ne=U&~$,Ne!==0?X=kn(Ne):fe!==0&&(X=kn(fe));if(X===0)return 0;if(A!==0&&A!==X&&!(A&$)&&($=X&-X,fe=A&-A,$>=fe||$===16&&(fe&4194240)!==0))return A;if(X&4&&(X|=U&16),A=w.entangledLanes,A!==0)for(w=w.entanglements,A&=X;0<A;)U=31-zn(A),$=1<<U,X|=w[U],A&=~$;return X}function au(w,A){switch(w){case 1:case 2:case 4:return A+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(w,A){for(var U=w.suspendedLanes,X=w.pingedLanes,$=w.expirationTimes,fe=w.pendingLanes;0<fe;){var Ne=31-zn(fe),$e=1<<Ne,pt=$[Ne];pt===-1?(!($e&U)||$e&X)&&($[Ne]=au($e,A)):pt<=A&&(w.expiredLanes|=$e),fe&=~$e}}function zs(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function nl(w){for(var A=[],U=0;31>U;U++)A.push(w);return A}function ss(w,A,U){w.pendingLanes|=A,A!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,A=31-zn(A),w[A]=U}function mo(w,A){var U=w.pendingLanes&~A;w.pendingLanes=A,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=A,w.mutableReadLanes&=A,w.entangledLanes&=A,A=w.entanglements;var X=w.eventTimes;for(w=w.expirationTimes;0<U;){var $=31-zn(U),fe=1<<$;A[$]=0,X[$]=-1,w[$]=-1,U&=~fe}}function Vs(w,A){var U=w.entangledLanes|=A;for(w=w.entanglements;U;){var X=31-zn(U),$=1<<X;$&A|w[X]&A&&(w[X]|=A),U&=~$}}var mr=0;function il(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var go=s.unstable_scheduleCallback,pa=s.unstable_cancelCallback,lu=s.unstable_shouldYield,kc=s.unstable_requestPaint,an=s.unstable_now,ma=s.unstable_ImmediatePriority,uu=s.unstable_UserBlockingPriority,Zr=s.unstable_NormalPriority,Ui=s.unstable_IdlePriority,Ms=null,Vn=null;function Ni(w){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ms,w,void 0,(w.current.flags&128)===128)}catch{}}function Yo(w,A){return w===A&&(w!==0||1/w===1/A)||w!==w&&A!==A}var Gi=typeof Object.is=="function"?Object.is:Yo,hn=null,Hi=!1,zi=!1;function sl(w){hn===null?hn=[w]:hn.push(w)}function ol(w){Hi=!0,sl(w)}function di(){if(!zi&&hn!==null){zi=!0;var w=0,A=mr;try{var U=hn;for(mr=1;w<U.length;w++){var X=U[w];do X=X(!0);while(X!==null)}hn=null,Hi=!1}catch($){throw hn!==null&&(hn=hn.slice(w+1)),go(ma,di),$}finally{mr=A,zi=!1}}return null}var qo=u.ReactCurrentBatchConfig;function Jo(w,A){if(Gi(w,A))return!0;if(typeof w!="object"||w===null||typeof A!="object"||A===null)return!1;var U=Object.keys(w),X=Object.keys(A);if(U.length!==X.length)return!1;for(X=0;X<U.length;X++){var $=U[X];if(!At.call(A,$)||!Gi(w[$],A[$]))return!1}return!0}function yo(w){switch(w.tag){case 5:return ut(w.type);case 16:return ut("Lazy");case 13:return ut("Suspense");case 19:return ut("SuspenseList");case 0:case 2:case 15:return w=Tt(w.type,!1),w;case 11:return w=Tt(w.type.render,!1),w;case 1:return w=Tt(w.type,!0),w;default:return""}}function ni(w,A){if(w&&w.defaultProps){A=o({},A),w=w.defaultProps;for(var U in w)A[U]===void 0&&(A[U]=w[U]);return A}return A}var Rn=rr(null),ga=null,os=null,vo=null;function ya(){vo=os=ga=null}function cu(w,A,U){be?(Et(Rn,A._currentValue),A._currentValue=U):(Et(Rn,A._currentValue2),A._currentValue2=U)}function Pn(w){var A=Rn.current;Qt(Rn),be?w._currentValue=A:w._currentValue2=A}function ii(w,A,U){for(;w!==null;){var X=w.alternate;if((w.childLanes&A)!==A?(w.childLanes|=A,X!==null&&(X.childLanes|=A)):X!==null&&(X.childLanes&A)!==A&&(X.childLanes|=A),w===U)break;w=w.return}}function ln(w,A){ga=w,vo=os=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&A&&(Es=!0),w.firstContext=null)}function $r(w){var A=be?w._currentValue:w._currentValue2;if(vo!==w)if(w={context:w,memoizedValue:A,next:null},os===null){if(ga===null)throw Error(a(308));os=w,ga.dependencies={lanes:0,firstContext:w}}else os=os.next=w;return A}var hi=null,_o=!1;function Ws(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xo(w,A){w=w.updateQueue,A.updateQueue===w&&(A.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function It(w,A){return{eventTime:w,lane:A,tag:0,payload:null,callback:null,next:null}}function Ko(w,A){var U=w.updateQueue;U!==null&&(U=U.shared,On!==null&&w.mode&1&&!(vr&2)?(w=U.interleaved,w===null?(A.next=A,hi===null?hi=[U]:hi.push(U)):(A.next=w.next,w.next=A),U.interleaved=A):(w=U.pending,w===null?A.next=A:(A.next=w.next,w.next=A),U.pending=A))}function fu(w,A,U){if(A=A.updateQueue,A!==null&&(A=A.shared,(U&4194240)!==0)){var X=A.lanes;X&=w.pendingLanes,U|=X,A.lanes=U,Vs(w,U)}}function va(w,A){var U=w.updateQueue,X=w.alternate;if(X!==null&&(X=X.updateQueue,U===X)){var $=null,fe=null;if(U=U.firstBaseUpdate,U!==null){do{var Ne={eventTime:U.eventTime,lane:U.lane,tag:U.tag,payload:U.payload,callback:U.callback,next:null};fe===null?$=fe=Ne:fe=fe.next=Ne,U=U.next}while(U!==null);fe===null?$=fe=A:fe=fe.next=A}else $=fe=A;U={baseState:X.baseState,firstBaseUpdate:$,lastBaseUpdate:fe,shared:X.shared,effects:X.effects},w.updateQueue=U;return}w=U.lastBaseUpdate,w===null?U.firstBaseUpdate=A:w.next=A,U.lastBaseUpdate=A}function Oc(w,A,U,X){var $=w.updateQueue;_o=!1;var fe=$.firstBaseUpdate,Ne=$.lastBaseUpdate,$e=$.shared.pending;if($e!==null){$.shared.pending=null;var pt=$e,St=pt.next;pt.next=null,Ne===null?fe=St:Ne.next=St,Ne=pt;var Nt=w.alternate;Nt!==null&&(Nt=Nt.updateQueue,$e=Nt.lastBaseUpdate,$e!==Ne&&($e===null?Nt.firstBaseUpdate=St:$e.next=St,Nt.lastBaseUpdate=pt))}if(fe!==null){var lr=$.baseState;Ne=0,Nt=St=pt=null,$e=fe;do{var $t=$e.lane,Kr=$e.eventTime;if((X&$t)===$t){Nt!==null&&(Nt=Nt.next={eventTime:Kr,lane:0,tag:$e.tag,payload:$e.payload,callback:$e.callback,next:null});e:{var Xt=w,Ei=$e;switch($t=A,Kr=U,Ei.tag){case 1:if(Xt=Ei.payload,typeof Xt=="function"){lr=Xt.call(Kr,lr,$t);break e}lr=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=Ei.payload,$t=typeof Xt=="function"?Xt.call(Kr,lr,$t):Xt,$t==null)break e;lr=o({},lr,$t);break e;case 2:_o=!0}}$e.callback!==null&&$e.lane!==0&&(w.flags|=64,$t=$.effects,$t===null?$.effects=[$e]:$t.push($e))}else Kr={eventTime:Kr,lane:$t,tag:$e.tag,payload:$e.payload,callback:$e.callback,next:null},Nt===null?(St=Nt=Kr,pt=lr):Nt=Nt.next=Kr,Ne|=$t;if($e=$e.next,$e===null){if($e=$.shared.pending,$e===null)break;$t=$e,$e=$t.next,$t.next=null,$.lastBaseUpdate=$t,$.shared.pending=null}}while(!0);if(Nt===null&&(pt=lr),$.baseState=pt,$.firstBaseUpdate=St,$.lastBaseUpdate=Nt,A=$.shared.interleaved,A!==null){$=A;do Ne|=$.lane,$=$.next;while($!==A)}else fe===null&&($.shared.lanes=0);Hc|=Ne,w.lanes=Ne,w.memoizedState=lr}}function lm(w,A,U){if(w=A.effects,A.effects=null,w!==null)for(A=0;A<w.length;A++){var X=w[A],$=X.callback;if($!==null){if(X.callback=null,X=U,typeof $!="function")throw Error(a(191,$));$.call(X)}}}var Ur=new r.Component().refs;function Bc(w,A,U,X){A=w.memoizedState,U=U(X,A),U=U==null?A:o({},A,U),w.memoizedState=U,w.lanes===0&&(w.updateQueue.baseState=U)}var Fc={isMounted:function(w){return(w=w._reactInternals)?L(w)===w:!1},enqueueSetState:function(w,A,U){w=w._reactInternals;var X=Xi(),$=fl(w),fe=It(X,$);fe.payload=A,U!=null&&(fe.callback=U),Ko(w,fe),A=Xs(w,$,X),A!==null&&fu(A,w,$)},enqueueReplaceState:function(w,A,U){w=w._reactInternals;var X=Xi(),$=fl(w),fe=It(X,$);fe.tag=1,fe.payload=A,U!=null&&(fe.callback=U),Ko(w,fe),A=Xs(w,$,X),A!==null&&fu(A,w,$)},enqueueForceUpdate:function(w,A){w=w._reactInternals;var U=Xi(),X=fl(w),$=It(U,X);$.tag=2,A!=null&&($.callback=A),Ko(w,$),A=Xs(w,X,U),A!==null&&fu(A,w,X)}};function as(w,A,U,X,$,fe,Ne){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(X,fe,Ne):A.prototype&&A.prototype.isPureReactComponent?!Jo(U,X)||!Jo($,fe):!0}function um(w,A,U){var X=!1,$=jt,fe=A.contextType;return typeof fe=="object"&&fe!==null?fe=$r(fe):($=Rr(A)?qr:nr.current,X=A.contextTypes,fe=(X=X!=null)?xn(w,$):jt),A=new A(U,fe),w.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Fc,w.stateNode=A,A._reactInternals=w,X&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=$,w.__reactInternalMemoizedMaskedChildContext=fe),A}function cm(w,A,U,X){w=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(U,X),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(U,X),A.state!==w&&Fc.enqueueReplaceState(A,A.state,null)}function xd(w,A,U,X){var $=w.stateNode;$.props=U,$.state=w.memoizedState,$.refs=Ur,Ws(w);var fe=A.contextType;typeof fe=="object"&&fe!==null?$.context=$r(fe):(fe=Rr(A)?qr:nr.current,$.context=xn(w,fe)),$.state=w.memoizedState,fe=A.getDerivedStateFromProps,typeof fe=="function"&&(Bc(w,A,fe,U),$.state=w.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(A=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),A!==$.state&&Fc.enqueueReplaceState($,$.state,null),Oc(w,U,$,X),$.state=w.memoizedState),typeof $.componentDidMount=="function"&&(w.flags|=4194308)}var al=[],ll=0,Uc=null,du=0,jr=[],wi=0,E=null,j=1,B="";function N(w,A){al[ll++]=du,al[ll++]=Uc,Uc=w,du=A}function K(w,A,U){jr[wi++]=j,jr[wi++]=B,jr[wi++]=E,E=w;var X=j;w=B;var $=32-zn(X)-1;X&=~(1<<$),U+=1;var fe=32-zn(A)+$;if(30<fe){var Ne=$-$%5;fe=(X&(1<<Ne)-1).toString(32),X>>=Ne,$-=Ne,j=1<<32-zn(A)+$|U<<$|X,B=fe+w}else j=1<<fe|U<<$|X,B=w}function re(w){w.return!==null&&(N(w,1),K(w,1,0))}function se(w){for(;w===Uc;)Uc=al[--ll],al[ll]=null,du=al[--ll],al[ll]=null;for(;w===E;)E=jr[--wi],jr[wi]=null,B=jr[--wi],jr[wi]=null,j=jr[--wi],jr[wi]=null}var _e=null,Ie=null,Te=!1,Xe=!1,Ze=null;function Ke(w,A){var U=Ys(5,null,null,0);U.elementType="DELETED",U.stateNode=A,U.return=w,A=w.deletions,A===null?(w.deletions=[U],w.flags|=16):A.push(U)}function Ue(w,A){switch(w.tag){case 5:return A=Wt(A,w.type,w.pendingProps),A!==null?(w.stateNode=A,_e=w,Ie=Dn(A),!0):!1;case 6:return A=tr(A,w.pendingProps),A!==null?(w.stateNode=A,_e=w,Ie=null,!0):!1;case 13:if(A=Jt(A),A!==null){var U=E!==null?{id:j,overflow:B}:null;return w.memoizedState={dehydrated:A,treeContext:U,retryLane:1073741824},U=Ys(18,null,null,0),U.stateNode=A,U.return=w,w.child=U,_e=w,Ie=null,!0}return!1;default:return!1}}function yt(w){return(w.mode&1)!==0&&(w.flags&128)===0}function it(w){if(Te){var A=Ie;if(A){var U=A;if(!Ue(w,A)){if(yt(w))throw Error(a(418));A=Mr(U);var X=_e;A&&Ue(w,A)?Ke(X,U):(w.flags=w.flags&-4097|2,Te=!1,_e=w)}}else{if(yt(w))throw Error(a(418));w.flags=w.flags&-4097|2,Te=!1,_e=w}}}function ft(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;_e=w}function nt(w){if(!te||w!==_e)return!1;if(!Te)return ft(w),Te=!0,!1;if(w.tag!==3&&(w.tag!==5||je(w.type)&&!H(w.type,w.memoizedProps))){var A=Ie;if(A){if(yt(w)){for(w=Ie;w;)w=Mr(w);throw Error(a(418))}for(;A;)Ke(w,A),A=Mr(A)}}if(ft(w),w.tag===13){if(!te)throw Error(a(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));Ie=Ge(w)}else Ie=_e?Mr(w.stateNode):null;return!0}function rt(){te&&(Ie=_e=null,Xe=Te=!1)}function Ft(w){Ze===null?Ze=[w]:Ze.push(w)}function Zt(w,A,U){if(w=U.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(U._owner){if(U=U._owner,U){if(U.tag!==1)throw Error(a(309));var X=U.stateNode}if(!X)throw Error(a(147,w));var $=X,fe=""+w;return A!==null&&A.ref!==null&&typeof A.ref=="function"&&A.ref._stringRef===fe?A.ref:(A=function(Ne){var $e=$.refs;$e===Ur&&($e=$.refs={}),Ne===null?delete $e[fe]:$e[fe]=Ne},A._stringRef=fe,A)}if(typeof w!="string")throw Error(a(284));if(!U._owner)throw Error(a(290,w))}return w}function Ut(w,A){throw w=Object.prototype.toString.call(A),Error(a(31,w==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":w))}function Ht(w){var A=w._init;return A(w._payload)}function ar(w){function A(lt,tt){if(w){var ht=lt.deletions;ht===null?(lt.deletions=[tt],lt.flags|=16):ht.push(tt)}}function U(lt,tt){if(!w)return null;for(;tt!==null;)A(lt,tt),tt=tt.sibling;return null}function X(lt,tt){for(lt=new Map;tt!==null;)tt.key!==null?lt.set(tt.key,tt):lt.set(tt.index,tt),tt=tt.sibling;return lt}function $(lt,tt){return lt=hl(lt,tt),lt.index=0,lt.sibling=null,lt}function fe(lt,tt,ht){return lt.index=ht,w?(ht=lt.alternate,ht!==null?(ht=ht.index,ht<tt?(lt.flags|=2,tt):ht):(lt.flags|=2,tt)):(lt.flags|=1048576,tt)}function Ne(lt){return w&&lt.alternate===null&&(lt.flags|=2),lt}function $e(lt,tt,ht,Dt){return tt===null||tt.tag!==6?(tt=H1(ht,lt.mode,Dt),tt.return=lt,tt):(tt=$(tt,ht),tt.return=lt,tt)}function pt(lt,tt,ht,Dt){var Vt=ht.type;return Vt===d?Nt(lt,tt,ht.props.children,Dt,ht.key):tt!==null&&(tt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===x&&Ht(Vt)===tt.type)?(Dt=$(tt,ht.props),Dt.ref=Zt(lt,tt,ht),Dt.return=lt,Dt):(Dt=Um(ht.type,ht.key,ht.props,null,lt.mode,Dt),Dt.ref=Zt(lt,tt,ht),Dt.return=lt,Dt)}function St(lt,tt,ht,Dt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==ht.containerInfo||tt.stateNode.implementation!==ht.implementation?(tt=z1(ht,lt.mode,Dt),tt.return=lt,tt):(tt=$(tt,ht.children||[]),tt.return=lt,tt)}function Nt(lt,tt,ht,Dt,Vt){return tt===null||tt.tag!==7?(tt=_u(ht,lt.mode,Dt,Vt),tt.return=lt,tt):(tt=$(tt,ht),tt.return=lt,tt)}function lr(lt,tt,ht){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return tt=H1(""+tt,lt.mode,ht),tt.return=lt,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case l:return ht=Um(tt.type,tt.key,tt.props,null,lt.mode,ht),ht.ref=Zt(lt,null,tt),ht.return=lt,ht;case c:return tt=z1(tt,lt.mode,ht),tt.return=lt,tt;case x:var Dt=tt._init;return lr(lt,Dt(tt._payload),ht)}if(G(tt)||T(tt))return tt=_u(tt,lt.mode,ht,null),tt.return=lt,tt;Ut(lt,tt)}return null}function $t(lt,tt,ht,Dt){var Vt=tt!==null?tt.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Vt!==null?null:$e(lt,tt,""+ht,Dt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return ht.key===Vt?pt(lt,tt,ht,Dt):null;case c:return ht.key===Vt?St(lt,tt,ht,Dt):null;case x:return Vt=ht._init,$t(lt,tt,Vt(ht._payload),Dt)}if(G(ht)||T(ht))return Vt!==null?null:Nt(lt,tt,ht,Dt,null);Ut(lt,ht)}return null}function Kr(lt,tt,ht,Dt,Vt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return lt=lt.get(ht)||null,$e(tt,lt,""+Dt,Vt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case l:return lt=lt.get(Dt.key===null?ht:Dt.key)||null,pt(tt,lt,Dt,Vt);case c:return lt=lt.get(Dt.key===null?ht:Dt.key)||null,St(tt,lt,Dt,Vt);case x:var yr=Dt._init;return Kr(lt,tt,ht,yr(Dt._payload),Vt)}if(G(Dt)||T(Dt))return lt=lt.get(ht)||null,Nt(tt,lt,Dt,Vt,null);Ut(tt,Dt)}return null}function Xt(lt,tt,ht,Dt){for(var Vt=null,yr=null,ur=tt,Br=tt=0,ai=null;ur!==null&&Br<ht.length;Br++){ur.index>Br?(ai=ur,ur=null):ai=ur.sibling;var Fr=$t(lt,ur,ht[Br],Dt);if(Fr===null){ur===null&&(ur=ai);break}w&&ur&&Fr.alternate===null&&A(lt,ur),tt=fe(Fr,tt,Br),yr===null?Vt=Fr:yr.sibling=Fr,yr=Fr,ur=ai}if(Br===ht.length)return U(lt,ur),Te&&N(lt,Br),Vt;if(ur===null){for(;Br<ht.length;Br++)ur=lr(lt,ht[Br],Dt),ur!==null&&(tt=fe(ur,tt,Br),yr===null?Vt=ur:yr.sibling=ur,yr=ur);return Te&&N(lt,Br),Vt}for(ur=X(lt,ur);Br<ht.length;Br++)ai=Kr(ur,lt,Br,ht[Br],Dt),ai!==null&&(w&&ai.alternate!==null&&ur.delete(ai.key===null?Br:ai.key),tt=fe(ai,tt,Br),yr===null?Vt=ai:yr.sibling=ai,yr=ai);return w&&ur.forEach(function(pl){return A(lt,pl)}),Te&&N(lt,Br),Vt}function Ei(lt,tt,ht,Dt){var Vt=T(ht);if(typeof Vt!="function")throw Error(a(150));if(ht=Vt.call(ht),ht==null)throw Error(a(151));for(var yr=Vt=null,ur=tt,Br=tt=0,ai=null,Fr=ht.next();ur!==null&&!Fr.done;Br++,Fr=ht.next()){ur.index>Br?(ai=ur,ur=null):ai=ur.sibling;var pl=$t(lt,ur,Fr.value,Dt);if(pl===null){ur===null&&(ur=ai);break}w&&ur&&pl.alternate===null&&A(lt,ur),tt=fe(pl,tt,Br),yr===null?Vt=pl:yr.sibling=pl,yr=pl,ur=ai}if(Fr.done)return U(lt,ur),Te&&N(lt,Br),Vt;if(ur===null){for(;!Fr.done;Br++,Fr=ht.next())Fr=lr(lt,Fr.value,Dt),Fr!==null&&(tt=fe(Fr,tt,Br),yr===null?Vt=Fr:yr.sibling=Fr,yr=Fr);return Te&&N(lt,Br),Vt}for(ur=X(lt,ur);!Fr.done;Br++,Fr=ht.next())Fr=Kr(ur,lt,Br,Fr.value,Dt),Fr!==null&&(w&&Fr.alternate!==null&&ur.delete(Fr.key===null?Br:Fr.key),tt=fe(Fr,tt,Br),yr===null?Vt=Fr:yr.sibling=Fr,yr=Fr);return w&&ur.forEach(function(qk){return A(lt,qk)}),Te&&N(lt,Br),Vt}function qs(lt,tt,ht,Dt){if(typeof ht=="object"&&ht!==null&&ht.type===d&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:e:{for(var Vt=ht.key,yr=tt;yr!==null;){if(yr.key===Vt){if(Vt=ht.type,Vt===d){if(yr.tag===7){U(lt,yr.sibling),tt=$(yr,ht.props.children),tt.return=lt,lt=tt;break e}}else if(yr.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===x&&Ht(Vt)===yr.type){U(lt,yr.sibling),tt=$(yr,ht.props),tt.ref=Zt(lt,yr,ht),tt.return=lt,lt=tt;break e}U(lt,yr);break}else A(lt,yr);yr=yr.sibling}ht.type===d?(tt=_u(ht.props.children,lt.mode,Dt,ht.key),tt.return=lt,lt=tt):(Dt=Um(ht.type,ht.key,ht.props,null,lt.mode,Dt),Dt.ref=Zt(lt,tt,ht),Dt.return=lt,lt=Dt)}return Ne(lt);case c:e:{for(yr=ht.key;tt!==null;){if(tt.key===yr)if(tt.tag===4&&tt.stateNode.containerInfo===ht.containerInfo&&tt.stateNode.implementation===ht.implementation){U(lt,tt.sibling),tt=$(tt,ht.children||[]),tt.return=lt,lt=tt;break e}else{U(lt,tt);break}else A(lt,tt);tt=tt.sibling}tt=z1(ht,lt.mode,Dt),tt.return=lt,lt=tt}return Ne(lt);case x:return yr=ht._init,qs(lt,tt,yr(ht._payload),Dt)}if(G(ht))return Xt(lt,tt,ht,Dt);if(T(ht))return Ei(lt,tt,ht,Dt);Ut(lt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"?(ht=""+ht,tt!==null&&tt.tag===6?(U(lt,tt.sibling),tt=$(tt,ht),tt.return=lt,lt=tt):(U(lt,tt),tt=H1(ht,lt.mode,Dt),tt.return=lt,lt=tt),Ne(lt)):U(lt,tt)}return qs}var Dr=ar(!0),un=ar(!1),en={},zr=rr(en),bn=rr(en),si=rr(en);function xr(w){if(w===en)throw Error(a(174));return w}function Vr(w,A){Et(si,A),Et(bn,w),Et(zr,en),w=Q(A),Qt(zr),Et(zr,w)}function Er(){Qt(zr),Qt(bn),Qt(si)}function Wn(w){var A=xr(si.current),U=xr(zr.current);A=V(U,w.type,A),U!==A&&(Et(bn,w),Et(zr,A))}function Jr(w){bn.current===w&&(Qt(zr),Qt(bn))}var gr=rr(0);function Nr(w){for(var A=w;A!==null;){if(A.tag===13){var U=A.memoizedState;if(U!==null&&(U=U.dehydrated,U===null||Lr(U)||Cr(U)))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if(A.flags&128)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var wn=[];function _a(){for(var w=0;w<wn.length;w++){var A=wn[w];be?A._workInProgressVersionPrimary=null:A._workInProgressVersionSecondary=null}wn.length=0}var bo=u.ReactCurrentDispatcher,Vi=u.ReactCurrentBatchConfig,Nc=0,Sn=null,Si=null,oi=null,fm=!1,bd=!1,wd=0,_k=0;function Ai(){throw Error(a(321))}function c1(w,A){if(A===null)return!1;for(var U=0;U<A.length&&U<w.length;U++)if(!Gi(w[U],A[U]))return!1;return!0}function f1(w,A,U,X,$,fe){if(Nc=fe,Sn=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,bo.current=w===null||w.memoizedState===null?Sk:Ak,w=U(X,$),bd){fe=0;do{if(bd=!1,wd=0,25<=fe)throw Error(a(301));fe+=1,oi=Si=null,A.updateQueue=null,bo.current=Mk,w=U(X,$)}while(bd)}if(bo.current=gm,A=Si!==null&&Si.next!==null,Nc=0,oi=Si=Sn=null,fm=!1,A)throw Error(a(300));return w}function d1(){var w=wd!==0;return wd=0,w}function xa(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Sn.memoizedState=oi=w:oi=oi.next=w,oi}function Qo(){if(Si===null){var w=Sn.alternate;w=w!==null?w.memoizedState:null}else w=Si.next;var A=oi===null?Sn.memoizedState:oi.next;if(A!==null)oi=A,Si=w;else{if(w===null)throw Error(a(310));Si=w,w={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},oi===null?Sn.memoizedState=oi=w:oi=oi.next=w}return oi}function hu(w,A){return typeof A=="function"?A(w):A}function dm(w){var A=Qo(),U=A.queue;if(U===null)throw Error(a(311));U.lastRenderedReducer=w;var X=Si,$=X.baseQueue,fe=U.pending;if(fe!==null){if($!==null){var Ne=$.next;$.next=fe.next,fe.next=Ne}X.baseQueue=$=fe,U.pending=null}if($!==null){fe=$.next,X=X.baseState;var $e=Ne=null,pt=null,St=fe;do{var Nt=St.lane;if((Nc&Nt)===Nt)pt!==null&&(pt=pt.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),X=St.hasEagerState?St.eagerState:w(X,St.action);else{var lr={lane:Nt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};pt===null?($e=pt=lr,Ne=X):pt=pt.next=lr,Sn.lanes|=Nt,Hc|=Nt}St=St.next}while(St!==null&&St!==fe);pt===null?Ne=X:pt.next=$e,Gi(X,A.memoizedState)||(Es=!0),A.memoizedState=X,A.baseState=Ne,A.baseQueue=pt,U.lastRenderedState=X}if(w=U.interleaved,w!==null){$=w;do fe=$.lane,Sn.lanes|=fe,Hc|=fe,$=$.next;while($!==w)}else $===null&&(U.lanes=0);return[A.memoizedState,U.dispatch]}function hm(w){var A=Qo(),U=A.queue;if(U===null)throw Error(a(311));U.lastRenderedReducer=w;var X=U.dispatch,$=U.pending,fe=A.memoizedState;if($!==null){U.pending=null;var Ne=$=$.next;do fe=w(fe,Ne.action),Ne=Ne.next;while(Ne!==$);Gi(fe,A.memoizedState)||(Es=!0),A.memoizedState=fe,A.baseQueue===null&&(A.baseState=fe),U.lastRenderedState=fe}return[fe,X]}function S2(){}function A2(w,A){var U=Sn,X=Qo(),$=A(),fe=!Gi(X.memoizedState,$);if(fe&&(X.memoizedState=$,Es=!0),X=X.queue,Ad(T2.bind(null,U,X,w),[w]),X.getSnapshot!==A||fe||oi!==null&&oi.memoizedState.tag&1){if(U.flags|=2048,Sd(9,E2.bind(null,U,X,$,A),void 0,null),On===null)throw Error(a(349));Nc&30||M2(U,A,$)}return $}function M2(w,A,U){w.flags|=16384,w={getSnapshot:A,value:U},A=Sn.updateQueue,A===null?(A={lastEffect:null,stores:null},Sn.updateQueue=A,A.stores=[w]):(U=A.stores,U===null?A.stores=[w]:U.push(w))}function E2(w,A,U,X){A.value=U,A.getSnapshot=X,C2(A)&&Xs(w,1,-1)}function T2(w,A,U){return U(function(){C2(A)&&Xs(w,1,-1)})}function C2(w){var A=w.getSnapshot;w=w.value;try{var U=A();return!Gi(w,U)}catch{return!0}}function h1(w){var A=xa();return typeof w=="function"&&(w=w()),A.memoizedState=A.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:w},A.queue=w,w=w.dispatch=wk.bind(null,Sn,w),[A.memoizedState,w]}function Sd(w,A,U,X){return w={tag:w,create:A,destroy:U,deps:X,next:null},A=Sn.updateQueue,A===null?(A={lastEffect:null,stores:null},Sn.updateQueue=A,A.lastEffect=w.next=w):(U=A.lastEffect,U===null?A.lastEffect=w.next=w:(X=U.next,U.next=w,w.next=X,A.lastEffect=w)),w}function R2(){return Qo().memoizedState}function pm(w,A,U,X){var $=xa();Sn.flags|=w,$.memoizedState=Sd(1|A,U,void 0,X===void 0?null:X)}function mm(w,A,U,X){var $=Qo();X=X===void 0?null:X;var fe=void 0;if(Si!==null){var Ne=Si.memoizedState;if(fe=Ne.destroy,X!==null&&c1(X,Ne.deps)){$.memoizedState=Sd(A,U,fe,X);return}}Sn.flags|=w,$.memoizedState=Sd(1|A,U,fe,X)}function p1(w,A){return pm(8390656,8,w,A)}function Ad(w,A){return mm(2048,8,w,A)}function P2(w,A){return mm(4,2,w,A)}function I2(w,A){return mm(4,4,w,A)}function L2(w,A){if(typeof A=="function")return w=w(),A(w),function(){A(null)};if(A!=null)return w=w(),A.current=w,function(){A.current=null}}function j2(w,A,U){return U=U!=null?U.concat([w]):null,mm(4,4,L2.bind(null,A,w),U)}function m1(){}function D2(w,A){var U=Qo();A=A===void 0?null:A;var X=U.memoizedState;return X!==null&&A!==null&&c1(A,X[1])?X[0]:(U.memoizedState=[w,A],w)}function k2(w,A){var U=Qo();A=A===void 0?null:A;var X=U.memoizedState;return X!==null&&A!==null&&c1(A,X[1])?X[0]:(w=w(),U.memoizedState=[w,A],w)}function xk(w,A){var U=mr;mr=U!==0&&4>U?U:4,w(!0);var X=Vi.transition;Vi.transition={};try{w(!1),A()}finally{mr=U,Vi.transition=X}}function O2(){return Qo().memoizedState}function bk(w,A,U){var X=fl(w);U={lane:X,action:U,hasEagerState:!1,eagerState:null,next:null},B2(w)?F2(A,U):(U2(w,A,U),U=Xi(),w=Xs(w,X,U),w!==null&&N2(w,A,X))}function wk(w,A,U){var X=fl(w),$={lane:X,action:U,hasEagerState:!1,eagerState:null,next:null};if(B2(w))F2(A,$);else{U2(w,A,$);var fe=w.alternate;if(w.lanes===0&&(fe===null||fe.lanes===0)&&(fe=A.lastRenderedReducer,fe!==null))try{var Ne=A.lastRenderedState,$e=fe(Ne,U);if($.hasEagerState=!0,$.eagerState=$e,Gi($e,Ne))return}catch{}finally{}U=Xi(),w=Xs(w,X,U),w!==null&&N2(w,A,X)}}function B2(w){var A=w.alternate;return w===Sn||A!==null&&A===Sn}function F2(w,A){bd=fm=!0;var U=w.pending;U===null?A.next=A:(A.next=U.next,U.next=A),w.pending=A}function U2(w,A,U){On!==null&&w.mode&1&&!(vr&2)?(w=A.interleaved,w===null?(U.next=U,hi===null?hi=[A]:hi.push(A)):(U.next=w.next,w.next=U),A.interleaved=U):(w=A.pending,w===null?U.next=U:(U.next=w.next,w.next=U),A.pending=U)}function N2(w,A,U){if(U&4194240){var X=A.lanes;X&=w.pendingLanes,U|=X,A.lanes=U,Vs(w,U)}}var gm={readContext:$r,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},Sk={readContext:$r,useCallback:function(w,A){return xa().memoizedState=[w,A===void 0?null:A],w},useContext:$r,useEffect:p1,useImperativeHandle:function(w,A,U){return U=U!=null?U.concat([w]):null,pm(4194308,4,L2.bind(null,A,w),U)},useLayoutEffect:function(w,A){return pm(4194308,4,w,A)},useInsertionEffect:function(w,A){return pm(4,2,w,A)},useMemo:function(w,A){var U=xa();return A=A===void 0?null:A,w=w(),U.memoizedState=[w,A],w},useReducer:function(w,A,U){var X=xa();return A=U!==void 0?U(A):A,X.memoizedState=X.baseState=A,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:A},X.queue=w,w=w.dispatch=bk.bind(null,Sn,w),[X.memoizedState,w]},useRef:function(w){var A=xa();return w={current:w},A.memoizedState=w},useState:h1,useDebugValue:m1,useDeferredValue:function(w){var A=h1(w),U=A[0],X=A[1];return p1(function(){var $=Vi.transition;Vi.transition={};try{X(w)}finally{Vi.transition=$}},[w]),U},useTransition:function(){var w=h1(!1),A=w[0];return w=xk.bind(null,w[1]),xa().memoizedState=w,[A,w]},useMutableSource:function(){},useSyncExternalStore:function(w,A,U){var X=Sn,$=xa();if(Te){if(U===void 0)throw Error(a(407));U=U()}else{if(U=A(),On===null)throw Error(a(349));Nc&30||M2(X,A,U)}$.memoizedState=U;var fe={value:U,getSnapshot:A};return $.queue=fe,p1(T2.bind(null,X,fe,w),[w]),X.flags|=2048,Sd(9,E2.bind(null,X,fe,U,A),void 0,null),U},useId:function(){var w=xa(),A=On.identifierPrefix;if(Te){var U=B,X=j;U=(X&~(1<<32-zn(X)-1)).toString(32)+U,A=":"+A+"R"+U,U=wd++,0<U&&(A+="H"+U.toString(32)),A+=":"}else U=_k++,A=":"+A+"r"+U.toString(32)+":";return w.memoizedState=A},unstable_isNewReconciler:!1},Ak={readContext:$r,useCallback:D2,useContext:$r,useEffect:Ad,useImperativeHandle:j2,useInsertionEffect:P2,useLayoutEffect:I2,useMemo:k2,useReducer:dm,useRef:R2,useState:function(){return dm(hu)},useDebugValue:m1,useDeferredValue:function(w){var A=dm(hu),U=A[0],X=A[1];return Ad(function(){var $=Vi.transition;Vi.transition={};try{X(w)}finally{Vi.transition=$}},[w]),U},useTransition:function(){var w=dm(hu)[0],A=Qo().memoizedState;return[w,A]},useMutableSource:S2,useSyncExternalStore:A2,useId:O2,unstable_isNewReconciler:!1},Mk={readContext:$r,useCallback:D2,useContext:$r,useEffect:Ad,useImperativeHandle:j2,useInsertionEffect:P2,useLayoutEffect:I2,useMemo:k2,useReducer:hm,useRef:R2,useState:function(){return hm(hu)},useDebugValue:m1,useDeferredValue:function(w){var A=hm(hu),U=A[0],X=A[1];return Ad(function(){var $=Vi.transition;Vi.transition={};try{X(w)}finally{Vi.transition=$}},[w]),U},useTransition:function(){var w=hm(hu)[0],A=Qo().memoizedState;return[w,A]},useMutableSource:S2,useSyncExternalStore:A2,useId:O2,unstable_isNewReconciler:!1};function g1(w,A){try{var U="",X=A;do U+=yo(X),X=X.return;while(X);var $=U}catch(fe){$=`
Error generating stack: `+fe.message+`
`+fe.stack}return{value:w,source:A,stack:$}}function y1(w,A){try{console.error(A.value)}catch(U){setTimeout(function(){throw U})}}var Ek=typeof WeakMap=="function"?WeakMap:Map;function G2(w,A,U){U=It(-1,U),U.tag=3,U.payload={element:null};var X=A.value;return U.callback=function(){Lm||(Lm=!0,k1=X),y1(w,A)},U}function H2(w,A,U){U=It(-1,U),U.tag=3;var X=w.type.getDerivedStateFromError;if(typeof X=="function"){var $=A.value;U.payload=function(){return X($)},U.callback=function(){y1(w,A)}}var fe=w.stateNode;return fe!==null&&typeof fe.componentDidCatch=="function"&&(U.callback=function(){y1(w,A),typeof X!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var Ne=A.stack;this.componentDidCatch(A.value,{componentStack:Ne!==null?Ne:""})}),U}function z2(w,A,U){var X=w.pingCache;if(X===null){X=w.pingCache=new Ek;var $=new Set;X.set(A,$)}else $=X.get(A),$===void 0&&($=new Set,X.set(A,$));$.has(U)||($.add(U),w=Nk.bind(null,w,A,U),A.then(w,w))}function V2(w){do{var A;if((A=w.tag===13)&&(A=w.memoizedState,A=A!==null?A.dehydrated!==null:!0),A)return w;w=w.return}while(w!==null);return null}function W2(w,A,U,X,$){return w.mode&1?(w.flags|=65536,w.lanes=$,w):(w===A?w.flags|=65536:(w.flags|=128,U.flags|=131072,U.flags&=-52805,U.tag===1&&(U.alternate===null?U.tag=17:(A=It(-1,1),A.tag=2,Ko(U,A))),U.lanes|=1),w)}function Zo(w){w.flags|=4}function X2(w,A){if(w!==null&&w.child===A.child)return!0;if(A.flags&16)return!1;for(w=A.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var Md,Ed,ym,vm;if(me)Md=function(w,A){for(var U=A.child;U!==null;){if(U.tag===5||U.tag===6)ie(w,U.stateNode);else if(U.tag!==4&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===A)break;for(;U.sibling===null;){if(U.return===null||U.return===A)return;U=U.return}U.sibling.return=U.return,U=U.sibling}},Ed=function(){},ym=function(w,A,U,X,$){if(w=w.memoizedProps,w!==X){var fe=A.stateNode,Ne=xr(zr.current);U=O(fe,U,w,X,$,Ne),(A.updateQueue=U)&&Zo(A)}},vm=function(w,A,U,X){U!==X&&Zo(A)};else if(ce){Md=function(w,A,U,X){for(var $=A.child;$!==null;){if($.tag===5){var fe=$.stateNode;U&&X&&(fe=Bt(fe,$.type,$.memoizedProps,$)),ie(w,fe)}else if($.tag===6)fe=$.stateNode,U&&X&&(fe=qt(fe,$.memoizedProps,$)),ie(w,fe);else if($.tag!==4){if($.tag===22&&$.memoizedState!==null)fe=$.child,fe!==null&&(fe.return=$),Md(w,$,!0,!0);else if($.child!==null){$.child.return=$,$=$.child;continue}}if($===A)break;for(;$.sibling===null;){if($.return===null||$.return===A)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};var Y2=function(w,A,U,X){for(var $=A.child;$!==null;){if($.tag===5){var fe=$.stateNode;U&&X&&(fe=Bt(fe,$.type,$.memoizedProps,$)),xt(w,fe)}else if($.tag===6)fe=$.stateNode,U&&X&&(fe=qt(fe,$.memoizedProps,$)),xt(w,fe);else if($.tag!==4){if($.tag===22&&$.memoizedState!==null)fe=$.child,fe!==null&&(fe.return=$),Y2(w,$,!0,!0);else if($.child!==null){$.child.return=$,$=$.child;continue}}if($===A)break;for(;$.sibling===null;){if($.return===null||$.return===A)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};Ed=function(w,A){var U=A.stateNode;if(!X2(w,A)){w=U.containerInfo;var X=ct(w);Y2(X,A,!1,!1),U.pendingChildren=X,Zo(A),_t(w,X)}},ym=function(w,A,U,X,$){var fe=w.stateNode,Ne=w.memoizedProps;if((w=X2(w,A))&&Ne===X)A.stateNode=fe;else{var $e=A.stateNode,pt=xr(zr.current),St=null;Ne!==X&&(St=O($e,U,Ne,X,$,pt)),w&&St===null?A.stateNode=fe:(fe=at(fe,St,U,Ne,X,A,w,$e),I(fe,U,X,$,pt)&&Zo(A),A.stateNode=fe,w?Zo(A):Md(fe,A,!1,!1))}},vm=function(w,A,U,X){U!==X?(w=xr(si.current),U=xr(zr.current),A.stateNode=q(X,w,U,A),Zo(A)):A.stateNode=w.stateNode}}else Ed=function(){},ym=function(){},vm=function(){};function Td(w,A){if(!Te)switch(w.tailMode){case"hidden":A=w.tail;for(var U=null;A!==null;)A.alternate!==null&&(U=A),A=A.sibling;U===null?w.tail=null:U.sibling=null;break;case"collapsed":U=w.tail;for(var X=null;U!==null;)U.alternate!==null&&(X=U),U=U.sibling;X===null?A||w.tail===null?w.tail=null:w.tail.sibling=null:X.sibling=null}}function Mi(w){var A=w.alternate!==null&&w.alternate.child===w.child,U=0,X=0;if(A)for(var $=w.child;$!==null;)U|=$.lanes|$.childLanes,X|=$.subtreeFlags&14680064,X|=$.flags&14680064,$.return=w,$=$.sibling;else for($=w.child;$!==null;)U|=$.lanes|$.childLanes,X|=$.subtreeFlags,X|=$.flags,$.return=w,$=$.sibling;return w.subtreeFlags|=X,w.childLanes=U,A}function Tk(w,A,U){var X=A.pendingProps;switch(se(A),A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(A),null;case 1:return Rr(A.type)&&ti(),Mi(A),null;case 3:return X=A.stateNode,Er(),Qt(Yt),Qt(nr),_a(),X.pendingContext&&(X.context=X.pendingContext,X.pendingContext=null),(w===null||w.child===null)&&(nt(A)?Zo(A):w===null||w.memoizedState.isDehydrated&&!(A.flags&256)||(A.flags|=1024,Ze!==null&&(F1(Ze),Ze=null))),Ed(w,A),Mi(A),null;case 5:Jr(A),U=xr(si.current);var $=A.type;if(w!==null&&A.stateNode!=null)ym(w,A,$,X,U),w.ref!==A.ref&&(A.flags|=512,A.flags|=2097152);else{if(!X){if(A.stateNode===null)throw Error(a(166));return Mi(A),null}if(w=xr(zr.current),nt(A)){if(!te)throw Error(a(175));w=Ns(A.stateNode,A.type,A.memoizedProps,U,w,A,!Xe),A.updateQueue=w,w!==null&&Zo(A)}else{var fe=J($,X,U,w,A);Md(fe,A,!1,!1),A.stateNode=fe,I(fe,$,X,U,w)&&Zo(A)}A.ref!==null&&(A.flags|=512,A.flags|=2097152)}return Mi(A),null;case 6:if(w&&A.stateNode!=null)vm(w,A,w.memoizedProps,X);else{if(typeof X!="string"&&A.stateNode===null)throw Error(a(166));if(w=xr(si.current),U=xr(zr.current),nt(A)){if(!te)throw Error(a(176));if(w=A.stateNode,X=A.memoizedProps,(U=Ss(w,X,A,!Xe))&&($=_e,$!==null))switch(fe=($.mode&1)!==0,$.tag){case 3:gt($.stateNode.containerInfo,w,X,fe);break;case 5:ot($.type,$.memoizedProps,$.stateNode,w,X,fe)}U&&Zo(A)}else A.stateNode=q(X,w,U,A)}return Mi(A),null;case 13:if(Qt(gr),X=A.memoizedState,Te&&Ie!==null&&A.mode&1&&!(A.flags&128)){for(w=Ie;w;)w=Mr(w);return rt(),A.flags|=98560,A}if(X!==null&&X.dehydrated!==null){if(X=nt(A),w===null){if(!X)throw Error(a(318));if(!te)throw Error(a(344));if(w=A.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));po(w,A)}else rt(),!(A.flags&128)&&(A.memoizedState=null),A.flags|=4;return Mi(A),null}return Ze!==null&&(F1(Ze),Ze=null),A.flags&128?(A.lanes=U,A):(X=X!==null,U=!1,w===null?nt(A):U=w.memoizedState!==null,X&&!U&&(A.child.flags|=8192,A.mode&1&&(w===null||gr.current&1?Xn===0&&(Xn=3):N1())),A.updateQueue!==null&&(A.flags|=4),Mi(A),null);case 4:return Er(),Ed(w,A),w===null&&ge(A.stateNode.containerInfo),Mi(A),null;case 10:return Pn(A.type._context),Mi(A),null;case 17:return Rr(A.type)&&ti(),Mi(A),null;case 19:if(Qt(gr),$=A.memoizedState,$===null)return Mi(A),null;if(X=(A.flags&128)!==0,fe=$.rendering,fe===null)if(X)Td($,!1);else{if(Xn!==0||w!==null&&w.flags&128)for(w=A.child;w!==null;){if(fe=Nr(w),fe!==null){for(A.flags|=128,Td($,!1),w=fe.updateQueue,w!==null&&(A.updateQueue=w,A.flags|=4),A.subtreeFlags=0,w=U,X=A.child;X!==null;)U=X,$=w,U.flags&=14680066,fe=U.alternate,fe===null?(U.childLanes=0,U.lanes=$,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=fe.childLanes,U.lanes=fe.lanes,U.child=fe.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=fe.memoizedProps,U.memoizedState=fe.memoizedState,U.updateQueue=fe.updateQueue,U.type=fe.type,$=fe.dependencies,U.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),X=X.sibling;return Et(gr,gr.current&1|2),A.child}w=w.sibling}$.tail!==null&&an()>D1&&(A.flags|=128,X=!0,Td($,!1),A.lanes=4194304)}else{if(!X)if(w=Nr(fe),w!==null){if(A.flags|=128,X=!0,w=w.updateQueue,w!==null&&(A.updateQueue=w,A.flags|=4),Td($,!0),$.tail===null&&$.tailMode==="hidden"&&!fe.alternate&&!Te)return Mi(A),null}else 2*an()-$.renderingStartTime>D1&&U!==1073741824&&(A.flags|=128,X=!0,Td($,!1),A.lanes=4194304);$.isBackwards?(fe.sibling=A.child,A.child=fe):(w=$.last,w!==null?w.sibling=fe:A.child=fe,$.last=fe)}return $.tail!==null?(A=$.tail,$.rendering=A,$.tail=A.sibling,$.renderingStartTime=an(),A.sibling=null,w=gr.current,Et(gr,X?w&1|2:w&1),A):(Mi(A),null);case 22:case 23:return U1(),X=A.memoizedState!==null,w!==null&&w.memoizedState!==null!==X&&(A.flags|=8192),X&&A.mode&1?Ts&1073741824&&(Mi(A),me&&A.subtreeFlags&6&&(A.flags|=8192)):Mi(A),null;case 24:return null;case 25:return null}throw Error(a(156,A.tag))}var Ck=u.ReactCurrentOwner,Es=!1;function Wi(w,A,U,X){A.child=w===null?un(A,null,U,X):Dr(A,w.child,U,X)}function q2(w,A,U,X,$){U=U.render;var fe=A.ref;return ln(A,$),X=f1(w,A,U,X,fe,$),U=d1(),w!==null&&!Es?(A.updateQueue=w.updateQueue,A.flags&=-2053,w.lanes&=~$,ba(w,A,$)):(Te&&U&&re(A),A.flags|=1,Wi(w,A,X,$),A.child)}function J2(w,A,U,X,$){if(w===null){var fe=U.type;return typeof fe=="function"&&!G1(fe)&&fe.defaultProps===void 0&&U.compare===null&&U.defaultProps===void 0?(A.tag=15,A.type=fe,K2(w,A,fe,X,$)):(w=Um(U.type,null,X,A,A.mode,$),w.ref=A.ref,w.return=A,A.child=w)}if(fe=w.child,!(w.lanes&$)){var Ne=fe.memoizedProps;if(U=U.compare,U=U!==null?U:Jo,U(Ne,X)&&w.ref===A.ref)return ba(w,A,$)}return A.flags|=1,w=hl(fe,X),w.ref=A.ref,w.return=A,A.child=w}function K2(w,A,U,X,$){if(w!==null&&Jo(w.memoizedProps,X)&&w.ref===A.ref)if(Es=!1,(w.lanes&$)!==0)w.flags&131072&&(Es=!0);else return A.lanes=w.lanes,ba(w,A,$);return v1(w,A,U,X,$)}function Q2(w,A,U){var X=A.pendingProps,$=X.children,fe=w!==null?w.memoizedState:null;if(X.mode==="hidden")if(!(A.mode&1))A.memoizedState={baseLanes:0,cachePool:null},Et(Gc,Ts),Ts|=U;else if(U&1073741824)A.memoizedState={baseLanes:0,cachePool:null},X=fe!==null?fe.baseLanes:U,Et(Gc,Ts),Ts|=X;else return w=fe!==null?fe.baseLanes|U:U,A.lanes=A.childLanes=1073741824,A.memoizedState={baseLanes:w,cachePool:null},A.updateQueue=null,Et(Gc,Ts),Ts|=w,null;else fe!==null?(X=fe.baseLanes|U,A.memoizedState=null):X=U,Et(Gc,Ts),Ts|=X;return Wi(w,A,$,U),A.child}function Z2(w,A){var U=A.ref;(w===null&&U!==null||w!==null&&w.ref!==U)&&(A.flags|=512,A.flags|=2097152)}function v1(w,A,U,X,$){var fe=Rr(U)?qr:nr.current;return fe=xn(A,fe),ln(A,$),U=f1(w,A,U,X,fe,$),X=d1(),w!==null&&!Es?(A.updateQueue=w.updateQueue,A.flags&=-2053,w.lanes&=~$,ba(w,A,$)):(Te&&X&&re(A),A.flags|=1,Wi(w,A,U,$),A.child)}function $2(w,A,U,X,$){if(Rr(U)){var fe=!0;Fi(A)}else fe=!1;if(ln(A,$),A.stateNode===null)w!==null&&(w.alternate=null,A.alternate=null,A.flags|=2),um(A,U,X),xd(A,U,X,$),X=!0;else if(w===null){var Ne=A.stateNode,$e=A.memoizedProps;Ne.props=$e;var pt=Ne.context,St=U.contextType;typeof St=="object"&&St!==null?St=$r(St):(St=Rr(U)?qr:nr.current,St=xn(A,St));var Nt=U.getDerivedStateFromProps,lr=typeof Nt=="function"||typeof Ne.getSnapshotBeforeUpdate=="function";lr||typeof Ne.UNSAFE_componentWillReceiveProps!="function"&&typeof Ne.componentWillReceiveProps!="function"||($e!==X||pt!==St)&&cm(A,Ne,X,St),_o=!1;var $t=A.memoizedState;Ne.state=$t,Oc(A,X,Ne,$),pt=A.memoizedState,$e!==X||$t!==pt||Yt.current||_o?(typeof Nt=="function"&&(Bc(A,U,Nt,X),pt=A.memoizedState),($e=_o||as(A,U,$e,X,$t,pt,St))?(lr||typeof Ne.UNSAFE_componentWillMount!="function"&&typeof Ne.componentWillMount!="function"||(typeof Ne.componentWillMount=="function"&&Ne.componentWillMount(),typeof Ne.UNSAFE_componentWillMount=="function"&&Ne.UNSAFE_componentWillMount()),typeof Ne.componentDidMount=="function"&&(A.flags|=4194308)):(typeof Ne.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=X,A.memoizedState=pt),Ne.props=X,Ne.state=pt,Ne.context=St,X=$e):(typeof Ne.componentDidMount=="function"&&(A.flags|=4194308),X=!1)}else{Ne=A.stateNode,xo(w,A),$e=A.memoizedProps,St=A.type===A.elementType?$e:ni(A.type,$e),Ne.props=St,lr=A.pendingProps,$t=Ne.context,pt=U.contextType,typeof pt=="object"&&pt!==null?pt=$r(pt):(pt=Rr(U)?qr:nr.current,pt=xn(A,pt));var Kr=U.getDerivedStateFromProps;(Nt=typeof Kr=="function"||typeof Ne.getSnapshotBeforeUpdate=="function")||typeof Ne.UNSAFE_componentWillReceiveProps!="function"&&typeof Ne.componentWillReceiveProps!="function"||($e!==lr||$t!==pt)&&cm(A,Ne,X,pt),_o=!1,$t=A.memoizedState,Ne.state=$t,Oc(A,X,Ne,$);var Xt=A.memoizedState;$e!==lr||$t!==Xt||Yt.current||_o?(typeof Kr=="function"&&(Bc(A,U,Kr,X),Xt=A.memoizedState),(St=_o||as(A,U,St,X,$t,Xt,pt)||!1)?(Nt||typeof Ne.UNSAFE_componentWillUpdate!="function"&&typeof Ne.componentWillUpdate!="function"||(typeof Ne.componentWillUpdate=="function"&&Ne.componentWillUpdate(X,Xt,pt),typeof Ne.UNSAFE_componentWillUpdate=="function"&&Ne.UNSAFE_componentWillUpdate(X,Xt,pt)),typeof Ne.componentDidUpdate=="function"&&(A.flags|=4),typeof Ne.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof Ne.componentDidUpdate!="function"||$e===w.memoizedProps&&$t===w.memoizedState||(A.flags|=4),typeof Ne.getSnapshotBeforeUpdate!="function"||$e===w.memoizedProps&&$t===w.memoizedState||(A.flags|=1024),A.memoizedProps=X,A.memoizedState=Xt),Ne.props=X,Ne.state=Xt,Ne.context=pt,X=St):(typeof Ne.componentDidUpdate!="function"||$e===w.memoizedProps&&$t===w.memoizedState||(A.flags|=4),typeof Ne.getSnapshotBeforeUpdate!="function"||$e===w.memoizedProps&&$t===w.memoizedState||(A.flags|=1024),X=!1)}return _1(w,A,U,X,fe,$)}function _1(w,A,U,X,$,fe){Z2(w,A);var Ne=(A.flags&128)!==0;if(!X&&!Ne)return $&&Hr(A,U,!1),ba(w,A,fe);X=A.stateNode,Ck.current=A;var $e=Ne&&typeof U.getDerivedStateFromError!="function"?null:X.render();return A.flags|=1,w!==null&&Ne?(A.child=Dr(A,w.child,null,fe),A.child=Dr(A,null,$e,fe)):Wi(w,A,$e,fe),A.memoizedState=X.state,$&&Hr(A,U,!0),A.child}function eA(w){var A=w.stateNode;A.pendingContext?Or(w,A.pendingContext,A.pendingContext!==A.context):A.context&&Or(w,A.context,!1),Vr(w,A.containerInfo)}function tA(w,A,U,X,$){return rt(),Ft($),A.flags|=256,Wi(w,A,U,X),A.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function xm(w){return{baseLanes:w,cachePool:null}}function rA(w,A,U){var X=A.pendingProps,$=gr.current,fe=!1,Ne=(A.flags&128)!==0,$e;if(($e=Ne)||($e=w!==null&&w.memoizedState===null?!1:($&2)!==0),$e?(fe=!0,A.flags&=-129):(w===null||w.memoizedState!==null)&&($|=1),Et(gr,$&1),w===null)return it(A),w=A.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(A.mode&1?Cr(w)?A.lanes=8:A.lanes=1073741824:A.lanes=1,null):($=X.children,w=X.fallback,fe?(X=A.mode,fe=A.child,$={mode:"hidden",children:$},!(X&1)&&fe!==null?(fe.childLanes=0,fe.pendingProps=$):fe=Nm($,X,0,null),w=_u(w,X,U,null),fe.return=A,w.return=A,fe.sibling=w,A.child=fe,A.child.memoizedState=xm(U),A.memoizedState=_m,w):x1(A,$));if($=w.memoizedState,$!==null){if($e=$.dehydrated,$e!==null){if(Ne)return A.flags&256?(A.flags&=-257,bm(w,A,U,Error(a(422)))):A.memoizedState!==null?(A.child=w.child,A.flags|=128,null):(fe=X.fallback,$=A.mode,X=Nm({mode:"visible",children:X.children},$,0,null),fe=_u(fe,$,U,null),fe.flags|=2,X.return=A,fe.return=A,X.sibling=fe,A.child=X,A.mode&1&&Dr(A,w.child,null,U),A.child.memoizedState=xm(U),A.memoizedState=_m,fe);if(!(A.mode&1))A=bm(w,A,U,null);else if(Cr($e))A=bm(w,A,U,Error(a(419)));else if(X=(U&w.childLanes)!==0,Es||X){if(X=On,X!==null){switch(U&-U){case 4:fe=2;break;case 16:fe=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:fe=32;break;case 536870912:fe=268435456;break;default:fe=0}X=fe&(X.suspendedLanes|U)?0:fe,X!==0&&X!==$.retryLane&&($.retryLane=X,Xs(w,X,-1))}N1(),A=bm(w,A,U,Error(a(421)))}else Lr($e)?(A.flags|=128,A.child=w.child,A=Gk.bind(null,w),dr($e,A),A=null):(U=$.treeContext,te&&(Ie=ei($e),_e=A,Te=!0,Ze=null,Xe=!1,U!==null&&(jr[wi++]=j,jr[wi++]=B,jr[wi++]=E,j=U.id,B=U.overflow,E=A)),A=x1(A,A.pendingProps.children),A.flags|=4096);return A}return fe?(X=iA(w,A,X.children,X.fallback,U),fe=A.child,$=w.child.memoizedState,fe.memoizedState=$===null?xm(U):{baseLanes:$.baseLanes|U,cachePool:null},fe.childLanes=w.childLanes&~U,A.memoizedState=_m,X):(U=nA(w,A,X.children,U),A.memoizedState=null,U)}return fe?(X=iA(w,A,X.children,X.fallback,U),fe=A.child,$=w.child.memoizedState,fe.memoizedState=$===null?xm(U):{baseLanes:$.baseLanes|U,cachePool:null},fe.childLanes=w.childLanes&~U,A.memoizedState=_m,X):(U=nA(w,A,X.children,U),A.memoizedState=null,U)}function x1(w,A){return A=Nm({mode:"visible",children:A},w.mode,0,null),A.return=w,w.child=A}function nA(w,A,U,X){var $=w.child;return w=$.sibling,U=hl($,{mode:"visible",children:U}),!(A.mode&1)&&(U.lanes=X),U.return=A,U.sibling=null,w!==null&&(X=A.deletions,X===null?(A.deletions=[w],A.flags|=16):X.push(w)),A.child=U}function iA(w,A,U,X,$){var fe=A.mode;w=w.child;var Ne=w.sibling,$e={mode:"hidden",children:U};return!(fe&1)&&A.child!==w?(U=A.child,U.childLanes=0,U.pendingProps=$e,A.deletions=null):(U=hl(w,$e),U.subtreeFlags=w.subtreeFlags&14680064),Ne!==null?X=hl(Ne,X):(X=_u(X,fe,$,null),X.flags|=2),X.return=A,U.return=A,U.sibling=X,A.child=U,X}function bm(w,A,U,X){return X!==null&&Ft(X),Dr(A,w.child,null,U),w=x1(A,A.pendingProps.children),w.flags|=2,A.memoizedState=null,w}function sA(w,A,U){w.lanes|=A;var X=w.alternate;X!==null&&(X.lanes|=A),ii(w.return,A,U)}function b1(w,A,U,X,$){var fe=w.memoizedState;fe===null?w.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:X,tail:U,tailMode:$}:(fe.isBackwards=A,fe.rendering=null,fe.renderingStartTime=0,fe.last=X,fe.tail=U,fe.tailMode=$)}function oA(w,A,U){var X=A.pendingProps,$=X.revealOrder,fe=X.tail;if(Wi(w,A,X.children,U),X=gr.current,X&2)X=X&1|2,A.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=A.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&sA(w,U,A);else if(w.tag===19)sA(w,U,A);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===A)break e;for(;w.sibling===null;){if(w.return===null||w.return===A)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}X&=1}if(Et(gr,X),!(A.mode&1))A.memoizedState=null;else switch($){case"forwards":for(U=A.child,$=null;U!==null;)w=U.alternate,w!==null&&Nr(w)===null&&($=U),U=U.sibling;U=$,U===null?($=A.child,A.child=null):($=U.sibling,U.sibling=null),b1(A,!1,$,U,fe);break;case"backwards":for(U=null,$=A.child,A.child=null;$!==null;){if(w=$.alternate,w!==null&&Nr(w)===null){A.child=$;break}w=$.sibling,$.sibling=U,U=$,$=w}b1(A,!0,U,null,fe);break;case"together":b1(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function ba(w,A,U){if(w!==null&&(A.dependencies=w.dependencies),Hc|=A.lanes,!(U&A.childLanes))return null;if(w!==null&&A.child!==w.child)throw Error(a(153));if(A.child!==null){for(w=A.child,U=hl(w,w.pendingProps),A.child=U,U.return=A;w.sibling!==null;)w=w.sibling,U=U.sibling=hl(w,w.pendingProps),U.return=A;U.sibling=null}return A.child}function Rk(w,A,U){switch(A.tag){case 3:eA(A),rt();break;case 5:Wn(A);break;case 1:Rr(A.type)&&Fi(A);break;case 4:Vr(A,A.stateNode.containerInfo);break;case 10:cu(A,A.type._context,A.memoizedProps.value);break;case 13:var X=A.memoizedState;if(X!==null)return X.dehydrated!==null?(Et(gr,gr.current&1),A.flags|=128,null):U&A.child.childLanes?rA(w,A,U):(Et(gr,gr.current&1),w=ba(w,A,U),w!==null?w.sibling:null);Et(gr,gr.current&1);break;case 19:if(X=(U&A.childLanes)!==0,w.flags&128){if(X)return oA(w,A,U);A.flags|=128}var $=A.memoizedState;if($!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),Et(gr,gr.current),X)break;return null;case 22:case 23:return A.lanes=0,Q2(w,A,U)}return ba(w,A,U)}function Pk(w,A){switch(se(A),A.tag){case 1:return Rr(A.type)&&ti(),w=A.flags,w&65536?(A.flags=w&-65537|128,A):null;case 3:return Er(),Qt(Yt),Qt(nr),_a(),w=A.flags,w&65536&&!(w&128)?(A.flags=w&-65537|128,A):null;case 5:return Jr(A),null;case 13:if(Qt(gr),w=A.memoizedState,w!==null&&w.dehydrated!==null){if(A.alternate===null)throw Error(a(340));rt()}return w=A.flags,w&65536?(A.flags=w&-65537|128,A):null;case 19:return Qt(gr),null;case 4:return Er(),null;case 10:return Pn(A.type._context),null;case 22:case 23:return U1(),null;case 24:return null;default:return null}}var wm=!1,pu=!1,Ik=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Sm(w,A){var U=w.ref;if(U!==null)if(typeof U=="function")try{U(null)}catch(X){cs(w,A,X)}else U.current=null}function w1(w,A,U){try{U()}catch(X){cs(w,A,X)}}var aA=!1;function Lk(w,A){for(W(w.containerInfo),Lt=A;Lt!==null;)if(w=Lt,A=w.child,(w.subtreeFlags&1028)!==0&&A!==null)A.return=w,Lt=A;else for(;Lt!==null;){w=Lt;try{var U=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var X=U.memoizedProps,$=U.memoizedState,fe=w.stateNode,Ne=fe.getSnapshotBeforeUpdate(w.elementType===w.type?X:ni(w.type,X),$);fe.__reactInternalSnapshotBeforeUpdate=Ne}break;case 3:me&&dt(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch($e){cs(w,w.return,$e)}if(A=w.sibling,A!==null){A.return=w.return,Lt=A;break}Lt=w.return}return U=aA,aA=!1,U}function mu(w,A,U){var X=A.updateQueue;if(X=X!==null?X.lastEffect:null,X!==null){var $=X=X.next;do{if(($.tag&w)===w){var fe=$.destroy;$.destroy=void 0,fe!==void 0&&w1(A,U,fe)}$=$.next}while($!==X)}}function Cd(w,A){if(A=A.updateQueue,A=A!==null?A.lastEffect:null,A!==null){var U=A=A.next;do{if((U.tag&w)===w){var X=U.create;U.destroy=X()}U=U.next}while(U!==A)}}function S1(w){var A=w.ref;if(A!==null){var U=w.stateNode;switch(w.tag){case 5:w=z(U);break;default:w=U}typeof A=="function"?A(w):A.current=w}}function lA(w,A,U){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ms,A)}catch{}switch(A.tag){case 0:case 11:case 14:case 15:if(w=A.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var X=w=w.next;do{var $=X,fe=$.destroy;$=$.tag,fe!==void 0&&($&2||$&4)&&w1(A,U,fe),X=X.next}while(X!==w)}break;case 1:if(Sm(A,U),w=A.stateNode,typeof w.componentWillUnmount=="function")try{w.props=A.memoizedProps,w.state=A.memoizedState,w.componentWillUnmount()}catch(Ne){cs(A,U,Ne)}break;case 5:Sm(A,U);break;case 4:me?pA(w,A,U):ce&&ce&&(A=A.stateNode.containerInfo,U=ct(A),vt(A,U))}}function uA(w,A,U){for(var X=A;;)if(lA(w,X,U),X.child===null||me&&X.tag===4){if(X===A)break;for(;X.sibling===null;){if(X.return===null||X.return===A)return;X=X.return}X.sibling.return=X.return,X=X.sibling}else X.child.return=X,X=X.child}function cA(w){var A=w.alternate;A!==null&&(w.alternate=null,cA(A)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(A=w.stateNode,A!==null&&Le(A)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function fA(w){return w.tag===5||w.tag===3||w.tag===4}function dA(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||fA(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function hA(w){if(me){e:{for(var A=w.return;A!==null;){if(fA(A))break e;A=A.return}throw Error(a(160))}var U=A;switch(U.tag){case 5:A=U.stateNode,U.flags&32&&(De(A),U.flags&=-33),U=dA(w),M1(w,U,A);break;case 3:case 4:A=U.stateNode.containerInfo,U=dA(w),A1(w,U,A);break;default:throw Error(a(161))}}}function A1(w,A,U){var X=w.tag;if(X===5||X===6)w=w.stateNode,A?he(U,w,A):We(U,w);else if(X!==4&&(w=w.child,w!==null))for(A1(w,A,U),w=w.sibling;w!==null;)A1(w,A,U),w=w.sibling}function M1(w,A,U){var X=w.tag;if(X===5||X===6)w=w.stateNode,A?ee(U,w,A):Se(U,w);else if(X!==4&&(w=w.child,w!==null))for(M1(w,A,U),w=w.sibling;w!==null;)M1(w,A,U),w=w.sibling}function pA(w,A,U){for(var X=A,$=!1,fe,Ne;;){if(!$){$=X.return;e:for(;;){if($===null)throw Error(a(160));switch(fe=$.stateNode,$.tag){case 5:Ne=!1;break e;case 3:fe=fe.containerInfo,Ne=!0;break e;case 4:fe=fe.containerInfo,Ne=!0;break e}$=$.return}$=!0}if(X.tag===5||X.tag===6)uA(w,X,U),Ne?ye(fe,X.stateNode):Pe(fe,X.stateNode);else if(X.tag===18)Ne?et(fe,X.stateNode):ze(fe,X.stateNode);else if(X.tag===4){if(X.child!==null){fe=X.stateNode.containerInfo,Ne=!0,X.child.return=X,X=X.child;continue}}else if(lA(w,X,U),X.child!==null){X.child.return=X,X=X.child;continue}if(X===A)break;for(;X.sibling===null;){if(X.return===null||X.return===A)return;X=X.return,X.tag===4&&($=!1)}X.sibling.return=X.return,X=X.sibling}}function E1(w,A){if(me){switch(A.tag){case 0:case 11:case 14:case 15:mu(3,A,A.return),Cd(3,A),mu(5,A,A.return);return;case 1:return;case 5:var U=A.stateNode;if(U!=null){var X=A.memoizedProps;w=w!==null?w.memoizedProps:X;var $=A.type,fe=A.updateQueue;A.updateQueue=null,fe!==null&&de(U,fe,$,w,X,A)}return;case 6:if(A.stateNode===null)throw Error(a(162));U=A.memoizedProps,Re(A.stateNode,w!==null?w.memoizedProps:U,U);return;case 3:te&&w!==null&&w.memoizedState.isDehydrated&&ve(A.stateNode.containerInfo);return;case 12:return;case 13:Am(A);return;case 19:Am(A);return;case 17:return}throw Error(a(163))}switch(A.tag){case 0:case 11:case 14:case 15:mu(3,A,A.return),Cd(3,A),mu(5,A,A.return);return;case 12:return;case 13:Am(A);return;case 19:Am(A);return;case 3:te&&w!==null&&w.memoizedState.isDehydrated&&ve(A.stateNode.containerInfo);break;case 22:case 23:return}e:if(ce){switch(A.tag){case 1:case 5:case 6:break e;case 3:case 4:A=A.stateNode,vt(A.containerInfo,A.pendingChildren);break e}throw Error(a(163))}}function Am(w){var A=w.updateQueue;if(A!==null){w.updateQueue=null;var U=w.stateNode;U===null&&(U=w.stateNode=new Ik),A.forEach(function(X){var $=Hk.bind(null,w,X);U.has(X)||(U.add(X),X.then($,$))})}}function jk(w,A){for(Lt=A;Lt!==null;){A=Lt;var U=A.deletions;if(U!==null)for(var X=0;X<U.length;X++){var $=U[X];try{var fe=w;me?pA(fe,$,A):uA(fe,$,A);var Ne=$.alternate;Ne!==null&&(Ne.return=null),$.return=null}catch(Vt){cs($,A,Vt)}}if(U=A.child,A.subtreeFlags&12854&&U!==null)U.return=A,Lt=U;else for(;Lt!==null;){A=Lt;try{var $e=A.flags;if($e&32&&me&&De(A.stateNode),$e&512){var pt=A.alternate;if(pt!==null){var St=pt.ref;St!==null&&(typeof St=="function"?St(null):St.current=null)}}if($e&8192)switch(A.tag){case 13:if(A.memoizedState!==null){var Nt=A.alternate;(Nt===null||Nt.memoizedState===null)&&(j1=an())}break;case 22:var lr=A.memoizedState!==null,$t=A.alternate,Kr=$t!==null&&$t.memoizedState!==null;if(U=A,me){e:if(X=U,$=lr,fe=null,me)for(var Xt=X;;){if(Xt.tag===5){if(fe===null){fe=Xt;var Ei=Xt.stateNode;$?Me(Ei):ke(Xt.stateNode,Xt.memoizedProps)}}else if(Xt.tag===6){if(fe===null){var qs=Xt.stateNode;$?qe(qs):Ye(qs,Xt.memoizedProps)}}else if((Xt.tag!==22&&Xt.tag!==23||Xt.memoizedState===null||Xt===X)&&Xt.child!==null){Xt.child.return=Xt,Xt=Xt.child;continue}if(Xt===X)break;for(;Xt.sibling===null;){if(Xt.return===null||Xt.return===X)break e;fe===Xt&&(fe=null),Xt=Xt.return}fe===Xt&&(fe=null),Xt.sibling.return=Xt.return,Xt=Xt.sibling}}if(lr&&!Kr&&U.mode&1){Lt=U;for(var lt=U.child;lt!==null;){for(U=Lt=lt;Lt!==null;){X=Lt;var tt=X.child;switch(X.tag){case 0:case 11:case 14:case 15:mu(4,X,X.return);break;case 1:Sm(X,X.return);var ht=X.stateNode;if(typeof ht.componentWillUnmount=="function"){var Dt=X.return;try{ht.props=X.memoizedProps,ht.state=X.memoizedState,ht.componentWillUnmount()}catch(Vt){cs(X,Dt,Vt)}}break;case 5:Sm(X,X.return);break;case 22:if(X.memoizedState!==null){yA(U);continue}}tt!==null?(tt.return=X,Lt=tt):yA(U)}lt=lt.sibling}}}switch($e&4102){case 2:hA(A),A.flags&=-3;break;case 6:hA(A),A.flags&=-3,E1(A.alternate,A);break;case 4096:A.flags&=-4097;break;case 4100:A.flags&=-4097,E1(A.alternate,A);break;case 4:E1(A.alternate,A)}}catch(Vt){cs(A,A.return,Vt)}if(U=A.sibling,U!==null){U.return=A.return,Lt=U;break}Lt=A.return}}}function Dk(w,A,U){Lt=w,mA(w)}function mA(w,A,U){for(var X=(w.mode&1)!==0;Lt!==null;){var $=Lt,fe=$.child;if($.tag===22&&X){var Ne=$.memoizedState!==null||wm;if(!Ne){var $e=$.alternate,pt=$e!==null&&$e.memoizedState!==null||pu;$e=wm;var St=pu;if(wm=Ne,(pu=pt)&&!St)for(Lt=$;Lt!==null;)Ne=Lt,pt=Ne.child,Ne.tag===22&&Ne.memoizedState!==null?vA($):pt!==null?(pt.return=Ne,Lt=pt):vA($);for(;fe!==null;)Lt=fe,mA(fe),fe=fe.sibling;Lt=$,wm=$e,pu=St}gA(w)}else $.subtreeFlags&8772&&fe!==null?(fe.return=$,Lt=fe):gA(w)}}function gA(w){for(;Lt!==null;){var A=Lt;if(A.flags&8772){var U=A.alternate;try{if(A.flags&8772)switch(A.tag){case 0:case 11:case 15:pu||Cd(5,A);break;case 1:var X=A.stateNode;if(A.flags&4&&!pu)if(U===null)X.componentDidMount();else{var $=A.elementType===A.type?U.memoizedProps:ni(A.type,U.memoizedProps);X.componentDidUpdate($,U.memoizedState,X.__reactInternalSnapshotBeforeUpdate)}var fe=A.updateQueue;fe!==null&&lm(A,fe,X);break;case 3:var Ne=A.updateQueue;if(Ne!==null){if(U=null,A.child!==null)switch(A.child.tag){case 5:U=z(A.child.stateNode);break;case 1:U=A.child.stateNode}lm(A,Ne,U)}break;case 5:var $e=A.stateNode;U===null&&A.flags&4&&le($e,A.type,A.memoizedProps,A);break;case 6:break;case 4:break;case 12:break;case 13:if(te&&A.memoizedState===null){var pt=A.alternate;if(pt!==null){var St=pt.memoizedState;if(St!==null){var Nt=St.dehydrated;Nt!==null&&He(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}pu||A.flags&512&&S1(A)}catch(lr){cs(A,A.return,lr)}}if(A===w){Lt=null;break}if(U=A.sibling,U!==null){U.return=A.return,Lt=U;break}Lt=A.return}}function yA(w){for(;Lt!==null;){var A=Lt;if(A===w){Lt=null;break}var U=A.sibling;if(U!==null){U.return=A.return,Lt=U;break}Lt=A.return}}function vA(w){for(;Lt!==null;){var A=Lt;try{switch(A.tag){case 0:case 11:case 15:var U=A.return;try{Cd(4,A)}catch(pt){cs(A,U,pt)}break;case 1:var X=A.stateNode;if(typeof X.componentDidMount=="function"){var $=A.return;try{X.componentDidMount()}catch(pt){cs(A,$,pt)}}var fe=A.return;try{S1(A)}catch(pt){cs(A,fe,pt)}break;case 5:var Ne=A.return;try{S1(A)}catch(pt){cs(A,Ne,pt)}}}catch(pt){cs(A,A.return,pt)}if(A===w){Lt=null;break}var $e=A.sibling;if($e!==null){$e.return=A.return,Lt=$e;break}Lt=A.return}}var Mm=0,Em=1,Tm=2,Cm=3,Rm=4;if(typeof Symbol=="function"&&Symbol.for){var Rd=Symbol.for;Mm=Rd("selector.component"),Em=Rd("selector.has_pseudo_class"),Tm=Rd("selector.role"),Cm=Rd("selector.test_id"),Rm=Rd("selector.text")}function T1(w){var A=ue(w);if(A!=null){if(typeof A.memoizedProps["data-testname"]!="string")throw Error(a(364));return A}if(w=ne(w),w===null)throw Error(a(362));return w.stateNode.current}function C1(w,A){switch(A.$$typeof){case Mm:if(w.type===A.value)return!0;break;case Em:e:{A=A.value,w=[w,0];for(var U=0;U<w.length;){var X=w[U++],$=w[U++],fe=A[$];if(X.tag!==5||!Fe(X)){for(;fe!=null&&C1(X,fe);)$++,fe=A[$];if($===A.length){A=!0;break e}else for(X=X.child;X!==null;)w.push(X,$),X=X.sibling}}A=!1}return A;case Tm:if(w.tag===5&&Oe(w.stateNode,A.value))return!0;break;case Rm:if((w.tag===5||w.tag===6)&&(w=Be(w),w!==null&&0<=w.indexOf(A.value)))return!0;break;case Cm:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===A.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function R1(w){switch(w.$$typeof){case Mm:return"<"+(M(w.value)||"Unknown")+">";case Em:return":has("+(R1(w)||"")+")";case Tm:return'[role="'+w.value+'"]';case Rm:return'"'+w.value+'"';case Cm:return'[data-testname="'+w.value+'"]';default:throw Error(a(365))}}function _A(w,A){var U=[];w=[w,0];for(var X=0;X<w.length;){var $=w[X++],fe=w[X++],Ne=A[fe];if($.tag!==5||!Fe($)){for(;Ne!=null&&C1($,Ne);)fe++,Ne=A[fe];if(fe===A.length)U.push($);else for($=$.child;$!==null;)w.push($,fe),$=$.sibling}}return U}function P1(w,A){if(!ae)throw Error(a(363));w=T1(w),w=_A(w,A),A=[],w=Array.from(w);for(var U=0;U<w.length;){var X=w[U++];if(X.tag===5)Fe(X)||A.push(X.stateNode);else for(X=X.child;X!==null;)w.push(X),X=X.sibling}return A}var kk=Math.ceil,Pm=u.ReactCurrentDispatcher,I1=u.ReactCurrentOwner,In=u.ReactCurrentBatchConfig,vr=0,On=null,Bn=null,pi=0,Ts=0,Gc=rr(0),Xn=0,Pd=null,Hc=0,Im=0,L1=0,Id=null,ls=null,j1=0,D1=1/0;function zc(){D1=an()+500}var Lm=!1,k1=null,ul=null,jm=!1,cl=null,Dm=0,Ld=0,O1=null,km=-1,Om=0;function Xi(){return vr&6?an():km!==-1?km:km=an()}function fl(w){return w.mode&1?vr&2&&pi!==0?pi&-pi:qo.transition!==null?(Om===0&&(w=ns,ns<<=1,!(ns&4194240)&&(ns=64),Om=w),Om):(w=mr,w!==0?w:xe()):1}function Xs(w,A,U){if(50<Ld)throw Ld=0,O1=null,Error(a(185));var X=Bm(w,A);return X===null?null:(ss(X,A,U),(!(vr&2)||X!==On)&&(X===On&&(!(vr&2)&&(Im|=A),Xn===4&&dl(X,pi)),us(X,U),A===1&&vr===0&&!(w.mode&1)&&(zc(),Hi&&di())),X)}function Bm(w,A){w.lanes|=A;var U=w.alternate;for(U!==null&&(U.lanes|=A),U=w,w=w.return;w!==null;)w.childLanes|=A,U=w.alternate,U!==null&&(U.childLanes|=A),U=w,w=w.return;return U.tag===3?U.stateNode:null}function us(w,A){var U=w.callbackNode;Hs(w,A);var X=Xo(w,w===On?pi:0);if(X===0)U!==null&&pa(U),w.callbackNode=null,w.callbackPriority=0;else if(A=X&-X,w.callbackPriority!==A){if(U!=null&&pa(U),A===1)w.tag===0?ol(bA.bind(null,w)):sl(bA.bind(null,w)),we?Ee(function(){vr===0&&di()}):go(ma,di),U=null;else{switch(il(X)){case 1:U=ma;break;case 4:U=uu;break;case 16:U=Zr;break;case 536870912:U=Ui;break;default:U=Zr}U=PA(U,xA.bind(null,w))}w.callbackPriority=A,w.callbackNode=U}}function xA(w,A){if(km=-1,Om=0,vr&6)throw Error(a(327));var U=w.callbackNode;if(vu()&&w.callbackNode!==U)return null;var X=Xo(w,w===On?pi:0);if(X===0)return null;if(X&30||X&w.expiredLanes||A)A=Fm(w,X);else{A=X;var $=vr;vr|=2;var fe=AA();(On!==w||pi!==A)&&(zc(),gu(w,A));do try{Fk();break}catch($e){SA(w,$e)}while(!0);ya(),Pm.current=fe,vr=$,Bn!==null?A=0:(On=null,pi=0,A=Xn)}if(A!==0){if(A===2&&($=zs(w),$!==0&&(X=$,A=B1(w,$))),A===1)throw U=Pd,gu(w,0),dl(w,X),us(w,an()),U;if(A===6)dl(w,X);else{if($=w.current.alternate,!(X&30)&&!Ok($)&&(A=Fm(w,X),A===2&&(fe=zs(w),fe!==0&&(X=fe,A=B1(w,fe))),A===1))throw U=Pd,gu(w,0),dl(w,X),us(w,an()),U;switch(w.finishedWork=$,w.finishedLanes=X,A){case 0:case 1:throw Error(a(345));case 2:yu(w,ls);break;case 3:if(dl(w,X),(X&130023424)===X&&(A=j1+500-an(),10<A)){if(Xo(w,0)!==0)break;if($=w.suspendedLanes,($&X)!==X){Xi(),w.pingedLanes|=w.suspendedLanes&$;break}w.timeoutHandle=Z(yu.bind(null,w,ls),A);break}yu(w,ls);break;case 4:if(dl(w,X),(X&4194240)===X)break;for(A=w.eventTimes,$=-1;0<X;){var Ne=31-zn(X);fe=1<<Ne,Ne=A[Ne],Ne>$&&($=Ne),X&=~fe}if(X=$,X=an()-X,X=(120>X?120:480>X?480:1080>X?1080:1920>X?1920:3e3>X?3e3:4320>X?4320:1960*kk(X/1960))-X,10<X){w.timeoutHandle=Z(yu.bind(null,w,ls),X);break}yu(w,ls);break;case 5:yu(w,ls);break;default:throw Error(a(329))}}}return us(w,an()),w.callbackNode===U?xA.bind(null,w):null}function B1(w,A){var U=Id;return w.current.memoizedState.isDehydrated&&(gu(w,A).flags|=256),w=Fm(w,A),w!==2&&(A=ls,ls=U,A!==null&&F1(A)),w}function F1(w){ls===null?ls=w:ls.push.apply(ls,w)}function Ok(w){for(var A=w;;){if(A.flags&16384){var U=A.updateQueue;if(U!==null&&(U=U.stores,U!==null))for(var X=0;X<U.length;X++){var $=U[X],fe=$.getSnapshot;$=$.value;try{if(!Gi(fe(),$))return!1}catch{return!1}}}if(U=A.child,A.subtreeFlags&16384&&U!==null)U.return=A,A=U;else{if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function dl(w,A){for(A&=~L1,A&=~Im,w.suspendedLanes|=A,w.pingedLanes&=~A,w=w.expirationTimes;0<A;){var U=31-zn(A),X=1<<U;w[U]=-1,A&=~X}}function bA(w){if(vr&6)throw Error(a(327));vu();var A=Xo(w,0);if(!(A&1))return us(w,an()),null;var U=Fm(w,A);if(w.tag!==0&&U===2){var X=zs(w);X!==0&&(A=X,U=B1(w,X))}if(U===1)throw U=Pd,gu(w,0),dl(w,A),us(w,an()),U;if(U===6)throw Error(a(345));return w.finishedWork=w.current.alternate,w.finishedLanes=A,yu(w,ls),us(w,an()),null}function wA(w){cl!==null&&cl.tag===0&&!(vr&6)&&vu();var A=vr;vr|=1;var U=In.transition,X=mr;try{if(In.transition=null,mr=1,w)return w()}finally{mr=X,In.transition=U,vr=A,!(vr&6)&&di()}}function U1(){Ts=Gc.current,Qt(Gc)}function gu(w,A){w.finishedWork=null,w.finishedLanes=0;var U=w.timeoutHandle;if(U!==pe&&(w.timeoutHandle=pe,oe(U)),Bn!==null)for(U=Bn.return;U!==null;){var X=U;switch(se(X),X.tag){case 1:X=X.type.childContextTypes,X!=null&&ti();break;case 3:Er(),Qt(Yt),Qt(nr),_a();break;case 5:Jr(X);break;case 4:Er();break;case 13:Qt(gr);break;case 19:Qt(gr);break;case 10:Pn(X.type._context);break;case 22:case 23:U1()}U=U.return}if(On=w,Bn=w=hl(w.current,null),pi=Ts=A,Xn=0,Pd=null,L1=Im=Hc=0,ls=Id=null,hi!==null){for(A=0;A<hi.length;A++)if(U=hi[A],X=U.interleaved,X!==null){U.interleaved=null;var $=X.next,fe=U.pending;if(fe!==null){var Ne=fe.next;fe.next=$,X.next=Ne}U.pending=X}hi=null}return w}function SA(w,A){do{var U=Bn;try{if(ya(),bo.current=gm,fm){for(var X=Sn.memoizedState;X!==null;){var $=X.queue;$!==null&&($.pending=null),X=X.next}fm=!1}if(Nc=0,oi=Si=Sn=null,bd=!1,wd=0,I1.current=null,U===null||U.return===null){Xn=1,Pd=A,Bn=null;break}e:{var fe=w,Ne=U.return,$e=U,pt=A;if(A=pi,$e.flags|=32768,pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var St=pt,Nt=$e,lr=Nt.tag;if(!(Nt.mode&1)&&(lr===0||lr===11||lr===15)){var $t=Nt.alternate;$t?(Nt.updateQueue=$t.updateQueue,Nt.memoizedState=$t.memoizedState,Nt.lanes=$t.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var Kr=V2(Ne);if(Kr!==null){Kr.flags&=-257,W2(Kr,Ne,$e,fe,A),Kr.mode&1&&z2(fe,St,A),A=Kr,pt=St;var Xt=A.updateQueue;if(Xt===null){var Ei=new Set;Ei.add(pt),A.updateQueue=Ei}else Xt.add(pt);break e}else{if(!(A&1)){z2(fe,St,A),N1();break e}pt=Error(a(426))}}else if(Te&&$e.mode&1){var qs=V2(Ne);if(qs!==null){!(qs.flags&65536)&&(qs.flags|=256),W2(qs,Ne,$e,fe,A),Ft(pt);break e}}fe=pt,Xn!==4&&(Xn=2),Id===null?Id=[fe]:Id.push(fe),pt=g1(pt,$e),$e=Ne;do{switch($e.tag){case 3:$e.flags|=65536,A&=-A,$e.lanes|=A;var lt=G2($e,pt,A);va($e,lt);break e;case 1:fe=pt;var tt=$e.type,ht=$e.stateNode;if(!($e.flags&128)&&(typeof tt.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(ul===null||!ul.has(ht)))){$e.flags|=65536,A&=-A,$e.lanes|=A;var Dt=H2($e,fe,A);va($e,Dt);break e}}$e=$e.return}while($e!==null)}EA(U)}catch(Vt){A=Vt,Bn===U&&U!==null&&(Bn=U=U.return);continue}break}while(!0)}function AA(){var w=Pm.current;return Pm.current=gm,w===null?gm:w}function N1(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),On===null||!(Hc&268435455)&&!(Im&268435455)||dl(On,pi)}function Fm(w,A){var U=vr;vr|=2;var X=AA();On===w&&pi===A||gu(w,A);do try{Bk();break}catch($){SA(w,$)}while(!0);if(ya(),vr=U,Pm.current=X,Bn!==null)throw Error(a(261));return On=null,pi=0,Xn}function Bk(){for(;Bn!==null;)MA(Bn)}function Fk(){for(;Bn!==null&&!lu();)MA(Bn)}function MA(w){var A=RA(w.alternate,w,Ts);w.memoizedProps=w.pendingProps,A===null?EA(w):Bn=A,I1.current=null}function EA(w){var A=w;do{var U=A.alternate;if(w=A.return,A.flags&32768){if(U=Pk(U,A),U!==null){U.flags&=32767,Bn=U;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{Xn=6,Bn=null;return}}else if(U=Tk(U,A,Ts),U!==null){Bn=U;return}if(A=A.sibling,A!==null){Bn=A;return}Bn=A=w}while(A!==null);Xn===0&&(Xn=5)}function yu(w,A){var U=mr,X=In.transition;try{In.transition=null,mr=1,Uk(w,A,U)}finally{In.transition=X,mr=U}return null}function Uk(w,A,U){do vu();while(cl!==null);if(vr&6)throw Error(a(327));var X=w.finishedWork,$=w.finishedLanes;if(X===null)return null;if(w.finishedWork=null,w.finishedLanes=0,X===w.current)throw Error(a(177));w.callbackNode=null,w.callbackPriority=0;var fe=X.lanes|X.childLanes;if(mo(w,fe),w===On&&(Bn=On=null,pi=0),!(X.subtreeFlags&2064)&&!(X.flags&2064)||jm||(jm=!0,PA(Zr,function(){return vu(),null})),fe=(X.flags&15990)!==0,X.subtreeFlags&15990||fe){fe=In.transition,In.transition=null;var Ne=mr;mr=1;var $e=vr;vr|=4,I1.current=null,Lk(w,X),jk(w,X),Y(w.containerInfo),w.current=X,Dk(X),kc(),vr=$e,mr=Ne,In.transition=fe}else w.current=X;if(jm&&(jm=!1,cl=w,Dm=$),fe=w.pendingLanes,fe===0&&(ul=null),Ni(X.stateNode),us(w,an()),A!==null)for(U=w.onRecoverableError,X=0;X<A.length;X++)U(A[X]);if(Lm)throw Lm=!1,w=k1,k1=null,w;return Dm&1&&w.tag!==0&&vu(),fe=w.pendingLanes,fe&1?w===O1?Ld++:(Ld=0,O1=w):Ld=0,di(),null}function vu(){if(cl!==null){var w=il(Dm),A=In.transition,U=mr;try{if(In.transition=null,mr=16>w?16:w,cl===null)var X=!1;else{if(w=cl,cl=null,Dm=0,vr&6)throw Error(a(331));var $=vr;for(vr|=4,Lt=w.current;Lt!==null;){var fe=Lt,Ne=fe.child;if(Lt.flags&16){var $e=fe.deletions;if($e!==null){for(var pt=0;pt<$e.length;pt++){var St=$e[pt];for(Lt=St;Lt!==null;){var Nt=Lt;switch(Nt.tag){case 0:case 11:case 15:mu(8,Nt,fe)}var lr=Nt.child;if(lr!==null)lr.return=Nt,Lt=lr;else for(;Lt!==null;){Nt=Lt;var $t=Nt.sibling,Kr=Nt.return;if(cA(Nt),Nt===St){Lt=null;break}if($t!==null){$t.return=Kr,Lt=$t;break}Lt=Kr}}}var Xt=fe.alternate;if(Xt!==null){var Ei=Xt.child;if(Ei!==null){Xt.child=null;do{var qs=Ei.sibling;Ei.sibling=null,Ei=qs}while(Ei!==null)}}Lt=fe}}if(fe.subtreeFlags&2064&&Ne!==null)Ne.return=fe,Lt=Ne;else e:for(;Lt!==null;){if(fe=Lt,fe.flags&2048)switch(fe.tag){case 0:case 11:case 15:mu(9,fe,fe.return)}var lt=fe.sibling;if(lt!==null){lt.return=fe.return,Lt=lt;break e}Lt=fe.return}}var tt=w.current;for(Lt=tt;Lt!==null;){Ne=Lt;var ht=Ne.child;if(Ne.subtreeFlags&2064&&ht!==null)ht.return=Ne,Lt=ht;else e:for(Ne=tt;Lt!==null;){if($e=Lt,$e.flags&2048)try{switch($e.tag){case 0:case 11:case 15:Cd(9,$e)}}catch(Vt){cs($e,$e.return,Vt)}if($e===Ne){Lt=null;break e}var Dt=$e.sibling;if(Dt!==null){Dt.return=$e.return,Lt=Dt;break e}Lt=$e.return}}if(vr=$,di(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ms,w)}catch{}X=!0}return X}finally{mr=U,In.transition=A}}return!1}function TA(w,A,U){A=g1(U,A),A=G2(w,A,1),Ko(w,A),A=Xi(),w=Bm(w,1),w!==null&&(ss(w,1,A),us(w,A))}function cs(w,A,U){if(w.tag===3)TA(w,w,U);else for(;A!==null;){if(A.tag===3){TA(A,w,U);break}else if(A.tag===1){var X=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof X.componentDidCatch=="function"&&(ul===null||!ul.has(X))){w=g1(U,w),w=H2(A,w,1),Ko(A,w),w=Xi(),A=Bm(A,1),A!==null&&(ss(A,1,w),us(A,w));break}}A=A.return}}function Nk(w,A,U){var X=w.pingCache;X!==null&&X.delete(A),A=Xi(),w.pingedLanes|=w.suspendedLanes&U,On===w&&(pi&U)===U&&(Xn===4||Xn===3&&(pi&130023424)===pi&&500>an()-j1?gu(w,0):L1|=U),us(w,A)}function CA(w,A){A===0&&(w.mode&1?(A=is,is<<=1,!(is&130023424)&&(is=4194304)):A=1);var U=Xi();w=Bm(w,A),w!==null&&(ss(w,A,U),us(w,U))}function Gk(w){var A=w.memoizedState,U=0;A!==null&&(U=A.retryLane),CA(w,U)}function Hk(w,A){var U=0;switch(w.tag){case 13:var X=w.stateNode,$=w.memoizedState;$!==null&&(U=$.retryLane);break;case 19:X=w.stateNode;break;default:throw Error(a(314))}X!==null&&X.delete(A),CA(w,U)}var RA;RA=function(w,A,U){if(w!==null)if(w.memoizedProps!==A.pendingProps||Yt.current)Es=!0;else{if(!(w.lanes&U)&&!(A.flags&128))return Es=!1,Rk(w,A,U);Es=!!(w.flags&131072)}else Es=!1,Te&&A.flags&1048576&&K(A,du,A.index);switch(A.lanes=0,A.tag){case 2:var X=A.type;w!==null&&(w.alternate=null,A.alternate=null,A.flags|=2),w=A.pendingProps;var $=xn(A,nr.current);ln(A,U),$=f1(null,A,X,w,$,U);var fe=d1();return A.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(A.tag=1,A.memoizedState=null,A.updateQueue=null,Rr(X)?(fe=!0,Fi(A)):fe=!1,A.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,Ws(A),$.updater=Fc,A.stateNode=$,$._reactInternals=A,xd(A,X,w,U),A=_1(null,A,X,!0,fe,U)):(A.tag=0,Te&&fe&&re(A),Wi(null,A,$,U),A=A.child),A;case 16:X=A.elementType;e:{switch(w!==null&&(w.alternate=null,A.alternate=null,A.flags|=2),w=A.pendingProps,$=X._init,X=$(X._payload),A.type=X,$=A.tag=Vk(X),w=ni(X,w),$){case 0:A=v1(null,A,X,w,U);break e;case 1:A=$2(null,A,X,w,U);break e;case 11:A=q2(null,A,X,w,U);break e;case 14:A=J2(null,A,X,ni(X.type,w),U);break e}throw Error(a(306,X,""))}return A;case 0:return X=A.type,$=A.pendingProps,$=A.elementType===X?$:ni(X,$),v1(w,A,X,$,U);case 1:return X=A.type,$=A.pendingProps,$=A.elementType===X?$:ni(X,$),$2(w,A,X,$,U);case 3:e:{if(eA(A),w===null)throw Error(a(387));X=A.pendingProps,fe=A.memoizedState,$=fe.element,xo(w,A),Oc(A,X,null,U);var Ne=A.memoizedState;if(X=Ne.element,te&&fe.isDehydrated)if(fe={element:X,isDehydrated:!1,cache:Ne.cache,transitions:Ne.transitions},A.updateQueue.baseState=fe,A.memoizedState=fe,A.flags&256){$=Error(a(423)),A=tA(w,A,X,U,$);break e}else if(X!==$){$=Error(a(424)),A=tA(w,A,X,U,$);break e}else for(te&&(Ie=Xr(A.stateNode.containerInfo),_e=A,Te=!0,Ze=null,Xe=!1),U=un(A,null,X,U),A.child=U;U;)U.flags=U.flags&-3|4096,U=U.sibling;else{if(rt(),X===$){A=ba(w,A,U);break e}Wi(w,A,X,U)}A=A.child}return A;case 5:return Wn(A),w===null&&it(A),X=A.type,$=A.pendingProps,fe=w!==null?w.memoizedProps:null,Ne=$.children,H(X,$)?Ne=null:fe!==null&&H(X,fe)&&(A.flags|=32),Z2(w,A),Wi(w,A,Ne,U),A.child;case 6:return w===null&&it(A),null;case 13:return rA(w,A,U);case 4:return Vr(A,A.stateNode.containerInfo),X=A.pendingProps,w===null?A.child=Dr(A,null,X,U):Wi(w,A,X,U),A.child;case 11:return X=A.type,$=A.pendingProps,$=A.elementType===X?$:ni(X,$),q2(w,A,X,$,U);case 7:return Wi(w,A,A.pendingProps,U),A.child;case 8:return Wi(w,A,A.pendingProps.children,U),A.child;case 12:return Wi(w,A,A.pendingProps.children,U),A.child;case 10:e:{if(X=A.type._context,$=A.pendingProps,fe=A.memoizedProps,Ne=$.value,cu(A,X,Ne),fe!==null)if(Gi(fe.value,Ne)){if(fe.children===$.children&&!Yt.current){A=ba(w,A,U);break e}}else for(fe=A.child,fe!==null&&(fe.return=A);fe!==null;){var $e=fe.dependencies;if($e!==null){Ne=fe.child;for(var pt=$e.firstContext;pt!==null;){if(pt.context===X){if(fe.tag===1){pt=It(-1,U&-U),pt.tag=2;var St=fe.updateQueue;if(St!==null){St=St.shared;var Nt=St.pending;Nt===null?pt.next=pt:(pt.next=Nt.next,Nt.next=pt),St.pending=pt}}fe.lanes|=U,pt=fe.alternate,pt!==null&&(pt.lanes|=U),ii(fe.return,U,A),$e.lanes|=U;break}pt=pt.next}}else if(fe.tag===10)Ne=fe.type===A.type?null:fe.child;else if(fe.tag===18){if(Ne=fe.return,Ne===null)throw Error(a(341));Ne.lanes|=U,$e=Ne.alternate,$e!==null&&($e.lanes|=U),ii(Ne,U,A),Ne=fe.sibling}else Ne=fe.child;if(Ne!==null)Ne.return=fe;else for(Ne=fe;Ne!==null;){if(Ne===A){Ne=null;break}if(fe=Ne.sibling,fe!==null){fe.return=Ne.return,Ne=fe;break}Ne=Ne.return}fe=Ne}Wi(w,A,$.children,U),A=A.child}return A;case 9:return $=A.type,X=A.pendingProps.children,ln(A,U),$=$r($),X=X($),A.flags|=1,Wi(w,A,X,U),A.child;case 14:return X=A.type,$=ni(X,A.pendingProps),$=ni(X.type,$),J2(w,A,X,$,U);case 15:return K2(w,A,A.type,A.pendingProps,U);case 17:return X=A.type,$=A.pendingProps,$=A.elementType===X?$:ni(X,$),w!==null&&(w.alternate=null,A.alternate=null,A.flags|=2),A.tag=1,Rr(X)?(w=!0,Fi(A)):w=!1,ln(A,U),um(A,X,$),xd(A,X,$,U),_1(null,A,X,!0,w,U);case 19:return oA(w,A,U);case 22:return Q2(w,A,U)}throw Error(a(156,A.tag))};function PA(w,A){return go(w,A)}function zk(w,A,U,X){this.tag=w,this.key=U,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=X,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(w,A,U,X){return new zk(w,A,U,X)}function G1(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Vk(w){if(typeof w=="function")return G1(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===_)return 14}return 2}function hl(w,A){var U=w.alternate;return U===null?(U=Ys(w.tag,A,w.key,w.mode),U.elementType=w.elementType,U.type=w.type,U.stateNode=w.stateNode,U.alternate=w,w.alternate=U):(U.pendingProps=A,U.type=w.type,U.flags=0,U.subtreeFlags=0,U.deletions=null),U.flags=w.flags&14680064,U.childLanes=w.childLanes,U.lanes=w.lanes,U.child=w.child,U.memoizedProps=w.memoizedProps,U.memoizedState=w.memoizedState,U.updateQueue=w.updateQueue,A=w.dependencies,U.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},U.sibling=w.sibling,U.index=w.index,U.ref=w.ref,U}function Um(w,A,U,X,$,fe){var Ne=2;if(X=w,typeof w=="function")G1(w)&&(Ne=1);else if(typeof w=="string")Ne=5;else e:switch(w){case d:return _u(U.children,$,fe,A);case p:Ne=8,$|=8;break;case f:return w=Ys(12,U,A,$|2),w.elementType=f,w.lanes=fe,w;case v:return w=Ys(13,U,A,$),w.elementType=v,w.lanes=fe,w;case g:return w=Ys(19,U,A,$),w.elementType=g,w.lanes=fe,w;case b:return Nm(U,$,fe,A);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case h:Ne=10;break e;case m:Ne=9;break e;case y:Ne=11;break e;case _:Ne=14;break e;case x:Ne=16,X=null;break e}throw Error(a(130,w==null?w:typeof w,""))}return A=Ys(Ne,U,A,$),A.elementType=w,A.type=X,A.lanes=fe,A}function _u(w,A,U,X){return w=Ys(7,w,X,A),w.lanes=U,w}function Nm(w,A,U,X){return w=Ys(22,w,X,A),w.elementType=b,w.lanes=U,w.stateNode={},w}function H1(w,A,U){return w=Ys(6,w,null,A),w.lanes=U,w}function z1(w,A,U){return A=Ys(4,w.children!==null?w.children:[],w.key,A),A.lanes=U,A.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},A}function Wk(w,A,U,X,$){this.tag=A,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=pe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=X,this.onRecoverableError=$,te&&(this.mutableSourceEagerHydrationData=null)}function IA(w,A,U,X,$,fe,Ne,$e,pt){return w=new Wk(w,A,U,$e,pt),A===1?(A=1,fe===!0&&(A|=8)):A=0,fe=Ys(3,null,null,A),w.current=fe,fe.stateNode=w,fe.memoizedState={element:X,isDehydrated:U,cache:null,transitions:null},Ws(fe),w}function LA(w){if(!w)return jt;w=w._reactInternals;e:{if(L(w)!==w||w.tag!==1)throw Error(a(170));var A=w;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(Rr(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(a(171))}if(w.tag===1){var U=w.type;if(Rr(U))return ri(w,U,A)}return A}function jA(w){var A=w._reactInternals;if(A===void 0)throw typeof w.render=="function"?Error(a(188)):(w=Object.keys(w).join(","),Error(a(268,w)));return w=k(A),w===null?null:w.stateNode}function DA(w,A){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var U=w.retryLane;w.retryLane=U!==0&&U<A?U:A}}function V1(w,A){DA(w,A),(w=w.alternate)&&DA(w,A)}function Xk(w){return w=k(w),w===null?null:w.stateNode}function Yk(){return null}return n.attemptContinuousHydration=function(w){if(w.tag===13){var A=Xi();Xs(w,134217728,A),V1(w,134217728)}},n.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var A=Xi(),U=fl(w);Xs(w,U,A),V1(w,U)}},n.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var A=w.stateNode;if(A.current.memoizedState.isDehydrated){var U=kn(A.pendingLanes);U!==0&&(Vs(A,U|1),us(A,an()),!(vr&6)&&(zc(),di()))}break;case 13:var X=Xi();wA(function(){return Xs(w,1,X)}),V1(w,1)}},n.batchedUpdates=function(w,A){var U=vr;vr|=1;try{return w(A)}finally{vr=U,vr===0&&(zc(),Hi&&di())}},n.createComponentSelector=function(w){return{$$typeof:Mm,value:w}},n.createContainer=function(w,A,U,X,$,fe,Ne){return IA(w,A,!1,null,U,X,$,fe,Ne)},n.createHasPseudoClassSelector=function(w){return{$$typeof:Em,value:w}},n.createHydrationContainer=function(w,A,U,X,$,fe,Ne,$e,pt){return w=IA(U,X,!0,w,$,fe,Ne,$e,pt),w.context=LA(null),U=w.current,X=Xi(),$=fl(U),fe=It(X,$),fe.callback=A??null,Ko(U,fe),w.current.lanes=$,ss(w,$,X),us(w,X),w},n.createPortal=function(w,A,U){var X=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:X==null?null:""+X,children:w,containerInfo:A,implementation:U}},n.createRoleSelector=function(w){return{$$typeof:Tm,value:w}},n.createTestNameSelector=function(w){return{$$typeof:Cm,value:w}},n.createTextSelector=function(w){return{$$typeof:Rm,value:w}},n.deferredUpdates=function(w){var A=mr,U=In.transition;try{return In.transition=null,mr=16,w()}finally{mr=A,In.transition=U}},n.discreteUpdates=function(w,A,U,X,$){var fe=mr,Ne=In.transition;try{return In.transition=null,mr=1,w(A,U,X,$)}finally{mr=fe,In.transition=Ne,vr===0&&zc()}},n.findAllNodes=P1,n.findBoundingRects=function(w,A){if(!ae)throw Error(a(363));A=P1(w,A),w=[];for(var U=0;U<A.length;U++)w.push(Ae(A[U]));for(A=w.length-1;0<A;A--){U=w[A];for(var X=U.x,$=X+U.width,fe=U.y,Ne=fe+U.height,$e=A-1;0<=$e;$e--)if(A!==$e){var pt=w[$e],St=pt.x,Nt=St+pt.width,lr=pt.y,$t=lr+pt.height;if(X>=St&&fe>=lr&&$<=Nt&&Ne<=$t){w.splice(A,1);break}else if(X!==St||U.width!==pt.width||$t<fe||lr>Ne){if(!(fe!==lr||U.height!==pt.height||Nt<X||St>$)){St>X&&(pt.width+=St-X,pt.x=X),Nt<$&&(pt.width=$-St),w.splice(A,1);break}}else{lr>fe&&(pt.height+=lr-fe,pt.y=fe),$t<Ne&&(pt.height=Ne-lr),w.splice(A,1);break}}}return w},n.findHostInstance=jA,n.findHostInstanceWithNoPortals=function(w){return w=C(w),w=w!==null?F(w):null,w===null?null:w.stateNode},n.findHostInstanceWithWarning=function(w){return jA(w)},n.flushControlled=function(w){var A=vr;vr|=1;var U=In.transition,X=mr;try{In.transition=null,mr=1,w()}finally{mr=X,In.transition=U,vr=A,vr===0&&(zc(),di())}},n.flushPassiveEffects=vu,n.flushSync=wA,n.focusWithin=function(w,A){if(!ae)throw Error(a(363));for(w=T1(w),A=_A(w,A),A=Array.from(A),w=0;w<A.length;){var U=A[w++];if(!Fe(U)){if(U.tag===5&&Je(U.stateNode))return!0;for(U=U.child;U!==null;)A.push(U),U=U.sibling}}return!1},n.getCurrentUpdatePriority=function(){return mr},n.getFindAllNodesFailureDescription=function(w,A){if(!ae)throw Error(a(363));var U=0,X=[];w=[T1(w),0];for(var $=0;$<w.length;){var fe=w[$++],Ne=w[$++],$e=A[Ne];if((fe.tag!==5||!Fe(fe))&&(C1(fe,$e)&&(X.push(R1($e)),Ne++,Ne>U&&(U=Ne)),Ne<A.length))for(fe=fe.child;fe!==null;)w.push(fe,Ne),fe=fe.sibling}if(U<A.length){for(w=[];U<A.length;U++)w.push(R1(A[U]));return`findAllNodes was able to match part of the selector:
  `+(X.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},n.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return z(w.child.stateNode);default:return w.child.stateNode}},n.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Xk,findFiberByHostInstance:w.findFiberByHostInstance||Yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(A.isDisabled||!A.supportsFiber)w=!0;else{try{Ms=A.inject(w),Vn=A}catch{}w=!!A.checkDCE}}return w},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(w,A,U,X){if(!ae)throw Error(a(363));w=P1(w,A);var $=Ve(w,U,X).disconnect;return{disconnect:function(){$()}}},n.registerMutableSourceForHydration=function(w,A){var U=A._getVersion;U=U(A._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[A,U]:w.mutableSourceEagerHydrationData.push(A,U)},n.runWithPriority=function(w,A){var U=mr;try{return mr=w,A()}finally{mr=U}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(w,A,U,X){var $=A.current,fe=Xi(),Ne=fl($);return U=LA(U),A.context===null?A.context=U:A.pendingContext=U,A=It(fe,Ne),A.payload={element:w},X=X===void 0?null:X,X!==null&&(A.callback=X),Ko($,A),w=Xs($,Ne,fe),w!==null&&fu(w,$,Ne),Ne},n};qL.exports=W9;var X9=qL.exports;const Y9=pw(X9),t2={},q9=i=>void Object.assign(t2,i);function J9(i,t){function n(d,{args:p=[],attach:f,...h},m){let y=`${d[0].toUpperCase()}${d.slice(1)}`,v;if(d==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=h.object;v=gf(g,{type:d,root:m,attach:f,primitive:!0})}else{const g=t2[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");v=gf(new g(...p),{type:d,root:m,attach:f,memoizedProps:{args:p}})}return v.__r3f.attach===void 0&&(v.isBufferGeometry?v.__r3f.attach="geometry":v.isMaterial&&(v.__r3f.attach="material")),y!=="inject"&&ux(v,h),v}function r(d,p){let f=!1;if(p){var h,m;(h=p.__r3f)!=null&&h.attach?lx(d,p,p.__r3f.attach):p.isObject3D&&d.isObject3D&&(d.add(p),f=!0),f||(m=d.__r3f)==null||m.objects.push(p),p.__r3f||gf(p,{}),p.__r3f.parent=d,Wb(p),yf(p)}}function s(d,p,f){let h=!1;if(p){var m,y;if((m=p.__r3f)!=null&&m.attach)lx(d,p,p.__r3f.attach);else if(p.isObject3D&&d.isObject3D){p.parent=d,p.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:p});const v=d.children.filter(_=>_!==p),g=v.indexOf(f);d.children=[...v.slice(0,g),p,...v.slice(g)],h=!0}h||(y=d.__r3f)==null||y.objects.push(p),p.__r3f||gf(p,{}),p.__r3f.parent=d,Wb(p),yf(p)}}function o(d,p,f=!1){d&&[...d].forEach(h=>a(p,h,f))}function a(d,p,f){if(p){var h,m,y;if(p.__r3f&&(p.__r3f.parent=null),(h=d.__r3f)!=null&&h.objects&&(d.__r3f.objects=d.__r3f.objects.filter(b=>b!==p)),(m=p.__r3f)!=null&&m.attach)OT(d,p,p.__r3f.attach);else if(p.isObject3D&&d.isObject3D){var v;d.remove(p),(v=p.__r3f)!=null&&v.root&&nz(wy(p),p)}const _=(y=p.__r3f)==null?void 0:y.primitive,x=!_&&(f===void 0?p.dispose!==null:f);if(!_){var g;o((g=p.__r3f)==null?void 0:g.objects,p,x),o(p.children,p,x)}if(delete p.__r3f,x&&p.dispose&&p.type!=="Scene"){const b=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?zb.unstable_scheduleCallback(zb.unstable_IdlePriority,b):b()}yf(d)}}function u(d,p,f,h){var m;const y=(m=d.__r3f)==null?void 0:m.parent;if(!y)return;const v=n(p,f,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&r(v,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>r(v,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||a(y,d),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(y,v),v.raycast&&v.__r3f.eventCount&&wy(v).getState().internal.interaction.push(v),[h,h.alternate].forEach(g=>{g!==null&&(g.stateNode=v,g.ref&&(typeof g.ref=="function"?g.ref(v):g.ref.current=v))})}const l=()=>{};return{reconciler:Y9({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,p)=>{if(!p)return;const f=d.getState().scene;f.__r3f&&(f.__r3f.root=d,r(f,p))},removeChildFromContainer:(d,p)=>{p&&a(d.getState().scene,p)},insertInContainerBefore:(d,p,f)=>{if(!p||!f)return;const h=d.getState().scene;h.__r3f&&s(h,p,f)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var p;return!!((p=d==null?void 0:d.__r3f)!=null?p:{}).handlers},prepareUpdate(d,p,f,h){var m;if(((m=d==null?void 0:d.__r3f)!=null?m:{}).primitive&&h.object&&h.object!==d)return[!0];{const{args:v=[],children:g,..._}=h,{args:x=[],children:b,...S}=f;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((M,R)=>M!==x[R]))return[!0];const T=nj(d,_,S,!0);return T.changes.length?[!1,T]:null}},commitUpdate(d,[p,f],h,m,y,v){p?u(d,h,y,v):ux(d,f)},commitMount(d,p,f,h){var m;const y=(m=d.__r3f)!=null?m:{};d.raycast&&y.handlers&&y.eventCount&&wy(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>gf(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var p;const{attach:f,parent:h}=(p=d.__r3f)!=null?p:{};f&&h&&OT(h,d,f),d.isObject3D&&(d.visible=!1),yf(d)},unhideInstance(d,p){var f;const{attach:h,parent:m}=(f=d.__r3f)!=null?f:{};h&&m&&lx(m,d,h),(d.isObject3D&&p.visible==null||p.visible)&&(d.visible=!0),yf(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t?t():Df.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&rn.fun(performance.now)?performance.now:rn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:rn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:rn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ux}}var LT,jT;const ax=i=>"colorSpace"in i||"outputColorSpace"in i,QL=()=>{var i;return(i=t2.ColorManagement)!=null?i:null},ZL=i=>i&&i.isOrthographicCamera,K9=i=>i&&i.hasOwnProperty("current"),tm=typeof window<"u"&&((LT=window.document)!=null&&LT.createElement||((jT=window.navigator)==null?void 0:jT.product)==="ReactNative")?Qe.useLayoutEffect:Qe.useEffect;function $L(i){const t=Qe.useRef(i);return tm(()=>void(t.current=i),[i]),t}function Q9({set:i}){return tm(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class ej extends Qe.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}ej.getDerivedStateFromError=()=>({error:!0});const tj="__default",DT=new Map,Z9=i=>i&&!!i.memoized&&!!i.changes;function rj(i){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],n),i[1]):i}const th=i=>{var t;return(t=i.__r3f)==null?void 0:t.root.getState()};function wy(i){let t=i.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const rn={obj:i=>i===Object(i)&&!rn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,t,{arrays:n="shallow",objects:r="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(rn.str(i)||rn.num(i)||rn.boo(i))return i===t;const o=rn.obj(i);if(o&&r==="reference")return i===t;const a=rn.arr(i);if(a&&n==="reference")return i===t;if((a||o)&&i===t)return!0;let u;for(u in i)if(!(u in t))return!1;if(o&&n==="shallow"&&r==="shallow"){for(u in s?t:i)if(!rn.equ(i[u],t[u],{strict:s,objects:"reference"}))return!1}else for(u in s?t:i)if(i[u]!==t[u])return!1;if(rn.und(u)){if(a&&i.length===0&&t.length===0||o&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function $9(i){const t={nodes:{},materials:{}};return i&&i.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function ez(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const t in i)t.dispose==null||t.dispose(),delete i[t]}function gf(i,t){const n=i;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},i}function Vb(i,t){let n=i;if(t.includes("-")){const r=t.split("-"),s=r.pop();return n=r.reduce((o,a)=>o[a],i),{target:n,key:s}}else return{target:n,key:t}}const kT=/-\d+$/;function lx(i,t,n){if(rn.str(n)){if(kT.test(n)){const o=n.replace(kT,""),{target:a,key:u}=Vb(i,o);Array.isArray(a[u])||(a[u]=[])}const{target:r,key:s}=Vb(i,n);t.__r3f.previousAttach=r[s],r[s]=t}else t.__r3f.previousAttach=n(i,t)}function OT(i,t,n){var r,s;if(rn.str(n)){const{target:o,key:a}=Vb(i,n),u=t.__r3f.previousAttach;u===void 0?delete o[a]:o[a]=u}else(r=t.__r3f)==null||r.previousAttach==null||r.previousAttach(i,t);(s=t.__r3f)==null||delete s.previousAttach}function nj(i,{children:t,key:n,ref:r,...s},{children:o,key:a,ref:u,...l}={},c=!1){const d=i.__r3f,p=Object.entries(s),f=[];if(c){const m=Object.keys(l);for(let y=0;y<m.length;y++)s.hasOwnProperty(m[y])||p.unshift([m[y],tj+"remove"])}p.forEach(([m,y])=>{var v;if((v=i.__r3f)!=null&&v.primitive&&m==="object"||rn.equ(y,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return f.push([m,y,!0,[]]);let g=[];m.includes("-")&&(g=m.split("-")),f.push([m,y,!1,g]);for(const _ in s){const x=s[_];_.startsWith(`${m}-`)&&f.push([_,x,!1,_.split("-")])}});const h={...s};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(h.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(h.attach=d.memoizedProps.attach),{memoized:h,changes:f}}function ux(i,t){var n;const r=i.__r3f,s=r==null?void 0:r.root,o=s==null||s.getState==null?void 0:s.getState(),{memoized:a,changes:u}=Z9(t)?t:nj(i,t),l=r==null?void 0:r.eventCount;i.__r3f&&(i.__r3f.memoizedProps=a);for(let f=0;f<u.length;f++){let[h,m,y,v]=u[f];if(ax(i)){const b="srgb",S="srgb-linear";h==="encoding"?(h="colorSpace",m=m===3001?b:S):h==="outputEncoding"&&(h="outputColorSpace",m=m===3001?b:S)}let g=i,_=g[h];if(v.length&&(_=v.reduce((x,b)=>x[b],i),!(_&&_.set))){const[x,...b]=v.reverse();g=b.reverse().reduce((S,T)=>S[T],i),h=x}if(m===tj+"remove")if(g.constructor){let x=DT.get(g.constructor);x||(x=new g.constructor,DT.set(g.constructor,x)),m=x[h]}else m=0;if(y&&r)m?r.handlers[h]=m:delete r.handlers[h],r.eventCount=Object.keys(r.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof oc)){if(Array.isArray(m))_.fromArray?_.fromArray(m):_.set(...m);else if(_.copy&&m&&m.constructor&&_.constructor===m.constructor)_.copy(m);else if(m!==void 0){var c;const x=(c=_)==null?void 0:c.isColor;!x&&_.setScalar?_.setScalar(m):_ instanceof oc&&m instanceof oc?_.mask=m.mask:_.set(m),!QL()&&o&&!o.linear&&x&&_.convertSRGBToLinear()}}else{var d;if(g[h]=m,(d=g[h])!=null&&d.isTexture&&g[h].format===Di&&g[h].type===No&&o){const x=g[h];ax(x)&&ax(o.gl)?x.colorSpace=o.gl.outputColorSpace:x.encoding=o.gl.outputEncoding}}yf(i)}if(r&&r.parent&&i.raycast&&l!==r.eventCount){const f=wy(i).getState().internal,h=f.interaction.indexOf(i);h>-1&&f.interaction.splice(h,1),r.eventCount&&f.interaction.push(i)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(n=i.__r3f)!=null&&n.parent&&Wb(i),i}function yf(i){var t,n;const r=(t=i.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Wb(i){i.onUpdate==null||i.onUpdate(i)}function tz(i,t){i.manual||(ZL(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Qg(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function rz(){var i;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Df.DefaultEventPriority;switch((i=t.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Df.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Df.ContinuousEventPriority;default:return Df.DefaultEventPriority}}function ij(i,t,n,r){const s=n.get(t);s&&(n.delete(t),n.size===0&&(i.delete(r),s.target.releasePointerCapture(r)))}function nz(i,t){const{internal:n}=i.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,s)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(s)}),n.capturedMap.forEach((r,s)=>{ij(n.capturedMap,t,r,s)})}function iz(i){function t(l){const{internal:c}=i.getState(),d=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+p*p))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+d]}))}function r(l,c){const d=i.getState(),p=new Set,f=[],h=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<h.length;g++){const _=th(h[g]);_&&(_.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function m(g){const _=th(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var x;_.events.compute==null||_.events.compute(l,_,(x=_.previousRoot)==null?void 0:x.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let y=h.flatMap(m).sort((g,_)=>{const x=th(g.object),b=th(_.object);return!x||!b?g.distance-_.distance:b.events.priority-x.events.priority||g.distance-_.distance}).filter(g=>{const _=Qg(g);return p.has(_)?!1:(p.add(_),!0)});d.events.filter&&(y=d.events.filter(y,d));for(const g of y){let _=g.object;for(;_;){var v;(v=_.__r3f)!=null&&v.eventCount&&f.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())p.has(Qg(g.intersection))||f.push(g.intersection);return f}function s(l,c,d,p){const f=i.getState();if(l.length){const h={stopped:!1};for(const m of l){const y=th(m.object)||f,{raycaster:v,pointer:g,camera:_,internal:x}=y,b=new Ce(g.x,g.y,0).unproject(_),S=P=>{var C,k;return(C=(k=x.capturedMap.get(P))==null?void 0:k.has(m.eventObject))!=null?C:!1},T=P=>{const C={intersection:m,target:c.target};x.capturedMap.has(P)?x.capturedMap.get(P).set(m.eventObject,C):x.capturedMap.set(P,new Map([[m.eventObject,C]])),c.target.setPointerCapture(P)},M=P=>{const C=x.capturedMap.get(P);C&&ij(x.capturedMap,m.eventObject,C,P)};let R={};for(let P in c){let C=c[P];typeof C!="function"&&(R[P]=C)}let L={...m,...R,pointer:g,intersections:l,stopped:h.stopped,delta:d,unprojectedPoint:b,ray:v.ray,camera:_,stopPropagation(){const P="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!P||P.has(m.eventObject))&&(L.stopped=h.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(C=>C.eventObject===m.eventObject))){const C=l.slice(0,l.indexOf(m));o([...C,m])}},target:{hasPointerCapture:S,setPointerCapture:T,releasePointerCapture:M},currentTarget:{hasPointerCapture:S,setPointerCapture:T,releasePointerCapture:M},nativeEvent:c};if(p(L),h.stopped===!0)break}}return l}function o(l){const{internal:c}=i.getState();for(const d of c.hovered.values())if(!l.length||!l.find(p=>p.object===d.object&&p.index===d.index&&p.instanceId===d.instanceId)){const f=d.eventObject.__r3f,h=f==null?void 0:f.handlers;if(c.hovered.delete(Qg(d)),f!=null&&f.eventCount){const m={...d,intersections:l};h.onPointerOut==null||h.onPointerOut(m),h.onPointerLeave==null||h.onPointerLeave(m)}}}function a(l,c){for(let d=0;d<c.length;d++){const p=c[d].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function u(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return c=>{const{internal:d}=i.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),o([]))})}}return function(d){const{onPointerMissed:p,internal:f}=i.getState();f.lastEvent.current=d;const h=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(d,h?n:void 0),g=m?t(d):0;l==="onPointerDown"&&(f.initialClick=[d.offsetX,d.offsetY],f.initialHits=v.map(x=>x.eventObject)),m&&!v.length&&g<=2&&(a(d,f.interaction),p&&p(d)),h&&o(v);function _(x){const b=x.eventObject,S=b.__r3f,T=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(h){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const M=Qg(x),R=f.hovered.get(M);R?R.stopped&&x.stopPropagation():(f.hovered.set(M,x),T.onPointerOver==null||T.onPointerOver(x),T.onPointerEnter==null||T.onPointerEnter(x))}T.onPointerMove==null||T.onPointerMove(x)}else{const M=T[l];M?(!m||f.initialHits.includes(b))&&(a(d,f.interaction.filter(R=>!f.initialHits.includes(R))),M(x)):m&&f.initialHits.includes(b)&&a(d,f.interaction.filter(R=>!f.initialHits.includes(R)))}}s(v,d,g,_)}}return{handlePointer:u}}const sj=i=>!!(i!=null&&i.render),oj=Qe.createContext(null),sz=(i,t)=>{const n=G9((u,l)=>{const c=new Ce,d=new Ce,p=new Ce;function f(g=l().camera,_=d,x=l().size){const{width:b,height:S,top:T,left:M}=x,R=b/S;_.isVector3?p.copy(_):p.set(..._);const L=g.getWorldPosition(c).distanceTo(p);if(ZL(g))return{width:b/g.zoom,height:S/g.zoom,top:T,left:M,factor:1,distance:L,aspect:R};{const P=g.fov*Math.PI/180,C=2*Math.tan(P/2)*L,k=C*(b/S);return{width:k,height:C,top:T,left:M,factor:b/k,distance:L,aspect:R}}}let h;const m=g=>u(_=>({performance:{..._.performance,current:g}})),y=new mt;return{set:u,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>i(l(),g),advance:(g,_)=>t(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KS,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();h&&clearTimeout(h),g.performance.current!==g.performance.min&&m(g.performance.min),h=setTimeout(()=>m(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:g=>u(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,x,b,S)=>{const T=l().camera,M={width:g,height:_,top:b||0,left:S||0,updateStyle:x};u(R=>({size:M,viewport:{...R.viewport,...f(T,d,M)}}))},setDpr:g=>u(_=>{const x=rj(g);return{viewport:{..._.viewport,dpr:x,initialDpr:_.viewport.initialDpr||x}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),u(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Qe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,x)=>{const b=l().internal;return b.priority=b.priority+(_>0?1:0),b.subscribers.push({ref:g,priority:_,store:x}),b.subscribers=b.subscribers.sort((S,T)=>S.priority-T.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(_>0?1:0),S.subscribers=S.subscribers.filter(T=>T.ref!==g))}}}}}),r=n.getState();let s=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:u,size:l,viewport:c,gl:d,set:p}=n.getState();if(l.width!==s.width||l.height!==s.height||c.dpr!==o){var f;s=l,o=c.dpr,tz(u,l),d.setPixelRatio(c.dpr);const h=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,h)}u!==a&&(a=u,p(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(u)}})))}),n.subscribe(u=>i(u)),n};function oz(i,t){const n={callback:i};return t.add(n),()=>void t.delete(n)}let Zg,aj=new Set,az=new Set,lz=new Set;const uz=i=>oz(i,aj);function cx(i,t){if(i.size)for(const{callback:n}of i.values())n(t)}function rh(i,t){switch(i){case"before":return cx(aj,t);case"after":return cx(az,t);case"tail":return cx(lz,t)}}let fx,dx;function hx(i,t,n){let r=t.clock.getDelta();for(t.frameloop==="never"&&typeof i=="number"&&(r=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),fx=t.internal.subscribers,Zg=0;Zg<fx.length;Zg++)dx=fx[Zg],dx.ref.current(dx.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function cz(i){let t=!1,n=!1,r,s,o;function a(c){s=requestAnimationFrame(a),t=!0,r=0,rh("before",c),n=!0;for(const p of i.values()){var d;o=p.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((d=o.gl.xr)!=null&&d.isPresenting)&&(r+=hx(c,o))}if(n=!1,rh("after",c),r===0)return rh("tail",c),t=!1,cancelAnimationFrame(s)}function u(c,d=1){var p;if(!c)return i.forEach(f=>u(f.store.getState(),d));(p=c.gl.xr)!=null&&p.isPresenting||!c.internal.active||c.frameloop==="never"||(d>1?c.internal.frames=Math.min(60,c.internal.frames+d):n?c.internal.frames=2:c.internal.frames=1,t||(t=!0,requestAnimationFrame(a)))}function l(c,d=!0,p,f){if(d&&rh("before",c),p)hx(c,p,f);else for(const h of i.values())hx(c,h.store.getState());d&&rh("after",c)}return{loop:a,invalidate:u,advance:l}}function lj(){const i=Qe.useContext(oj);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function eo(i=n=>n,t){return lj()(i,t)}function e1(i,t=0){const n=lj(),r=n.getState().internal.subscribe,s=$L(i);return tm(()=>r(s,t,n),[t,r,n]),null}const BT=new WeakMap;function uj(i,t){return function(n,...r){let s=BT.get(n);return s||(s=new n,BT.set(n,s)),i&&i(s),Promise.all(r.map(o=>new Promise((a,u)=>s.load(o,l=>{l.scene&&Object.assign(l,$9(l.scene)),a(l)},t,l=>u(new Error(`Could not load ${o}: ${l==null?void 0:l.message}`))))))}}function gd(i,t,n,r){const s=Array.isArray(t)?t:[t],o=YL(uj(n,r),[i,...s],{equal:rn.equ});return Array.isArray(t)?o:o[0]}gd.preload=function(i,t,n){const r=Array.isArray(t)?t:[t];return z9(uj(n),[i,...r])};gd.clear=function(i,t){const n=Array.isArray(t)?t:[t];return V9([i,...n])};const sd=new Map,{invalidate:FT,advance:UT}=cz(sd),{reconciler:Uv,applyProps:Hu}=J9(sd,rz),cf={objects:"shallow",strict:!1},fz=(i,t)=>{const n=typeof i=="function"?i(t):i;return sj(n)?n:new iL({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...i})};function dz(i,t){const n=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(t){const{width:r,height:s,top:o,left:a,updateStyle:u=n}=t;return{width:r,height:s,top:o,left:a,updateStyle:u}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:r,height:s,top:o,left:a}=i.parentElement.getBoundingClientRect();return{width:r,height:s,top:o,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function hz(i){const t=sd.get(i),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=r||sz(FT,UT),a=n||Uv.createContainer(o,Df.ConcurrentRoot,null,!1,null,"",s,null);t||sd.set(i,{fiber:a,store:o});let u,l=!1,c;return{configure(d={}){let{gl:p,size:f,scene:h,events:m,onCreated:y,shadows:v=!1,linear:g=!1,flat:_=!1,legacy:x=!1,orthographic:b=!1,frameloop:S="always",dpr:T=[1,2],performance:M,raycaster:R,camera:L,onPointerMissed:P}=d,C=o.getState(),k=C.gl;C.gl||C.set({gl:k=fz(p,i)});let D=C.raycaster;D||C.set({raycaster:D=new GL});const{params:F,...G}=R||{};if(rn.equ(G,D,cf)||Hu(D,{...G}),rn.equ(F,D.params,cf)||Hu(D,{params:{...D.params,...F}}),!C.camera||C.camera===c&&!rn.equ(c,L,cf)){c=L;const Y=L instanceof Yp,J=Y?L:b?new ua(0,0,0,0,.1,1e3):new gn(75,0,.1,1e3);Y||(J.position.z=5,L&&(Hu(J,L),("aspect"in L||"left"in L||"right"in L||"bottom"in L||"top"in L)&&(J.manual=!0,J.updateProjectionMatrix())),!C.camera&&!(L!=null&&L.rotation)&&J.lookAt(0,0,0)),C.set({camera:J}),D.camera=J}if(!C.scene){let Y;h!=null&&h.isScene?Y=h:(Y=new jS,h&&Hu(Y,h)),C.set({scene:gf(Y)})}if(!C.xr){var z;const Y=(I,O)=>{const H=o.getState();H.frameloop!=="never"&&UT(I,!0,H,O)},J=()=>{const I=o.getState();I.gl.xr.enabled=I.gl.xr.isPresenting,I.gl.xr.setAnimationLoop(I.gl.xr.isPresenting?Y:null),I.gl.xr.isPresenting||FT(I)},ie={connect(){const I=o.getState().gl;I.xr.addEventListener("sessionstart",J),I.xr.addEventListener("sessionend",J)},disconnect(){const I=o.getState().gl;I.xr.removeEventListener("sessionstart",J),I.xr.removeEventListener("sessionend",J)}};typeof((z=k.xr)==null?void 0:z.addEventListener)=="function"&&ie.connect(),C.set({xr:ie})}if(k.shadowMap){const Y=k.shadowMap.enabled,J=k.shadowMap.type;if(k.shadowMap.enabled=!!v,rn.boo(v))k.shadowMap.type=jh;else if(rn.str(v)){var Q;const ie={basic:nI,percentage:p0,soft:jh,variance:Co};k.shadowMap.type=(Q=ie[v])!=null?Q:jh}else rn.obj(v)&&Object.assign(k.shadowMap,v);(Y!==k.shadowMap.enabled||J!==k.shadowMap.type)&&(k.shadowMap.needsUpdate=!0)}const V=QL();V&&("enabled"in V?V.enabled=!x:"legacyMode"in V&&(V.legacyMode=x)),l||Hu(k,{outputEncoding:g?3e3:3001,toneMapping:_?la:dS}),C.legacy!==x&&C.set(()=>({legacy:x})),C.linear!==g&&C.set(()=>({linear:g})),C.flat!==_&&C.set(()=>({flat:_})),p&&!rn.fun(p)&&!sj(p)&&!rn.equ(p,k,cf)&&Hu(k,p),m&&!C.events.handlers&&C.set({events:m(o)});const W=dz(i,f);return rn.equ(W,C.size,cf)||C.setSize(W.width,W.height,W.updateStyle,W.top,W.left),T&&C.viewport.dpr!==rj(T)&&C.setDpr(T),C.frameloop!==S&&C.setFrameloop(S),C.onPointerMissed||C.set({onPointerMissed:P}),M&&!rn.equ(M,C.performance,cf)&&C.set(Y=>({performance:{...Y.performance,...M}})),u=y,l=!0,this},render(d){return l||this.configure(),Uv.updateContainer(Rt.jsx(pz,{store:o,children:d,onCreated:u,rootElement:i}),a,null,()=>{}),o},unmount(){cj(i)}}}function pz({store:i,children:t,onCreated:n,rootElement:r}){return tm(()=>{const s=i.getState();s.set(o=>({internal:{...o.internal,active:!0}})),n&&n(s),i.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),Rt.jsx(oj.Provider,{value:i,children:t})}function cj(i,t){const n=sd.get(i),r=n==null?void 0:n.fiber;if(r){const s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),Uv.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var o,a,u,l;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),ez(s),sd.delete(i)}catch{}},500)})}}Uv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Qe.version});const px={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mz(i){const{handlePointer:t}=iz(i);return{priority:1,enabled:!0,compute(n,r,s){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(px).reduce((n,r)=>({...n,[r]:t(r)}),{}),update:()=>{var n;const{events:r,internal:s}=i.getState();(n=s.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{var r;const{set:s,events:o}=i.getState();o.disconnect==null||o.disconnect(),s(a=>({events:{...a.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,u])=>{const[l,c]=px[a];n.addEventListener(l,u,{passive:c})})},disconnect:()=>{const{set:n,events:r}=i.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[u]=px[o];r.connected.removeEventListener(u,a)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}function NT(i,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>i(...r),t)}}function gz({debounce:i,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=Qe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=Qe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,c=i?typeof i=="number"?i:i.resize:null,d=Qe.useRef(!1);Qe.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,f,h]=Qe.useMemo(()=>{const g=()=>{if(!u.current.element)return;const{left:_,top:x,width:b,height:S,bottom:T,right:M,x:R,y:L}=u.current.element.getBoundingClientRect(),P={left:_,top:x,width:b,height:S,bottom:T,right:M,x:R,y:L};u.current.element instanceof HTMLElement&&r&&(P.height=u.current.element.offsetHeight,P.width=u.current.element.offsetWidth),Object.freeze(P),d.current&&!xz(u.current.lastBounds,P)&&a(u.current.lastBounds=P)};return[g,c?NT(g,c):g,l?NT(g,l):g]},[a,r,l,c]);function m(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",h,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function y(){u.current.element&&(u.current.resizeObserver=new s(h),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(g=>g.addEventListener("scroll",h,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const v=g=>{!g||g===u.current.element||(m(),u.current.element=g,u.current.scrollContainers=fj(g),y())};return vz(h,!!t),yz(f),Qe.useEffect(()=>{m(),y()},[t,h,f]),Qe.useEffect(()=>m,[]),[v,o,p]}function yz(i){Qe.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function vz(i,t){Qe.useEffect(()=>{if(t){const n=i;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[i,t])}function fj(i){const t=[];if(!i||i===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(i);return[n,r,s].some(o=>o==="auto"||o==="scroll")&&t.push(i),[...t,...fj(i.parentElement)]}const _z=["x","y","top","bottom","left","right","width","height"],xz=(i,t)=>_z.every(n=>i[n]===t[n]);var bz=Object.defineProperty,wz=Object.defineProperties,Sz=Object.getOwnPropertyDescriptors,GT=Object.getOwnPropertySymbols,Az=Object.prototype.hasOwnProperty,Mz=Object.prototype.propertyIsEnumerable,HT=(i,t,n)=>t in i?bz(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,zT=(i,t)=>{for(var n in t||(t={}))Az.call(t,n)&&HT(i,n,t[n]);if(GT)for(var n of GT(t))Mz.call(t,n)&&HT(i,n,t[n]);return i},Ez=(i,t)=>wz(i,Sz(t)),VT,WT;typeof window<"u"&&((VT=window.document)!=null&&VT.createElement||((WT=window.navigator)==null?void 0:WT.product)==="ReactNative")?Qe.useLayoutEffect:Qe.useEffect;function dj(i,t,n){if(!i)return;if(n(i)===!0)return i;let r=i.child;for(;r;){const s=dj(r,t,n);if(s)return s;r=r.sibling}}function hj(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const XT=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=XT;return}return XT.apply(this,arguments)};const r2=hj(Qe.createContext(null));class pj extends Qe.Component{render(){return Qe.createElement(r2.Provider,{value:this._reactInternals},this.props.children)}}function Tz(){const i=Qe.useContext(r2);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Qe.useId();return Qe.useMemo(()=>{for(const r of[i,i==null?void 0:i.alternate]){if(!r)continue;const s=dj(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===t)return!0;a=a.next}});if(s)return s}},[i,t])}function Cz(){const i=Tz(),[t]=Qe.useState(()=>new Map);t.clear();let n=i;for(;n;){if(n.type&&typeof n.type=="object"){const s=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;s&&s!==r2&&!t.has(s)&&t.set(s,Qe.useContext(hj(s)))}n=n.return}return t}function Rz(){const i=Cz();return Qe.useMemo(()=>Array.from(i.keys()).reduce((t,n)=>r=>Qe.createElement(t,null,Qe.createElement(n.Provider,Ez(zT({},r),{value:i.get(n)}))),t=>Qe.createElement(pj,zT({},t))),[i])}const Pz=Qe.forwardRef(function({children:t,fallback:n,resize:r,style:s,gl:o,events:a=mz,eventSource:u,eventPrefix:l,shadows:c,linear:d,flat:p,legacy:f,orthographic:h,frameloop:m,dpr:y,performance:v,raycaster:g,camera:_,scene:x,onPointerMissed:b,onCreated:S,...T},M){Qe.useMemo(()=>q9(zL),[]);const R=Rz(),[L,P]=gz({scroll:!0,debounce:{scroll:50,resize:0},...r}),C=Qe.useRef(null),k=Qe.useRef(null);Qe.useImperativeHandle(M,()=>C.current);const D=$L(b),[F,G]=Qe.useState(!1),[z,Q]=Qe.useState(!1);if(F)throw F;if(z)throw z;const V=Qe.useRef(null);tm(()=>{const Y=C.current;P.width>0&&P.height>0&&Y&&(V.current||(V.current=hz(Y)),V.current.configure({gl:o,events:a,shadows:c,linear:d,flat:p,legacy:f,orthographic:h,frameloop:m,dpr:y,performance:v,raycaster:g,camera:_,scene:x,size:P,onPointerMissed:(...J)=>D.current==null?void 0:D.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(u?K9(u)?u.current:u:k.current),l&&J.setEvents({compute:(ie,I)=>{const O=ie[l+"X"],H=ie[l+"Y"];I.pointer.set(O/I.size.width*2-1,-(H/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),S==null||S(J)}}),V.current.render(Rt.jsx(R,{children:Rt.jsx(ej,{set:Q,children:Rt.jsx(Qe.Suspense,{fallback:Rt.jsx(Q9,{set:G}),children:t??null})})})))}),Qe.useEffect(()=>{const Y=C.current;if(Y)return()=>cj(Y)},[]);const W=u?"none":"auto";return Rt.jsx("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...s},...T,children:Rt.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:Rt.jsx("canvas",{ref:C,style:{display:"block"},children:n})})})}),mj=Qe.forwardRef(function(t,n){return Rt.jsx(pj,{children:Rt.jsx(Pz,{...t,ref:n})})}),YT=i=>{let t;const n=new Set,r=(c,d)=>{const p=typeof c=="function"?c(t):c;if(!Object.is(p,t)){const f=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(h=>h(t,f))}},s=()=>t,u={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=i(r,s,u);return u},Iz=i=>i?YT(i):YT,Lz=i=>i;function jz(i,t=Lz){const n=Ty.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return Ty.useDebugValue(n),n}const qT=i=>{const t=Iz(i),n=r=>jz(t,r);return Object.assign(n,t),n},Dz=i=>i?qT(i):qT;let nh=0;const kz=Dz(i=>(jf.onStart=(t,n,r)=>{i({active:!0,item:t,loaded:n,total:r,progress:(n-nh)/(r-nh)*100})},jf.onLoad=()=>{i({active:!1})},jf.onError=t=>i(n=>({errors:[...n.errors,t]})),jf.onProgress=(t,n,r)=>{n===r&&(nh=r),i({active:!0,item:t,loaded:n,total:r,progress:(n-nh)/(r-nh)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Hh(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function Xb(i,t){(t==null||t>i.length)&&(t=i.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=i[n];return r}function Oz(i,t){if(i){if(typeof i=="string")return Xb(i,t);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xb(i,t)}}function Bz(i){if(Array.isArray(i))return Xb(i)}function Fz(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Uz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nz(i){return Bz(i)||Fz(i)||Oz(i)||Uz()}new mt;new mt;function Gz(i,t,n){return Math.max(t,Math.min(n,i))}function Hz(i,t){return Gz(i-Math.floor(i/t)*t,0,t)}function zz(i,t){var n=Hz(t-i,Math.PI*2);return n>Math.PI&&(n-=Math.PI*2),n}function gj(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Ks=function i(t,n,r){var s=this;gj(this,i),Hh(this,"dot2",function(o,a){return s.x*o+s.y*a}),Hh(this,"dot3",function(o,a,u){return s.x*o+s.y*a+s.z*u}),this.x=t,this.y=n,this.z=r},Vz=[new Ks(1,1,0),new Ks(-1,1,0),new Ks(1,-1,0),new Ks(-1,-1,0),new Ks(1,0,1),new Ks(-1,0,1),new Ks(1,0,-1),new Ks(-1,0,-1),new Ks(0,1,1),new Ks(0,-1,1),new Ks(0,1,-1),new Ks(0,-1,-1)],JT=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],KT=new Array(512),QT=new Array(512),Wz=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var n=0;n<256;n++){var r;n&1?r=JT[n]^t&255:r=JT[n]^t>>8&255,KT[n]=KT[n+256]=r,QT[n]=QT[n+256]=Vz[r%12]}};Wz(0);function Xz(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var n=0;n<t.length;n++)i=(i+(n+1)*(t.charCodeAt(n)%96))%2147483647}return i===0&&(i=311),i}function ZT(i){var t=Xz(i);return function(){var n=t*48271%2147483647;return t=n,n/2147483647}}var Yz=function i(t){var n=this;gj(this,i),Hh(this,"seed",0),Hh(this,"init",function(r){n.seed=r,n.value=ZT(r)}),Hh(this,"value",ZT(this.seed)),this.init(t)};new Yz(Math.random());var qz=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/n)*Math.atan(Math.sin(2*Math.PI*t*s)/n)},yj=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)},Jz=function(t){return t},Kz={in:function(t){return 1-Math.cos(t*Math.PI/2)},out:function(t){return Math.sin(t*Math.PI/2)},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},Qz={in:function(t){return t*t*t},out:function(t){return 1-Math.pow(1-t,3)},inOut:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},Zz={in:function(t){return t*t*t*t*t},out:function(t){return 1-Math.pow(1-t,5)},inOut:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}},$z={in:function(t){return 1-Math.sqrt(1-Math.pow(t,2))},out:function(t){return Math.sqrt(1-Math.pow(t-1,2))},inOut:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},eV={in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}},tV={in:function(t){return t===0?0:Math.pow(2,10*t-10)},out:function(t){return t===1?1:1-Math.pow(2,-10*t)},inOut:function(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}};function Kn(i,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:yj,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+t;if(i.__damp===void 0&&(i.__damp={}),i.__damp[l]===void 0&&(i.__damp[l]=0),Math.abs(i[t]-n)<=u)return i[t]=n,!1;r=Math.max(1e-4,r);var c=2/r,d=a(c*s),p=i[t]-n,f=n,h=o*r;p=Math.min(Math.max(p,-h),h),n=i[t]-p;var m=(i.__damp[l]+c*p)*s;i.__damp[l]=(i.__damp[l]-c*m)*d;var y=n+(p+m)*d;return f-i[t]>0==y>f&&(y=f,i.__damp[l]=(y-f)/s),i[t]=y,!0}var rV=function(t){return t&&t.isCamera},nV=function(t){return t&&t.isLight},ih=new Ce,$T=new Yr,eC=new Yr,sh=new Gt,mx=new Ce;function iV(i,t,n,r,s,o,a){typeof t=="number"?ih.setScalar(t):Array.isArray(t)?ih.set(t[0],t[1],t[2]):ih.copy(t);var u=i.parent;i.updateWorldMatrix(!0,!1),mx.setFromMatrixPosition(i.matrixWorld),rV(i)||nV(i)?sh.lookAt(mx,ih,i.up):sh.lookAt(ih,mx,i.up),Nv(i.quaternion,eC.setFromRotationMatrix(sh),n,r,s,o,a),u&&(sh.extractRotation(u.matrixWorld),$T.setFromRotationMatrix(sh),Nv(i.quaternion,eC.copy(i.quaternion).premultiply($T.invert()),n,r,s,o,a))}function Hf(i,t,n,r,s,o,a,u){return Kn(i,t,i[t]+zz(i[t],n),r,s,o,a,u)}var oh=new mt,tC,rC;function sV(i,t,n,r,s,o,a){return typeof t=="number"?oh.setScalar(t):Array.isArray(t)?oh.set(t[0],t[1]):oh.copy(t),tC=Kn(i,"x",oh.x,n,r,s,o,a),rC=Kn(i,"y",oh.y,n,r,s,o,a),tC||rC}var ff=new Ce,nC,iC,sC;function Yb(i,t,n,r,s,o,a){return typeof t=="number"?ff.setScalar(t):Array.isArray(t)?ff.set(t[0],t[1],t[2]):ff.copy(t),nC=Kn(i,"x",ff.x,n,r,s,o,a),iC=Kn(i,"y",ff.y,n,r,s,o,a),sC=Kn(i,"z",ff.z,n,r,s,o,a),nC||iC||sC}var Lu=new _r,oC,aC,lC,uC;function oV(i,t,n,r,s,o,a){return typeof t=="number"?Lu.setScalar(t):Array.isArray(t)?Lu.set(t[0],t[1],t[2],t[3]):Lu.copy(t),oC=Kn(i,"x",Lu.x,n,r,s,o,a),aC=Kn(i,"y",Lu.y,n,r,s,o,a),lC=Kn(i,"z",Lu.z,n,r,s,o,a),uC=Kn(i,"w",Lu.w,n,r,s,o,a),oC||aC||lC||uC}var ah=new bs,cC,fC,dC;function aV(i,t,n,r,s,o,a){return Array.isArray(t)?ah.set(t[0],t[1],t[2],t[3]):ah.copy(t),cC=Hf(i,"x",ah.x,n,r,s,o,a),fC=Hf(i,"y",ah.y,n,r,s,o,a),dC=Hf(i,"z",ah.z,n,r,s,o,a),cC||fC||dC}var df=new wt,hC,pC,mC;function lV(i,t,n,r,s,o,a){return t instanceof wt?df.copy(t):Array.isArray(t)?df.setRGB(t[0],t[1],t[2]):df.set(t),hC=Kn(i,"r",df.r,n,r,s,o,a),pC=Kn(i,"g",df.g,n,r,s,o,a),mC=Kn(i,"b",df.b,n,r,s,o,a),hC||pC||mC}var Eo=new Yr,Ca=new _r,gC=new _r,lh=new _r,yC,vC,_C,xC;function Nv(i,t,n,r,s,o,a){var u=i;Array.isArray(t)?Eo.set(t[0],t[1],t[2],t[3]):Eo.copy(t);var l=i.dot(Eo)>0?1:-1;return Eo.x*=l,Eo.y*=l,Eo.z*=l,Eo.w*=l,yC=Kn(i,"x",Eo.x,n,r,s,o,a),vC=Kn(i,"y",Eo.y,n,r,s,o,a),_C=Kn(i,"z",Eo.z,n,r,s,o,a),xC=Kn(i,"w",Eo.w,n,r,s,o,a),Ca.set(i.x,i.y,i.z,i.w).normalize(),gC.set(u.__damp.velocity_x,u.__damp.velocity_y,u.__damp.velocity_z,u.__damp.velocity_w),lh.copy(Ca).multiplyScalar(gC.dot(Ca)/Ca.dot(Ca)),u.__damp.velocity_x-=lh.x,u.__damp.velocity_y-=lh.y,u.__damp.velocity_z-=lh.z,u.__damp.velocity_w-=lh.w,i.set(Ca.x,Ca.y,Ca.z,Ca.w),yC||vC||_C||xC}var uh=new Fv,bC,wC,SC;function uV(i,t,n,r,s,o,a){return Array.isArray(t)?uh.set(t[0],t[1],t[2]):uh.copy(t),bC=Kn(i,"radius",uh.radius,n,r,s,o,a),wC=Hf(i,"phi",uh.phi,n,r,s,o,a),SC=Hf(i,"theta",uh.theta,n,r,s,o,a),bC||wC||SC}var $g=new Gt,AC=new Ce,MC=new Yr,EC=new Ce,TC,CC,RC;function cV(i,t,n,r,s,o,a){var u=i;return u.__damp===void 0&&(u.__damp={position:new Ce,rotation:new Yr,scale:new Ce},i.decompose(u.__damp.position,u.__damp.rotation,u.__damp.scale)),Array.isArray(t)?$g.set.apply($g,Nz(t)):$g.copy(t),$g.decompose(AC,MC,EC),TC=Yb(u.__damp.position,AC,n,r,s,o,a),CC=Nv(u.__damp.rotation,MC,n,r,s,o,a),RC=Yb(u.__damp.scale,EC,n,r,s,o,a),i.compose(u.__damp.position,u.__damp.rotation,u.__damp.scale),TC||CC||RC}var fV=Object.freeze({__proto__:null,rsqw:qz,exp:yj,linear:Jz,sine:Kz,cubic:Qz,quint:Zz,circ:$z,quart:eV,expo:tV,damp:Kn,dampLookAt:iV,dampAngle:Hf,damp2:sV,damp3:Yb,damp4:oV,dampE:aV,dampC:lV,dampQ:Nv,dampS:uV,dampM:cV}),n2=nm(),or=i=>rm(i,n2),i2=nm();or.write=i=>rm(i,i2);var t1=nm();or.onStart=i=>rm(i,t1);var s2=nm();or.onFrame=i=>rm(i,s2);var o2=nm();or.onFinish=i=>rm(i,o2);var zf=[];or.setTimeout=(i,t)=>{const n=or.now()+t,r=()=>{const o=zf.findIndex(a=>a.cancel==r);~o&&zf.splice(o,1),Bl-=~o?1:0},s={time:n,handler:i,cancel:r};return zf.splice(vj(n),0,s),Bl+=1,_j(),s};var vj=i=>~(~zf.findIndex(t=>t.time>i)||~zf.length);or.cancel=i=>{t1.delete(i),s2.delete(i),o2.delete(i),n2.delete(i),i2.delete(i)};or.sync=i=>{qb=!0,or.batchedUpdates(i),qb=!1};or.throttle=i=>{let t;function n(){try{i(...t)}finally{t=null}}function r(...s){t=s,or.onStart(n)}return r.handler=i,r.cancel=()=>{t1.delete(n),t=null},r};var a2=typeof window<"u"?window.requestAnimationFrame:()=>{};or.use=i=>a2=i;or.now=typeof performance<"u"?()=>performance.now():Date.now;or.batchedUpdates=i=>i();or.catch=console.error;or.frameLoop="always";or.advance=()=>{or.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):bj()};var Ol=-1,Bl=0,qb=!1;function rm(i,t){qb?(t.delete(i),i(0)):(t.add(i),_j())}function _j(){Ol<0&&(Ol=0,or.frameLoop!=="demand"&&a2(xj))}function dV(){Ol=-1}function xj(){~Ol&&(a2(xj),or.batchedUpdates(bj))}function bj(){const i=Ol;Ol=or.now();const t=vj(Ol);if(t&&(wj(zf.splice(0,t),n=>n.handler()),Bl-=t),!Bl){dV();return}t1.flush(),n2.flush(i?Math.min(64,Ol-i):16.667),s2.flush(),i2.flush(),o2.flush()}function nm(){let i=new Set,t=i;return{add(n){Bl+=t==i&&!i.has(n)?1:0,i.add(n)},delete(n){return Bl-=t==i&&i.has(n)?1:0,i.delete(n)},flush(n){t.size&&(i=new Set,Bl-=t.size,wj(t,r=>r(n)&&i.add(r)),Bl+=i.size,t=i)}}}function wj(i,t){i.forEach(n=>{try{t(n)}catch(r){or.catch(r)}})}var hV=Object.defineProperty,pV=(i,t)=>{for(var n in t)hV(i,n,{get:t[n],enumerable:!0})},zo={};pV(zo,{assign:()=>gV,colors:()=>Yl,createStringInterpolator:()=>u2,skipAnimation:()=>Aj,to:()=>Sj,willAdvance:()=>c2});function Jb(){}var mV=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),Mt={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function Pa(i,t){if(Mt.arr(i)){if(!Mt.arr(t)||i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}return i===t}var Gr=(i,t)=>i.forEach(t);function el(i,t,n){if(Mt.arr(i)){for(let r=0;r<i.length;r++)t.call(n,i[r],`${r}`);return}for(const r in i)i.hasOwnProperty(r)&&t.call(n,i[r],r)}var ao=i=>Mt.und(i)?[]:Mt.arr(i)?i:[i];function zh(i,t){if(i.size){const n=Array.from(i);i.clear(),Gr(n,t)}}var wh=(i,...t)=>zh(i,n=>n(...t)),l2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),u2,Sj,Yl=null,Aj=!1,c2=Jb,gV=i=>{i.to&&(Sj=i.to),i.now&&(or.now=i.now),i.colors!==void 0&&(Yl=i.colors),i.skipAnimation!=null&&(Aj=i.skipAnimation),i.createStringInterpolator&&(u2=i.createStringInterpolator),i.requestAnimationFrame&&or.use(i.requestAnimationFrame),i.batchedUpdates&&(or.batchedUpdates=i.batchedUpdates),i.willAdvance&&(c2=i.willAdvance),i.frameLoop&&(or.frameLoop=i.frameLoop)},Vh=new Set,io=[],gx=[],Gv=0,r1={get idle(){return!Vh.size&&!io.length},start(i){Gv>i.priority?(Vh.add(i),or.onStart(yV)):(Mj(i),or(Kb))},advance:Kb,sort(i){if(Gv)or.onFrame(()=>r1.sort(i));else{const t=io.indexOf(i);~t&&(io.splice(t,1),Ej(i))}},clear(){io=[],Vh.clear()}};function yV(){Vh.forEach(Mj),Vh.clear(),or(Kb)}function Mj(i){io.includes(i)||Ej(i)}function Ej(i){io.splice(vV(io,t=>t.priority>i.priority),0,i)}function Kb(i){const t=gx;for(let n=0;n<io.length;n++){const r=io[n];Gv=r.priority,r.idle||(c2(r),r.advance(i),r.idle||t.push(r))}return Gv=0,gx=io,gx.length=0,io=t,io.length>0}function vV(i,t){const n=i.findIndex(t);return n<0?i.length:n}var _V={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Do="[-+]?\\d*\\.?\\d+",Hv=Do+"%";function n1(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}var xV=new RegExp("rgb"+n1(Do,Do,Do)),bV=new RegExp("rgba"+n1(Do,Do,Do,Do)),wV=new RegExp("hsl"+n1(Do,Hv,Hv)),SV=new RegExp("hsla"+n1(Do,Hv,Hv,Do)),AV=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,MV=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,EV=/^#([0-9a-fA-F]{6})$/,TV=/^#([0-9a-fA-F]{8})$/;function CV(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=EV.exec(i))?parseInt(t[1]+"ff",16)>>>0:Yl&&Yl[i]!==void 0?Yl[i]:(t=xV.exec(i))?(hf(t[1])<<24|hf(t[2])<<16|hf(t[3])<<8|255)>>>0:(t=bV.exec(i))?(hf(t[1])<<24|hf(t[2])<<16|hf(t[3])<<8|LC(t[4]))>>>0:(t=AV.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=TV.exec(i))?parseInt(t[1],16)>>>0:(t=MV.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=wV.exec(i))?(PC(IC(t[1]),ey(t[2]),ey(t[3]))|255)>>>0:(t=SV.exec(i))?(PC(IC(t[1]),ey(t[2]),ey(t[3]))|LC(t[4]))>>>0:null}function yx(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*(2/3-n)*6:i}function PC(i,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,o=yx(s,r,i+1/3),a=yx(s,r,i),u=yx(s,r,i-1/3);return Math.round(o*255)<<24|Math.round(a*255)<<16|Math.round(u*255)<<8}function hf(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function IC(i){return(parseFloat(i)%360+360)%360/360}function LC(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function ey(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function jC(i){let t=CV(i);if(t===null)return i;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,o=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}var Cp=(i,t,n)=>{if(Mt.fun(i))return i;if(Mt.arr(i))return Cp({range:i,output:t,extrapolate:n});if(Mt.str(i.output[0]))return u2(i);const r=i,s=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",u=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=PV(c,o);return RV(c,o[d],o[d+1],s[d],s[d+1],l,a,u,r.map)}};function RV(i,t,n,r,s,o,a,u,l){let c=l?l(i):i;if(c<t){if(a==="identity")return c;a==="clamp"&&(c=t)}if(c>n){if(u==="identity")return c;u==="clamp"&&(c=n)}return r===s?r:t===n?i<=t?r:s:(t===-1/0?c=-c:n===1/0?c=c-t:c=(c-t)/(n-t),c=o(c),r===-1/0?c=-c:s===1/0?c=c+r:c=c*(s-r)+r,c)}function PV(i,t){for(var n=1;n<t.length-1&&!(t[n]>=i);++n);return n-1}var IV={linear:i=>i},Rp=Symbol.for("FluidValue.get"),od=Symbol.for("FluidValue.observers"),ra=i=>!!(i&&i[Rp]),to=i=>i&&i[Rp]?i[Rp]():i,DC=i=>i[od]||null;function LV(i,t){i.eventObserved?i.eventObserved(t):i(t)}function zv(i,t){const n=i[od];n&&n.forEach(r=>{LV(r,t)})}var jV=class{constructor(i){if(!i&&!(i=this.get))throw Error("Unknown getter");DV(this,i)}},DV=(i,t)=>Tj(i,Rp,t);function im(i,t){if(i[Rp]){let n=i[od];n||Tj(i,od,n=new Set),n.has(t)||(n.add(t),i.observerAdded&&i.observerAdded(n.size,t))}return t}function Vv(i,t){const n=i[od];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):i[od]=null,i.observerRemoved&&i.observerRemoved(r,t)}}var Tj=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),Sy=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,kV=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kC=new RegExp(`(${Sy.source})(%|[a-z]+)`,"i"),OV=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,i1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Cj=i=>{const[t,n]=BV(i);if(!t||l2())return i;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||i}else{if(n&&i1.test(n))return Cj(n);if(n)return n}return i},BV=i=>{const t=i1.exec(i);if(!t)return[,];const[,n,r]=t;return[n,r]},vx,FV=(i,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Rj=i=>{vx||(vx=Yl?new RegExp(`(${Object.keys(Yl).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(o=>to(o).replace(i1,Cj).replace(kV,jC).replace(vx,jC)),n=t.map(o=>o.match(Sy).map(Number)),s=n[0].map((o,a)=>n.map(u=>{if(!(a in u))throw Error('The arity of each "output" value must be equal');return u[a]})).map(o=>Cp({...i,output:o}));return o=>{var l;const a=!kC.test(t[0])&&((l=t.find(c=>kC.test(c)))==null?void 0:l.replace(Sy,""));let u=0;return t[0].replace(Sy,()=>`${s[u++](o)}${a||""}`).replace(OV,FV)}},f2="react-spring: ",Pj=i=>{const t=i;let n=!1;if(typeof t!="function")throw new TypeError(`${f2}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},UV=Pj(console.warn);function NV(){UV(`${f2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var GV=Pj(console.warn);function HV(){GV(`${f2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function s1(i){return Mt.str(i)&&(i[0]=="#"||/\d/.test(i)||!l2()&&i1.test(i)||i in(Yl||{}))}var d2=l2()?Qe.useEffect:Qe.useLayoutEffect,zV=()=>{const i=Qe.useRef(!1);return d2(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function Ij(){const i=Qe.useState()[1],t=zV();return()=>{t.current&&i(Math.random())}}function VV(i,t){const[n]=Qe.useState(()=>({inputs:t,result:i()})),r=Qe.useRef(),s=r.current;let o=s;return o?t&&o.inputs&&WV(t,o.inputs)||(o={inputs:t,result:i()}):o=n,Qe.useEffect(()=>{r.current=o,s==n&&(n.inputs=n.result=void 0)},[o]),o.result}function WV(i,t){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}var Lj=i=>Qe.useEffect(i,XV),XV=[];function OC(i){const t=Qe.useRef();return Qe.useEffect(()=>{t.current=i}),t.current}var Pp=Symbol.for("Animated:node"),YV=i=>!!i&&i[Pp]===i,ta=i=>i&&i[Pp],h2=(i,t)=>mV(i,Pp,t),o1=i=>i&&i[Pp]&&i[Pp].getPayload(),jj=class{constructor(){h2(this,this)}getPayload(){return this.payload||[]}},sm=class extends jj{constructor(i){super(),this._value=i,this.done=!0,this.durationProgress=0,Mt.num(this._value)&&(this.lastPosition=this._value)}static create(i){return new sm(i)}getPayload(){return[this]}getValue(){return this._value}setValue(i,t){return Mt.num(i)&&(this.lastPosition=i,t&&(i=Math.round(i/t)*t,this.done&&(this.lastPosition=i))),this._value===i?!1:(this._value=i,!0)}reset(){const{done:i}=this;this.done=!1,Mt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,i&&(this.lastVelocity=null),this.v0=null)}},Ip=class extends sm{constructor(i){super(0),this._string=null,this._toString=Cp({output:[i,i]})}static create(i){return new Ip(i)}getValue(){const i=this._string;return i??(this._string=this._toString(this._value))}setValue(i){if(Mt.str(i)){if(i==this._string)return!1;this._string=i,this._value=1}else if(super.setValue(i))this._string=null;else return!1;return!0}reset(i){i&&(this._toString=Cp({output:[this.getValue(),i]})),this._value=0,super.reset()}},Wv={dependencies:null},p2=class extends jj{constructor(i){super(),this.source=i,this.setValue(i)}getValue(i){const t={};return el(this.source,(n,r)=>{YV(n)?t[r]=n.getValue(i):ra(n)?t[r]=to(n):i||(t[r]=n)}),t}setValue(i){this.source=i,this.payload=this._makePayload(i)}reset(){this.payload&&Gr(this.payload,i=>i.reset())}_makePayload(i){if(i){const t=new Set;return el(i,this._addToPayload,t),Array.from(t)}}_addToPayload(i){Wv.dependencies&&ra(i)&&Wv.dependencies.add(i);const t=o1(i);t&&Gr(t,n=>this.add(n))}},Dj=class extends p2{constructor(i){super(i)}static create(i){return new Dj(i)}getValue(){return this.source.map(i=>i.getValue())}setValue(i){const t=this.getPayload();return i.length==t.length?t.map((n,r)=>n.setValue(i[r])).some(Boolean):(super.setValue(i.map(qV)),!0)}};function qV(i){return(s1(i)?Ip:sm).create(i)}function Qb(i){const t=ta(i);return t?t.constructor:Mt.arr(i)?Dj:s1(i)?Ip:sm}var BC=(i,t)=>{const n=!Mt.fun(i)||i.prototype&&i.prototype.isReactComponent;return Qe.forwardRef((r,s)=>{const o=Qe.useRef(null),a=n&&Qe.useCallback(m=>{o.current=QV(s,m)},[s]),[u,l]=KV(r,t),c=Ij(),d=()=>{const m=o.current;if(n&&!m)return;(m?t.applyAnimatedValues(m,u.getValue(!0)):!1)===!1&&c()},p=new JV(d,l),f=Qe.useRef();d2(()=>(f.current=p,Gr(l,m=>im(m,p)),()=>{f.current&&(Gr(f.current.deps,m=>Vv(m,f.current)),or.cancel(f.current.update))})),Qe.useEffect(d,[]),Lj(()=>()=>{const m=f.current;Gr(m.deps,y=>Vv(y,m))});const h=t.getComponentProps(u.getValue());return Qe.createElement(i,{...h,ref:a})})},JV=class{constructor(i,t){this.update=i,this.deps=t}eventObserved(i){i.type=="change"&&or.write(this.update)}};function KV(i,t){const n=new Set;return Wv.dependencies=n,i.style&&(i={...i,style:t.createAnimatedStyle(i.style)}),i=new p2(i),Wv.dependencies=null,[i,n]}function QV(i,t){return i&&(Mt.fun(i)?i(t):i.current=t),t}var FC=Symbol.for("AnimatedComponent"),ZV=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new p2(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=a=>{const u=UC(a)||"Anonymous";return Mt.str(a)?a=o[a]||(o[a]=BC(a,s)):a=a[FC]||(a[FC]=BC(a,s)),a.displayName=`Animated(${u})`,a};return el(i,(a,u)=>{Mt.arr(i)&&(u=UC(a)),o[u]=o(a)}),{animated:o}},UC=i=>Mt.str(i)?i:i&&Mt.str(i.displayName)?i.displayName:Mt.fun(i)&&i.name||null;function Vu(i,...t){return Mt.fun(i)?i(...t):i}var Wh=(i,t)=>i===!0||!!(t&&i&&(Mt.fun(i)?i(t):ao(i).includes(t))),kj=(i,t)=>Mt.obj(i)?t&&i[t]:i,Oj=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,$V=i=>i,m2=(i,t=$V)=>{let n=e7;i.default&&i.default!==!0&&(i=i.default,n=Object.keys(i));const r={};for(const s of n){const o=t(i[s],s);Mt.und(o)||(r[s]=o)}return r},e7=["config","onProps","onStart","onChange","onPause","onResume","onRest"],t7={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function r7(i){const t={};let n=0;if(el(i,(r,s)=>{t7[s]||(t[s]=r,n++)}),n)return t}function Bj(i){const t=r7(i);if(t){const n={to:t};return el(i,(r,s)=>s in t||(n[s]=r)),n}return{...i}}function Lp(i){return i=to(i),Mt.arr(i)?i.map(Lp):s1(i)?zo.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function n7(i){for(const t in i)return!0;return!1}function Zb(i){return Mt.fun(i)||Mt.arr(i)&&Mt.obj(i[0])}function i7(i,t){var n;(n=i.ref)==null||n.delete(i),t==null||t.delete(i)}function s7(i,t){var n;t&&i.ref!==t&&((n=i.ref)==null||n.delete(i),t.add(i),i.ref=t)}var Fj={default:{tension:170,friction:26},gentle:{tension:120,friction:14}},$b={...Fj.default,mass:1,damping:1,easing:IV.linear,clamp:!1},o7=class{constructor(){this.velocity=0,Object.assign(this,$b)}};function a7(i,t,n){n&&(n={...n},NC(n,t),t={...n,...t}),NC(i,t),Object.assign(i,t);for(const a in $b)i[a]==null&&(i[a]=$b[a]);let{frequency:r,damping:s}=i;const{mass:o}=i;return Mt.und(r)||(r<.01&&(r=.01),s<0&&(s=0),i.tension=Math.pow(2*Math.PI/r,2)*o,i.friction=4*Math.PI*s*o/r),i}function NC(i,t){if(!Mt.und(t.decay))i.duration=void 0;else{const n=!Mt.und(t.tension)||!Mt.und(t.friction);(n||!Mt.und(t.frequency)||!Mt.und(t.damping)||!Mt.und(t.mass))&&(i.duration=void 0,i.decay=void 0),n&&(i.frequency=void 0)}}var GC=[],l7=class{constructor(){this.changed=!1,this.values=GC,this.toValues=null,this.fromValues=GC,this.config=new o7,this.immediate=!1}};function Uj(i,{key:t,props:n,defaultProps:r,state:s,actions:o}){return new Promise((a,u)=>{let l,c,d=Wh(n.cancel??(r==null?void 0:r.cancel),t);if(d)h();else{Mt.und(n.pause)||(s.paused=Wh(n.pause,t));let m=r==null?void 0:r.pause;m!==!0&&(m=s.paused||Wh(m,t)),l=Vu(n.delay||0,t),m?(s.resumeQueue.add(f),o.pause()):(o.resume(),f())}function p(){s.resumeQueue.add(f),s.timeouts.delete(c),c.cancel(),l=c.time-or.now()}function f(){l>0&&!zo.skipAnimation?(s.delayed=!0,c=or.setTimeout(h,l),s.pauseQueue.add(p),s.timeouts.add(c)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(p),s.timeouts.delete(c),i<=(s.cancelId||0)&&(d=!0);try{o.start({...n,callId:i,cancel:d},a)}catch(m){u(m)}}})}var g2=(i,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Vf(i.get()):t.every(n=>n.noop)?Nj(i.get()):Lo(i.get(),t.every(n=>n.finished)),Nj=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Lo=(i,t,n=!1)=>({value:i,finished:t,cancelled:n}),Vf=i=>({value:i,cancelled:!0,finished:!1});function Gj(i,t,n,r){const{callId:s,parentId:o,onRest:a}=t,{asyncTo:u,promise:l}=n;return!o&&i===u&&!t.reset?l:n.promise=(async()=>{n.asyncId=s,n.asyncTo=i;const c=m2(t,(v,g)=>g==="onRest"?void 0:v);let d,p;const f=new Promise((v,g)=>(d=v,p=g)),h=v=>{const g=s<=(n.cancelId||0)&&Vf(r)||s!==n.asyncId&&Lo(r,!1);if(g)throw v.result=g,p(v),v},m=(v,g)=>{const _=new HC,x=new zC;return(async()=>{if(zo.skipAnimation)throw jp(n),x.result=Lo(r,!1),p(x),x;h(_);const b=Mt.obj(v)?{...v}:{...g,to:v};b.parentId=s,el(c,(T,M)=>{Mt.und(b[M])&&(b[M]=T)});const S=await r.start(b);return h(_),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),S})()};let y;if(zo.skipAnimation)return jp(n),Lo(r,!1);try{let v;Mt.arr(i)?v=(async g=>{for(const _ of g)await m(_)})(i):v=Promise.resolve(i(m,r.stop.bind(r))),await Promise.all([v.then(d),f]),y=Lo(r.get(),!0,!1)}catch(v){if(v instanceof HC)y=v.result;else if(v instanceof zC)y=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=o,n.asyncTo=o?u:void 0,n.promise=o?l:void 0)}return Mt.fun(a)&&or.batchedUpdates(()=>{a(y,r,r.item)}),y})()}function jp(i,t){zh(i.timeouts,n=>n.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}var HC=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},zC=class extends Error{constructor(){super("SkipAnimationSignal")}},ew=i=>i instanceof y2,u7=1,y2=class extends jV{constructor(){super(...arguments),this.id=u7++,this._priority=0}get priority(){return this._priority}set priority(i){this._priority!=i&&(this._priority=i,this._onPriorityChange(i))}get(){const i=ta(this);return i&&i.getValue()}to(...i){return zo.to(this,i)}interpolate(...i){return NV(),zo.to(this,i)}toJSON(){return this.get()}observerAdded(i){i==1&&this._attach()}observerRemoved(i){i==0&&this._detach()}_attach(){}_detach(){}_onChange(i,t=!1){zv(this,{type:"change",parent:this,value:i,idle:t})}_onPriorityChange(i){this.idle||r1.sort(this),zv(this,{type:"priority",parent:this,priority:i})}},wc=Symbol.for("SpringPhase"),Hj=1,zj=2,Vj=4,_x=i=>(i[wc]&Hj)>0,Al=i=>(i[wc]&zj)>0,ch=i=>(i[wc]&Vj)>0,VC=(i,t)=>t?i[wc]|=zj|Hj:i[wc]&=-3,WC=(i,t)=>t?i[wc]|=Vj:i[wc]&=-5,c7=class extends y2{constructor(i,t){if(super(),this.animation=new l7,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Mt.und(i)||!Mt.und(t)){const n=Mt.obj(i)?{...i}:{...t,from:i};Mt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Al(this)||this._state.asyncTo)||ch(this)}get goal(){return to(this.animation.to)}get velocity(){const i=ta(this);return i instanceof sm?i.lastVelocity||0:i.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _x(this)}get isAnimating(){return Al(this)}get isPaused(){return ch(this)}get isDelayed(){return this._state.delayed}advance(i){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,a=o1(r.to);!a&&ra(r.to)&&(s=ao(to(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const p=c.constructor==Ip?1:a?a[d].lastPosition:s[d];let f=r.immediate,h=p;if(!f){if(h=c.lastPosition,o.tension<=0){c.done=!0;return}let m=c.elapsedTime+=i;const y=r.fromValues[d],v=c.v0!=null?c.v0:c.v0=Mt.arr(o.velocity)?o.velocity[d]:o.velocity;let g;const _=o.precision||(y==p?.005:Math.min(1,Math.abs(p-y)*.001));if(Mt.und(o.duration))if(o.decay){const x=o.decay===!0?.998:o.decay,b=Math.exp(-(1-x)*m);h=y+v/(1-x)*(1-b),f=Math.abs(c.lastPosition-h)<=_,g=v*b}else{g=c.lastVelocity==null?v:c.lastVelocity;const x=o.restVelocity||_/10,b=o.clamp?0:o.bounce,S=!Mt.und(b),T=y==p?c.v0>0:y<p;let M,R=!1;const L=1,P=Math.ceil(i/L);for(let C=0;C<P&&(M=Math.abs(g)>x,!(!M&&(f=Math.abs(p-h)<=_,f)));++C){S&&(R=h==p||h>p==T,R&&(g=-g*b,h=p));const k=-o.tension*1e-6*(h-p),D=-o.friction*.001*g,F=(k+D)/o.mass;g=g+F*L,h=h+g*L}}else{let x=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,c.durationProgress>0&&(c.elapsedTime=o.duration*c.durationProgress,m=c.elapsedTime+=i)),x=(o.progress||0)+m/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=y+o.easing(x)*(p-y),g=(h-c.lastPosition)/i,f=x==1}c.lastVelocity=g,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}a&&!a[d].done&&(f=!1),f?c.done=!0:t=!1,c.setValue(h,o.round)&&(n=!0)});const u=ta(this),l=u.getValue();if(t){const c=to(r.to);(l!==c||n)&&!o.decay?(u.setValue(c),this._onChange(c)):n&&o.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(i){return or.batchedUpdates(()=>{this._stop(),this._focus(i),this._set(i)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Al(this)){const{to:i,config:t}=this.animation;or.batchedUpdates(()=>{this._onStart(),t.decay||this._set(i,!1),this._stop()})}return this}update(i){return(this.queue||(this.queue=[])).push(i),this}start(i,t){let n;return Mt.und(i)?(n=this.queue||[],this.queue=[]):n=[Mt.obj(i)?i:{...t,to:i}],Promise.all(n.map(r=>this._update(r))).then(r=>g2(this,r))}stop(i){const{to:t}=this.animation;return this._focus(this.get()),jp(this._state,i&&this._lastCallId),or.batchedUpdates(()=>this._stop(t,i)),this}reset(){this._update({reset:!0})}eventObserved(i){i.type=="change"?this._start():i.type=="priority"&&(this.priority=i.priority+1)}_prepareNode(i){const t=this.key||"";let{to:n,from:r}=i;n=Mt.obj(n)?n[t]:n,(n==null||Zb(n))&&(n=void 0),r=Mt.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return _x(this)||(i.reverse&&([n,r]=[r,n]),r=to(r),Mt.und(r)?ta(this)||this._set(n):this._set(r)),s}_update({...i},t){const{key:n,defaultProps:r}=this;i.default&&Object.assign(r,m2(i,(a,u)=>/^on/.test(u)?kj(a,n):a)),YC(this,i,"onProps"),dh(this,"onProps",i,this);const s=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return Uj(++this._lastCallId,{key:n,props:i,defaultProps:r,state:o,actions:{pause:()=>{ch(this)||(WC(this,!0),wh(o.pauseQueue),dh(this,"onPause",Lo(this,fh(this,this.animation.to)),this))},resume:()=>{ch(this)&&(WC(this,!1),Al(this)&&this._resume(),wh(o.resumeQueue),dh(this,"onResume",Lo(this,fh(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(i.loop&&a.finished&&!(t&&a.noop)){const u=Wj(i);if(u)return this._update(u,!0)}return a})}_merge(i,t,n){if(t.cancel)return this.stop(!0),n(Vf(this));const r=!Mt.und(i.to),s=!Mt.und(i.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Vf(this));const{key:o,defaultProps:a,animation:u}=this,{to:l,from:c}=u;let{to:d=l,from:p=c}=i;s&&!r&&(!t.default||Mt.und(d))&&(d=p),t.reverse&&([d,p]=[p,d]);const f=!Pa(p,c);f&&(u.from=p),p=to(p);const h=!Pa(d,l);h&&this._focus(d);const m=Zb(t.to),{config:y}=u,{decay:v,velocity:g}=y;(r||s)&&(y.velocity=0),t.config&&!m&&a7(y,Vu(t.config,o),t.config!==a.config?Vu(a.config,o):void 0);let _=ta(this);if(!_||Mt.und(d))return n(Lo(this,!0));const x=Mt.und(t.reset)?s&&!t.default:!Mt.und(p)&&Wh(t.reset,o),b=x?p:this.get(),S=Lp(d),T=Mt.num(S)||Mt.arr(S)||s1(S),M=!m&&(!T||Wh(a.immediate||t.immediate,o));if(h){const C=Qb(d);if(C!==_.constructor)if(M)_=this._set(S);else throw Error(`Cannot animate between ${_.constructor.name} and ${C.name}, as the "to" prop suggests`)}const R=_.constructor;let L=ra(d),P=!1;if(!L){const C=x||!_x(this)&&f;(h||C)&&(P=Pa(Lp(b),S),L=!P),(!Pa(u.immediate,M)&&!M||!Pa(y.decay,v)||!Pa(y.velocity,g))&&(L=!0)}if(P&&Al(this)&&(u.changed&&!x?L=!0:L||this._stop(l)),!m&&((L||ra(l))&&(u.values=_.getPayload(),u.toValues=ra(d)?null:R==Ip?[1]:ao(S)),u.immediate!=M&&(u.immediate=M,!M&&!x&&this._set(l)),L)){const{onRest:C}=u;Gr(d7,D=>YC(this,t,D));const k=Lo(this,fh(this,l));wh(this._pendingCalls,k),this._pendingCalls.add(n),u.changed&&or.batchedUpdates(()=>{var D;u.changed=!x,C==null||C(k,this),x?Vu(a.onRest,k):(D=u.onStart)==null||D.call(u,k,this)})}x&&this._set(b),m?n(Gj(t.to,t,this._state,this)):L?this._start():Al(this)&&!h?this._pendingCalls.add(n):n(Nj(b))}_focus(i){const t=this.animation;i!==t.to&&(DC(this)&&this._detach(),t.to=i,DC(this)&&this._attach())}_attach(){let i=0;const{to:t}=this.animation;ra(t)&&(im(t,this),ew(t)&&(i=t.priority+1)),this.priority=i}_detach(){const{to:i}=this.animation;ra(i)&&Vv(i,this)}_set(i,t=!0){const n=to(i);if(!Mt.und(n)){const r=ta(this);if(!r||!Pa(n,r.getValue())){const s=Qb(n);!r||r.constructor!=s?h2(this,s.create(n)):r.setValue(n),r&&or.batchedUpdates(()=>{this._onChange(n,t)})}}return ta(this)}_onStart(){const i=this.animation;i.changed||(i.changed=!0,dh(this,"onStart",Lo(this,fh(this,i.to)),this))}_onChange(i,t){t||(this._onStart(),Vu(this.animation.onChange,i,this)),Vu(this.defaultProps.onChange,i,this),super._onChange(i,t)}_start(){const i=this.animation;ta(this).reset(to(i.to)),i.immediate||(i.fromValues=i.values.map(t=>t.lastPosition)),Al(this)||(VC(this,!0),ch(this)||this._resume())}_resume(){zo.skipAnimation?this.finish():r1.start(this)}_stop(i,t){if(Al(this)){VC(this,!1);const n=this.animation;Gr(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),zv(this,{type:"idle",parent:this});const r=t?Vf(this.get()):Lo(this.get(),fh(this,i??n.to));wh(this._pendingCalls,r),n.changed&&(n.changed=!1,dh(this,"onRest",r,this))}}};function fh(i,t){const n=Lp(t),r=Lp(i.get());return Pa(r,n)}function Wj(i,t=i.loop,n=i.to){const r=Vu(t);if(r){const s=r!==!0&&Bj(r),o=(s||i).reverse,a=!s||s.reset;return Dp({...i,loop:t,default:!1,pause:void 0,to:!o||Zb(n)?n:void 0,from:a?i.from:void 0,reset:a,...s})}}function Dp(i){const{to:t,from:n}=i=Bj(i),r=new Set;return Mt.obj(t)&&XC(t,r),Mt.obj(n)&&XC(n,r),i.keys=r.size?Array.from(r):null,i}function f7(i){const t=Dp(i);return Mt.und(t.default)&&(t.default=m2(t)),t}function XC(i,t){el(i,(n,r)=>n!=null&&t.add(r))}var d7=["onStart","onRest","onChange","onPause","onResume"];function YC(i,t,n){i.animation[n]=t[n]!==Oj(t,n)?kj(t[n],i.key):void 0}function dh(i,t,...n){var r,s,o,a;(s=(r=i.animation)[t])==null||s.call(r,...n),(a=(o=i.defaultProps)[t])==null||a.call(o,...n)}var h7=["onStart","onChange","onRest"],p7=1,m7=class{constructor(i,t){this.id=p7++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),i&&this.start({default:!0,...i})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(i=>i.idle&&!i.isDelayed&&!i.isPaused)}get item(){return this._item}set item(i){this._item=i}get(){const i={};return this.each((t,n)=>i[n]=t.get()),i}set(i){for(const t in i){const n=i[t];Mt.und(n)||this.springs[t].set(n)}}update(i){return i&&this.queue.push(Dp(i)),this}start(i){let{queue:t}=this;return i?t=ao(i).map(Dp):this.queue=[],this._flush?this._flush(this,t):(Kj(this,t),tw(this,t))}stop(i,t){if(i!==!!i&&(t=i),t){const n=this.springs;Gr(ao(t),r=>n[r].stop(!!i))}else jp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!i));return this}pause(i){if(Mt.und(i))this.start({pause:!0});else{const t=this.springs;Gr(ao(i),n=>t[n].pause())}return this}resume(i){if(Mt.und(i))this.start({pause:!1});else{const t=this.springs;Gr(ao(i),n=>t[n].resume())}return this}each(i){el(this.springs,i)}_onFrame(){const{onStart:i,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,zh(i,([u,l])=>{l.value=this.get(),u(l,this,this._item)}));const o=!r&&this._started,a=s||o&&n.size?this.get():null;s&&t.size&&zh(t,([u,l])=>{l.value=a,u(l,this,this._item)}),o&&(this._started=!1,zh(n,([u,l])=>{l.value=a,u(l,this,this._item)}))}eventObserved(i){if(i.type=="change")this._changed.add(i.parent),i.idle||this._active.add(i.parent);else if(i.type=="idle")this._active.delete(i.parent);else return;or.onFrame(this._onFrame)}};function tw(i,t){return Promise.all(t.map(n=>Xj(i,n))).then(n=>g2(i,n))}async function Xj(i,t,n){const{keys:r,to:s,from:o,loop:a,onRest:u,onResolve:l}=t,c=Mt.obj(t.default)&&t.default;a&&(t.loop=!1),s===!1&&(t.to=null),o===!1&&(t.from=null);const d=Mt.arr(s)||Mt.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):Gr(h7,y=>{const v=t[y];if(Mt.fun(v)){const g=i._events[y];t[y]=({finished:_,cancelled:x})=>{const b=g.get(v);b?(_||(b.finished=!1),x&&(b.cancelled=!0)):g.set(v,{value:null,finished:_||!1,cancelled:x||!1})},c&&(c[y]=t[y])}});const p=i._state;t.pause===!p.paused?(p.paused=t.pause,wh(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const f=(r||Object.keys(i.springs)).map(y=>i.springs[y].start(t)),h=t.cancel===!0||Oj(t,"cancel")===!0;(d||h&&p.asyncId)&&f.push(Uj(++i._lastAsyncId,{props:t,state:p,actions:{pause:Jb,resume:Jb,start(y,v){h?(jp(p,i._lastAsyncId),v(Vf(i))):(y.onRest=u,v(Gj(d,y,p,i)))}}})),p.paused&&await new Promise(y=>{p.resumeQueue.add(y)});const m=g2(i,await Promise.all(f));if(a&&m.finished&&!(n&&m.noop)){const y=Wj(t,a,s);if(y)return Kj(i,[y]),Xj(i,y,!0)}return l&&or.batchedUpdates(()=>l(m,i,i.item)),m}function qC(i,t){const n={...i.springs};return t&&Gr(ao(t),r=>{Mt.und(r.keys)&&(r=Dp(r)),Mt.obj(r.to)||(r={...r,to:void 0}),Jj(n,r,s=>qj(s))}),Yj(i,n),n}function Yj(i,t){el(t,(n,r)=>{i.springs[r]||(i.springs[r]=n,im(n,i))})}function qj(i,t){const n=new c7;return n.key=i,t&&im(n,t),n}function Jj(i,t,n){t.keys&&Gr(t.keys,r=>{(i[r]||(i[r]=n(r)))._prepareNode(t)})}function Kj(i,t){Gr(t,n=>{Jj(i.springs,n,r=>qj(r,i))})}var a1=({children:i,...t})=>{const n=Qe.useContext(Xv),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=VV(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=Xv;return Qe.createElement(o,{value:t},i)},Xv=g7(a1,{});a1.Provider=Xv.Provider;a1.Consumer=Xv.Consumer;function g7(i,t){return Object.assign(i,Qe.createContext(t)),i.Provider._context=i,i.Consumer._context=i,i}var y7=()=>{const i=[],t=function(r){HV();const s=[];return Gr(i,(o,a)=>{if(Mt.und(r))s.push(o.start());else{const u=n(r,o,a);u&&s.push(o.start(u))}}),s};t.current=i,t.add=function(r){i.includes(r)||i.push(r)},t.delete=function(r){const s=i.indexOf(r);~s&&i.splice(s,1)},t.pause=function(){return Gr(i,r=>r.pause(...arguments)),this},t.resume=function(){return Gr(i,r=>r.resume(...arguments)),this},t.set=function(r){Gr(i,(s,o)=>{const a=Mt.fun(r)?r(o,s):r;a&&s.set(a)})},t.start=function(r){const s=[];return Gr(i,(o,a)=>{if(Mt.und(r))s.push(o.start());else{const u=this._getProps(r,o,a);u&&s.push(o.start(u))}}),s},t.stop=function(){return Gr(i,r=>r.stop(...arguments)),this},t.update=function(r){return Gr(i,(s,o)=>s.update(this._getProps(r,s,o))),this};const n=function(r,s,o){return Mt.fun(r)?r(o,s):r};return t._getProps=n,t};function v7(i,t,n){const r=Mt.fun(t)&&t;r&&!n&&(n=[]);const s=Qe.useMemo(()=>r||arguments.length==3?y7():void 0,[]),o=Qe.useRef(0),a=Ij(),u=Qe.useMemo(()=>({ctrls:[],queue:[],flush(g,_){const x=qC(g,_);return o.current>0&&!u.queue.length&&!Object.keys(x).some(S=>!g.springs[S])?tw(g,_):new Promise(S=>{Yj(g,x),u.queue.push(()=>{S(tw(g,_))}),a()})}}),[]),l=Qe.useRef([...u.ctrls]),c=[],d=OC(i)||0;Qe.useMemo(()=>{Gr(l.current.slice(i,d),g=>{i7(g,s),g.stop(!0)}),l.current.length=i,p(d,i)},[i]),Qe.useMemo(()=>{p(0,Math.min(d,i))},n);function p(g,_){for(let x=g;x<_;x++){const b=l.current[x]||(l.current[x]=new m7(null,u.flush)),S=r?r(x,b):t[x];S&&(c[x]=f7(S))}}const f=l.current.map((g,_)=>qC(g,c[_])),h=Qe.useContext(a1),m=OC(h),y=h!==m&&n7(h);d2(()=>{o.current++,u.ctrls=l.current;const{queue:g}=u;g.length&&(u.queue=[],Gr(g,_=>_())),Gr(l.current,(_,x)=>{s==null||s.add(_),y&&_.start({default:h});const b=c[x];b&&(s7(_,b.ref),_.ref?_.queue.push(b):_.start(b))})}),Lj(()=>()=>{Gr(u.ctrls,g=>g.stop(!0))});const v=f.map(g=>({...g}));return s?[v,s]:v}function _7(i,t){const n=Mt.fun(i),[[r],s]=v7(1,n?i:[i],n?[]:t);return n||arguments.length==2?[r,s]:r}var x7=class extends y2{constructor(i,t){super(),this.source=i,this.idle=!0,this._active=new Set,this.calc=Cp(...t);const n=this._get(),r=Qb(n);h2(this,r.create(n))}advance(i){const t=this._get(),n=this.get();Pa(t,n)||(ta(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&JC(this._active)&&xx(this)}_get(){const i=Mt.arr(this.source)?this.source.map(to):ao(to(this.source));return this.calc(...i)}_start(){this.idle&&!JC(this._active)&&(this.idle=!1,Gr(o1(this),i=>{i.done=!1}),zo.skipAnimation?(or.batchedUpdates(()=>this.advance()),xx(this)):r1.start(this))}_attach(){let i=1;Gr(ao(this.source),t=>{ra(t)&&im(t,this),ew(t)&&(t.idle||this._active.add(t),i=Math.max(i,t.priority+1))}),this.priority=i,this._start()}_detach(){Gr(ao(this.source),i=>{ra(i)&&Vv(i,this)}),this._active.clear(),xx(this)}eventObserved(i){i.type=="change"?i.idle?this.advance():(this._active.add(i.parent),this._start()):i.type=="idle"?this._active.delete(i.parent):i.type=="priority"&&(this.priority=ao(this.source).reduce((t,n)=>Math.max(t,(ew(n)?n.priority:0)+1),0))}};function b7(i){return i.idle!==!1}function JC(i){return!i.size||Array.from(i).every(b7)}function xx(i){i.idle||(i.idle=!0,Gr(o1(i),t=>{t.done=!0}),zv(i,{type:"idle",parent:i}))}zo.assign({createStringInterpolator:Rj,to:(i,t)=>new x7(i,t)});var w7=["primitive"].concat(Object.keys(zL).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));zo.assign({createStringInterpolator:Rj,colors:_V,frameLoop:"demand"});uz(()=>{or.advance()});var S7=ZV(w7,{applyAnimatedValues:Hu}),A7=S7.animated;const M7=parseInt(Gp.replace(/\D+/g,""));function KC(i,t){if(t===SS)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===_c||t===Wp){let n=i.getIndex();if(n===null){const a=[],u=i.getAttribute("position");if(u!==void 0){for(let l=0;l<u.count;l++)a.push(l);i.setIndex(a),n=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=n.count-2,s=[];if(n)if(t===_c)for(let a=1;a<=r;a++)s.push(n.getX(0)),s.push(n.getX(a)),s.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(s.push(n.getX(a)),s.push(n.getX(a+1)),s.push(n.getX(a+2))):(s.push(n.getX(a+2)),s.push(n.getX(a+1)),s.push(n.getX(a)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=i.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}var E7=Object.defineProperty,T7=(i,t,n)=>t in i?E7(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,C7=(i,t,n)=>(T7(i,t+"",n),n);class R7{constructor(){C7(this,"_listeners")}addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const s=r.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,t);t.target=null}}}var P7=Object.defineProperty,I7=(i,t,n)=>t in i?P7(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,er=(i,t,n)=>(I7(i,typeof t!="symbol"?t+"":t,n),n);const ty=new Cc,QC=new Da,L7=Math.cos(70*(Math.PI/180)),ZC=(i,t)=>(i%t+t)%t;let j7=class extends R7{constructor(t,n){super(),er(this,"object"),er(this,"domElement"),er(this,"enabled",!0),er(this,"target",new Ce),er(this,"minDistance",0),er(this,"maxDistance",1/0),er(this,"minZoom",0),er(this,"maxZoom",1/0),er(this,"minPolarAngle",0),er(this,"maxPolarAngle",Math.PI),er(this,"minAzimuthAngle",-1/0),er(this,"maxAzimuthAngle",1/0),er(this,"enableDamping",!1),er(this,"dampingFactor",.05),er(this,"enableZoom",!0),er(this,"zoomSpeed",1),er(this,"enableRotate",!0),er(this,"rotateSpeed",1),er(this,"enablePan",!0),er(this,"panSpeed",1),er(this,"screenSpacePanning",!0),er(this,"keyPanSpeed",7),er(this,"zoomToCursor",!1),er(this,"autoRotate",!1),er(this,"autoRotateSpeed",2),er(this,"reverseOrbit",!1),er(this,"reverseHorizontalOrbit",!1),er(this,"reverseVerticalOrbit",!1),er(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),er(this,"mouseButtons",{LEFT:Fu.ROTATE,MIDDLE:Fu.DOLLY,RIGHT:Fu.PAN}),er(this,"touches",{ONE:Uu.ROTATE,TWO:Uu.DOLLY_PAN}),er(this,"target0"),er(this,"position0"),er(this,"zoom0"),er(this,"_domElementKeyEvents",null),er(this,"getPolarAngle"),er(this,"getAzimuthalAngle"),er(this,"setPolarAngle"),er(this,"setAzimuthalAngle"),er(this,"getDistance"),er(this,"getZoomScale"),er(this,"listenToKeyEvents"),er(this,"stopListenToKeyEvents"),er(this,"saveState"),er(this,"reset"),er(this,"update"),er(this,"connect"),er(this,"dispose"),er(this,"dollyIn"),er(this,"dollyOut"),er(this,"getScale"),er(this,"setScale"),this.object=t,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ye=>{let De=ZC(ye,2*Math.PI),Me=d.phi;Me<0&&(Me+=2*Math.PI),De<0&&(De+=2*Math.PI);let qe=Math.abs(De-Me);2*Math.PI-qe<qe&&(De<Me?De+=2*Math.PI:Me+=2*Math.PI),p.phi=De-Me,r.update()},this.setAzimuthalAngle=ye=>{let De=ZC(ye,2*Math.PI),Me=d.theta;Me<0&&(Me+=2*Math.PI),De<0&&(De+=2*Math.PI);let qe=Math.abs(De-Me);2*Math.PI-qe<qe&&(De<Me?De+=2*Math.PI:Me+=2*Math.PI),p.theta=De-Me,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ye=>{ye.addEventListener("keydown",Se),this._domElementKeyEvents=ye},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Se),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(s),r.update(),l=u.NONE},this.update=(()=>{const ye=new Ce,De=new Ce(0,1,0),Me=new Yr().setFromUnitVectors(t.up,De),qe=Me.clone().invert(),ke=new Ce,Ye=new Yr,dt=2*Math.PI;return function(){const ct=r.object.position;Me.setFromUnitVectors(t.up,De),qe.copy(Me).invert(),ye.copy(ct).sub(r.target),ye.applyQuaternion(Me),d.setFromVector3(ye),r.autoRotate&&l===u.NONE&&F(k()),r.enableDamping?(d.theta+=p.theta*r.dampingFactor,d.phi+=p.phi*r.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let xt=r.minAzimuthAngle,_t=r.maxAzimuthAngle;isFinite(xt)&&isFinite(_t)&&(xt<-Math.PI?xt+=dt:xt>Math.PI&&(xt-=dt),_t<-Math.PI?_t+=dt:_t>Math.PI&&(_t-=dt),xt<=_t?d.theta=Math.max(xt,Math.min(_t,d.theta)):d.theta=d.theta>(xt+_t)/2?Math.max(xt,d.theta):Math.min(_t,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&L||r.object.isOrthographicCamera?d.radius=I(d.radius):d.radius=I(d.radius*f),ye.setFromSpherical(d),ye.applyQuaternion(qe),ct.copy(r.target).add(ye),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),h.set(0,0,0));let vt=!1;if(r.zoomToCursor&&L){let Bt=null;if(r.object instanceof gn&&r.object.isPerspectiveCamera){const qt=ye.length();Bt=I(qt*f);const Wt=qt-Bt;r.object.position.addScaledVector(M,Wt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const qt=new Ce(R.x,R.y,0);qt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),vt=!0;const Wt=new Ce(R.x,R.y,0);Wt.unproject(r.object),r.object.position.sub(Wt).add(qt),r.object.updateMatrixWorld(),Bt=ye.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Bt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Bt).add(r.object.position):(ty.origin.copy(r.object.position),ty.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(ty.direction))<L7?t.lookAt(r.target):(QC.setFromNormalAndCoplanarPoint(r.object.up,r.target),ty.intersectPlane(QC,r.target))))}else r.object instanceof ua&&r.object.isOrthographicCamera&&(vt=f!==1,vt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,L=!1,vt||ke.distanceToSquared(r.object.position)>c||8*(1-Ye.dot(r.object.quaternion))>c?(r.dispatchEvent(s),ke.copy(r.object.position),Ye.copy(r.object.quaternion),vt=!1,!0):!1}})(),this.connect=ye=>{r.domElement=ye,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",le),r.domElement.addEventListener("pointerdown",Ae),r.domElement.addEventListener("pointercancel",Fe),r.domElement.addEventListener("wheel",Ve)},this.dispose=()=>{var ye,De,Me,qe,ke,Ye;r.domElement&&(r.domElement.style.touchAction="auto"),(ye=r.domElement)==null||ye.removeEventListener("contextmenu",le),(De=r.domElement)==null||De.removeEventListener("pointerdown",Ae),(Me=r.domElement)==null||Me.removeEventListener("pointercancel",Fe),(qe=r.domElement)==null||qe.removeEventListener("wheel",Ve),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointermove",Be),(Ye=r.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",Fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Se)};const r=this,s={type:"change"},o={type:"start"},a={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=u.NONE;const c=1e-6,d=new Fv,p=new Fv;let f=1;const h=new Ce,m=new mt,y=new mt,v=new mt,g=new mt,_=new mt,x=new mt,b=new mt,S=new mt,T=new mt,M=new Ce,R=new mt;let L=!1;const P=[],C={};function k(){return 2*Math.PI/60/60*r.autoRotateSpeed}function D(){return Math.pow(.95,r.zoomSpeed)}function F(ye){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=ye:p.theta-=ye}function G(ye){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=ye:p.phi-=ye}const z=(()=>{const ye=new Ce;return function(Me,qe){ye.setFromMatrixColumn(qe,0),ye.multiplyScalar(-Me),h.add(ye)}})(),Q=(()=>{const ye=new Ce;return function(Me,qe){r.screenSpacePanning===!0?ye.setFromMatrixColumn(qe,1):(ye.setFromMatrixColumn(qe,0),ye.crossVectors(r.object.up,ye)),ye.multiplyScalar(Me),h.add(ye)}})(),V=(()=>{const ye=new Ce;return function(Me,qe){const ke=r.domElement;if(ke&&r.object instanceof gn&&r.object.isPerspectiveCamera){const Ye=r.object.position;ye.copy(Ye).sub(r.target);let dt=ye.length();dt*=Math.tan(r.object.fov/2*Math.PI/180),z(2*Me*dt/ke.clientHeight,r.object.matrix),Q(2*qe*dt/ke.clientHeight,r.object.matrix)}else ke&&r.object instanceof ua&&r.object.isOrthographicCamera?(z(Me*(r.object.right-r.object.left)/r.object.zoom/ke.clientWidth,r.object.matrix),Q(qe*(r.object.top-r.object.bottom)/r.object.zoom/ke.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function W(ye){r.object instanceof gn&&r.object.isPerspectiveCamera||r.object instanceof ua&&r.object.isOrthographicCamera?f=ye:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Y(ye){W(f/ye)}function J(ye){W(f*ye)}function ie(ye){if(!r.zoomToCursor||!r.domElement)return;L=!0;const De=r.domElement.getBoundingClientRect(),Me=ye.clientX-De.left,qe=ye.clientY-De.top,ke=De.width,Ye=De.height;R.x=Me/ke*2-1,R.y=-(qe/Ye)*2+1,M.set(R.x,R.y,1).unproject(r.object).sub(r.object.position).normalize()}function I(ye){return Math.max(r.minDistance,Math.min(r.maxDistance,ye))}function O(ye){m.set(ye.clientX,ye.clientY)}function H(ye){ie(ye),b.set(ye.clientX,ye.clientY)}function q(ye){g.set(ye.clientX,ye.clientY)}function Z(ye){y.set(ye.clientX,ye.clientY),v.subVectors(y,m).multiplyScalar(r.rotateSpeed);const De=r.domElement;De&&(F(2*Math.PI*v.x/De.clientHeight),G(2*Math.PI*v.y/De.clientHeight)),m.copy(y),r.update()}function oe(ye){S.set(ye.clientX,ye.clientY),T.subVectors(S,b),T.y>0?Y(D()):T.y<0&&J(D()),b.copy(S),r.update()}function pe(ye){_.set(ye.clientX,ye.clientY),x.subVectors(_,g).multiplyScalar(r.panSpeed),V(x.x,x.y),g.copy(_),r.update()}function be(ye){ie(ye),ye.deltaY<0?J(D()):ye.deltaY>0&&Y(D()),r.update()}function me(ye){let De=!1;switch(ye.code){case r.keys.UP:V(0,r.keyPanSpeed),De=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),De=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),De=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),De=!0;break}De&&(ye.preventDefault(),r.update())}function ce(){if(P.length==1)m.set(P[0].pageX,P[0].pageY);else{const ye=.5*(P[0].pageX+P[1].pageX),De=.5*(P[0].pageY+P[1].pageY);m.set(ye,De)}}function te(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const ye=.5*(P[0].pageX+P[1].pageX),De=.5*(P[0].pageY+P[1].pageY);g.set(ye,De)}}function ue(){const ye=P[0].pageX-P[1].pageX,De=P[0].pageY-P[1].pageY,Me=Math.sqrt(ye*ye+De*De);b.set(0,Me)}function ge(){r.enableZoom&&ue(),r.enablePan&&te()}function xe(){r.enableZoom&&ue(),r.enableRotate&&ce()}function Le(ye){if(P.length==1)y.set(ye.pageX,ye.pageY);else{const Me=Pe(ye),qe=.5*(ye.pageX+Me.x),ke=.5*(ye.pageY+Me.y);y.set(qe,ke)}v.subVectors(y,m).multiplyScalar(r.rotateSpeed);const De=r.domElement;De&&(F(2*Math.PI*v.x/De.clientHeight),G(2*Math.PI*v.y/De.clientHeight)),m.copy(y)}function we(ye){if(P.length==1)_.set(ye.pageX,ye.pageY);else{const De=Pe(ye),Me=.5*(ye.pageX+De.x),qe=.5*(ye.pageY+De.y);_.set(Me,qe)}x.subVectors(_,g).multiplyScalar(r.panSpeed),V(x.x,x.y),g.copy(_)}function Ee(ye){const De=Pe(ye),Me=ye.pageX-De.x,qe=ye.pageY-De.y,ke=Math.sqrt(Me*Me+qe*qe);S.set(0,ke),T.set(0,Math.pow(S.y/b.y,r.zoomSpeed)),Y(T.y),b.copy(S)}function ae(ye){r.enableZoom&&Ee(ye),r.enablePan&&we(ye)}function ne(ye){r.enableZoom&&Ee(ye),r.enableRotate&&Le(ye)}function Ae(ye){var De,Me;r.enabled!==!1&&(P.length===0&&((De=r.domElement)==null||De.ownerDocument.addEventListener("pointermove",Be),(Me=r.domElement)==null||Me.ownerDocument.addEventListener("pointerup",Fe)),de(ye),ye.pointerType==="touch"?We(ye):Oe(ye))}function Be(ye){r.enabled!==!1&&(ye.pointerType==="touch"?Re(ye):Je(ye))}function Fe(ye){var De,Me,qe;ee(ye),P.length===0&&((De=r.domElement)==null||De.releasePointerCapture(ye.pointerId),(Me=r.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",Be),(qe=r.domElement)==null||qe.ownerDocument.removeEventListener("pointerup",Fe)),r.dispatchEvent(a),l=u.NONE}function Oe(ye){let De;switch(ye.button){case 0:De=r.mouseButtons.LEFT;break;case 1:De=r.mouseButtons.MIDDLE;break;case 2:De=r.mouseButtons.RIGHT;break;default:De=-1}switch(De){case Fu.DOLLY:if(r.enableZoom===!1)return;H(ye),l=u.DOLLY;break;case Fu.ROTATE:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(r.enablePan===!1)return;q(ye),l=u.PAN}else{if(r.enableRotate===!1)return;O(ye),l=u.ROTATE}break;case Fu.PAN:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(r.enableRotate===!1)return;O(ye),l=u.ROTATE}else{if(r.enablePan===!1)return;q(ye),l=u.PAN}break;default:l=u.NONE}l!==u.NONE&&r.dispatchEvent(o)}function Je(ye){if(r.enabled!==!1)switch(l){case u.ROTATE:if(r.enableRotate===!1)return;Z(ye);break;case u.DOLLY:if(r.enableZoom===!1)return;oe(ye);break;case u.PAN:if(r.enablePan===!1)return;pe(ye);break}}function Ve(ye){r.enabled===!1||r.enableZoom===!1||l!==u.NONE&&l!==u.ROTATE||(ye.preventDefault(),r.dispatchEvent(o),be(ye),r.dispatchEvent(a))}function Se(ye){r.enabled===!1||r.enablePan===!1||me(ye)}function We(ye){switch(he(ye),P.length){case 1:switch(r.touches.ONE){case Uu.ROTATE:if(r.enableRotate===!1)return;ce(),l=u.TOUCH_ROTATE;break;case Uu.PAN:if(r.enablePan===!1)return;te(),l=u.TOUCH_PAN;break;default:l=u.NONE}break;case 2:switch(r.touches.TWO){case Uu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ge(),l=u.TOUCH_DOLLY_PAN;break;case Uu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;xe(),l=u.TOUCH_DOLLY_ROTATE;break;default:l=u.NONE}break;default:l=u.NONE}l!==u.NONE&&r.dispatchEvent(o)}function Re(ye){switch(he(ye),l){case u.TOUCH_ROTATE:if(r.enableRotate===!1)return;Le(ye),r.update();break;case u.TOUCH_PAN:if(r.enablePan===!1)return;we(ye),r.update();break;case u.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ae(ye),r.update();break;case u.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ne(ye),r.update();break;default:l=u.NONE}}function le(ye){r.enabled!==!1&&ye.preventDefault()}function de(ye){P.push(ye)}function ee(ye){delete C[ye.pointerId];for(let De=0;De<P.length;De++)if(P[De].pointerId==ye.pointerId){P.splice(De,1);return}}function he(ye){let De=C[ye.pointerId];De===void 0&&(De=new mt,C[ye.pointerId]=De),De.set(ye.pageX,ye.pageY)}function Pe(ye){const De=ye.pointerId===P[0].pointerId?P[1]:P[0];return C[De.pointerId]}this.dollyIn=(ye=D())=>{J(ye),r.update()},this.dollyOut=(ye=D())=>{Y(ye),r.update()},this.getScale=()=>f,this.setScale=ye=>{W(ye),r.update()},this.getZoomScale=()=>D(),n!==void 0&&this.connect(n),this.update()}};function Yv(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let t="";for(let n=0,r=i.length;n<r;n++)t+=String.fromCharCode(i[n]);try{return decodeURIComponent(escape(t))}catch{return t}}const $u="srgb",Ha="srgb-linear",$C=3001,D7=3e3;let v2=class extends bi{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new U7(n)}),this.register(function(n){return new N7(n)}),this.register(function(n){return new J7(n)}),this.register(function(n){return new K7(n)}),this.register(function(n){return new Q7(n)}),this.register(function(n){return new H7(n)}),this.register(function(n){return new z7(n)}),this.register(function(n){return new V7(n)}),this.register(function(n){return new W7(n)}),this.register(function(n){return new F7(n)}),this.register(function(n){return new X7(n)}),this.register(function(n){return new G7(n)}),this.register(function(n){return new q7(n)}),this.register(function(n){return new Y7(n)}),this.register(function(n){return new O7(n)}),this.register(function(n){return new Z7(n)}),this.register(function(n){return new $7(n)})}load(t,n,r,s){const o=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=ks.extractUrlBase(t);a=ks.resolveURL(c,this.path)}else a=ks.extractUrlBase(t);this.manager.itemStart(t);const u=function(c){s?s(c):console.error(c),o.manager.itemError(t),o.manager.itemEnd(t)},l=new es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{o.parse(c,a,function(d){n(d),o.manager.itemEnd(t)},u)}catch(d){u(d)}},r,u)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,r,s){let o;const a={},u={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(Yv(new Uint8Array(t.slice(0,4)))===Qj){try{a[wr.KHR_BINARY_GLTF]=new eW(t)}catch(d){s&&s(d);return}o=JSON.parse(a[wr.KHR_BINARY_GLTF].content)}else o=JSON.parse(Yv(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new hW(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),u[d.name]=d,a[d.name]=!0}if(o.extensionsUsed)for(let c=0;c<o.extensionsUsed.length;++c){const d=o.extensionsUsed[c],p=o.extensionsRequired||[];switch(d){case wr.KHR_MATERIALS_UNLIT:a[d]=new B7;break;case wr.KHR_DRACO_MESH_COMPRESSION:a[d]=new tW(o,this.dracoLoader);break;case wr.KHR_TEXTURE_TRANSFORM:a[d]=new rW;break;case wr.KHR_MESH_QUANTIZATION:a[d]=new nW;break;default:p.indexOf(d)>=0&&u[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(a),l.setPlugins(u),l.parse(r,s)}parseAsync(t,n){const r=this;return new Promise(function(s,o){r.parse(t,n,s,o)})}};function k7(){let i={};return{get:function(t){return i[t]},add:function(t,n){i[t]=n},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const wr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let O7=class{constructor(t){this.parser=t,this.name=wr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,r="light:"+t;let s=n.cache.get(r);if(s)return s;const o=n.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let c;const d=new wt(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],Ha);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Z0(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Q0(d),c.distance=p;break;case"spot":c=new K0(d),c.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ia(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+t),s=Promise.resolve(c),n.cache.add(r,s),s}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,r=this.parser,o=r.json.nodes[t],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(l){return r._getNodeRef(n.cache,u,l)})}},B7=class{constructor(){this.name=wr.KHR_MATERIALS_UNLIT}getMaterialType(){return Jn}extendParams(t,n,r){const s=[];t.color=new wt(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const a=o.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],Ha),t.opacity=a[3]}o.baseColorTexture!==void 0&&s.push(r.assignTexture(t,"map",o.baseColorTexture,$u))}return Promise.all(s)}},F7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}},U7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const u=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new mt(u,u)}return Promise.all(o)}},N7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_DISPERSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},G7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(o)}},H7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_SHEEN}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new wt(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const u=a.sheenColorFactor;n.sheenColor.setRGB(u[0],u[1],u[2],Ha)}return a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&o.push(r.assignTexture(n,"sheenColorMap",a.sheenColorTexture,$u)),a.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}},z7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&o.push(r.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(o)}},V7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_VOLUME}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&o.push(r.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const u=a.attenuationColor||[1,1,1];return n.attenuationColor=new wt().setRGB(u[0],u[1],u[2],Ha),Promise.all(o)}},W7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_IOR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},X7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_SPECULAR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&o.push(r.assignTexture(n,"specularIntensityMap",a.specularTexture));const u=a.specularColorFactor||[1,1,1];return n.specularColor=new wt().setRGB(u[0],u[1],u[2],Ha),a.specularColorTexture!==void 0&&o.push(r.assignTexture(n,"specularColorMap",a.specularColorTexture,$u)),Promise.all(o)}},Y7=class{constructor(t){this.parser=t,this.name=wr.EXT_MATERIALS_BUMP}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return n.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&o.push(r.assignTexture(n,"bumpMap",a.bumpTexture)),Promise.all(o)}},q7=class{constructor(t){this.parser=t,this.name=wr.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&o.push(r.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(o)}},J7=class{constructor(t){this.parser=t,this.name=wr.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,a)}},K7=class{constructor(t){this.parser=t,this.name=wr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],u=s.images[a.source];let l=r.textureLoader;if(u.uri){const c=r.options.manager.getHandler(u.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(t,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}},Q7=class{constructor(t){this.parser=t,this.name=wr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],u=s.images[a.source];let l=r.textureLoader;if(u.uri){const c=r.options.manager.getHandler(u.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(t,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}},Z7=class{constructor(t){this.name=wr.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,r=n.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const l=s.byteOffset||0,c=s.byteLength||0,d=s.count,p=s.byteStride,f=new Uint8Array(u,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,p,f,s.mode,s.filter).then(function(h){return h.buffer}):a.ready.then(function(){const h=new ArrayBuffer(d*p);return a.decodeGltfBuffer(new Uint8Array(h),d,p,f,s.mode,s.filter),h})})}else return null}},$7=class{constructor(t){this.name=wr.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,r=n.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=n.meshes[r.mesh];for(const c of s.primitives)if(c.mode!==Zs.TRIANGLES&&c.mode!==Zs.TRIANGLE_STRIP&&c.mode!==Zs.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=r.extensions[this.name].attributes,u=[],l={};for(const c in a)u.push(this.parser.getDependency("accessor",a[c]).then(d=>(l[c]=d,l[c])));return u.length<1?null:(u.push(this.parser.createNodeMesh(t)),Promise.all(u).then(c=>{const d=c.pop(),p=d.isGroup?d.children:[d],f=c[0].count,h=[];for(const m of p){const y=new Gt,v=new Ce,g=new Yr,_=new Ce(1,1,1),x=new L0(m.geometry,m.material,f);for(let b=0;b<f;b++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,b),l.SCALE&&_.fromBufferAttribute(l.SCALE,b),x.setMatrixAt(b,y.compose(v,g,_));for(const b in l)if(b==="_COLOR_0"){const S=l[b];x.instanceColor=new Ka(S.array,S.itemSize,S.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&m.geometry.setAttribute(b,l[b]);br.prototype.copy.call(x,m),this.parser.assignFinalMaterial(x),h.push(x)}return d.isGroup?(d.clear(),d.add(...h),d):h[0]}))}};const Qj="glTF",hh=12,eR={JSON:1313821514,BIN:5130562};let eW=class{constructor(t){this.name=wr.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,hh);if(this.header={magic:Yv(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Qj)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-hh,s=new DataView(t,hh);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===eR.JSON){const l=new Uint8Array(t,hh+o,a);this.content=Yv(l)}else if(u===eR.BIN){const l=hh+o;this.body=t.slice(l,l+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},tW=class{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=wr.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const r=this.json,s=this.dracoLoader,o=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,u={},l={},c={};for(const d in a){const p=rw[d]||d.toLowerCase();u[p]=a[d]}for(const d in t.attributes){const p=rw[d]||d.toLowerCase();if(a[d]!==void 0){const f=r.accessors[t.attributes[d]],h=Wf[f.componentType];c[p]=h.name,l[p]=f.normalized===!0}}return n.getDependency("bufferView",o).then(function(d){return new Promise(function(p,f){s.decodeDracoFile(d,function(h){for(const m in h.attributes){const y=h.attributes[m],v=l[m];v!==void 0&&(y.normalized=v)}p(h)},u,c,Ha,f)})})}},rW=class{constructor(){this.name=wr.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}},nW=class{constructor(){this.name=wr.KHR_MESH_QUANTIZATION}},Zj=class extends Ic{constructor(t,n,r,s){super(t,n,r,s)}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=t*s*3+s;for(let a=0;a!==s;a++)n[a]=r[o+a];return n}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,u=this.valueSize,l=u*2,c=u*3,d=s-n,p=(r-n)/d,f=p*p,h=f*p,m=t*c,y=m-c,v=-2*h+3*f,g=h-f,_=1-v,x=g-f+p;for(let b=0;b!==u;b++){const S=a[y+b+u],T=a[y+b+l]*d,M=a[m+b+u],R=a[m+b]*d;o[b]=_*S+x*T+v*M+g*R}return o}};const iW=new Yr;let sW=class extends Zj{interpolate_(t,n,r,s){const o=super.interpolate_(t,n,r,s);return iW.fromArray(o).normalize().toArray(o),o}};const Zs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Wf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tR={9728:Nn,9729:sn,9984:zp,9985:nc,9986:kl,9987:gs},rR={33071:ms,33648:mc,10497:Uo},bx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...M7>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ml={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},oW={CUBICSPLINE:void 0,LINEAR:Ql,STEP:vc},wx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function aW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Pc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fo})),i.DefaultMaterial}function ju(i,t,n){for(const r in n.extensions)i[r]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Ia(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function lW(i,t,n){let r=!1,s=!1,o=!1;for(let c=0,d=t.length;c<d;c++){const p=t[c];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(s=!0),p.COLOR_0!==void 0&&(o=!0),r&&s&&o)break}if(!r&&!s&&!o)return Promise.resolve(i);const a=[],u=[],l=[];for(let c=0,d=t.length;c<d;c++){const p=t[c];if(r){const f=p.POSITION!==void 0?n.getDependency("accessor",p.POSITION):i.attributes.position;a.push(f)}if(s){const f=p.NORMAL!==void 0?n.getDependency("accessor",p.NORMAL):i.attributes.normal;u.push(f)}if(o){const f=p.COLOR_0!==void 0?n.getDependency("accessor",p.COLOR_0):i.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(u),Promise.all(l)]).then(function(c){const d=c[0],p=c[1],f=c[2];return r&&(i.morphAttributes.position=d),s&&(i.morphAttributes.normal=p),o&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}function uW(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let n=0,r=t.weights.length;n<r;n++)i.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(i.morphTargetInfluences.length===n.length){i.morphTargetDictionary={};for(let r=0,s=n.length;r<s;r++)i.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function cW(i){let t;const n=i.extensions&&i.extensions[wr.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Sx(n.attributes):t=i.indices+":"+Sx(i.attributes)+":"+i.mode,i.targets!==void 0)for(let r=0,s=i.targets.length;r<s;r++)t+=":"+Sx(i.targets[r]);return t}function Sx(i){let t="";const n=Object.keys(i).sort();for(let r=0,s=n.length;r<s;r++)t+=n[r]+":"+i[n[r]]+";";return t}function nw(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const dW=new Gt;let hW=class{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new k7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||s&&o<98?this.textureLoader=new WS(this.options.manager):this.textureLoader=new qS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new es(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const r=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(a){const u={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:r,userData:{}};return ju(o,u,s),Ia(u,s),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(u)})).then(function(){for(const l of u.scenes)l.updateMatrixWorld();t(u)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let s=0,o=n.length;s<o;s++){const a=n[s].joints;for(let u=0,l=a.length;u<l;u++)t[a[u]].isBone=!0}for(let s=0,o=t.length;s<o;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(r[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,r){if(t.refs[n]<=1)return r;const s=r.clone(),o=(a,u)=>{const l=this.associations.get(a);l!=null&&this.associations.set(u,l);for(const[c,d]of a.children.entries())o(d,u.children[c])};return o(r,s),s.name+="_instance_"+t.uses[n]++,s}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const s=t(n[r]);if(s)return s}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let s=0;s<n.length;s++){const o=t(n[s]);o&&r.push(o)}return r}getDependency(t,n){const r=t+":"+n;let s=this.cache.get(r);if(!s){switch(t){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(r,s)}return s}getDependencies(t){let n=this.cache.get(t);if(!n){const r=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(o,a){return r.getDependency(t,a)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[wr.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,a){r.load(ks.resolveURL(n.uri,s.path),o,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(r){const s=n.byteLength||0,o=n.byteOffset||0;return r.slice(o,o+s)})}loadAccessor(t){const n=this,r=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=bx[s.type],u=Wf[s.componentType],l=s.normalized===!0,c=new u(s.count*a);return Promise.resolve(new Tr(c,a,l))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(a){const u=a[0],l=bx[s.type],c=Wf[s.componentType],d=c.BYTES_PER_ELEMENT,p=d*l,f=s.byteOffset||0,h=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,m=s.normalized===!0;let y,v;if(h&&h!==p){const g=Math.floor(f/h),_="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+g+":"+s.count;let x=n.cache.get(_);x||(y=new c(u,g*h,s.count*h/d),x=new hd(y,h/d),n.cache.add(_,x)),v=new Ja(x,l,f%h/d,m)}else u===null?y=new c(s.count*l):y=new c(u,f,s.count*l),v=new Tr(y,l,m);if(s.sparse!==void 0){const g=bx.SCALAR,_=Wf[s.sparse.indices.componentType],x=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,S=new _(a[1],x,s.sparse.count*g),T=new c(a[2],b,s.sparse.count*l);u!==null&&(v=new Tr(v.array.slice(),v.itemSize,v.normalized));for(let M=0,R=S.length;M<R;M++){const L=S[M];if(v.setX(L,T[M*l]),l>=2&&v.setY(L,T[M*l+1]),l>=3&&v.setZ(L,T[M*l+2]),l>=4&&v.setW(L,T[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(t){const n=this.json,r=this.options,o=n.textures[t].source,a=n.images[o];let u=this.textureLoader;if(a.uri){const l=r.manager.getHandler(a.uri);l!==null&&(u=l)}return this.loadTextureImage(t,o,u)}loadTextureImage(t,n,r){const s=this,o=this.json,a=o.textures[t],u=o.images[n],l=(u.uri||u.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(d){d.flipY=!1,d.name=a.name||u.name||"",d.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(d.name=u.uri);const f=(o.samplers||{})[a.sampler]||{};return d.magFilter=tR[f.magFilter]||sn,d.minFilter=tR[f.minFilter]||gs,d.wrapS=rR[f.wrapS]||Uo,d.wrapT=rR[f.wrapT]||Uo,s.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,n){const r=this,s=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(p=>p.clone());const a=s.images[t],u=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=r.getDependency("bufferView",a.bufferView).then(function(p){c=!0;const f=new Blob([p],{type:a.mimeType});return l=u.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(p){return new Promise(function(f,h){let m=f;n.isImageBitmapLoader===!0&&(m=function(y){const v=new Qr(y);v.needsUpdate=!0,f(v)}),n.load(ks.resolveURL(p,o.path),m,void 0,h)})}).then(function(p){return c===!0&&u.revokeObjectURL(l),Ia(p,a),p.userData.mimeType=a.mimeType||fW(a.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[t]=d,d}assignTexture(t,n,r,s){const o=this;return this.getDependency("texture",r.index).then(function(a){if(!a)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(a=a.clone(),a.channel=r.texCoord),o.extensions[wr.KHR_TEXTURE_TRANSFORM]){const u=r.extensions!==void 0?r.extensions[wr.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const l=o.associations.get(a);a=o.extensions[wr.KHR_TEXTURE_TRANSFORM].extendTexture(a,u),o.associations.set(a,l)}}return s!==void 0&&(typeof s=="number"&&(s=s===$C?$u:Ha),"colorSpace"in a?a.colorSpace=s:a.encoding=s===$u?$C:D7),t[n]=a,a})}assignFinalMaterial(t){const n=t.geometry;let r=t.material;const s=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(t.isPoints){const u="PointsMaterial:"+r.uuid;let l=this.cache.get(u);l||(l=new Qp,Tn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(u,l)),r=l}else if(t.isLine){const u="LineBasicMaterial:"+r.uuid;let l=this.cache.get(u);l||(l=new xi,Tn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(u,l)),r=l}if(s||o||a){let u="ClonedMaterial:"+r.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:");let l=this.cache.get(u);l||(l=r.clone(),o&&(l.vertexColors=!0),a&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(u,l),this.associations.set(l,this.associations.get(r))),r=l}t.material=r}getMaterialType(){return Pc}loadMaterial(t){const n=this,r=this.json,s=this.extensions,o=r.materials[t];let a;const u={},l=o.extensions||{},c=[];if(l[wr.KHR_MATERIALS_UNLIT]){const p=s[wr.KHR_MATERIALS_UNLIT];a=p.getMaterialType(),c.push(p.extendParams(u,o,n))}else{const p=o.pbrMetallicRoughness||{};if(u.color=new wt(1,1,1),u.opacity=1,Array.isArray(p.baseColorFactor)){const f=p.baseColorFactor;u.color.setRGB(f[0],f[1],f[2],Ha),u.opacity=f[3]}p.baseColorTexture!==void 0&&c.push(n.assignTexture(u,"map",p.baseColorTexture,$u)),u.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,u.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(u,"metalnessMap",p.metallicRoughnessTexture)),c.push(n.assignTexture(u,"roughnessMap",p.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(t,u)})))}o.doubleSided===!0&&(u.side=Is);const d=o.alphaMode||wx.OPAQUE;if(d===wx.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,d===wx.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&a!==Jn&&(c.push(n.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new mt(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;u.normalScale.set(p,p)}if(o.occlusionTexture!==void 0&&a!==Jn&&(c.push(n.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&a!==Jn){const p=o.emissiveFactor;u.emissive=new wt().setRGB(p[0],p[1],p[2],Ha)}return o.emissiveTexture!==void 0&&a!==Jn&&c.push(n.assignTexture(u,"emissiveMap",o.emissiveTexture,$u)),Promise.all(c).then(function(){const p=new a(u);return o.name&&(p.name=o.name),Ia(p,o),n.associations.set(p,{materials:t}),o.extensions&&ju(s,p,o),p})}createUniqueName(t){const n=Pr.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,r=this.extensions,s=this.primitiveCache;function o(u){return r[wr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,n).then(function(l){return nR(l,u,n)})}const a=[];for(let u=0,l=t.length;u<l;u++){const c=t[u],d=cW(c),p=s[d];if(p)a.push(p.promise);else{let f;c.extensions&&c.extensions[wr.KHR_DRACO_MESH_COMPRESSION]?f=o(c):f=nR(new fr,c,n),s[d]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(t){const n=this,r=this.json,s=this.extensions,o=r.meshes[t],a=o.primitives,u=[];for(let l=0,c=a.length;l<c;l++){const d=a[l].material===void 0?aW(this.cache):this.getDependency("material",a[l].material);u.push(d)}return u.push(n.loadGeometries(a)),Promise.all(u).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],p=[];for(let h=0,m=d.length;h<m;h++){const y=d[h],v=a[h];let g;const _=c[h];if(v.mode===Zs.TRIANGLES||v.mode===Zs.TRIANGLE_STRIP||v.mode===Zs.TRIANGLE_FAN||v.mode===void 0)g=o.isSkinnedMesh===!0?new I0(y,_):new dn(y,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),v.mode===Zs.TRIANGLE_STRIP?g.geometry=KC(g.geometry,Wp):v.mode===Zs.TRIANGLE_FAN&&(g.geometry=KC(g.geometry,_c));else if(v.mode===Zs.LINES)g=new fo(y,_);else if(v.mode===Zs.LINE_STRIP)g=new da(y,_);else if(v.mode===Zs.LINE_LOOP)g=new j0(y,_);else if(v.mode===Zs.POINTS)g=new D0(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&uW(g,o),g.name=n.createUniqueName(o.name||"mesh_"+t),Ia(g,o),v.extensions&&ju(s,g,v),n.assignFinalMaterial(g),p.push(g)}for(let h=0,m=p.length;h<m;h++)n.associations.set(p[h],{meshes:t,primitives:h});if(p.length===1)return o.extensions&&ju(s,p[0],o),p[0];const f=new oo;o.extensions&&ju(s,f,o),n.associations.set(f,{meshes:t});for(let h=0,m=p.length;h<m;h++)f.add(p[h]);return f})}loadCamera(t){let n;const r=this.json.cameras[t],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new gn(A0.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(n=new ua(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),Ia(n,r),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],r=[];for(let s=0,o=n.joints.length;s<o;s++)r.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const o=s.pop(),a=s,u=[],l=[];for(let c=0,d=a.length;c<d;c++){const p=a[c];if(p){u.push(p);const f=new Gt;o!==null&&f.fromArray(o.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new pd(u,l)})}loadAnimation(t){const n=this.json,r=this,s=n.animations[t],o=s.name?s.name:"animation_"+t,a=[],u=[],l=[],c=[],d=[];for(let p=0,f=s.channels.length;p<f;p++){const h=s.channels[p],m=s.samplers[h.sampler],y=h.target,v=y.node,g=s.parameters!==void 0?s.parameters[m.input]:m.input,_=s.parameters!==void 0?s.parameters[m.output]:m.output;y.node!==void 0&&(a.push(this.getDependency("node",v)),u.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),c.push(m),d.push(y))}return Promise.all([Promise.all(a),Promise.all(u),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(p){const f=p[0],h=p[1],m=p[2],y=p[3],v=p[4],g=[];for(let _=0,x=f.length;_<x;_++){const b=f[_],S=h[_],T=m[_],M=y[_],R=v[_];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const L=r._createAnimationTracks(b,S,T,M,R);if(L)for(let P=0;P<L.length;P++)g.push(L[P])}return new bc(o,void 0,g)})}createNodeMesh(t){const n=this.json,r=this,s=n.nodes[t];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(o){const a=r._getNodeRef(r.meshCache,s.mesh,o);return s.weights!==void 0&&a.traverse(function(u){if(u.isMesh)for(let l=0,c=s.weights.length;l<c;l++)u.morphTargetInfluences[l]=s.weights[l]}),a})}loadNode(t){const n=this.json,r=this,s=n.nodes[t],o=r._loadNodeShallow(t),a=[],u=s.children||[];for(let c=0,d=u.length;c<d;c++)a.push(r.getDependency("node",u[c]));const l=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([o,Promise.all(a),l]).then(function(c){const d=c[0],p=c[1],f=c[2];f!==null&&d.traverse(function(h){h.isSkinnedMesh&&h.bind(f,dW)});for(let h=0,m=p.length;h<m;h++)d.add(p[h]);return d})}_loadNodeShallow(t){const n=this.json,r=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],a=o.name?s.createUniqueName(o.name):"",u=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&u.push(l),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(c){return s._getNodeRef(s.cameraCache,o.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){u.push(c)}),this.nodeCache[t]=Promise.all(u).then(function(c){let d;if(o.isBone===!0?d=new Kp:c.length>1?d=new oo:c.length===1?d=c[0]:d=new br,d!==c[0])for(let p=0,f=c.length;p<f;p++)d.add(c[p]);if(o.name&&(d.userData.name=o.name,d.name=a),Ia(d,o),o.extensions&&ju(r,d,o),o.matrix!==void 0){const p=new Gt;p.fromArray(o.matrix),d.applyMatrix4(p)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return s.associations.has(d)||s.associations.set(d,{}),s.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const n=this.extensions,r=this.json.scenes[t],s=this,o=new oo;r.name&&(o.name=s.createUniqueName(r.name)),Ia(o,r),r.extensions&&ju(n,o,r);const a=r.nodes||[],u=[];for(let l=0,c=a.length;l<c;l++)u.push(s.getDependency("node",a[l]));return Promise.all(u).then(function(l){for(let d=0,p=l.length;d<p;d++)o.add(l[d]);const c=d=>{const p=new Map;for(const[f,h]of s.associations)(f instanceof Tn||f instanceof Qr)&&p.set(f,h);return d.traverse(f=>{const h=s.associations.get(f);h!=null&&p.set(f,h)}),p};return s.associations=c(o),o})}_createAnimationTracks(t,n,r,s,o){const a=[],u=t.name?t.name:t.uuid,l=[];Ml[o.path]===Ml.weights?t.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(u);let c;switch(Ml[o.path]){case Ml.weights:c=Qa;break;case Ml.rotation:c=Za;break;case Ml.position:case Ml.scale:c=$a;break;default:switch(r.itemSize){case 1:c=Qa;break;case 2:case 3:default:c=$a;break}break}const d=s.interpolation!==void 0?oW[s.interpolation]:Ql,p=this._getArrayFromAccessor(r);for(let f=0,h=l.length;f<h;f++){const m=new c(l[f]+"."+Ml[o.path],n.array,p,d);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),a.push(m)}return a}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const r=nw(n.constructor),s=new Float32Array(n.length);for(let o=0,a=n.length;o<a;o++)s[o]=n[o]*r;n=s}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(r){const s=this instanceof Za?sW:Zj;return new s(this.times,this.values,this.getValueSize()/3,r)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function pW(i,t,n){const r=t.attributes,s=new Hn;if(r.POSITION!==void 0){const u=n.json.accessors[r.POSITION],l=u.min,c=u.max;if(l!==void 0&&c!==void 0){if(s.set(new Ce(l[0],l[1],l[2]),new Ce(c[0],c[1],c[2])),u.normalized){const d=nw(Wf[u.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const u=new Ce,l=new Ce;for(let c=0,d=o.length;c<d;c++){const p=o[c];if(p.POSITION!==void 0){const f=n.json.accessors[p.POSITION],h=f.min,m=f.max;if(h!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(m[2]))),f.normalized){const y=nw(Wf[f.componentType]);l.multiplyScalar(y)}u.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}i.boundingBox=s;const a=new Qn;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function nR(i,t,n){const r=t.attributes,s=[];function o(a,u){return n.getDependency("accessor",a).then(function(l){i.setAttribute(u,l)})}for(const a in r){const u=rw[a]||a.toLowerCase();u in i.attributes||s.push(o(r[a],u))}if(t.indices!==void 0&&!i.index){const a=n.getDependency("accessor",t.indices).then(function(u){i.setIndex(u)});s.push(a)}return Ia(i,t),pW(i,t,n),Promise.all(s).then(function(){return t.targets!==void 0?lW(i,t.targets,n):i})}const Ax=new WeakMap;class mW extends bi{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,r,s){const o=new es(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,a=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,u).then(n).catch(s)},r,s)}decodeDracoFile(t,n,r,s){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(t,o).then(n)}decodeGeometry(t,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const r=JSON.stringify(n);if(Ax.has(t)){const l=Ax.get(t);if(l.key===r)return l.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,a=t.byteLength,u=this._getWorker(o,a).then(l=>(s=l,new Promise((c,d)=>{s._callbacks[o]={resolve:c,reject:d},s.postMessage({type:"decode",id:o,taskConfig:n,buffer:t},[t])}))).then(l=>this._createGeometry(l.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),Ax.set(t,{key:r,promise:u}),u}_createGeometry(t){const n=new fr;t.index&&n.setIndex(new Tr(t.index.array,1));for(let r=0;r<t.attributes.length;r++){const s=t.attributes[r],o=s.name,a=s.array,u=s.itemSize;n.setAttribute(o,new Tr(a,u))}return n}_loadLibrary(t,n){const r=new es(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((s,o)=>{r.load(t,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const s=r[0];t||(this.decoderConfig.wasmBinary=r[1]);const o=gW.toString(),a=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const a=o.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[t]=n,r._taskLoad+=n,r})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function gW(){let i,t;onmessage=function(a){const u=a.data;switch(u.type){case"init":i=u.decoderConfig,t=new Promise(function(d){i.onModuleLoaded=function(p){d({draco:p})},DracoDecoderModule(i)});break;case"decode":const l=u.buffer,c=u.taskConfig;t.then(d=>{const p=d.draco,f=new p.Decoder,h=new p.DecoderBuffer;h.Init(new Int8Array(l),l.byteLength);try{const m=n(p,f,h,c),y=m.attributes.map(v=>v.array.buffer);m.index&&y.push(m.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:m},y)}catch(m){console.error(m),self.postMessage({type:"error",id:u.id,error:m.message})}finally{p.destroy(h),p.destroy(f)}});break}};function n(a,u,l,c){const d=c.attributeIDs,p=c.attributeTypes;let f,h;const m=u.GetEncodedGeometryType(l);if(m===a.TRIANGULAR_MESH)f=new a.Mesh,h=u.DecodeBufferToMesh(l,f);else if(m===a.POINT_CLOUD)f=new a.PointCloud,h=u.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const y={index:null,attributes:[]};for(const v in d){const g=self[p[v]];let _,x;if(c.useUniqueIDs)x=d[v],_=u.GetAttributeByUniqueId(f,x);else{if(x=u.GetAttributeId(f,a[d[v]]),x===-1)continue;_=u.GetAttribute(f,x)}y.attributes.push(s(a,u,f,v,g,_))}return m===a.TRIANGULAR_MESH&&(y.index=r(a,u,f)),a.destroy(f),y}function r(a,u,l){const d=l.num_faces()*3,p=d*4,f=a._malloc(p);u.GetTrianglesUInt32Array(l,p,f);const h=new Uint32Array(a.HEAPF32.buffer,f,d).slice();return a._free(f),{array:h,itemSize:1}}function s(a,u,l,c,d,p){const f=p.num_components(),m=l.num_points()*f,y=m*d.BYTES_PER_ELEMENT,v=o(a,d),g=a._malloc(y);u.GetAttributeDataArrayForAllPoints(l,p,v,y,g);const _=new d(a.HEAPF32.buffer,g,m).slice();return a._free(g),{name:c,array:_,itemSize:f}}function o(a,u){switch(u){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let ry;const Mx=()=>{if(ry)return ry;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(n)&&(s=t);let o;const a=WebAssembly.instantiate(u(s),{}).then(p=>{o=p.instance,o.exports.__wasm_call_ctors()});function u(p){const f=new Uint8Array(p.length);for(let m=0;m<p.length;++m){const y=p.charCodeAt(m);f[m]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let h=0;for(let m=0;m<p.length;++m)f[h++]=f[m]<60?r[f[m]]:(f[m]-60)*64+f[++m];return f.buffer.slice(0,h)}function l(p,f,h,m,y,v){const g=o.exports.sbrk,_=h+3&-4,x=g(_*m),b=g(y.length),S=new Uint8Array(o.exports.memory.buffer);S.set(y,b);const T=p(x,h,m,b,y.length);if(T===0&&v&&v(x,_,m),f.set(S.subarray(x,x+h*m)),g(x-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ry={ready:a,supported:!0,decodeVertexBuffer(p,f,h,m,y){l(o.exports.meshopt_decodeVertexBuffer,p,f,h,m,o.exports[c[y]])},decodeIndexBuffer(p,f,h,m){l(o.exports.meshopt_decodeIndexBuffer,p,f,h,m)},decodeIndexSequence(p,f,h,m){l(o.exports.meshopt_decodeIndexSequence,p,f,h,m)},decodeGltfBuffer(p,f,h,m,y,v){l(o.exports[d[y]],p,f,h,m,o.exports[c[v]])}},ry};function yW(){var i=Object.create(null);function t(s,o){var a=s.id,u=s.name,l=s.dependencies;l===void 0&&(l=[]);var c=s.init;c===void 0&&(c=function(){});var d=s.getTransferables;if(d===void 0&&(d=null),!i[a])try{l=l.map(function(f){return f&&f.isWorkerModule&&(t(f,function(h){if(h instanceof Error)throw h}),f=i[f.id].value),f}),c=r("<"+u+">.init",c),d&&(d=r("<"+u+">.getTransferables",d));var p=null;typeof c=="function"?p=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),i[a]={id:a,value:p,getTransferables:d},o(p)}catch(f){f&&f.noLog||console.error(f),o(f)}}function n(s,o){var a,u=s.id,l=s.args;(!i[u]||typeof i[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var c=(a=i[u]).value.apply(a,l);c&&typeof c.then=="function"?c.then(d,function(p){return o(p instanceof Error?p:new Error(""+p))}):d(c)}catch(p){o(p)}function d(p){try{var f=i[u].getTransferables&&i[u].getTransferables(p);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),o(p,f)}catch(h){console.error(h),o(h)}}}function r(s,o){var a=void 0;self.troikaDefine=function(l){return a=l};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(l){console.error(l)}return URL.revokeObjectURL(u),delete self.troikaDefine,a}self.addEventListener("message",function(s){var o=s.data,a=o.messageId,u=o.action,l=o.data;try{u==="registerModule"&&t(l,function(c){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof c=="function"}})}),u==="callModule"&&n(l,function(c,d){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:c},d||void 0)})}catch(c){postMessage({messageId:a,success:!1,error:c.stack})}})}function vW(i){var t=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var n=i.dependencies,r=i.init;n=Array.isArray(n)?n.map(function(o){return o&&(o=o.onMainThread||o,o._getInitResult&&(o=o._getInitResult())),o}):[];var s=Promise.all(n).then(function(o){return r.apply(null,o)});return t._getInitResult=function(){return s},s},t}var $j=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return $j=function(){return i},i},_W=0,xW=0,Ex=!1,Xh=Object.create(null),Yh=Object.create(null),iw=Object.create(null);function yd(i){if((!i||typeof i.init!="function")&&!Ex)throw new Error("requires `options.init` function");var t=i.dependencies,n=i.init,r=i.getTransferables,s=i.workerId,o=vW(i);s==null&&(s="#default");var a="workerModule"+ ++_W,u=i.name||a,l=null;t=t&&t.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(Ex=!0,d=yd({workerId:s,name:"<"+u+"> function dependency: "+d.name,init:`function(){return (
`+Ay(d)+`
)}`}),Ex=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function c(){for(var d=[],p=arguments.length;p--;)d[p]=arguments[p];if(!$j())return o.apply(void 0,d);if(!l){l=iR(s,"registerModule",c.workerModuleData);var f=function(){l=null,Yh[s].delete(f)};(Yh[s]||(Yh[s]=new Set)).add(f)}return l.then(function(h){var m=h.isCallable;if(m)return iR(s,"callModule",{id:a,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:a,name:u,dependencies:t,init:Ay(n),getTransferables:r&&Ay(r)},c.onMainThread=o,c}function bW(i){Yh[i]&&Yh[i].forEach(function(t){t()}),Xh[i]&&(Xh[i].terminate(),delete Xh[i])}function Ay(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function wW(i){var t=Xh[i];if(!t){var n=Ay(yW);t=Xh[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),t.onmessage=function(r){var s=r.data,o=s.messageId,a=iw[o];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete iw[o],a(s)}}return t}function iR(i,t,n){return new Promise(function(r,s){var o=++xW;iw[o]=function(a){a.success?r(a.result):s(new Error("Error in worker "+t+" call: "+a.error))},wW(i).postMessage({messageId:o,action:t,data:n})})}function eD(){var i=function(t){function n(W,Y,J,ie,I,O,H,q){var Z=1-H;q.x=Z*Z*W+2*Z*H*J+H*H*I,q.y=Z*Z*Y+2*Z*H*ie+H*H*O}function r(W,Y,J,ie,I,O,H,q,Z,oe){var pe=1-Z;oe.x=pe*pe*pe*W+3*pe*pe*Z*J+3*pe*Z*Z*I+Z*Z*Z*H,oe.y=pe*pe*pe*Y+3*pe*pe*Z*ie+3*pe*Z*Z*O+Z*Z*Z*q}function s(W,Y){for(var J=/([MLQCZ])([^MLQCZ]*)/g,ie,I,O,H,q;ie=J.exec(W);){var Z=ie[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(ie[1]){case"M":H=I=Z[0],q=O=Z[1];break;case"L":(Z[0]!==H||Z[1]!==q)&&Y("L",H,q,H=Z[0],q=Z[1]);break;case"Q":{Y("Q",H,q,H=Z[2],q=Z[3],Z[0],Z[1]);break}case"C":{Y("C",H,q,H=Z[4],q=Z[5],Z[0],Z[1],Z[2],Z[3]);break}case"Z":(H!==I||q!==O)&&Y("L",H,q,I,O);break}}}function o(W,Y,J){J===void 0&&(J=16);var ie={x:0,y:0};s(W,function(I,O,H,q,Z,oe,pe,be,me){switch(I){case"L":Y(O,H,q,Z);break;case"Q":{for(var ce=O,te=H,ue=1;ue<J;ue++)n(O,H,oe,pe,q,Z,ue/(J-1),ie),Y(ce,te,ie.x,ie.y),ce=ie.x,te=ie.y;break}case"C":{for(var ge=O,xe=H,Le=1;Le<J;Le++)r(O,H,oe,pe,be,me,q,Z,Le/(J-1),ie),Y(ge,xe,ie.x,ie.y),ge=ie.x,xe=ie.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(W,Y){var J=W.getContext?W.getContext("webgl",c):W,ie=l.get(J);if(!ie){let pe=function(ge){var xe=O[ge];if(!xe&&(xe=O[ge]=J.getExtension(ge),!xe))throw new Error(ge+" not supported");return xe},be=function(ge,xe){var Le=J.createShader(xe);return J.shaderSource(Le,ge),J.compileShader(Le),Le},me=function(ge,xe,Le,we){if(!H[ge]){var Ee={},ae={},ne=J.createProgram();J.attachShader(ne,be(xe,J.VERTEX_SHADER)),J.attachShader(ne,be(Le,J.FRAGMENT_SHADER)),J.linkProgram(ne),H[ge]={program:ne,transaction:function(Be){J.useProgram(ne),Be({setUniform:function(Oe,Je){for(var Ve=[],Se=arguments.length-2;Se-- >0;)Ve[Se]=arguments[Se+2];var We=ae[Je]||(ae[Je]=J.getUniformLocation(ne,Je));J["uniform"+Oe].apply(J,[We].concat(Ve))},setAttribute:function(Oe,Je,Ve,Se,We){var Re=Ee[Oe];Re||(Re=Ee[Oe]={buf:J.createBuffer(),loc:J.getAttribLocation(ne,Oe),data:null}),J.bindBuffer(J.ARRAY_BUFFER,Re.buf),J.vertexAttribPointer(Re.loc,Je,J.FLOAT,!1,0,0),J.enableVertexAttribArray(Re.loc),I?J.vertexAttribDivisor(Re.loc,Se):pe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Re.loc,Se),We!==Re.data&&(J.bufferData(J.ARRAY_BUFFER,We,Ve),Re.data=We)}})}}}H[ge].transaction(we)},ce=function(ge,xe){Z++;try{J.activeTexture(J.TEXTURE0+Z);var Le=q[ge];Le||(Le=q[ge]=J.createTexture(),J.bindTexture(J.TEXTURE_2D,Le),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST)),J.bindTexture(J.TEXTURE_2D,Le),xe(Le,Z)}finally{Z--}},te=function(ge,xe,Le){var we=J.createFramebuffer();oe.push(we),J.bindFramebuffer(J.FRAMEBUFFER,we),J.activeTexture(J.TEXTURE0+xe),J.bindTexture(J.TEXTURE_2D,ge),J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,ge,0);try{Le(we)}finally{J.deleteFramebuffer(we),J.bindFramebuffer(J.FRAMEBUFFER,oe[--oe.length-1]||null)}},ue=function(){O={},H={},q={},Z=-1,oe.length=0};var I=typeof WebGL2RenderingContext<"u"&&J instanceof WebGL2RenderingContext,O={},H={},q={},Z=-1,oe=[];J.canvas.addEventListener("webglcontextlost",function(ge){ue(),ge.preventDefault()},!1),l.set(J,ie={gl:J,isWebGL2:I,getExtension:pe,withProgram:me,withTexture:ce,withTextureFramebuffer:te,handleContextLoss:ue})}Y(ie)}function p(W,Y,J,ie,I,O,H,q){H===void 0&&(H=15),q===void 0&&(q=null),d(W,function(Z){var oe=Z.gl,pe=Z.withProgram,be=Z.withTexture;be("copy",function(me,ce){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,I,O,0,oe.RGBA,oe.UNSIGNED_BYTE,Y),pe("copy",a,u,function(te){var ue=te.setUniform,ge=te.setAttribute;ge("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ue("1i","image",ce),oe.bindFramebuffer(oe.FRAMEBUFFER,q||null),oe.disable(oe.BLEND),oe.colorMask(H&8,H&4,H&2,H&1),oe.viewport(J,ie,I,O),oe.scissor(J,ie,I,O),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function f(W,Y,J){var ie=W.width,I=W.height;d(W,function(O){var H=O.gl,q=new Uint8Array(ie*I*4);H.readPixels(0,0,ie,I,H.RGBA,H.UNSIGNED_BYTE,q),W.width=Y,W.height=J,p(H,q,0,0,ie,I)})}var h=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:p,resizeWebGLCanvasWithoutClearing:f});function m(W,Y,J,ie,I,O){O===void 0&&(O=1);var H=new Uint8Array(W*Y),q=ie[2]-ie[0],Z=ie[3]-ie[1],oe=[];o(J,function(ge,xe,Le,we){oe.push({x1:ge,y1:xe,x2:Le,y2:we,minX:Math.min(ge,Le),minY:Math.min(xe,we),maxX:Math.max(ge,Le),maxY:Math.max(xe,we)})}),oe.sort(function(ge,xe){return ge.maxX-xe.maxX});for(var pe=0;pe<W;pe++)for(var be=0;be<Y;be++){var me=te(ie[0]+q*(pe+.5)/W,ie[1]+Z*(be+.5)/Y),ce=Math.pow(1-Math.abs(me)/I,O)/2;me<0&&(ce=1-ce),ce=Math.max(0,Math.min(255,Math.round(ce*255))),H[be*W+pe]=ce}return H;function te(ge,xe){for(var Le=1/0,we=1/0,Ee=oe.length;Ee--;){var ae=oe[Ee];if(ae.maxX+we<=ge)break;if(ge+we>ae.minX&&xe-we<ae.maxY&&xe+we>ae.minY){var ne=g(ge,xe,ae.x1,ae.y1,ae.x2,ae.y2);ne<Le&&(Le=ne,we=Math.sqrt(Le))}}return ue(ge,xe)&&(we=-we),we}function ue(ge,xe){for(var Le=0,we=oe.length;we--;){var Ee=oe[we];if(Ee.maxX<=ge)break;var ae=Ee.y1>xe!=Ee.y2>xe&&ge<(Ee.x2-Ee.x1)*(xe-Ee.y1)/(Ee.y2-Ee.y1)+Ee.x1;ae&&(Le+=Ee.y1<Ee.y2?1:-1)}return Le!==0}}function y(W,Y,J,ie,I,O,H,q,Z,oe){O===void 0&&(O=1),q===void 0&&(q=0),Z===void 0&&(Z=0),oe===void 0&&(oe=0),v(W,Y,J,ie,I,O,H,null,q,Z,oe)}function v(W,Y,J,ie,I,O,H,q,Z,oe,pe){O===void 0&&(O=1),Z===void 0&&(Z=0),oe===void 0&&(oe=0),pe===void 0&&(pe=0);for(var be=m(W,Y,J,ie,I,O),me=new Uint8Array(be.length*4),ce=0;ce<be.length;ce++)me[ce*4+pe]=be[ce];p(H,me,Z,oe,W,Y,1<<3-pe,q)}function g(W,Y,J,ie,I,O){var H=I-J,q=O-ie,Z=H*H+q*q,oe=Z?Math.max(0,Math.min(1,((W-J)*H+(Y-ie)*q)/Z)):0,pe=W-(J+oe*H),be=Y-(ie+oe*q);return pe*pe+be*be}var _=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:y,generateIntoFramebuffer:v}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",T=new Float32Array([0,0,2,0,0,2]),M=null,R=!1,L={},P=new WeakMap;function C(W){if(!R&&!G(W))throw new Error("WebGL generation not supported")}function k(W,Y,J,ie,I,O,H){if(O===void 0&&(O=1),H===void 0&&(H=null),!H&&(H=M,!H)){var q=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!q)throw new Error("OffscreenCanvas or DOM canvas not supported");H=M=q.getContext("webgl",{depth:!1})}C(H);var Z=new Uint8Array(W*Y*4);d(H,function(me){var ce=me.gl,te=me.withTexture,ue=me.withTextureFramebuffer;te("readable",function(ge,xe){ce.texImage2D(ce.TEXTURE_2D,0,ce.RGBA,W,Y,0,ce.RGBA,ce.UNSIGNED_BYTE,null),ue(ge,xe,function(Le){F(W,Y,J,ie,I,O,ce,Le,0,0,0),ce.readPixels(0,0,W,Y,ce.RGBA,ce.UNSIGNED_BYTE,Z)})})});for(var oe=new Uint8Array(W*Y),pe=0,be=0;pe<Z.length;pe+=4)oe[be++]=Z[pe];return oe}function D(W,Y,J,ie,I,O,H,q,Z,oe){O===void 0&&(O=1),q===void 0&&(q=0),Z===void 0&&(Z=0),oe===void 0&&(oe=0),F(W,Y,J,ie,I,O,H,null,q,Z,oe)}function F(W,Y,J,ie,I,O,H,q,Z,oe,pe){O===void 0&&(O=1),Z===void 0&&(Z=0),oe===void 0&&(oe=0),pe===void 0&&(pe=0),C(H);var be=[];o(J,function(me,ce,te,ue){be.push(me,ce,te,ue)}),be=new Float32Array(be),d(H,function(me){var ce=me.gl,te=me.isWebGL2,ue=me.getExtension,ge=me.withProgram,xe=me.withTexture,Le=me.withTextureFramebuffer,we=me.handleContextLoss;if(xe("rawDistances",function(Ee,ae){(W!==Ee._lastWidth||Y!==Ee._lastHeight)&&ce.texImage2D(ce.TEXTURE_2D,0,ce.RGBA,Ee._lastWidth=W,Ee._lastHeight=Y,0,ce.RGBA,ce.UNSIGNED_BYTE,null),ge("main",x,b,function(ne){var Ae=ne.setAttribute,Be=ne.setUniform,Fe=!te&&ue("ANGLE_instanced_arrays"),Oe=!te&&ue("EXT_blend_minmax");Ae("aUV",2,ce.STATIC_DRAW,0,T),Ae("aLineSegment",4,ce.DYNAMIC_DRAW,1,be),Be.apply(void 0,["4f","uGlyphBounds"].concat(ie)),Be("1f","uMaxDistance",I),Be("1f","uExponent",O),Le(Ee,ae,function(Je){ce.enable(ce.BLEND),ce.colorMask(!0,!0,!0,!0),ce.viewport(0,0,W,Y),ce.scissor(0,0,W,Y),ce.blendFunc(ce.ONE,ce.ONE),ce.blendEquationSeparate(ce.FUNC_ADD,te?ce.MAX:Oe.MAX_EXT),ce.clear(ce.COLOR_BUFFER_BIT),te?ce.drawArraysInstanced(ce.TRIANGLES,0,3,be.length/4):Fe.drawArraysInstancedANGLE(ce.TRIANGLES,0,3,be.length/4)})}),ge("post",a,S,function(ne){ne.setAttribute("aUV",2,ce.STATIC_DRAW,0,T),ne.setUniform("1i","tex",ae),ce.bindFramebuffer(ce.FRAMEBUFFER,q),ce.disable(ce.BLEND),ce.colorMask(pe===0,pe===1,pe===2,pe===3),ce.viewport(Z,oe,W,Y),ce.scissor(Z,oe,W,Y),ce.drawArrays(ce.TRIANGLES,0,3)})}),ce.isContextLost())throw we(),new Error("webgl context lost")})}function G(W){var Y=!W||W===M?L:W.canvas||W,J=P.get(Y);if(J===void 0){R=!0;var ie=null;try{var I=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],O=k(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,W);J=O&&I.length===O.length&&O.every(function(H,q){return H===I[q]}),J||(ie="bad trial run results",console.info(I,O))}catch(H){J=!1,ie=H.message}ie&&console.warn("WebGL SDF generation not supported:",ie),R=!1,P.set(Y,J)}return J}var z=Object.freeze({__proto__:null,generate:k,generateIntoCanvas:D,generateIntoFramebuffer:F,isSupported:G});function Q(W,Y,J,ie,I,O){I===void 0&&(I=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),O===void 0&&(O=1);try{return k.apply(z,arguments)}catch(H){return console.info("WebGL SDF generation failed, falling back to JS",H),m.apply(_,arguments)}}function V(W,Y,J,ie,I,O,H,q,Z,oe){I===void 0&&(I=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),O===void 0&&(O=1),q===void 0&&(q=0),Z===void 0&&(Z=0),oe===void 0&&(oe=0);try{return D.apply(z,arguments)}catch(pe){return console.info("WebGL SDF generation failed, falling back to JS",pe),y.apply(_,arguments)}}return t.forEachPathCommand=s,t.generate=Q,t.generateIntoCanvas=V,t.javascript=_,t.pathToLineSegments=o,t.webgl=z,t.webglUtils=h,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}function SW(){var i=function(t){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(n).forEach(function(we,Ee){r[we]=1<<Ee+1,s[r[we]]=we}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,a=r.L|r.R|r.AL,u=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|o|r.PDI|l,d=null;function p(){if(!d){d=new Map;var we=function(ae){if(n.hasOwnProperty(ae)){var ne=0;n[ae].split(",").forEach(function(Ae){var Be=Ae.split("+"),Fe=Be[0],Oe=Be[1];Fe=parseInt(Fe,36),Oe=Oe?parseInt(Oe,36):0,d.set(ne+=Fe,r[ae]);for(var Je=0;Je<Oe;Je++)d.set(++ne,r[ae])})}};for(var Ee in n)we(Ee)}}function f(we){return p(),d.get(we.codePointAt(0))||r.L}function h(we){return s[f(we)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function y(we,Ee){var ae=36,ne=0,Ae=new Map,Be=Ee&&new Map,Fe;return we.split(",").forEach(function Oe(Je){if(Je.indexOf("+")!==-1)for(var Ve=+Je;Ve--;)Oe(Fe);else{Fe=Je;var Se=Je.split(">"),We=Se[0],Re=Se[1];We=String.fromCodePoint(ne+=parseInt(We,ae)),Re=String.fromCodePoint(ne+=parseInt(Re,ae)),Ae.set(We,Re),Ee&&Be.set(Re,We)}}),{map:Ae,reverseMap:Be}}var v,g,_;function x(){if(!v){var we=y(m.pairs,!0),Ee=we.map,ae=we.reverseMap;v=Ee,g=ae,_=y(m.canonical,!1).map}}function b(we){return x(),v.get(we)||null}function S(we){return x(),g.get(we)||null}function T(we){return x(),_.get(we)||null}var M=r.L,R=r.R,L=r.EN,P=r.ES,C=r.ET,k=r.AN,D=r.CS,F=r.B,G=r.S,z=r.ON,Q=r.BN,V=r.NSM,W=r.AL,Y=r.LRO,J=r.RLO,ie=r.LRE,I=r.RLE,O=r.PDF,H=r.LRI,q=r.RLI,Z=r.FSI,oe=r.PDI;function pe(we,Ee){for(var ae=125,ne=new Uint32Array(we.length),Ae=0;Ae<we.length;Ae++)ne[Ae]=f(we[Ae]);var Be=new Map;function Fe(Pn,ii){var ln=ne[Pn];ne[Pn]=ii,Be.set(ln,Be.get(ln)-1),ln&u&&Be.set(u,Be.get(u)-1),Be.set(ii,(Be.get(ii)||0)+1),ii&u&&Be.set(u,(Be.get(u)||0)+1)}for(var Oe=new Uint8Array(we.length),Je=new Map,Ve=[],Se=null,We=0;We<we.length;We++)Se||Ve.push(Se={start:We,end:we.length-1,level:Ee==="rtl"?1:Ee==="ltr"?0:ya(We,!1)}),ne[We]&F&&(Se.end=We,Se=null);for(var Re=I|ie|J|Y|o|oe|O|F,le=function(Pn){return Pn+(Pn&1?1:2)},de=function(Pn){return Pn+(Pn&1?2:1)},ee=0;ee<Ve.length;ee++){Se=Ve[ee];var he=[{_level:Se.level,_override:0,_isolate:0}],Pe=void 0,ye=0,De=0,Me=0;Be.clear();for(var qe=Se.start;qe<=Se.end;qe++){var ke=ne[qe];if(Pe=he[he.length-1],Be.set(ke,(Be.get(ke)||0)+1),ke&u&&Be.set(u,(Be.get(u)||0)+1),ke&Re)if(ke&(I|ie)){Oe[qe]=Pe._level;var Ye=(ke===I?de:le)(Pe._level);Ye<=ae&&!ye&&!De?he.push({_level:Ye,_override:0,_isolate:0}):ye||De++}else if(ke&(J|Y)){Oe[qe]=Pe._level;var dt=(ke===J?de:le)(Pe._level);dt<=ae&&!ye&&!De?he.push({_level:dt,_override:ke&J?R:M,_isolate:0}):ye||De++}else if(ke&o){ke&Z&&(ke=ya(qe+1,!0)===1?q:H),Oe[qe]=Pe._level,Pe._override&&Fe(qe,Pe._override);var at=(ke===q?de:le)(Pe._level);at<=ae&&ye===0&&De===0?(Me++,he.push({_level:at,_override:0,_isolate:1,_isolInitIndex:qe})):ye++}else if(ke&oe){if(ye>0)ye--;else if(Me>0){for(De=0;!he[he.length-1]._isolate;)he.pop();var ct=he[he.length-1]._isolInitIndex;ct!=null&&(Je.set(ct,qe),Je.set(qe,ct)),he.pop(),Me--}Pe=he[he.length-1],Oe[qe]=Pe._level,Pe._override&&Fe(qe,Pe._override)}else ke&O?(ye===0&&(De>0?De--:!Pe._isolate&&he.length>1&&(he.pop(),Pe=he[he.length-1])),Oe[qe]=Pe._level):ke&F&&(Oe[qe]=Se.level);else Oe[qe]=Pe._level,Pe._override&&ke!==Q&&Fe(qe,Pe._override)}for(var xt=[],_t=null,vt=Se.start;vt<=Se.end;vt++){var Bt=ne[vt];if(!(Bt&l)){var qt=Oe[vt],Wt=Bt&o,tr=Bt===oe;_t&&qt===_t._level?(_t._end=vt,_t._endsWithIsolInit=Wt):xt.push(_t={_start:vt,_end:vt,_level:qt,_startsWithPDI:tr,_endsWithIsolInit:Wt})}}for(var Jt=[],Lr=0;Lr<xt.length;Lr++){var Cr=xt[Lr];if(!Cr._startsWithPDI||Cr._startsWithPDI&&!Je.has(Cr._start)){for(var dr=[_t=Cr],Mr=void 0;_t&&_t._endsWithIsolInit&&(Mr=Je.get(_t._end))!=null;)for(var Dn=Lr+1;Dn<xt.length;Dn++)if(xt[Dn]._start===Mr){dr.push(_t=xt[Dn]);break}for(var Xr=[],ei=0;ei<dr.length;ei++)for(var Ns=dr[ei],Ss=Ns._start;Ss<=Ns._end;Ss++)Xr.push(Ss);for(var po=Oe[Xr[0]],Ge=Se.level,ve=Xr[0]-1;ve>=0;ve--)if(!(ne[ve]&l)){Ge=Oe[ve];break}var He=Xr[Xr.length-1],ze=Oe[He],et=Se.level;if(!(ne[He]&o)){for(var je=He+1;je<=Se.end;je++)if(!(ne[je]&l)){et=Oe[je];break}}Jt.push({_seqIndices:Xr,_sosType:Math.max(Ge,po)%2?R:M,_eosType:Math.max(et,ze)%2?R:M})}}for(var gt=0;gt<Jt.length;gt++){var ot=Jt[gt],st=ot._seqIndices,ut=ot._sosType,Pt=ot._eosType,Tt=Oe[st[0]]&1?R:M;if(Be.get(V))for(var At=0;At<st.length;At++){var Kt=st[At];if(ne[Kt]&V){for(var ir=ut,rr=At-1;rr>=0;rr--)if(!(ne[st[rr]]&l)){ir=ne[st[rr]];break}Fe(Kt,ir&(o|oe)?z:ir)}}if(Be.get(L))for(var Qt=0;Qt<st.length;Qt++){var Et=st[Qt];if(ne[Et]&L)for(var jt=Qt-1;jt>=-1;jt--){var nr=jt===-1?ut:ne[st[jt]];if(nr&a){nr===W&&Fe(Et,k);break}}}if(Be.get(W))for(var Yt=0;Yt<st.length;Yt++){var qr=st[Yt];ne[qr]&W&&Fe(qr,R)}if(Be.get(P)||Be.get(D))for(var xn=1;xn<st.length-1;xn++){var Rr=st[xn];if(ne[Rr]&(P|D)){for(var ti=0,Or=0,ri=xn-1;ri>=0&&(ti=ne[st[ri]],!!(ti&l));ri--);for(var Fi=xn+1;Fi<st.length&&(Or=ne[st[Fi]],!!(Or&l));Fi++);ti===Or&&(ne[Rr]===P?ti===L:ti&(L|k))&&Fe(Rr,ti)}}if(Be.get(L))for(var Hr=0;Hr<st.length;Hr++){var zn=st[Hr];if(ne[zn]&L){for(var Gs=Hr-1;Gs>=0&&ne[st[Gs]]&(C|l);Gs--)Fe(st[Gs],L);for(Hr++;Hr<st.length&&ne[st[Hr]]&(C|l|L);Hr++)ne[st[Hr]]!==L&&Fe(st[Hr],L)}}if(Be.get(C)||Be.get(P)||Be.get(D))for(var As=0;As<st.length;As++){var ou=st[As];if(ne[ou]&(C|P|D)){Fe(ou,z);for(var ns=As-1;ns>=0&&ne[st[ns]]&l;ns--)Fe(st[ns],z);for(var is=As+1;is<st.length&&ne[st[is]]&l;is++)Fe(st[is],z)}}if(Be.get(L))for(var kn=0,Xo=ut;kn<st.length;kn++){var au=st[kn],Hs=ne[au];Hs&L?Xo===M&&Fe(au,M):Hs&a&&(Xo=Hs)}if(Be.get(u)){var zs=R|L|k,nl=zs|M,ss=[];{for(var mo=[],Vs=0;Vs<st.length;Vs++)if(ne[st[Vs]]&u){var mr=we[st[Vs]],il=void 0;if(b(mr)!==null)if(mo.length<63)mo.push({char:mr,seqIndex:Vs});else break;else if((il=S(mr))!==null)for(var go=mo.length-1;go>=0;go--){var pa=mo[go].char;if(pa===il||pa===S(T(mr))||b(T(pa))===mr){ss.push([mo[go].seqIndex,Vs]),mo.length=go;break}}}ss.sort(function(Pn,ii){return Pn[0]-ii[0]})}for(var lu=0;lu<ss.length;lu++){for(var kc=ss[lu],an=kc[0],ma=kc[1],uu=!1,Zr=0,Ui=an+1;Ui<ma;Ui++){var Ms=st[Ui];if(ne[Ms]&nl){uu=!0;var Vn=ne[Ms]&zs?R:M;if(Vn===Tt){Zr=Vn;break}}}if(uu&&!Zr){Zr=ut;for(var Ni=an-1;Ni>=0;Ni--){var Yo=st[Ni];if(ne[Yo]&nl){var Gi=ne[Yo]&zs?R:M;Gi!==Tt?Zr=Gi:Zr=Tt;break}}}if(Zr){if(ne[st[an]]=ne[st[ma]]=Zr,Zr!==Tt){for(var hn=an+1;hn<st.length;hn++)if(!(ne[st[hn]]&l)){f(we[st[hn]])&V&&(ne[st[hn]]=Zr);break}}if(Zr!==Tt){for(var Hi=ma+1;Hi<st.length;Hi++)if(!(ne[st[Hi]]&l)){f(we[st[Hi]])&V&&(ne[st[Hi]]=Zr);break}}}}for(var zi=0;zi<st.length;zi++)if(ne[st[zi]]&u){for(var sl=zi,ol=zi,di=ut,qo=zi-1;qo>=0;qo--)if(ne[st[qo]]&l)sl=qo;else{di=ne[st[qo]]&zs?R:M;break}for(var Jo=Pt,yo=zi+1;yo<st.length;yo++)if(ne[st[yo]]&(u|l))ol=yo;else{Jo=ne[st[yo]]&zs?R:M;break}for(var ni=sl;ni<=ol;ni++)ne[st[ni]]=di===Jo?di:Tt;zi=ol}}}for(var Rn=Se.start;Rn<=Se.end;Rn++){var ga=Oe[Rn],os=ne[Rn];if(ga&1?os&(M|L|k)&&Oe[Rn]++:os&R?Oe[Rn]++:os&(k|L)&&(Oe[Rn]+=2),os&l&&(Oe[Rn]=Rn===0?Se.level:Oe[Rn-1]),Rn===Se.end||f(we[Rn])&(G|F))for(var vo=Rn;vo>=0&&f(we[vo])&c;vo--)Oe[vo]=Se.level}}return{levels:Oe,paragraphs:Ve};function ya(Pn,ii){for(var ln=Pn;ln<we.length;ln++){var $r=ne[ln];if($r&(R|W))return 1;if($r&(F|M)||ii&&$r===oe)return 0;if($r&o){var hi=cu(ln);ln=hi===-1?we.length:hi}}return 0}function cu(Pn){for(var ii=1,ln=Pn+1;ln<we.length;ln++){var $r=ne[ln];if($r&F)break;if($r&oe){if(--ii===0)return ln}else $r&o&&ii++}return-1}}var be="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",me;function ce(){if(!me){var we=y(be,!0),Ee=we.map,ae=we.reverseMap;ae.forEach(function(ne,Ae){Ee.set(Ae,ne)}),me=Ee}}function te(we){return ce(),me.get(we)||null}function ue(we,Ee,ae,ne){var Ae=we.length;ae=Math.max(0,ae==null?0:+ae),ne=Math.min(Ae-1,ne==null?Ae-1:+ne);for(var Be=new Map,Fe=ae;Fe<=ne;Fe++)if(Ee[Fe]&1){var Oe=te(we[Fe]);Oe!==null&&Be.set(Fe,Oe)}return Be}function ge(we,Ee,ae,ne){var Ae=we.length;ae=Math.max(0,ae==null?0:+ae),ne=Math.min(Ae-1,ne==null?Ae-1:+ne);var Be=[];return Ee.paragraphs.forEach(function(Fe){var Oe=Math.max(ae,Fe.start),Je=Math.min(ne,Fe.end);if(Oe<Je){for(var Ve=Ee.levels.slice(Oe,Je+1),Se=Je;Se>=Oe&&f(we[Se])&c;Se--)Ve[Se]=Fe.level;for(var We=Fe.level,Re=1/0,le=0;le<Ve.length;le++){var de=Ve[le];de>We&&(We=de),de<Re&&(Re=de|1)}for(var ee=We;ee>=Re;ee--)for(var he=0;he<Ve.length;he++)if(Ve[he]>=ee){for(var Pe=he;he+1<Ve.length&&Ve[he+1]>=ee;)he++;he>Pe&&Be.push([Pe+Oe,he+Oe])}}}),Be}function xe(we,Ee,ae,ne){var Ae=Le(we,Ee,ae,ne),Be=[].concat(we);return Ae.forEach(function(Fe,Oe){Be[Oe]=(Ee.levels[Fe]&1?te(we[Fe]):null)||we[Fe]}),Be.join("")}function Le(we,Ee,ae,ne){for(var Ae=ge(we,Ee,ae,ne),Be=[],Fe=0;Fe<we.length;Fe++)Be[Fe]=Fe;return Ae.forEach(function(Oe){for(var Je=Oe[0],Ve=Oe[1],Se=Be.slice(Je,Ve+1),We=Se.length;We--;)Be[Ve-We]=Se[We]}),Be}return t.closingToOpeningBracket=S,t.getBidiCharType=f,t.getBidiCharTypeName=h,t.getCanonicalBracket=T,t.getEmbeddingLevels=pe,t.getMirroredCharacter=te,t.getMirroredCharactersMap=ue,t.getReorderSegments=ge,t.getReorderedIndices=Le,t.getReorderedString=xe,t.openingToClosingBracket=b,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}const tD=/\bvoid\s+main\s*\(\s*\)\s*{/g;function sw(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,s){let o=hr[s];return o?sw(o):r}return i.replace(t,n)}const mi=[];for(let i=0;i<256;i++)mi[i]=(i<16?"0":"")+i.toString(16);function AW(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(mi[i&255]+mi[i>>8&255]+mi[i>>16&255]+mi[i>>24&255]+"-"+mi[t&255]+mi[t>>8&255]+"-"+mi[t>>16&15|64]+mi[t>>24&255]+"-"+mi[n&63|128]+mi[n>>8&255]+"-"+mi[n>>16&255]+mi[n>>24&255]+mi[r&255]+mi[r>>8&255]+mi[r>>16&255]+mi[r>>24&255]).toUpperCase()}const Du=Object.assign||function(){let i=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let r=arguments[t];if(r)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},MW=Date.now(),sR=new WeakMap,oR=new Map;let EW=1e10;function ow(i,t){const n=PW(t);let r=sR.get(i);if(r||sR.set(i,r=Object.create(null)),r[n])return new r[n];const s=`_onBeforeCompile${n}`,o=function(c,d){i.onBeforeCompile.call(this,c,d);const p=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=oR[p];if(!f){const h=TW(this,c,t,n);f=oR[p]=h}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,Du(c.uniforms,this.uniforms),t.timeUniform&&(c.uniforms[t.timeUniform]={get value(){return Date.now()-MW}}),this[s]&&this[s](c)},a=function(){return u(t.chained?i:i.clone())},u=function(c){const d=Object.create(c,l);return Object.defineProperty(d,"baseMaterial",{value:i}),Object.defineProperty(d,"id",{value:EW++}),d.uuid=AW(),d.uniforms=Du({},c.uniforms,t.uniforms),d.defines=Du({},c.defines,t.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",d.extensions=Du({},c.extensions,t.extensions),d._listeners=void 0,d},l={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:c=>{i.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const d=this.baseMaterial;return c===d||d.isDerivedMaterial&&d.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return o},set(c){this[s]=c}},copy:{writable:!0,configurable:!0,value:function(c){return i.copy.call(this,c),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Du(this.extensions,c.extensions),Du(this.defines,c.defines),Du(this.uniforms,PS.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new i.constructor;return u(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=ow(i.isDerivedMaterial?i.getDepthMaterial():new T0({depthPacking:AS}),t),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=ow(i.isDerivedMaterial?i.getDistanceMaterial():new C0,t),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:d}=this;c&&c.dispose(),d&&d.dispose(),i.dispose.call(this)}}};return r[n]=a,new a}function TW(i,{vertexShader:t,fragmentShader:n},r,s){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:u,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:d,fragmentMainOutro:p,fragmentColorTransform:f,customRewriter:h,timeUniform:m}=r;if(o=o||"",a=a||"",u=u||"",c=c||"",d=d||"",p=p||"",(l||h)&&(t=sw(t)),(f||h)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=sw(n)),h){let y=h({vertexShader:t,fragmentShader:n});t=y.vertexShader,n=y.fragmentShader}if(f){let y=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(y.push(v),"")),p=`${f}
${y.join(`
`)}
${p}`}if(m){const y=`
uniform float ${m};
`;o=y+o,c=y+c}return l&&(t=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${t}
`,o=`${o}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,a=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${a}
`,t=t.replace(/\b(position|normal|uv)\b/g,(y,v,g,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,g))?v:`troika_${v}_${s}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),t=aR(t,s,o,a,u),n=aR(n,s,c,d,p),{vertexShader:t,fragmentShader:n}}function aR(i,t,n,r,s){return(r||s||n)&&(i=i.replace(tD,`
${n}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${r}
  troikaOrigMain${t}();
  ${s}
}`),i}function CW(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let RW=0;const lR=new Map;function PW(i){const t=JSON.stringify(i,CW);let n=lR.get(t);return n==null&&lR.set(t,n=++RW),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function IW(){return typeof window>"u"&&(self.window=self),function(i){var t={parse:function(s){var o=t._bin,a=new Uint8Array(s);if(o.readASCII(a,0,4)=="ttcf"){var u=4;o.readUshort(a,u),u+=2,o.readUshort(a,u),u+=2;var l=o.readUint(a,u);u+=4;for(var c=[],d=0;d<l;d++){var p=o.readUint(a,u);u+=4,c.push(t._readFont(a,p))}return c}return[t._readFont(a,0)]},_readFont:function(s,o){var a=t._bin,u=o;a.readFixed(s,o),o+=4;var l=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:s,_offset:u},p={},f=0;f<l;f++){var h=a.readASCII(s,o,4);o+=4,a.readUint(s,o),o+=4;var m=a.readUint(s,o);o+=4;var y=a.readUint(s,o);o+=4,p[h]={offset:m,length:y}}for(f=0;f<c.length;f++){var v=c[f];p[v]&&(d[v.trim()]=t[v.trim()].parse(s,p[v].offset,p[v].length,d))}return d},_tabOffset:function(s,o,a){for(var u=t._bin,l=u.readUshort(s,a+4),c=a+12,d=0;d<l;d++){var p=u.readASCII(s,c,4);c+=4,u.readUint(s,c),c+=4;var f=u.readUint(s,c);if(c+=4,u.readUint(s,c),c+=4,p==o)return f}return 0}};t._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return t._bin.readShort(s,o)/16384},readInt:function(s,o){return t._bin._view(s).getInt32(o)},readInt8:function(s,o){return t._bin._view(s).getInt8(o)},readShort:function(s,o){return t._bin._view(s).getInt16(o)},readUshort:function(s,o){return t._bin._view(s).getUint16(o)},readUshorts:function(s,o,a){for(var u=[],l=0;l<a;l++)u.push(t._bin.readUshort(s,o+2*l));return u},readUint:function(s,o){return t._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*t._bin.readUint(s,o)+t._bin.readUint(s,o+4)},readASCII:function(s,o,a){for(var u="",l=0;l<a;l++)u+=String.fromCharCode(s[o+l]);return u},readUnicode:function(s,o,a){for(var u="",l=0;l<a;l++){var c=s[o++]<<8|s[o++];u+=String.fromCharCode(c)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,a){var u=t._bin._tdec;return u&&o==0&&a==s.length?u.decode(s):t._bin.readASCII(s,o,a)},readBytes:function(s,o,a){for(var u=[],l=0;l<a;l++)u.push(s[o+l]);return u},readASCIIArray:function(s,o,a){for(var u=[],l=0;l<a;l++)u.push(String.fromCharCode(s[o+l]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},t._lctf={},t._lctf.parse=function(s,o,a,u,l){var c=t._bin,d={},p=o;c.readFixed(s,o),o+=4;var f=c.readUshort(s,o);o+=2;var h=c.readUshort(s,o);o+=2;var m=c.readUshort(s,o);return o+=2,d.scriptList=t._lctf.readScriptList(s,p+f),d.featureList=t._lctf.readFeatureList(s,p+h),d.lookupList=t._lctf.readLookupList(s,p+m,l),d},t._lctf.readLookupList=function(s,o,a){var u=t._bin,l=o,c=[],d=u.readUshort(s,o);o+=2;for(var p=0;p<d;p++){var f=u.readUshort(s,o);o+=2;var h=t._lctf.readLookupTable(s,l+f,a);c.push(h)}return c},t._lctf.readLookupTable=function(s,o,a){var u=t._bin,l=o,c={tabs:[]};c.ltype=u.readUshort(s,o),o+=2,c.flag=u.readUshort(s,o),o+=2;var d=u.readUshort(s,o);o+=2;for(var p=c.ltype,f=0;f<d;f++){var h=u.readUshort(s,o);o+=2;var m=a(s,p,l+h,c);c.tabs.push(m)}return c},t._lctf.numOfOnes=function(s){for(var o=0,a=0;a<32;a++)s>>>a&1&&o++;return o},t._lctf.readClassDef=function(s,o){var a=t._bin,u=[],l=a.readUshort(s,o);if(o+=2,l==1){var c=a.readUshort(s,o);o+=2;var d=a.readUshort(s,o);o+=2;for(var p=0;p<d;p++)u.push(c+p),u.push(c+p),u.push(a.readUshort(s,o)),o+=2}if(l==2){var f=a.readUshort(s,o);for(o+=2,p=0;p<f;p++)u.push(a.readUshort(s,o)),o+=2,u.push(a.readUshort(s,o)),o+=2,u.push(a.readUshort(s,o)),o+=2}return u},t._lctf.getInterval=function(s,o){for(var a=0;a<s.length;a+=3){var u=s[a],l=s[a+1];if(s[a+2],u<=o&&o<=l)return a}return-1},t._lctf.readCoverage=function(s,o){var a=t._bin,u={};u.fmt=a.readUshort(s,o),o+=2;var l=a.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=a.readUshorts(s,o,l)),u.fmt==2&&(u.tab=a.readUshorts(s,o,3*l)),u},t._lctf.coverageIndex=function(s,o){var a=s.tab;if(s.fmt==1)return a.indexOf(o);if(s.fmt==2){var u=t._lctf.getInterval(a,o);if(u!=-1)return a[u+2]+(o-a[u])}return-1},t._lctf.readFeatureList=function(s,o){var a=t._bin,u=o,l=[],c=a.readUshort(s,o);o+=2;for(var d=0;d<c;d++){var p=a.readASCII(s,o,4);o+=4;var f=a.readUshort(s,o);o+=2;var h=t._lctf.readFeatureTable(s,u+f);h.tag=p.trim(),l.push(h)}return l},t._lctf.readFeatureTable=function(s,o){var a=t._bin,u=o,l={},c=a.readUshort(s,o);o+=2,c>0&&(l.featureParams=u+c);var d=a.readUshort(s,o);o+=2,l.tab=[];for(var p=0;p<d;p++)l.tab.push(a.readUshort(s,o+2*p));return l},t._lctf.readScriptList=function(s,o){var a=t._bin,u=o,l={},c=a.readUshort(s,o);o+=2;for(var d=0;d<c;d++){var p=a.readASCII(s,o,4);o+=4;var f=a.readUshort(s,o);o+=2,l[p.trim()]=t._lctf.readScriptTable(s,u+f)}return l},t._lctf.readScriptTable=function(s,o){var a=t._bin,u=o,l={},c=a.readUshort(s,o);o+=2,c>0&&(l.default=t._lctf.readLangSysTable(s,u+c));var d=a.readUshort(s,o);o+=2;for(var p=0;p<d;p++){var f=a.readASCII(s,o,4);o+=4;var h=a.readUshort(s,o);o+=2,l[f.trim()]=t._lctf.readLangSysTable(s,u+h)}return l},t._lctf.readLangSysTable=function(s,o){var a=t._bin,u={};a.readUshort(s,o),o+=2,u.reqFeature=a.readUshort(s,o),o+=2;var l=a.readUshort(s,o);return o+=2,u.features=a.readUshorts(s,o,l),u},t.CFF={},t.CFF.parse=function(s,o,a){var u=t._bin;(s=new Uint8Array(s.buffer,o,a))[o=0],s[++o],s[++o],s[++o],o++;var l=[];o=t.CFF.readIndex(s,o,l);for(var c=[],d=0;d<l.length-1;d++)c.push(u.readASCII(s,o+l[d],l[d+1]-l[d]));o+=l[l.length-1];var p=[];o=t.CFF.readIndex(s,o,p);var f=[];for(d=0;d<p.length-1;d++)f.push(t.CFF.readDict(s,o+p[d],o+p[d+1]));o+=p[p.length-1];var h=f[0],m=[];o=t.CFF.readIndex(s,o,m);var y=[];for(d=0;d<m.length-1;d++)y.push(u.readASCII(s,o+m[d],m[d+1]-m[d]));if(o+=m[m.length-1],t.CFF.readSubrs(s,o,h),h.CharStrings){o=h.CharStrings,m=[],o=t.CFF.readIndex(s,o,m);var v=[];for(d=0;d<m.length-1;d++)v.push(u.readBytes(s,o+m[d],m[d+1]-m[d]));h.CharStrings=v}if(h.ROS){o=h.FDArray;var g=[];for(o=t.CFF.readIndex(s,o,g),h.FDArray=[],d=0;d<g.length-1;d++){var _=t.CFF.readDict(s,o+g[d],o+g[d+1]);t.CFF._readFDict(s,_,y),h.FDArray.push(_)}o+=g[g.length-1],o=h.FDSelect,h.FDSelect=[];var x=s[o];if(o++,x!=3)throw x;var b=u.readUshort(s,o);for(o+=2,d=0;d<b+1;d++)h.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return h.Encoding&&(h.Encoding=t.CFF.readEncoding(s,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=t.CFF.readCharset(s,h.charset,h.CharStrings.length)),t.CFF._readFDict(s,h,y),h},t.CFF._readFDict=function(s,o,a){var u;for(var l in o.Private&&(u=o.Private[1],o.Private=t.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&t.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(o[l]=a[o[l]-426+35])},t.CFF.readSubrs=function(s,o,a){var u=t._bin,l=[];o=t.CFF.readIndex(s,o,l);var c,d=l.length;c=d<1240?107:d<33900?1131:32768,a.Bias=c,a.Subrs=[];for(var p=0;p<l.length-1;p++)a.Subrs.push(u.readBytes(s,o+l[p],l[p+1]-l[p]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(s,o){for(var a=0;a<s.charset.length;a++)if(s.charset[a]==o)return a;return-1},t.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:t.CFF.glyphByUnicode(s,t.CFF.tableSE[o])},t.CFF.readEncoding=function(s,o,a){t._bin;var u=[".notdef"],l=s[o];if(o++,l!=0)throw"error: unknown encoding format: "+l;var c=s[o];o++;for(var d=0;d<c;d++)u.push(s[o+d]);return u},t.CFF.readCharset=function(s,o,a){var u=t._bin,l=[".notdef"],c=s[o];if(o++,c==0)for(var d=0;d<a;d++){var p=u.readUshort(s,o);o+=2,l.push(p)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<a;){p=u.readUshort(s,o),o+=2;var f=0;for(c==1?(f=s[o],o++):(f=u.readUshort(s,o),o+=2),d=0;d<=f;d++)l.push(p),p++}}return l},t.CFF.readIndex=function(s,o,a){var u=t._bin,l=u.readUshort(s,o)+1,c=s[o+=2];if(o++,c==1)for(var d=0;d<l;d++)a.push(s[o+d]);else if(c==2)for(d=0;d<l;d++)a.push(u.readUshort(s,o+2*d));else if(c==3)for(d=0;d<l;d++)a.push(16777215&u.readUint(s,o+3*d-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(o+=l*c)-1},t.CFF.getCharString=function(s,o,a){var u=t._bin,l=s[o],c=s[o+1];s[o+2],s[o+3],s[o+4];var d=1,p=null,f=null;l<=20&&(p=l,d=1),l==12&&(p=100*l+c,d=2),21<=l&&l<=27&&(p=l,d=1),l==28&&(f=u.readShort(s,o+1),d=3),29<=l&&l<=31&&(p=l,d=1),32<=l&&l<=246&&(f=l-139,d=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,d=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,d=2),l==255&&(f=u.readInt(s,o+1)/65535,d=5),a.val=f??"o"+p,a.size=d},t.CFF.readCharString=function(s,o,a){for(var u=o+a,l=t._bin,c=[];o<u;){var d=s[o],p=s[o+1];s[o+2],s[o+3],s[o+4];var f=1,h=null,m=null;d<=20&&(h=d,f=1),d==12&&(h=100*d+p,f=2),d!=19&&d!=20||(h=d,f=2),21<=d&&d<=27&&(h=d,f=1),d==28&&(m=l.readShort(s,o+1),f=3),29<=d&&d<=31&&(h=d,f=1),32<=d&&d<=246&&(m=d-139,f=1),247<=d&&d<=250&&(m=256*(d-247)+p+108,f=2),251<=d&&d<=254&&(m=256*-(d-251)-p-108,f=2),d==255&&(m=l.readInt(s,o+1)/65535,f=5),c.push(m??"o"+h),o+=f}return c},t.CFF.readDict=function(s,o,a){for(var u=t._bin,l={},c=[];o<a;){var d=s[o],p=s[o+1];s[o+2],s[o+3],s[o+4];var f=1,h=null,m=null;if(d==28&&(m=u.readShort(s,o+1),f=3),d==29&&(m=u.readInt(s,o+1),f=5),32<=d&&d<=246&&(m=d-139,f=1),247<=d&&d<=250&&(m=256*(d-247)+p+108,f=2),251<=d&&d<=254&&(m=256*-(d-251)-p-108,f=2),d==255)throw m=u.readInt(s,o+1)/65535,f=5,"unknown number";if(d==30){var y=[];for(f=1;;){var v=s[o+f];f++;var g=v>>4,_=15&v;if(g!=15&&y.push(g),_!=15&&y.push(_),_==15)break}for(var x="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<y.length;S++)x+=b[y[S]];m=parseFloat(x)}d<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],f=1,d==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],f=2)),h!=null?(l[h]=c.length==1?c[0]:c,c=[]):c.push(m),o+=f}return l},t.cmap={},t.cmap.parse=function(s,o,a){s=new Uint8Array(s.buffer,o,a),o=0;var u=t._bin,l={};u.readUshort(s,o),o+=2;var c=u.readUshort(s,o);o+=2;var d=[];l.tables=[];for(var p=0;p<c;p++){var f=u.readUshort(s,o);o+=2;var h=u.readUshort(s,o);o+=2;var m=u.readUint(s,o);o+=4;var y="p"+f+"e"+h,v=d.indexOf(m);if(v==-1){var g;v=l.tables.length,d.push(m);var _=u.readUshort(s,m);_==0?g=t.cmap.parse0(s,m):_==4?g=t.cmap.parse4(s,m):_==6?g=t.cmap.parse6(s,m):_==12?g=t.cmap.parse12(s,m):console.debug("unknown format: "+_,f,h,m),l.tables.push(g)}if(l[y]!=null)throw"multiple tables for one platform+encoding";l[y]=v}return l},t.cmap.parse0=function(s,o){var a=t._bin,u={};u.format=a.readUshort(s,o),o+=2;var l=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2,u.map=[];for(var c=0;c<l-6;c++)u.map.push(s[o+c]);return u},t.cmap.parse4=function(s,o){var a=t._bin,u=o,l={};l.format=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2;var d=a.readUshort(s,o);o+=2;var p=d/2;l.searchRange=a.readUshort(s,o),o+=2,l.entrySelector=a.readUshort(s,o),o+=2,l.rangeShift=a.readUshort(s,o),o+=2,l.endCount=a.readUshorts(s,o,p),o+=2*p,o+=2,l.startCount=a.readUshorts(s,o,p),o+=2*p,l.idDelta=[];for(var f=0;f<p;f++)l.idDelta.push(a.readShort(s,o)),o+=2;for(l.idRangeOffset=a.readUshorts(s,o,p),o+=2*p,l.glyphIdArray=[];o<u+c;)l.glyphIdArray.push(a.readUshort(s,o)),o+=2;return l},t.cmap.parse6=function(s,o){var a=t._bin,u={};u.format=a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,u.firstCode=a.readUshort(s,o),o+=2;var l=a.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var c=0;c<l;c++)u.glyphIdArray.push(a.readUshort(s,o)),o+=2;return u},t.cmap.parse12=function(s,o){var a=t._bin,u={};u.format=a.readUshort(s,o),o+=2,o+=2,a.readUint(s,o),o+=4,a.readUint(s,o),o+=4;var l=a.readUint(s,o);o+=4,u.groups=[];for(var c=0;c<l;c++){var d=o+12*c,p=a.readUint(s,d+0),f=a.readUint(s,d+4),h=a.readUint(s,d+8);u.groups.push([p,f,h])}return u},t.glyf={},t.glyf.parse=function(s,o,a,u){for(var l=[],c=0;c<u.maxp.numGlyphs;c++)l.push(null);return l},t.glyf._parseGlyf=function(s,o){var a=t._bin,u=s._data,l=t._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var c={};if(c.noc=a.readShort(u,l),l+=2,c.xMin=a.readShort(u,l),l+=2,c.yMin=a.readShort(u,l),l+=2,c.xMax=a.readShort(u,l),l+=2,c.yMax=a.readShort(u,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var d=0;d<c.noc;d++)c.endPts.push(a.readUshort(u,l)),l+=2;var p=a.readUshort(u,l);if(l+=2,u.length-l<p)return null;c.instructions=a.readBytes(u,l,p),l+=p;var f=c.endPts[c.noc-1]+1;for(c.flags=[],d=0;d<f;d++){var h=u[l];if(l++,c.flags.push(h),(8&h)!=0){var m=u[l];l++;for(var y=0;y<m;y++)c.flags.push(h),d++}}for(c.xs=[],d=0;d<f;d++){var v=(2&c.flags[d])!=0,g=(16&c.flags[d])!=0;v?(c.xs.push(g?u[l]:-u[l]),l++):g?c.xs.push(0):(c.xs.push(a.readShort(u,l)),l+=2)}for(c.ys=[],d=0;d<f;d++)v=(4&c.flags[d])!=0,g=(32&c.flags[d])!=0,v?(c.ys.push(g?u[l]:-u[l]),l++):g?c.ys.push(0):(c.ys.push(a.readShort(u,l)),l+=2);var _=0,x=0;for(d=0;d<f;d++)_+=c.xs[d],x+=c.ys[d],c.xs[d]=_,c.ys[d]=x}else{var b;c.parts=[];do{b=a.readUshort(u,l),l+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(S),S.glyphIndex=a.readUshort(u,l),l+=2,1&b){var T=a.readShort(u,l);l+=2;var M=a.readShort(u,l);l+=2}else T=a.readInt8(u,l),l++,M=a.readInt8(u,l),l++;2&b?(S.m.tx=T,S.m.ty=M):(S.p1=T,S.p2=M),8&b?(S.m.a=S.m.d=a.readF2dot14(u,l),l+=2):64&b?(S.m.a=a.readF2dot14(u,l),l+=2,S.m.d=a.readF2dot14(u,l),l+=2):128&b&&(S.m.a=a.readF2dot14(u,l),l+=2,S.m.b=a.readF2dot14(u,l),l+=2,S.m.c=a.readF2dot14(u,l),l+=2,S.m.d=a.readF2dot14(u,l),l+=2)}while(32&b);if(256&b){var R=a.readUshort(u,l);for(l+=2,c.instr=[],d=0;d<R;d++)c.instr.push(u[l]),l++}}return c},t.GDEF={},t.GDEF.parse=function(s,o,a,u){var l=o;o+=4;var c=t._bin.readUshort(s,o);return{glyphClassDef:c===0?null:t._lctf.readClassDef(s,l+c)}},t.GPOS={},t.GPOS.parse=function(s,o,a,u){return t._lctf.parse(s,o,a,u,t.GPOS.subt)},t.GPOS.subt=function(s,o,a,u){var l=t._bin,c=a,d={};if(d.fmt=l.readUshort(s,a),a+=2,o==1||o==2||o==3||o==7||o==8&&d.fmt<=2){var p=l.readUshort(s,a);a+=2,d.coverage=t._lctf.readCoverage(s,p+c)}if(o==1&&d.fmt==1){var f=l.readUshort(s,a);a+=2,f!=0&&(d.pos=t.GPOS.readValueRecord(s,a,f))}else if(o==2&&d.fmt>=1&&d.fmt<=2){f=l.readUshort(s,a),a+=2;var h=l.readUshort(s,a);a+=2;var m=t._lctf.numOfOnes(f),y=t._lctf.numOfOnes(h);if(d.fmt==1){d.pairsets=[];var v=l.readUshort(s,a);a+=2;for(var g=0;g<v;g++){var _=c+l.readUshort(s,a);a+=2;var x=l.readUshort(s,_);_+=2;for(var b=[],S=0;S<x;S++){var T=l.readUshort(s,_);_+=2,f!=0&&(k=t.GPOS.readValueRecord(s,_,f),_+=2*m),h!=0&&(D=t.GPOS.readValueRecord(s,_,h),_+=2*y),b.push({gid2:T,val1:k,val2:D})}d.pairsets.push(b)}}if(d.fmt==2){var M=l.readUshort(s,a);a+=2;var R=l.readUshort(s,a);a+=2;var L=l.readUshort(s,a);a+=2;var P=l.readUshort(s,a);for(a+=2,d.classDef1=t._lctf.readClassDef(s,c+M),d.classDef2=t._lctf.readClassDef(s,c+R),d.matrix=[],g=0;g<L;g++){var C=[];for(S=0;S<P;S++){var k=null,D=null;f!=0&&(k=t.GPOS.readValueRecord(s,a,f),a+=2*m),h!=0&&(D=t.GPOS.readValueRecord(s,a,h),a+=2*y),C.push({val1:k,val2:D})}d.matrix.push(C)}}}else if(o==4&&d.fmt==1)d.markCoverage=t._lctf.readCoverage(s,l.readUshort(s,a)+c),d.baseCoverage=t._lctf.readCoverage(s,l.readUshort(s,a+2)+c),d.markClassCount=l.readUshort(s,a+4),d.markArray=t.GPOS.readMarkArray(s,l.readUshort(s,a+6)+c),d.baseArray=t.GPOS.readBaseArray(s,l.readUshort(s,a+8)+c,d.markClassCount);else if(o==6&&d.fmt==1)d.mark1Coverage=t._lctf.readCoverage(s,l.readUshort(s,a)+c),d.mark2Coverage=t._lctf.readCoverage(s,l.readUshort(s,a+2)+c),d.markClassCount=l.readUshort(s,a+4),d.mark1Array=t.GPOS.readMarkArray(s,l.readUshort(s,a+6)+c),d.mark2Array=t.GPOS.readBaseArray(s,l.readUshort(s,a+8)+c,d.markClassCount);else{if(o==9&&d.fmt==1){var F=l.readUshort(s,a);a+=2;var G=l.readUint(s,a);if(a+=4,u.ltype==9)u.ltype=F;else if(u.ltype!=F)throw"invalid extension substitution";return t.GPOS.subt(s,u.ltype,c+G)}console.debug("unsupported GPOS table LookupType",o,"format",d.fmt)}return d},t.GPOS.readValueRecord=function(s,o,a){var u=t._bin,l=[];return l.push(1&a?u.readShort(s,o):0),o+=1&a?2:0,l.push(2&a?u.readShort(s,o):0),o+=2&a?2:0,l.push(4&a?u.readShort(s,o):0),o+=4&a?2:0,l.push(8&a?u.readShort(s,o):0),o+=8&a?2:0,l},t.GPOS.readBaseArray=function(s,o,a){var u=t._bin,l=[],c=o,d=u.readUshort(s,o);o+=2;for(var p=0;p<d;p++){for(var f=[],h=0;h<a;h++)f.push(t.GPOS.readAnchorRecord(s,c+u.readUshort(s,o))),o+=2;l.push(f)}return l},t.GPOS.readMarkArray=function(s,o){var a=t._bin,u=[],l=o,c=a.readUshort(s,o);o+=2;for(var d=0;d<c;d++){var p=t.GPOS.readAnchorRecord(s,a.readUshort(s,o+2)+l);p.markClass=a.readUshort(s,o),u.push(p),o+=4}return u},t.GPOS.readAnchorRecord=function(s,o){var a=t._bin,u={};return u.fmt=a.readUshort(s,o),u.x=a.readShort(s,o+2),u.y=a.readShort(s,o+4),u},t.GSUB={},t.GSUB.parse=function(s,o,a,u){return t._lctf.parse(s,o,a,u,t.GSUB.subt)},t.GSUB.subt=function(s,o,a,u){var l=t._bin,c=a,d={};if(d.fmt=l.readUshort(s,a),a+=2,o!=1&&o!=2&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==2||o==4||o==5&&d.fmt<=2||o==6&&d.fmt<=2){var p=l.readUshort(s,a);a+=2,d.coverage=t._lctf.readCoverage(s,c+p)}if(o==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=l.readShort(s,a),a+=2;else if(d.fmt==2){var f=l.readUshort(s,a);a+=2,d.newg=l.readUshorts(s,a,f),a+=2*d.newg.length}}else if(o==2&&d.fmt==1){f=l.readUshort(s,a),a+=2,d.seqs=[];for(var h=0;h<f;h++){var m=l.readUshort(s,a)+c;a+=2;var y=l.readUshort(s,m);d.seqs.push(l.readUshorts(s,m+2,y))}}else if(o==4)for(d.vals=[],f=l.readUshort(s,a),a+=2,h=0;h<f;h++){var v=l.readUshort(s,a);a+=2,d.vals.push(t.GSUB.readLigatureSet(s,c+v))}else if(o==5&&d.fmt==2){if(d.fmt==2){var g=l.readUshort(s,a);a+=2,d.cDef=t._lctf.readClassDef(s,c+g),d.scset=[];var _=l.readUshort(s,a);for(a+=2,h=0;h<_;h++){var x=l.readUshort(s,a);a+=2,d.scset.push(x==0?null:t.GSUB.readSubClassSet(s,c+x))}}}else if(o==6&&d.fmt==3){if(d.fmt==3){for(h=0;h<3;h++){f=l.readUshort(s,a),a+=2;for(var b=[],S=0;S<f;S++)b.push(t._lctf.readCoverage(s,c+l.readUshort(s,a+2*S)));a+=2*f,h==0&&(d.backCvg=b),h==1&&(d.inptCvg=b),h==2&&(d.ahedCvg=b)}f=l.readUshort(s,a),a+=2,d.lookupRec=t.GSUB.readSubstLookupRecords(s,a,f)}}else{if(o==7&&d.fmt==1){var T=l.readUshort(s,a);a+=2;var M=l.readUint(s,a);if(a+=4,u.ltype==9)u.ltype=T;else if(u.ltype!=T)throw"invalid extension substitution";return t.GSUB.subt(s,u.ltype,c+M)}console.debug("unsupported GSUB table LookupType",o,"format",d.fmt)}return d},t.GSUB.readSubClassSet=function(s,o){var a=t._bin.readUshort,u=o,l=[],c=a(s,o);o+=2;for(var d=0;d<c;d++){var p=a(s,o);o+=2,l.push(t.GSUB.readSubClassRule(s,u+p))}return l},t.GSUB.readSubClassRule=function(s,o){var a=t._bin.readUshort,u={},l=a(s,o),c=a(s,o+=2);o+=2,u.input=[];for(var d=0;d<l-1;d++)u.input.push(a(s,o)),o+=2;return u.substLookupRecords=t.GSUB.readSubstLookupRecords(s,o,c),u},t.GSUB.readSubstLookupRecords=function(s,o,a){for(var u=t._bin.readUshort,l=[],c=0;c<a;c++)l.push(u(s,o),u(s,o+2)),o+=4;return l},t.GSUB.readChainSubClassSet=function(s,o){var a=t._bin,u=o,l=[],c=a.readUshort(s,o);o+=2;for(var d=0;d<c;d++){var p=a.readUshort(s,o);o+=2,l.push(t.GSUB.readChainSubClassRule(s,u+p))}return l},t.GSUB.readChainSubClassRule=function(s,o){for(var a=t._bin,u={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var d=a.readUshort(s,o);o+=2,c==1&&d--,u[l[c]]=a.readUshorts(s,o,d),o+=2*u[l[c]].length}return d=a.readUshort(s,o),o+=2,u.subst=a.readUshorts(s,o,2*d),o+=2*u.subst.length,u},t.GSUB.readLigatureSet=function(s,o){var a=t._bin,u=o,l=[],c=a.readUshort(s,o);o+=2;for(var d=0;d<c;d++){var p=a.readUshort(s,o);o+=2,l.push(t.GSUB.readLigature(s,u+p))}return l},t.GSUB.readLigature=function(s,o){var a=t._bin,u={chain:[]};u.nglyph=a.readUshort(s,o),o+=2;var l=a.readUshort(s,o);o+=2;for(var c=0;c<l-1;c++)u.chain.push(a.readUshort(s,o)),o+=2;return u},t.head={},t.head.parse=function(s,o,a){var u=t._bin,l={};return u.readFixed(s,o),o+=4,l.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,l.flags=u.readUshort(s,o),o+=2,l.unitsPerEm=u.readUshort(s,o),o+=2,l.created=u.readUint64(s,o),o+=8,l.modified=u.readUint64(s,o),o+=8,l.xMin=u.readShort(s,o),o+=2,l.yMin=u.readShort(s,o),o+=2,l.xMax=u.readShort(s,o),o+=2,l.yMax=u.readShort(s,o),o+=2,l.macStyle=u.readUshort(s,o),o+=2,l.lowestRecPPEM=u.readUshort(s,o),o+=2,l.fontDirectionHint=u.readShort(s,o),o+=2,l.indexToLocFormat=u.readShort(s,o),o+=2,l.glyphDataFormat=u.readShort(s,o),o+=2,l},t.hhea={},t.hhea.parse=function(s,o,a){var u=t._bin,l={};return u.readFixed(s,o),o+=4,l.ascender=u.readShort(s,o),o+=2,l.descender=u.readShort(s,o),o+=2,l.lineGap=u.readShort(s,o),o+=2,l.advanceWidthMax=u.readUshort(s,o),o+=2,l.minLeftSideBearing=u.readShort(s,o),o+=2,l.minRightSideBearing=u.readShort(s,o),o+=2,l.xMaxExtent=u.readShort(s,o),o+=2,l.caretSlopeRise=u.readShort(s,o),o+=2,l.caretSlopeRun=u.readShort(s,o),o+=2,l.caretOffset=u.readShort(s,o),o+=2,o+=8,l.metricDataFormat=u.readShort(s,o),o+=2,l.numberOfHMetrics=u.readUshort(s,o),o+=2,l},t.hmtx={},t.hmtx.parse=function(s,o,a,u){for(var l=t._bin,c={aWidth:[],lsBearing:[]},d=0,p=0,f=0;f<u.maxp.numGlyphs;f++)f<u.hhea.numberOfHMetrics&&(d=l.readUshort(s,o),o+=2,p=l.readShort(s,o),o+=2),c.aWidth.push(d),c.lsBearing.push(p);return c},t.kern={},t.kern.parse=function(s,o,a,u){var l=t._bin,c=l.readUshort(s,o);if(o+=2,c==1)return t.kern.parseV1(s,o-2,a,u);var d=l.readUshort(s,o);o+=2;for(var p={glyph1:[],rval:[]},f=0;f<d;f++){o+=2,a=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;var m=h>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;o=t.kern.readFormat0(s,o,p)}return p},t.kern.parseV1=function(s,o,a,u){var l=t._bin;l.readFixed(s,o),o+=4;var c=l.readUint(s,o);o+=4;for(var d={glyph1:[],rval:[]},p=0;p<c;p++){l.readUint(s,o),o+=4;var f=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var h=f>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;o=t.kern.readFormat0(s,o,d)}return d},t.kern.readFormat0=function(s,o,a){var u=t._bin,l=-1,c=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var d=0;d<c;d++){var p=u.readUshort(s,o);o+=2;var f=u.readUshort(s,o);o+=2;var h=u.readShort(s,o);o+=2,p!=l&&(a.glyph1.push(p),a.rval.push({glyph2:[],vals:[]}));var m=a.rval[a.rval.length-1];m.glyph2.push(f),m.vals.push(h),l=p}return o},t.loca={},t.loca.parse=function(s,o,a,u){var l=t._bin,c=[],d=u.head.indexToLocFormat,p=u.maxp.numGlyphs+1;if(d==0)for(var f=0;f<p;f++)c.push(l.readUshort(s,o+(f<<1))<<1);if(d==1)for(f=0;f<p;f++)c.push(l.readUint(s,o+(f<<2)));return c},t.maxp={},t.maxp.parse=function(s,o,a){var u=t._bin,l={},c=u.readUint(s,o);return o+=4,l.numGlyphs=u.readUshort(s,o),o+=2,c==65536&&(l.maxPoints=u.readUshort(s,o),o+=2,l.maxContours=u.readUshort(s,o),o+=2,l.maxCompositePoints=u.readUshort(s,o),o+=2,l.maxCompositeContours=u.readUshort(s,o),o+=2,l.maxZones=u.readUshort(s,o),o+=2,l.maxTwilightPoints=u.readUshort(s,o),o+=2,l.maxStorage=u.readUshort(s,o),o+=2,l.maxFunctionDefs=u.readUshort(s,o),o+=2,l.maxInstructionDefs=u.readUshort(s,o),o+=2,l.maxStackElements=u.readUshort(s,o),o+=2,l.maxSizeOfInstructions=u.readUshort(s,o),o+=2,l.maxComponentElements=u.readUshort(s,o),o+=2,l.maxComponentDepth=u.readUshort(s,o),o+=2),l},t.name={},t.name.parse=function(s,o,a){var u=t._bin,l={};u.readUshort(s,o),o+=2;var c=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var d,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=o+=2,h=0;h<c;h++){var m=u.readUshort(s,o);o+=2;var y=u.readUshort(s,o);o+=2;var v=u.readUshort(s,o);o+=2;var g=u.readUshort(s,o);o+=2;var _=u.readUshort(s,o);o+=2;var x=u.readUshort(s,o);o+=2;var b,S=p[g],T=f+12*c+x;if(m==0)b=u.readUnicode(s,T,_/2);else if(m==3&&y==0)b=u.readUnicode(s,T,_/2);else if(y==0)b=u.readASCII(s,T,_);else if(y==1)b=u.readUnicode(s,T,_/2);else if(y==3)b=u.readUnicode(s,T,_/2);else{if(m!=1)throw"unknown encoding "+y+", platformID: "+m;b=u.readASCII(s,T,_),console.debug("reading unknown MAC encoding "+y+" as ASCII")}var M="p"+m+","+v.toString(16);l[M]==null&&(l[M]={}),l[M][S!==void 0?S:g]=b,l[M]._lang=v}for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==1033)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==0)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==3084)return l[R];for(var R in l)if(l[R].postScriptName!=null)return l[R];for(var R in l){d=R;break}return console.debug("returning name table with languageID "+l[d]._lang),l[d]},t["OS/2"]={},t["OS/2"].parse=function(s,o,a){var u=t._bin.readUshort(s,o);o+=2;var l={};if(u==0)t["OS/2"].version0(s,o,l);else if(u==1)t["OS/2"].version1(s,o,l);else if(u==2||u==3||u==4)t["OS/2"].version2(s,o,l);else{if(u!=5)throw"unknown OS/2 table version: "+u;t["OS/2"].version5(s,o,l)}return l},t["OS/2"].version0=function(s,o,a){var u=t._bin;return a.xAvgCharWidth=u.readShort(s,o),o+=2,a.usWeightClass=u.readUshort(s,o),o+=2,a.usWidthClass=u.readUshort(s,o),o+=2,a.fsType=u.readUshort(s,o),o+=2,a.ySubscriptXSize=u.readShort(s,o),o+=2,a.ySubscriptYSize=u.readShort(s,o),o+=2,a.ySubscriptXOffset=u.readShort(s,o),o+=2,a.ySubscriptYOffset=u.readShort(s,o),o+=2,a.ySuperscriptXSize=u.readShort(s,o),o+=2,a.ySuperscriptYSize=u.readShort(s,o),o+=2,a.ySuperscriptXOffset=u.readShort(s,o),o+=2,a.ySuperscriptYOffset=u.readShort(s,o),o+=2,a.yStrikeoutSize=u.readShort(s,o),o+=2,a.yStrikeoutPosition=u.readShort(s,o),o+=2,a.sFamilyClass=u.readShort(s,o),o+=2,a.panose=u.readBytes(s,o,10),o+=10,a.ulUnicodeRange1=u.readUint(s,o),o+=4,a.ulUnicodeRange2=u.readUint(s,o),o+=4,a.ulUnicodeRange3=u.readUint(s,o),o+=4,a.ulUnicodeRange4=u.readUint(s,o),o+=4,a.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,a.fsSelection=u.readUshort(s,o),o+=2,a.usFirstCharIndex=u.readUshort(s,o),o+=2,a.usLastCharIndex=u.readUshort(s,o),o+=2,a.sTypoAscender=u.readShort(s,o),o+=2,a.sTypoDescender=u.readShort(s,o),o+=2,a.sTypoLineGap=u.readShort(s,o),o+=2,a.usWinAscent=u.readUshort(s,o),o+=2,a.usWinDescent=u.readUshort(s,o),o+=2},t["OS/2"].version1=function(s,o,a){var u=t._bin;return o=t["OS/2"].version0(s,o,a),a.ulCodePageRange1=u.readUint(s,o),o+=4,a.ulCodePageRange2=u.readUint(s,o),o+=4},t["OS/2"].version2=function(s,o,a){var u=t._bin;return o=t["OS/2"].version1(s,o,a),a.sxHeight=u.readShort(s,o),o+=2,a.sCapHeight=u.readShort(s,o),o+=2,a.usDefault=u.readUshort(s,o),o+=2,a.usBreak=u.readUshort(s,o),o+=2,a.usMaxContext=u.readUshort(s,o),o+=2},t["OS/2"].version5=function(s,o,a){var u=t._bin;return o=t["OS/2"].version2(s,o,a),a.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,a.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},t.post={},t.post.parse=function(s,o,a){var u=t._bin,l={};return l.version=u.readFixed(s,o),o+=4,l.italicAngle=u.readFixed(s,o),o+=4,l.underlinePosition=u.readShort(s,o),o+=2,l.underlineThickness=u.readShort(s,o),o+=2,l},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(s,o){var a=s.cmap,u=-1;if(a.p0e4!=null?u=a.p0e4:a.p3e1!=null?u=a.p3e1:a.p1e0!=null?u=a.p1e0:a.p0e3!=null&&(u=a.p0e3),u==-1)throw"no familiar platform and encoding!";var l=a.tables[u];if(l.format==0)return o>=l.map.length?0:l.map[o];if(l.format==4){for(var c=-1,d=0;d<l.endCount.length;d++)if(o<=l.endCount[d]){c=d;break}return c==-1||l.startCount[c]>o?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[o-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:o+l.idDelta[c])}if(l.format==12){if(o>l.groups[l.groups.length-1][1])return 0;for(d=0;d<l.groups.length;d++){var p=l.groups[d];if(p[0]<=o&&o<=p[1])return p[2]+(o-p[0])}return 0}throw"unknown cmap table format "+l.format},t.U.glyphToPath=function(s,o){var a={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?a:(typeof u=="string"&&(u=t.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},c=s.CFF,d=s.CFF.Private;if(c.ROS){for(var p=0;c.FDSelect[p+2]<=o;)p+=2;d=c.FDArray[c.FDSelect[p+1]].Private}t.U._drawCFF(s.CFF.CharStrings[o],l,c,d,a)}else s.glyf&&t.U._drawGlyf(o,s,a);return a},t.U._drawGlyf=function(s,o,a){var u=o.glyf[s];u==null&&(u=o.glyf[s]=t.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?t.U._simpleGlyph(u,a):t.U._compoGlyph(u,o,a))},t.U._simpleGlyph=function(s,o){for(var a=0;a<s.noc;a++){for(var u=a==0?0:s.endPts[a-1]+1,l=s.endPts[a],c=u;c<=l;c++){var d=c==u?l:c-1,p=c==l?u:c+1,f=1&s.flags[c],h=1&s.flags[d],m=1&s.flags[p],y=s.xs[c],v=s.ys[c];if(c==u)if(f){if(!h){t.U.P.moveTo(o,y,v);continue}t.U.P.moveTo(o,s.xs[d],s.ys[d])}else h?t.U.P.moveTo(o,s.xs[d],s.ys[d]):t.U.P.moveTo(o,(s.xs[d]+y)/2,(s.ys[d]+v)/2);f?h&&t.U.P.lineTo(o,y,v):m?t.U.P.qcurveTo(o,y,v,s.xs[p],s.ys[p]):t.U.P.qcurveTo(o,y,v,(y+s.xs[p])/2,(v+s.ys[p])/2)}t.U.P.closePath(o)}},t.U._compoGlyph=function(s,o,a){for(var u=0;u<s.parts.length;u++){var l={cmds:[],crds:[]},c=s.parts[u];t.U._drawGlyf(c.glyphIndex,o,l);for(var d=c.m,p=0;p<l.crds.length;p+=2){var f=l.crds[p],h=l.crds[p+1];a.crds.push(f*d.a+h*d.b+d.tx),a.crds.push(f*d.c+h*d.d+d.ty)}for(p=0;p<l.cmds.length;p++)a.cmds.push(l.cmds[p])}},t.U._getGlyphClass=function(s,o){var a=t._lctf.getInterval(o,s);return a==-1?0:o[a+2]},t.U._applySubs=function(s,o,a,u){for(var l=s.length-o-1,c=0;c<a.tabs.length;c++)if(a.tabs[c]!=null){var d,p=a.tabs[c];if(!p.coverage||(d=t._lctf.coverageIndex(p.coverage,s[o]))!=-1){if(a.ltype==1)s[o],p.fmt==1?s[o]=s[o]+p.delta:s[o]=p.newg[d];else if(a.ltype==4)for(var f=p.vals[d],h=0;h<f.length;h++){var m=f[h],y=m.chain.length;if(!(y>l)){for(var v=!0,g=0,_=0;_<y;_++){for(;s[o+g+(1+_)]==-1;)g++;m.chain[_]!=s[o+g+(1+_)]&&(v=!1)}if(v){for(s[o]=m.nglyph,_=0;_<y+g;_++)s[o+_+1]=-1;break}}}else if(a.ltype==5&&p.fmt==2)for(var x=t._lctf.getInterval(p.cDef,s[o]),b=p.cDef[x+2],S=p.scset[b],T=0;T<S.length;T++){var M=S[T],R=M.input;if(!(R.length>l)){for(v=!0,_=0;_<R.length;_++){var L=t._lctf.getInterval(p.cDef,s[o+1+_]);if(x==-1&&p.cDef[L+2]!=R[_]){v=!1;break}}if(v){var P=M.substLookupRecords;for(h=0;h<P.length;h+=2)P[h],P[h+1]}}}else if(a.ltype==6&&p.fmt==3){if(!t.U._glsCovered(s,p.backCvg,o-p.backCvg.length)||!t.U._glsCovered(s,p.inptCvg,o)||!t.U._glsCovered(s,p.ahedCvg,o+p.inptCvg.length))continue;var C=p.lookupRec;for(T=0;T<C.length;T+=2){x=C[T];var k=u[C[T+1]];t.U._applySubs(s,o+x,k,u)}}}}},t.U._glsCovered=function(s,o,a){for(var u=0;u<o.length;u++)if(t._lctf.coverageIndex(o[u],s[a+u])==-1)return!1;return!0},t.U.glyphsToPath=function(s,o,a){for(var u={cmds:[],crds:[]},l=0,c=0;c<o.length;c++){var d=o[c];if(d!=-1){for(var p=c<o.length-1&&o[c+1]!=-1?o[c+1]:0,f=t.U.glyphToPath(s,d),h=0;h<f.crds.length;h+=2)u.crds.push(f.crds[h]+l),u.crds.push(f.crds[h+1]);for(a&&u.cmds.push(a),h=0;h<f.cmds.length;h++)u.cmds.push(f.cmds[h]);a&&u.cmds.push("X"),l+=s.hmtx.aWidth[d],c<o.length-1&&(l+=t.U.getPairAdjustment(s,d,p))}}return u},t.U.P={},t.U.P.moveTo=function(s,o,a){s.cmds.push("M"),s.crds.push(o,a)},t.U.P.lineTo=function(s,o,a){s.cmds.push("L"),s.crds.push(o,a)},t.U.P.curveTo=function(s,o,a,u,l,c,d){s.cmds.push("C"),s.crds.push(o,a,u,l,c,d)},t.U.P.qcurveTo=function(s,o,a,u,l){s.cmds.push("Q"),s.crds.push(o,a,u,l)},t.U.P.closePath=function(s){s.cmds.push("Z")},t.U._drawCFF=function(s,o,a,u,l){for(var c=o.stack,d=o.nStems,p=o.haveWidth,f=o.width,h=o.open,m=0,y=o.x,v=o.y,g=0,_=0,x=0,b=0,S=0,T=0,M=0,R=0,L=0,P=0,C={val:0,size:0};m<s.length;){t.CFF.getCharString(s,m,C);var k=C.val;if(m+=C.size,k=="o1"||k=="o18")c.length%2!=0&&!p&&(f=c.shift()+u.nominalWidthX),d+=c.length>>1,c.length=0,p=!0;else if(k=="o3"||k=="o23")c.length%2!=0&&!p&&(f=c.shift()+u.nominalWidthX),d+=c.length>>1,c.length=0,p=!0;else if(k=="o4")c.length>1&&!p&&(f=c.shift()+u.nominalWidthX,p=!0),h&&t.U.P.closePath(l),v+=c.pop(),t.U.P.moveTo(l,y,v),h=!0;else if(k=="o5")for(;c.length>0;)y+=c.shift(),v+=c.shift(),t.U.P.lineTo(l,y,v);else if(k=="o6"||k=="o7")for(var D=c.length,F=k=="o6",G=0;G<D;G++){var z=c.shift();F?y+=z:v+=z,F=!F,t.U.P.lineTo(l,y,v)}else if(k=="o8"||k=="o24"){D=c.length;for(var Q=0;Q+6<=D;)g=y+c.shift(),_=v+c.shift(),x=g+c.shift(),b=_+c.shift(),y=x+c.shift(),v=b+c.shift(),t.U.P.curveTo(l,g,_,x,b,y,v),Q+=6;k=="o24"&&(y+=c.shift(),v+=c.shift(),t.U.P.lineTo(l,y,v))}else{if(k=="o11")break;if(k=="o1234"||k=="o1235"||k=="o1236"||k=="o1237")k=="o1234"&&(_=v,x=(g=y+c.shift())+c.shift(),P=b=_+c.shift(),T=b,R=v,y=(M=(S=(L=x+c.shift())+c.shift())+c.shift())+c.shift(),t.U.P.curveTo(l,g,_,x,b,L,P),t.U.P.curveTo(l,S,T,M,R,y,v)),k=="o1235"&&(g=y+c.shift(),_=v+c.shift(),x=g+c.shift(),b=_+c.shift(),L=x+c.shift(),P=b+c.shift(),S=L+c.shift(),T=P+c.shift(),M=S+c.shift(),R=T+c.shift(),y=M+c.shift(),v=R+c.shift(),c.shift(),t.U.P.curveTo(l,g,_,x,b,L,P),t.U.P.curveTo(l,S,T,M,R,y,v)),k=="o1236"&&(g=y+c.shift(),_=v+c.shift(),x=g+c.shift(),P=b=_+c.shift(),T=b,M=(S=(L=x+c.shift())+c.shift())+c.shift(),R=T+c.shift(),y=M+c.shift(),t.U.P.curveTo(l,g,_,x,b,L,P),t.U.P.curveTo(l,S,T,M,R,y,v)),k=="o1237"&&(g=y+c.shift(),_=v+c.shift(),x=g+c.shift(),b=_+c.shift(),L=x+c.shift(),P=b+c.shift(),S=L+c.shift(),T=P+c.shift(),M=S+c.shift(),R=T+c.shift(),Math.abs(M-y)>Math.abs(R-v)?y=M+c.shift():v=R+c.shift(),t.U.P.curveTo(l,g,_,x,b,L,P),t.U.P.curveTo(l,S,T,M,R,y,v));else if(k=="o14"){if(c.length>0&&!p&&(f=c.shift()+a.nominalWidthX,p=!0),c.length==4){var V=c.shift(),W=c.shift(),Y=c.shift(),J=c.shift(),ie=t.CFF.glyphBySE(a,Y),I=t.CFF.glyphBySE(a,J);t.U._drawCFF(a.CharStrings[ie],o,a,u,l),o.x=V,o.y=W,t.U._drawCFF(a.CharStrings[I],o,a,u,l)}h&&(t.U.P.closePath(l),h=!1)}else if(k=="o19"||k=="o20")c.length%2!=0&&!p&&(f=c.shift()+u.nominalWidthX),d+=c.length>>1,c.length=0,p=!0,m+=d+7>>3;else if(k=="o21")c.length>2&&!p&&(f=c.shift()+u.nominalWidthX,p=!0),v+=c.pop(),y+=c.pop(),h&&t.U.P.closePath(l),t.U.P.moveTo(l,y,v),h=!0;else if(k=="o22")c.length>1&&!p&&(f=c.shift()+u.nominalWidthX,p=!0),y+=c.pop(),h&&t.U.P.closePath(l),t.U.P.moveTo(l,y,v),h=!0;else if(k=="o25"){for(;c.length>6;)y+=c.shift(),v+=c.shift(),t.U.P.lineTo(l,y,v);g=y+c.shift(),_=v+c.shift(),x=g+c.shift(),b=_+c.shift(),y=x+c.shift(),v=b+c.shift(),t.U.P.curveTo(l,g,_,x,b,y,v)}else if(k=="o26")for(c.length%2&&(y+=c.shift());c.length>0;)g=y,_=v+c.shift(),y=x=g+c.shift(),v=(b=_+c.shift())+c.shift(),t.U.P.curveTo(l,g,_,x,b,y,v);else if(k=="o27")for(c.length%2&&(v+=c.shift());c.length>0;)_=v,x=(g=y+c.shift())+c.shift(),b=_+c.shift(),y=x+c.shift(),v=b,t.U.P.curveTo(l,g,_,x,b,y,v);else if(k=="o10"||k=="o29"){var O=k=="o10"?u:a;if(c.length==0)console.debug("error: empty stack");else{var H=c.pop(),q=O.Subrs[H+O.Bias];o.x=y,o.y=v,o.nStems=d,o.haveWidth=p,o.width=f,o.open=h,t.U._drawCFF(q,o,a,u,l),y=o.x,v=o.y,d=o.nStems,p=o.haveWidth,f=o.width,h=o.open}}else if(k=="o30"||k=="o31"){var Z=c.length,oe=(Q=0,k=="o31");for(Q+=Z-(D=-3&Z);Q<D;)oe?(_=v,x=(g=y+c.shift())+c.shift(),v=(b=_+c.shift())+c.shift(),D-Q==5?(y=x+c.shift(),Q++):y=x,oe=!1):(g=y,_=v+c.shift(),x=g+c.shift(),b=_+c.shift(),y=x+c.shift(),D-Q==5?(v=b+c.shift(),Q++):v=b,oe=!0),t.U.P.curveTo(l,g,_,x,b,y,v),Q+=4}else{if((k+"").charAt(0)=="o")throw console.debug("Unknown operation: "+k,s),k;c.push(k)}}}o.x=y,o.y=v,o.nStems=d,o.haveWidth=p,o.width=f,o.open=h};var n=t,r={Typr:n};return i.Typr=n,i.default=r,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function LW(){return function(i){var t=Uint8Array,n=Uint16Array,r=Uint32Array,s=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(k,D){for(var F=new n(31),G=0;G<31;++G)F[G]=D+=1<<k[G-1];var z=new r(F[30]);for(G=1;G<30;++G)for(var Q=F[G];Q<F[G+1];++Q)z[Q]=Q-F[G]<<5|G;return[F,z]},l=u(s,2),c=l[0],d=l[1];c[28]=258,d[258]=28;for(var p=u(o,0)[0],f=new n(32768),h=0;h<32768;++h){var m=(43690&h)>>>1|(21845&h)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,f[h]=((65280&m)>>>8|(255&m)<<8)>>>1}var y=function(k,D,F){for(var G=k.length,z=0,Q=new n(D);z<G;++z)++Q[k[z]-1];var V,W=new n(D);for(z=0;z<D;++z)W[z]=W[z-1]+Q[z-1]<<1;{V=new n(1<<D);var Y=15-D;for(z=0;z<G;++z)if(k[z])for(var J=z<<4|k[z],ie=D-k[z],I=W[k[z]-1]++<<ie,O=I|(1<<ie)-1;I<=O;++I)V[f[I]>>>Y]=J}return V},v=new t(288);for(h=0;h<144;++h)v[h]=8;for(h=144;h<256;++h)v[h]=9;for(h=256;h<280;++h)v[h]=7;for(h=280;h<288;++h)v[h]=8;var g=new t(32);for(h=0;h<32;++h)g[h]=5;var _=y(v,9),x=y(g,5),b=function(k){for(var D=k[0],F=1;F<k.length;++F)k[F]>D&&(D=k[F]);return D},S=function(k,D,F){var G=D/8|0;return(k[G]|k[G+1]<<8)>>(7&D)&F},T=function(k,D){var F=D/8|0;return(k[F]|k[F+1]<<8|k[F+2]<<16)>>(7&D)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(k,D,F){var G=new Error(D||M[k]);if(G.code=k,Error.captureStackTrace&&Error.captureStackTrace(G,R),!F)throw G;return G},L=function(k,D,F){var G=k.length;if(!G||F&&!F.l&&G<5)return D||new t(0);var z=!D||F,Q=!F||F.i;F||(F={}),D||(D=new t(3*G));var V,W=function(Pe){var ye=D.length;if(Pe>ye){var De=new t(Math.max(2*ye,Pe));De.set(D),D=De}},Y=F.f||0,J=F.p||0,ie=F.b||0,I=F.l,O=F.d,H=F.m,q=F.n,Z=8*G;do{if(!I){F.f=Y=S(k,J,1);var oe=S(k,J+1,3);if(J+=3,!oe){var pe=k[(ae=((V=J)/8|0)+(7&V&&1)+4)-4]|k[ae-3]<<8,be=ae+pe;if(be>G){Q&&R(0);break}z&&W(ie+pe),D.set(k.subarray(ae,be),ie),F.b=ie+=pe,F.p=J=8*be;continue}if(oe==1)I=_,O=x,H=9,q=5;else if(oe==2){var me=S(k,J,31)+257,ce=S(k,J+10,15)+4,te=me+S(k,J+5,31)+1;J+=14;for(var ue=new t(te),ge=new t(19),xe=0;xe<ce;++xe)ge[a[xe]]=S(k,J+3*xe,7);J+=3*ce;var Le=b(ge),we=(1<<Le)-1,Ee=y(ge,Le);for(xe=0;xe<te;){var ae,ne=Ee[S(k,J,we)];if(J+=15&ne,(ae=ne>>>4)<16)ue[xe++]=ae;else{var Ae=0,Be=0;for(ae==16?(Be=3+S(k,J,3),J+=2,Ae=ue[xe-1]):ae==17?(Be=3+S(k,J,7),J+=3):ae==18&&(Be=11+S(k,J,127),J+=7);Be--;)ue[xe++]=Ae}}var Fe=ue.subarray(0,me),Oe=ue.subarray(me);H=b(Fe),q=b(Oe),I=y(Fe,H),O=y(Oe,q)}else R(1);if(J>Z){Q&&R(0);break}}z&&W(ie+131072);for(var Je=(1<<H)-1,Ve=(1<<q)-1,Se=J;;Se=J){var We=(Ae=I[T(k,J)&Je])>>>4;if((J+=15&Ae)>Z){Q&&R(0);break}if(Ae||R(2),We<256)D[ie++]=We;else{if(We==256){Se=J,I=null;break}var Re=We-254;if(We>264){var le=s[xe=We-257];Re=S(k,J,(1<<le)-1)+c[xe],J+=le}var de=O[T(k,J)&Ve],ee=de>>>4;if(de||R(3),J+=15&de,Oe=p[ee],ee>3&&(le=o[ee],Oe+=T(k,J)&(1<<le)-1,J+=le),J>Z){Q&&R(0);break}z&&W(ie+131072);for(var he=ie+Re;ie<he;ie+=4)D[ie]=D[ie-Oe],D[ie+1]=D[ie+1-Oe],D[ie+2]=D[ie+2-Oe],D[ie+3]=D[ie+3-Oe];ie=he}}F.l=I,F.p=Se,F.b=ie,I&&(Y=1,F.m=H,F.d=O,F.n=q)}while(!Y);return ie==D.length?D:function(Pe,ye,De){(De==null||De>Pe.length)&&(De=Pe.length);var Me=new(Pe instanceof n?n:Pe instanceof r?r:t)(De-ye);return Me.set(Pe.subarray(ye,De)),Me}(D,0,ie)},P=new t(0),C=typeof TextDecoder<"u"&&new TextDecoder;try{C.decode(P,{stream:!0})}catch{}return i.convert_streams=function(k){var D=new DataView(k),F=0;function G(){var me=D.getUint16(F);return F+=2,me}function z(){var me=D.getUint32(F);return F+=4,me}function Q(me){pe.setUint16(be,me),be+=2}function V(me){pe.setUint32(be,me),be+=4}for(var W={signature:z(),flavor:z(),length:z(),numTables:G(),reserved:G(),totalSfntSize:z(),majorVersion:G(),minorVersion:G(),metaOffset:z(),metaLength:z(),metaOrigLength:z(),privOffset:z(),privLength:z()},Y=0;Math.pow(2,Y)<=W.numTables;)Y++;Y--;for(var J=16*Math.pow(2,Y),ie=16*W.numTables-J,I=12,O=[],H=0;H<W.numTables;H++)O.push({tag:z(),offset:z(),compLength:z(),origLength:z(),origChecksum:z()}),I+=16;var q,Z=new Uint8Array(12+16*O.length+O.reduce(function(me,ce){return me+ce.origLength+4},0)),oe=Z.buffer,pe=new DataView(oe),be=0;return V(W.flavor),Q(W.numTables),Q(J),Q(Y),Q(ie),O.forEach(function(me){V(me.tag),V(me.origChecksum),V(I),V(me.origLength),me.outOffset=I,(I+=me.origLength)%4!=0&&(I+=4-I%4)}),O.forEach(function(me){var ce,te=k.slice(me.offset,me.offset+me.compLength);if(me.compLength!=me.origLength){var ue=new Uint8Array(me.origLength);ce=new Uint8Array(te,2),L(ce,ue)}else ue=new Uint8Array(te);Z.set(ue,me.outOffset);var ge=0;(I=me.outOffset+me.origLength)%4!=0&&(ge=4-I%4),Z.set(new Uint8Array(ge).buffer,me.outOffset+me.origLength),q=I+ge}),oe.slice(0,q)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function jW(i,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,a=4,u=8,l=16,c=32;let d;function p(M){if(!d){const R={R:o,L:s,D:a,C:l,U:c,T:u};d=new Map;for(let L in r){let P=0;r[L].split(",").forEach(C=>{let[k,D]=C.split("+");k=parseInt(k,36),D=D?parseInt(D,36):0,d.set(P+=k,R[L]);for(let F=D;F--;)d.set(++P,R[L])})}}return d.get(M)||c}const f=1,h=2,m=3,y=4,v=[null,"isol","init","fina","medi"];function g(M){const R=new Uint8Array(M.length);let L=c,P=f,C=-1;for(let k=0;k<M.length;k++){const D=M.codePointAt(k);let F=p(D)|0,G=f;F&u||(L&(s|a|l)?F&(o|a|l)?(G=m,(P===f||P===m)&&R[C]++):F&(s|c)&&(P===h||P===y)&&R[C]--:L&(o|c)&&(P===h||P===y)&&R[C]--,P=R[k]=G,L=F,C=k,D>65535&&k++)}return R}function _(M,R){const L=[];for(let C=0;C<R.length;C++){const k=R.codePointAt(C);k>65535&&C++,L.push(i.U.codeToGlyph(M,k))}const P=M.GSUB;if(P){const{lookupList:C,featureList:k}=P;let D;const F=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,G=[];k.forEach(z=>{if(F.test(z.tag))for(let Q=0;Q<z.tab.length;Q++){if(G[z.tab[Q]])continue;G[z.tab[Q]]=!0;const V=C[z.tab[Q]],W=/^(isol|init|fina|medi)$/.test(z.tag);W&&!D&&(D=g(R));for(let Y=0;Y<L.length;Y++)(!D||!W||v[D[Y]]===z.tag)&&i.U._applySubs(L,Y,V,C)}})}return L}function x(M,R){const L=new Int16Array(R.length*3);let P=0;for(;P<R.length;P++){const F=R[P];if(F===-1)continue;L[P*3+2]=M.hmtx.aWidth[F];const G=M.GPOS;if(G){const z=G.lookupList;for(let Q=0;Q<z.length;Q++){const V=z[Q];for(let W=0;W<V.tabs.length;W++){const Y=V.tabs[W];if(V.ltype===1){if(i._lctf.coverageIndex(Y.coverage,F)!==-1&&Y.pos){D(Y.pos,P);break}}else if(V.ltype===2){let J=null,ie=C();if(ie!==-1){const I=i._lctf.coverageIndex(Y.coverage,R[ie]);if(I!==-1){if(Y.fmt===1){const O=Y.pairsets[I];for(let H=0;H<O.length;H++)O[H].gid2===F&&(J=O[H])}else if(Y.fmt===2){const O=i.U._getGlyphClass(R[ie],Y.classDef1),H=i.U._getGlyphClass(F,Y.classDef2);J=Y.matrix[O][H]}if(J){J.val1&&D(J.val1,ie),J.val2&&D(J.val2,P);break}}}}else if(V.ltype===4){const J=i._lctf.coverageIndex(Y.markCoverage,F);if(J!==-1){const ie=C(k),I=ie===-1?-1:i._lctf.coverageIndex(Y.baseCoverage,R[ie]);if(I!==-1){const O=Y.markArray[J],H=Y.baseArray[I][O.markClass];L[P*3]=H.x-O.x+L[ie*3]-L[ie*3+2],L[P*3+1]=H.y-O.y+L[ie*3+1];break}}}else if(V.ltype===6){const J=i._lctf.coverageIndex(Y.mark1Coverage,F);if(J!==-1){const ie=C();if(ie!==-1){const I=R[ie];if(b(M,I)===3){const O=i._lctf.coverageIndex(Y.mark2Coverage,I);if(O!==-1){const H=Y.mark1Array[J],q=Y.mark2Array[O][H.markClass];L[P*3]=q.x-H.x+L[ie*3]-L[ie*3+2],L[P*3+1]=q.y-H.y+L[ie*3+1];break}}}}}}}}else if(M.kern&&!M.cff){const z=C();if(z!==-1){const Q=M.kern.glyph1.indexOf(R[z]);if(Q!==-1){const V=M.kern.rval[Q].glyph2.indexOf(F);V!==-1&&(L[z*3+2]+=M.kern.rval[Q].vals[V])}}}}return L;function C(F){for(let G=P-1;G>=0;G--)if(R[G]!==-1&&(!F||F(R[G])))return G;return-1}function k(F){return b(M,F)===1}function D(F,G){for(let z=0;z<3;z++)L[G*3+z]+=F[z]||0}}function b(M,R){const L=M.GDEF&&M.GDEF.glyphClassDef;return L?i.U._getGlyphClass(R,L):0}function S(...M){for(let R=0;R<M.length;R++)if(typeof M[R]=="number")return M[R]}function T(M){const R=Object.create(null),L=M["OS/2"],P=M.hhea,C=M.head.unitsPerEm,k=S(L&&L.sTypoAscender,P&&P.ascender,C),D={unitsPerEm:C,ascender:k,descender:S(L&&L.sTypoDescender,P&&P.descender,0),capHeight:S(L&&L.sCapHeight,k),xHeight:S(L&&L.sxHeight,k),lineGap:S(L&&L.sTypoLineGap,P&&P.lineGap),supportsCodePoint(F){return i.U.codeToGlyph(M,F)>0},forEachGlyph(F,G,z,Q){let V=0;const W=1/D.unitsPerEm*G,Y=_(M,F);let J=0;const ie=x(M,Y);return Y.forEach((I,O)=>{if(I!==-1){let H=R[I];if(!H){const{cmds:q,crds:Z}=i.U.glyphToPath(M,I);let oe="",pe=0;for(let ue=0,ge=q.length;ue<ge;ue++){const xe=n[q[ue]];oe+=q[ue];for(let Le=1;Le<=xe;Le++)oe+=(Le>1?",":"")+Z[pe++]}let be,me,ce,te;if(Z.length){be=me=1/0,ce=te=-1/0;for(let ue=0,ge=Z.length;ue<ge;ue+=2){let xe=Z[ue],Le=Z[ue+1];xe<be&&(be=xe),Le<me&&(me=Le),xe>ce&&(ce=xe),Le>te&&(te=Le)}}else be=ce=me=te=0;H=R[I]={index:I,advanceWidth:M.hmtx.aWidth[I],xMin:be,yMin:me,xMax:ce,yMax:te,path:oe}}Q.call(null,H,V+ie[O*3]*W,ie[O*3+1]*W,J),V+=ie[O*3+2]*W,z&&(V+=z*G)}J+=F.codePointAt(J)>65535?2:1}),V}};return D}return function(R){const L=new Uint8Array(R,0,4),P=i._bin.readASCII(L,0,4);if(P==="wOFF")R=t(R);else if(P==="wOF2")throw new Error("woff2 fonts not supported");return T(i.parse(R)[0])}}const DW=yd({name:"Typr Font Parser",dependencies:[IW,LW,jW],init(i,t,n){const r=i(),s=t();return n(r,s)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function kW(){return function(i){var t=function(){this.buckets=new Map};t.prototype.add=function(x){var b=x>>5;this.buckets.set(b,(this.buckets.get(b)||0)|1<<(31&x))},t.prototype.has=function(x){var b=this.buckets.get(x>>5);return b!==void 0&&(b&1<<(31&x))!=0},t.prototype.serialize=function(){var x=[];return this.buckets.forEach(function(b,S){x.push((+S).toString(36)+":"+b.toString(36))}),x.join(",")},t.prototype.deserialize=function(x){var b=this;this.buckets.clear(),x.split(",").forEach(function(S){var T=S.split(":");b.buckets.set(parseInt(T[0],36),parseInt(T[1],36))})};var n=Math.pow(2,8),r=n-1,s=~r;function o(x){var b=function(T){return T&s}(x).toString(16),S=function(T){return(T&s)+n-1}(x).toString(16);return"codepoint-index/plane"+(x>>16)+"/"+b+"-"+S+".json"}function a(x,b){var S=x&r,T=b.codePointAt(S/6|0);return((T=(T||48)-48)&1<<S%6)!=0}function u(x,b){var S;(S=x,S.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(T){return T.split("-").map(function(M){return parseInt(M.trim(),16)})})).forEach(function(T){var M=T[0],R=T[1];R===void 0&&(R=M),b(M,R)})}function l(x,b){u(x,function(S,T){for(var M=S;M<=T;M++)b(M)})}var c={},d={},p=new WeakMap,f="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(x){var b=p.get(x);return b||(b=new t,l(x.ranges,function(S){return b.add(S)}),p.set(x,b)),b}var m,y=new Map;function v(x,b,S){return x[b]?b:x[S]?S:function(T){for(var M in T)return M}(x)}function g(x,b){var S=b;if(!x.includes(S)){S=1/0;for(var T=0;T<x.length;T++)Math.abs(x[T]-b)<Math.abs(S-b)&&(S=x[T])}return S}function _(x){return m||(m=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(b){m.add(b)})),m.has(x)}return i.CodePointSet=t,i.clearCache=function(){c={},d={}},i.getFontsForString=function(x,b){b===void 0&&(b={});var S,T=b.lang;T===void 0&&(T=new RegExp("\\p{Script=Hangul}","u").test(S=x)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(S)?"ja":"en");var M=b.category;M===void 0&&(M="sans-serif");var R=b.style;R===void 0&&(R="normal");var L=b.weight;L===void 0&&(L=400);var P=(b.dataUrl||f).replace(/\/$/g,""),C=new Map,k=new Uint8Array(x.length),D={},F={},G=new Array(x.length),z=new Map,Q=!1;function V(J){var ie=y.get(J);return ie||(ie=fetch(P+"/"+J).then(function(I){if(!I.ok)throw new Error(I.statusText);return I.json().then(function(O){if(!Array.isArray(O)||O[0]!==1)throw new Error("Incorrect schema version; need 1, got "+O[0]);return O[1]})}).catch(function(I){if(P!==f)return Q||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+P+'", trying default CDN. '+I.message),Q=!0),P=f,y.delete(J),V(J);throw I}),y.set(J,ie)),ie}for(var W=function(J){var ie=x.codePointAt(J),I=o(ie);G[J]=I,c[I]||z.has(I)||z.set(I,V(I).then(function(O){c[I]=O})),ie>65535&&(J++,Y=J)},Y=0;Y<x.length;Y++)W(Y);return Promise.all(z.values()).then(function(){z.clear();for(var J=function(I){var O=x.codePointAt(I),H=null,q=c[G[I]],Z=void 0;for(var oe in q){var pe=F[oe];if(pe===void 0&&(pe=F[oe]=new RegExp(oe).test(T||"en")),pe){for(var be in Z=oe,q[oe])if(a(O,q[oe][be])){H=be;break}break}}if(!H){e:for(var me in q)if(me!==Z){for(var ce in q[me])if(a(O,q[me][ce])){H=ce;break e}}}H||(console.debug("No font coverage for U+"+O.toString(16)),H="latin"),G[I]=H,d[H]||z.has(H)||z.set(H,V("font-meta/"+H+".json").then(function(te){d[H]=te})),O>65535&&(I++,ie=I)},ie=0;ie<x.length;ie++)J(ie);return Promise.all(z.values())}).then(function(){for(var J,ie=null,I=0;I<x.length;I++){var O=x.codePointAt(I);if(ie&&(_(O)||h(ie).has(O)))k[I]=k[I-1];else{ie=d[G[I]];var H=D[ie.id];if(!H){var q=ie.typeforms,Z=v(q,M,"sans-serif"),oe=v(q[Z],R,"normal"),pe=g((J=q[Z])===null||J===void 0?void 0:J[oe],L);H=D[ie.id]=P+"/font-files/"+ie.id+"/"+Z+"."+oe+"."+pe+".woff"}var be=C.get(H);be==null&&(be=C.size,C.set(H,be)),k[I]=be}O>65535&&(I++,k[I]=k[I-1])}return{fontUrls:Array.from(C.keys()),chars:k}})},Object.defineProperty(i,"__esModule",{value:!0}),i}({})}function OW(i,t){const n=Object.create(null),r=Object.create(null);function s(a,u){const l=c=>{console.error(`Failure loading font ${a}`,c)};try{const c=new XMLHttpRequest;c.open("get",a,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const d=i(c.response);d.src=a,u(d)}catch(d){l(d)}},c.onerror=l,c.send()}catch(c){l(c)}}function o(a,u){let l=n[a];l?u(l):r[a]?r[a].push(u):(r[a]=[u],s(a,c=>{c.src=a,n[a]=c,r[a].forEach(d=>d(c)),delete r[a]}))}return function(a,u,{lang:l,fonts:c=[],style:d="normal",weight:p="normal",unicodeFontsURL:f}={}){const h=new Uint8Array(a.length),m=[];a.length||_();const y=new Map,v=[];if(d!=="italic"&&(d="normal"),typeof p!="number"&&(p=p==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(b=>!b.lang||b.lang.test(l)).reverse(),c.length){let M=0;(function R(L=0){for(let P=L,C=a.length;P<C;P++){const k=a.codePointAt(P);if(M===1&&m[h[P-1]].supportsCodePoint(k)||P>0&&/\s/.test(a[P]))h[P]=h[P-1],M===2&&(v[v.length-1][1]=P);else for(let D=h[P],F=c.length;D<=F;D++)if(D===F){const G=M===2?v[v.length-1]:v[v.length]=[P,P];G[1]=P,M=2}else{h[P]=D;const{src:G,unicodeRange:z}=c[D];if(!z||x(k,z)){const Q=n[G];if(!Q){o(G,()=>{R(P)});return}if(Q.supportsCodePoint(k)){let V=y.get(Q);typeof V!="number"&&(V=m.length,m.push(Q),y.set(Q,V)),h[P]=V,M=1;break}}}k>65535&&P+1<C&&(h[P+1]=h[P],P++,M===2&&(v[v.length-1][1]=P))}g()})()}else v.push([0,a.length-1]),g();function g(){if(v.length){const b=v.map(S=>a.substring(S[0],S[1]+1)).join(`
`);t.getFontsForString(b,{lang:l||void 0,style:d,weight:p,dataUrl:f}).then(({fontUrls:S,chars:T})=>{const M=m.length;let R=0;v.forEach(P=>{for(let C=0,k=P[1]-P[0];C<=k;C++)h[P[0]+C]=T[R++]+M;R++});let L=0;S.forEach((P,C)=>{o(P,k=>{m[C+M]=k,++L===S.length&&_()})})})}else _()}function _(){u({chars:h,fonts:m})}function x(b,S){for(let T=0;T<S.length;T++){const[M,R=M]=S[T];if(M<=b&&b<=R)return!0}return!1}}}const BW=yd({name:"FontResolver",dependencies:[OW,DW,kW],init(i,t,n){return i(t,n())}});function FW(i,t){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",o=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:m,lang:y,fonts:v,style:g,weight:_,preResolvedFonts:x,unicodeFontsURL:b},S){const T=({chars:M,fonts:R})=>{let L,P;const C=[];for(let k=0;k<M.length;k++)M[k]!==P?(P=M[k],C.push(L={start:k,end:k,fontObj:R[M[k]]})):L.end=k;S(C)};x?T(x):i(m,T,{lang:y,fonts:v,style:g,weight:_,unicodeFontsURL:b})}function u({text:m="",font:y,lang:v,sdfGlyphSize:g=64,fontSize:_=400,fontWeight:x=1,fontStyle:b="normal",letterSpacing:S=0,lineHeight:T="normal",maxWidth:M=1/0,direction:R,textAlign:L="left",textIndent:P=0,whiteSpace:C="normal",overflowWrap:k="normal",anchorX:D=0,anchorY:F=0,metricsOnly:G=!1,unicodeFontsURL:z,preResolvedFonts:Q=null,includeCaretPositions:V=!1,chunkedBoundsSize:W=8192,colorRanges:Y=null},J){const ie=p(),I={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,S=+S,M=+M,T=T||"normal",P=+P,a({text:m,lang:v,style:b,weight:x,fonts:typeof y=="string"?[{src:y}]:y,unicodeFontsURL:z,preResolvedFonts:Q},O=>{I.fontLoad=p()-ie;const H=isFinite(M);let q=null,Z=null,oe=null,pe=null,be=null,me=null,ce=null,te=null,ue=0,ge=0,xe=C!=="nowrap";const Le=new Map,we=p();let Ee=P,ae=0,ne=new f;const Ae=[ne];O.forEach(Ve=>{const{fontObj:Se}=Ve,{ascender:We,descender:Re,unitsPerEm:le,lineGap:de,capHeight:ee,xHeight:he}=Se;let Pe=Le.get(Se);if(!Pe){const ke=_/le,Ye=T==="normal"?(We-Re+de)*ke:T*_,dt=(Ye-(We-Re)*ke)/2,at=Math.min(Ye,(We-Re)*ke),ct=(We+Re)/2*ke+at/2;Pe={index:Le.size,src:Se.src,fontObj:Se,fontSizeMult:ke,unitsPerEm:le,ascender:We*ke,descender:Re*ke,capHeight:ee*ke,xHeight:he*ke,lineHeight:Ye,baseline:-dt-We*ke,caretTop:ct,caretBottom:ct-at},Le.set(Se,Pe)}const{fontSizeMult:ye}=Pe,De=m.slice(Ve.start,Ve.end+1);let Me,qe;Se.forEachGlyph(De,_,S,(ke,Ye,dt,at)=>{Ye+=ae,at+=Ve.start,Me=Ye,qe=ke;const ct=m.charAt(at),xt=ke.advanceWidth*ye,_t=ne.count;let vt;if("isEmpty"in ke||(ke.isWhitespace=!!ct&&new RegExp(s).test(ct),ke.canBreakAfter=!!ct&&o.test(ct),ke.isEmpty=ke.xMin===ke.xMax||ke.yMin===ke.yMax||r.test(ct)),!ke.isWhitespace&&!ke.isEmpty&&ge++,xe&&H&&!ke.isWhitespace&&Ye+xt+Ee>M&&_t){if(ne.glyphAt(_t-1).glyphObj.canBreakAfter)vt=new f,Ee=-Ye;else for(let qt=_t;qt--;)if(qt===0&&k==="break-word"){vt=new f,Ee=-Ye;break}else if(ne.glyphAt(qt).glyphObj.canBreakAfter){vt=ne.splitAt(qt+1);const Wt=vt.glyphAt(0).x;Ee-=Wt;for(let tr=vt.count;tr--;)vt.glyphAt(tr).x-=Wt;break}vt&&(ne.isSoftWrapped=!0,ne=vt,Ae.push(ne),ue=M)}let Bt=ne.glyphAt(ne.count);Bt.glyphObj=ke,Bt.x=Ye+Ee,Bt.y=dt,Bt.width=xt,Bt.charIndex=at,Bt.fontData=Pe,ct===`
`&&(ne=new f,Ae.push(ne),Ee=-(Ye+xt+S*_)+P)}),ae=Me+qe.advanceWidth*ye+S*_});let Be=0;Ae.forEach(Ve=>{let Se=!0;for(let We=Ve.count;We--;){const Re=Ve.glyphAt(We);Se&&!Re.glyphObj.isWhitespace&&(Ve.width=Re.x+Re.width,Ve.width>ue&&(ue=Ve.width),Se=!1);let{lineHeight:le,capHeight:de,xHeight:ee,baseline:he}=Re.fontData;le>Ve.lineHeight&&(Ve.lineHeight=le);const Pe=he-Ve.baseline;Pe<0&&(Ve.baseline+=Pe,Ve.cap+=Pe,Ve.ex+=Pe),Ve.cap=Math.max(Ve.cap,Ve.baseline+de),Ve.ex=Math.max(Ve.ex,Ve.baseline+ee)}Ve.baseline-=Be,Ve.cap-=Be,Ve.ex-=Be,Be+=Ve.lineHeight});let Fe=0,Oe=0;if(D&&(typeof D=="number"?Fe=-D:typeof D=="string"&&(Fe=-ue*(D==="left"?0:D==="center"?.5:D==="right"?1:c(D)))),F&&(typeof F=="number"?Oe=-F:typeof F=="string"&&(Oe=F==="top"?0:F==="top-baseline"?-Ae[0].baseline:F==="top-cap"?-Ae[0].cap:F==="top-ex"?-Ae[0].ex:F==="middle"?Be/2:F==="bottom"?Be:F==="bottom-baseline"?-Ae[Ae.length-1].baseline:c(F)*Be)),!G){const Ve=t.getEmbeddingLevels(m,R);q=new Uint16Array(ge),Z=new Uint8Array(ge),oe=new Float32Array(ge*2),pe={},ce=[1/0,1/0,-1/0,-1/0],te=[],V&&(me=new Float32Array(m.length*4)),Y&&(be=new Uint8Array(ge*3));let Se=0,We=-1,Re=-1,le,de;if(Ae.forEach((ee,he)=>{let{count:Pe,width:ye}=ee;if(Pe>0){let De=0;for(let at=Pe;at--&&ee.glyphAt(at).glyphObj.isWhitespace;)De++;let Me=0,qe=0;if(L==="center")Me=(ue-ye)/2;else if(L==="right")Me=ue-ye;else if(L==="justify"&&ee.isSoftWrapped){let at=0;for(let ct=Pe-De;ct--;)ee.glyphAt(ct).glyphObj.isWhitespace&&at++;qe=(ue-ye)/at}if(qe||Me){let at=0;for(let ct=0;ct<Pe;ct++){let xt=ee.glyphAt(ct);const _t=xt.glyphObj;xt.x+=Me+at,qe!==0&&_t.isWhitespace&&ct<Pe-De&&(at+=qe,xt.width+=qe)}}const ke=t.getReorderSegments(m,Ve,ee.glyphAt(0).charIndex,ee.glyphAt(ee.count-1).charIndex);for(let at=0;at<ke.length;at++){const[ct,xt]=ke[at];let _t=1/0,vt=-1/0;for(let Bt=0;Bt<Pe;Bt++)if(ee.glyphAt(Bt).charIndex>=ct){let qt=Bt,Wt=Bt;for(;Wt<Pe;Wt++){let tr=ee.glyphAt(Wt);if(tr.charIndex>xt)break;Wt<Pe-De&&(_t=Math.min(_t,tr.x),vt=Math.max(vt,tr.x+tr.width))}for(let tr=qt;tr<Wt;tr++){const Jt=ee.glyphAt(tr);Jt.x=vt-(Jt.x+Jt.width-_t)}break}}let Ye;const dt=at=>Ye=at;for(let at=0;at<Pe;at++){const ct=ee.glyphAt(at);Ye=ct.glyphObj;const xt=Ye.index,_t=Ve.levels[ct.charIndex]&1;if(_t){const vt=t.getMirroredCharacter(m[ct.charIndex]);vt&&ct.fontData.fontObj.forEachGlyph(vt,0,0,dt)}if(V){const{charIndex:vt,fontData:Bt}=ct,qt=ct.x+Fe,Wt=ct.x+ct.width+Fe;me[vt*4]=_t?Wt:qt,me[vt*4+1]=_t?qt:Wt,me[vt*4+2]=ee.baseline+Bt.caretBottom+Oe,me[vt*4+3]=ee.baseline+Bt.caretTop+Oe;const tr=vt-We;tr>1&&d(me,We,tr),We=vt}if(Y){const{charIndex:vt}=ct;for(;vt>Re;)Re++,Y.hasOwnProperty(Re)&&(de=Y[Re])}if(!Ye.isWhitespace&&!Ye.isEmpty){const vt=Se++,{fontSizeMult:Bt,src:qt,index:Wt}=ct.fontData,tr=pe[qt]||(pe[qt]={});tr[xt]||(tr[xt]={path:Ye.path,pathBounds:[Ye.xMin,Ye.yMin,Ye.xMax,Ye.yMax]});const Jt=ct.x+Fe,Lr=ct.y+ee.baseline+Oe;oe[vt*2]=Jt,oe[vt*2+1]=Lr;const Cr=Jt+Ye.xMin*Bt,dr=Lr+Ye.yMin*Bt,Mr=Jt+Ye.xMax*Bt,Dn=Lr+Ye.yMax*Bt;Cr<ce[0]&&(ce[0]=Cr),dr<ce[1]&&(ce[1]=dr),Mr>ce[2]&&(ce[2]=Mr),Dn>ce[3]&&(ce[3]=Dn),vt%W===0&&(le={start:vt,end:vt,rect:[1/0,1/0,-1/0,-1/0]},te.push(le)),le.end++;const Xr=le.rect;if(Cr<Xr[0]&&(Xr[0]=Cr),dr<Xr[1]&&(Xr[1]=dr),Mr>Xr[2]&&(Xr[2]=Mr),Dn>Xr[3]&&(Xr[3]=Dn),q[vt]=xt,Z[vt]=Wt,Y){const ei=vt*3;be[ei]=de>>16&255,be[ei+1]=de>>8&255,be[ei+2]=de&255}}}}}),me){const ee=m.length-We;ee>1&&d(me,We,ee)}}const Je=[];Le.forEach(({index:Ve,src:Se,unitsPerEm:We,ascender:Re,descender:le,lineHeight:de,capHeight:ee,xHeight:he})=>{Je[Ve]={src:Se,unitsPerEm:We,ascender:Re,descender:le,lineHeight:de,capHeight:ee,xHeight:he}}),I.typesetting=p()-we,J({glyphIds:q,glyphFontIndices:Z,glyphPositions:oe,glyphData:pe,fontData:Je,caretPositions:me,glyphColors:be,chunkedBounds:te,fontSize:_,topBaseline:Oe+Ae[0].baseline,blockBounds:[Fe,Oe-Be,Fe+ue,Oe],visibleBounds:ce,timings:I})})}function l(m,y){u({...m,metricsOnly:!0},v=>{const[g,_,x,b]=v.blockBounds;y({width:x-g,height:b-_})})}function c(m){let y=m.match(/^([\d.]+)%$/),v=y?parseFloat(y[1]):NaN;return isNaN(v)?0:v/100}function d(m,y,v){const g=m[y*4],_=m[y*4+1],x=m[y*4+2],b=m[y*4+3],S=(_-g)/v;for(let T=0;T<v;T++){const M=(y+T)*4;m[M]=g+S*T,m[M+1]=g+S*(T+1),m[M+2]=x,m[M+3]=b}}function p(){return(self.performance||Date).now()}function f(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return f.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(m){let y=f.flyweight;return y.data=this.data,y.index=m,y},splitAt(m){let y=new f;return y.data=this.data.splice(m*h.length),y}},f.flyweight=h.reduce((m,y,v,g)=>(Object.defineProperty(m,y,{get(){return this.data[this.index*h.length+v]},set(_){this.data[this.index*h.length+v]=_}}),m),{data:null,index:0}),{typeset:u,measure:l}}const lc=()=>(self.performance||Date).now(),l1=eD();let uR;function UW(i,t,n,r,s,o,a,u,l,c,d=!0){return d?GW(i,t,n,r,s,o,a,u,l,c).then(null,p=>(uR||(console.warn("WebGL SDF generation failed, falling back to JS",p),uR=!0),fR(i,t,n,r,s,o,a,u,l,c))):fR(i,t,n,r,s,o,a,u,l,c)}const My=[],NW=5;let aw=0;function rD(){const i=lc();for(;My.length&&lc()-i<NW;)My.shift()();aw=My.length?setTimeout(rD,0):0}const GW=(...i)=>new Promise((t,n)=>{My.push(()=>{const r=lc();try{l1.webgl.generateIntoCanvas(...i),t({timing:lc()-r})}catch(s){n(s)}}),aw||(aw=setTimeout(rD,0))}),HW=4,zW=2e3,cR={};let VW=0;function fR(i,t,n,r,s,o,a,u,l,c){const d="TroikaTextSDFGenerator_JS_"+VW++%HW;let p=cR[d];return p||(p=cR[d]={workerModule:yd({name:d,workerId:d,dependencies:[eD,lc],init(f,h){const m=f().javascript.generate;return function(...y){const v=h();return{textureData:m(...y),timing:h()-v}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(i,t,n,r,s,o).then(({textureData:f,timing:h})=>{const m=lc(),y=new Uint8Array(f.length*4);for(let v=0;v<f.length;v++)y[v*4+c]=f[v];return l1.webglUtils.renderImageData(a,y,u,l,i,t,1<<3-c),h+=lc()-m,--p.requests===0&&(p.idleTimer=setTimeout(()=>{bW(d)},zW)),{timing:h}})}function WW(i){i._warm||(l1.webgl.isSupported(i),i._warm=!0)}const XW=l1.webglUtils.resizeWebGLCanvasWithoutClearing,Sh={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},YW=new wt;function pf(){return(self.performance||Date).now()}const dR=Object.create(null);function nD(i,t){i=KW({},i);const n=pf(),r=[];if(i.font&&r.push({label:"user",src:QW(i.font)}),i.font=r,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Sh.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Sh.unicodeFontsURL,i.colorRanges!=null){let f={};for(let h in i.colorRanges)if(i.colorRanges.hasOwnProperty(h)){let m=i.colorRanges[h];typeof m!="number"&&(m=YW.set(m).getHex()),f[h]=m}i.colorRanges=f}Object.freeze(i);const{textureWidth:s,sdfExponent:o}=Sh,{sdfGlyphSize:a}=i,u=s/a*4;let l=dR[a];if(!l){const f=document.createElement("canvas");f.width=s,f.height=a*256/u,l=dR[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:f,sdfTexture:new Qr(f,void 0,void 0,void 0,sn,sn),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,qW(l)}const{sdfTexture:c,sdfCanvas:d}=l;oD(i).then(f=>{const{glyphIds:h,glyphFontIndices:m,fontData:y,glyphPositions:v,fontSize:g,timings:_}=f,x=[],b=new Float32Array(h.length*4);let S=0,T=0;const M=pf(),R=y.map(D=>{let F=l.glyphsByFont.get(D.src);return F||l.glyphsByFont.set(D.src,F=new Map),F});h.forEach((D,F)=>{const G=m[F],{src:z,unitsPerEm:Q}=y[G];let V=R[G].get(D);if(!V){const{path:I,pathBounds:O}=f.glyphData[z][D],H=Math.max(O[2]-O[0],O[3]-O[1])/a*(Sh.sdfMargin*a+.5),q=l.glyphCount++,Z=[O[0]-H,O[1]-H,O[2]+H,O[3]+H];R[G].set(D,V={path:I,atlasIndex:q,sdfViewBox:Z}),x.push(V)}const{sdfViewBox:W}=V,Y=v[T++],J=v[T++],ie=g/Q;b[S++]=Y+W[0]*ie,b[S++]=J+W[1]*ie,b[S++]=Y+W[2]*ie,b[S++]=J+W[3]*ie,h[F]=V.atlasIndex}),_.quads=(_.quads||0)+(pf()-M);const L=pf();_.sdf={};const P=d.height,C=Math.ceil(l.glyphCount/u),k=Math.pow(2,Math.ceil(Math.log2(C*a)));k>P&&(console.info(`Increasing SDF texture size ${P}->${k}`),XW(d,s,k),c.dispose()),Promise.all(x.map(D=>iD(D,l,i.gpuAccelerateSDF).then(({timing:F})=>{_.sdf[D.atlasIndex]=F}))).then(()=>{x.length&&!l.contextLost&&(sD(l),c.needsUpdate=!0),_.sdfTotal=pf()-L,_.total=pf()-n,t(Object.freeze({parameters:i,sdfTexture:c,sdfGlyphSize:a,sdfExponent:o,glyphBounds:b,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{l.contextLost||WW(d)})}function iD({path:i,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:s,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:l}=Sh,c=Math.max(n[2]-n[0],n[3]-n[1]),d=Math.floor(t/4),p=d%(u/r)*r,f=Math.floor(d/(u/r))*r,h=t%4;return UW(r,r,i,n,c,l,s,p,f,h,a)}function qW(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),i.contextLost=!1;const r=[];i.glyphsByFont.forEach(s=>{s.forEach(o=>{r.push(iD(o,i,!0))})}),Promise.all(r).then(()=>{sD(i),i.sdfTexture.needsUpdate=!0})})}function JW({font:i,characters:t,sdfGlyphSize:n},r){let s=Array.isArray(t)?t.join(`
`):""+t;nD({font:i,sdfGlyphSize:n,text:s},r)}function KW(i,t){for(let n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}let ny;function QW(i){return ny||(ny=typeof document>"u"?{}:document.createElement("a")),ny.href=i,ny.href}function sD(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=i,{width:r,height:s}=t,o=i.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==r*s*4)&&(a=new Uint8Array(r*s*4),n.image={width:r,height:s,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,s,o.RGBA,o.UNSIGNED_BYTE,a)}}const ZW=yd({name:"Typesetter",dependencies:[FW,BW,SW],init(i,t,n){return i(t,n())}}),oD=yd({name:"Typesetter",dependencies:[ZW],init(i){return function(t){return new Promise(n=>{i.typeset(t,n)})}},getTransferables(i){const t=[];for(let n in i)i[n]&&i[n].buffer&&t.push(i[n].buffer);return t}});oD.onMainThread;const hR={};function $W(i){let t=hR[i];return t||(t=hR[i]=new rl(1,1,i,i).translate(.5,.5,0)),t}const eX="aTroikaGlyphBounds",pR="aTroikaGlyphIndex",tX="aTroikaGlyphColor";class rX extends YS{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Qn,this.boundingBox=new Hn}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let n=$W(t);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,n,r,s,o){this.updateAttributeData(eX,t,4),this.updateAttributeData(pR,n,1),this.updateAttributeData(tX,o,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:s,floor:o,min:a,max:u,sin:l,cos:c}=Math,d=s/2,p=s*2,f=Math.abs(n),h=t[0]/f,m=t[2]/f,y=o((h+d)/p)!==o((m+d)/p)?-f:a(l(h)*f,l(m)*f),v=o((h-d)/p)!==o((m-d)/p)?f:u(l(h)*f,l(m)*f),g=o((h+s)/p)!==o((m+s)/p)?f*2:u(f-c(h)*f,f-c(m)*f);r.min.set(y,t[1],n<0?-g:0),r.max.set(v,t[3],n<0?0:g)}else r.min.set(t[0],t[1],0),r.max.set(t[2],t[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let n=this.getAttribute(pR).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){n=r[s].end;let o=r[s].rect;if(o[1]<t.w&&o[3]>t.y&&o[0]<t.z&&o[2]>t.x)break}this.instanceCount=n}updateAttributeData(t,n,r){const s=this.getAttribute(t);n?s&&s.array.length===n.length?(s.array.set(n),s.needsUpdate=!0):(this.setAttribute(t,new Ka(n,r)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(t)}}const nX=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,iX=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,sX=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,oX=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function aX(i){const t=ow(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new mt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new _r(0,0,0,0)},uTroikaClipRect:{value:new _r(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new mt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new wt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new cr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nX,vertexTransform:iX,fragmentDefs:sX,fragmentColorTransform:oX,customRewriter({vertexShader:n,fragmentShader:r}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(r)&&(r=r.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(n)||(n=n.replace(tD,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const _2=new Jn({color:16777215,side:Is,transparent:!0}),mR=8421504,gR=new Gt,iy=new Ce,Tx=new Ce,ph=[],lX=new Ce,Cx="+x+y";function yR(i){return Array.isArray(i)?i[0]:i}let aD=()=>{const i=new dn(new rl(1,1),_2);return aD=()=>i,i},lD=()=>{const i=new dn(new rl(1,1,32,1),_2);return lD=()=>i,i};const uX={type:"syncstart"},cX={type:"synccomplete"},uD=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],fX=uD.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let cD=class extends dn{constructor(){const t=new rX;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=mR,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Cx,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(uX),nD({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(s=>s&&s())})),this.dispatchEvent(cX),t&&t()})))}onBeforeRender(t,n,r,s,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return aX(t)}get material(){let t=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=_2.clone());if((!t||!t.isDerivedFrom(n))&&(t=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),t.dispose()})),this.hasOutline()){let r=t._outlineMtl;return r||(r=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,t.addEventListener("dispose",function s(){t.removeEventListener("dispose",s),r.dispose()})),[r,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return yR(this.material).getDepthMaterial()}get customDistanceMaterial(){return yR(this.material).getDistanceMaterial()}_prepareForRender(t){const n=t.isTextOutlineMaterial,r=t.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:l}=s;r.uTroikaSDFTexture.value=u,r.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),r.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,r.uTroikaSDFExponent.value=s.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!s.glyphColors;let c=0,d=0,p=0,f,h,m,y=0,v=0;if(n){let{outlineWidth:_,outlineOffsetX:x,outlineOffsetY:b,outlineBlur:S,outlineOpacity:T}=this;c=this._parsePercent(_)||0,d=Math.max(0,this._parsePercent(S)||0),f=T,y=this._parsePercent(x)||0,v=this._parsePercent(b)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(m=this.strokeColor,r.uTroikaStrokeColor.value.set(m??mR),h=this.strokeOpacity,h==null&&(h=1)),f=this.fillOpacity;r.uTroikaEdgeOffset.value=c,r.uTroikaPositionOffset.value.set(y,v),r.uTroikaBlurRadius.value=d,r.uTroikaStrokeWidth.value=p,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=f??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let g=this.clipRect;if(g&&Array.isArray(g)&&g.length===4)r.uTroikaClipRect.value.fromArray(g);else{const _=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-_,l[1]-_,l[2]+_,l[3]+_)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const o=n?this.outlineColor||0:this.color;if(o==null)delete t.color;else{const u=t.hasOwnProperty("color")?t.color:t.color=new wt;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let a=this.orientation||Cx;if(a!==t._orientation){let u=r.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let l=a!==Cx&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,d,p,f]=l;iy.set(0,0,0)[d]=c==="-"?1:-1,Tx.set(0,0,0)[f]=p==="-"?-1:1,gR.lookAt(lX,iy.cross(Tx),Tx),u.setFromMatrix4(gR)}else u.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let n=t.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;t=(isNaN(r)?0:r/100)*this.fontSize}return t}localPositionToTextCoords(t,n=new mt){n.copy(t);const r=this.curveRadius;return r&&(n.x=Math.atan2(t.x,Math.abs(r)-Math.abs(t.z))*Math.abs(r)),n}worldPositionToTextCoords(t,n=new mt){return iy.copy(t),this.localPositionToTextCoords(this.worldToLocal(iy),n)}raycast(t,n){const{textRenderInfo:r,curveRadius:s}=this;if(r){const o=r.blockBounds,a=s?lD():aD(),u=a.geometry,{position:l,uv:c}=u.attributes;for(let d=0;d<c.count;d++){let p=o[0]+c.getX(d)*(o[2]-o[0]);const f=o[1]+c.getY(d)*(o[3]-o[1]);let h=0;s&&(h=s-Math.cos(p/s)*s,p=Math.sin(p/s)*s),l.setXYZ(d,p,f,h)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,ph.length=0,a.raycast(t,ph);for(let d=0;d<ph.length;d++)ph[d].object=this,n.push(ph[d])}}copy(t){const n=this.geometry;return super.copy(t),this.geometry=n,fX.forEach(r=>{this[r]=t[r]}),this}clone(){return new this.constructor().copy(this)}};uD.forEach(i=>{const t="_private_"+i;Object.defineProperty(cD.prototype,i,{get(){return this[t]},set(n){n!==this[t]&&(this[t]=n,this._needsSync=!0)}})});new Hn;new wt;const dX=Qe.forwardRef(({sdfGlyphSize:i=64,anchorX:t="center",anchorY:n="middle",font:r,fontSize:s=1,children:o,characters:a,onSync:u,...l},c)=>{const d=eo(({invalidate:m})=>m),[p]=Qe.useState(()=>new cD),[f,h]=Qe.useMemo(()=>{const m=[];let y="";return Qe.Children.forEach(o,v=>{typeof v=="string"||typeof v=="number"?y+=v:m.push(v)}),[m,y]},[o]);return YL(()=>new Promise(m=>JW({font:r,characters:a},m)),["troika-text",r,a]),Qe.useLayoutEffect(()=>void p.sync(()=>{d(),u&&u(p)})),Qe.useEffect(()=>()=>p.dispose(),[p]),Qe.createElement("primitive",$y({object:p,ref:c,font:r,text:h,anchorX:t,anchorY:n,fontSize:s,sdfGlyphSize:i},l),f)});let sy=null,fD="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function dD(i=!0,t=!0,n){return r=>{n&&n(r),i&&(sy||(sy=new mW),sy.setDecoderPath(typeof i=="string"?i:fD),r.setDRACOLoader(sy)),t&&r.setMeshoptDecoder(typeof Mx=="function"?Mx():Mx)}}const vd=(i,t,n,r)=>gd(v2,i,dD(t,n,r));vd.preload=(i,t,n,r)=>gd.preload(v2,i,dD(t,n,r));vd.clear=i=>gd.clear(v2,i);vd.setDecoderPath=i=>{fD=i};const hX=Qe.forwardRef(({makeDefault:i,camera:t,regress:n,domElement:r,enableDamping:s=!0,keyEvents:o=!1,onChange:a,onStart:u,onEnd:l,...c},d)=>{const p=eo(T=>T.invalidate),f=eo(T=>T.camera),h=eo(T=>T.gl),m=eo(T=>T.events),y=eo(T=>T.setEvents),v=eo(T=>T.set),g=eo(T=>T.get),_=eo(T=>T.performance),x=t||f,b=r||m.connected||h.domElement,S=Qe.useMemo(()=>new j7(x),[x]);return e1(()=>{S.enabled&&S.update()},-1),Qe.useEffect(()=>(o&&S.connect(o===!0?b:o),S.connect(b),()=>void S.dispose()),[o,b,n,S,p]),Qe.useEffect(()=>{const T=L=>{p(),n&&_.regress(),a&&a(L)},M=L=>{u&&u(L)},R=L=>{l&&l(L)};return S.addEventListener("change",T),S.addEventListener("start",M),S.addEventListener("end",R),()=>{S.removeEventListener("start",M),S.removeEventListener("end",R),S.removeEventListener("change",T)}},[a,u,l,S,p,y]),Qe.useEffect(()=>{if(i){const T=g().controls;return v({controls:S}),()=>v({controls:T})}},[i,S]),Qe.createElement("primitive",$y({ref:d,object:S,enableDamping:s},c))});var hD={exports:{}},pX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mX=pX,gX=mX;function pD(){}function mD(){}mD.resetWarningCache=pD;var yX=function(){function i(r,s,o,a,u,l){if(l!==gX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}i.isRequired=i;function t(){return i}var n={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:t,element:i,elementType:i,instanceOf:t,node:i,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:mD,resetWarningCache:pD};return n.PropTypes=n,n};hD.exports=yX();var vX=hD.exports;const jo=pw(vX);var Qs=function(i){return i[i.NONE=0]="NONE",i[i.START=1]="START",i[i.ACTIVE=2]="ACTIVE",i}(Qs||{});const mf=i=>i&&i.isOrthographicCamera,_X=i=>i&&i.isBox3,xX=i=>1-Math.exp(-5*i)+.007*i,bX=Qe.createContext(null);function wX({children:i,maxDuration:t=1,margin:n=1.2,observe:r,fit:s,clip:o,interpolateFunc:a=xX,onFit:u}){const l=Qe.useRef(null),{camera:c,size:d,invalidate:p}=eo(),f=eo(S=>S.controls),h=Qe.useRef(u);h.current=u;const m=Qe.useRef({camPos:new Ce,camRot:new Yr,camZoom:1}),y=Qe.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),v=Qe.useRef(Qs.NONE),g=Qe.useRef(0),[_]=Qe.useState(()=>new Hn),x=Qe.useMemo(()=>{function S(){const T=_.getSize(new Ce),M=_.getCenter(new Ce),R=Math.max(T.x,T.y,T.z),L=mf(c)?R*4:R/(2*Math.atan(Math.PI*c.fov/360)),P=mf(c)?R*4:L/c.aspect,C=n*Math.max(L,P);return{box:_,size:T,center:M,distance:C}}return{getSize:S,refresh(T){if(_X(T))_.copy(T);else{const M=T||l.current;if(!M)return this;M.updateWorldMatrix(!0,!0),_.setFromObject(M)}if(_.isEmpty()){const M=c.position.length()||10;_.setFromCenterAndSize(new Ce,new Ce(M,M,M))}return m.current.camPos.copy(c.position),m.current.camRot.copy(c.quaternion),mf(c)&&(m.current.camZoom=c.zoom),y.current.camPos=void 0,y.current.camRot=void 0,y.current.camZoom=void 0,y.current.camUp=void 0,y.current.target=void 0,this},reset(){const{center:T,distance:M}=S(),R=c.position.clone().sub(T).normalize();y.current.camPos=T.clone().addScaledVector(R,M),y.current.target=T.clone();const L=new Gt().lookAt(y.current.camPos,y.current.target,c.up);return y.current.camRot=new Yr().setFromRotationMatrix(L),v.current=Qs.START,g.current=0,this},moveTo(T){return y.current.camPos=Array.isArray(T)?new Ce(...T):T.clone(),v.current=Qs.START,g.current=0,this},lookAt({target:T,up:M}){y.current.target=Array.isArray(T)?new Ce(...T):T.clone(),M?y.current.camUp=Array.isArray(M)?new Ce(...M):M.clone():y.current.camUp=c.up.clone();const R=new Gt().lookAt(y.current.camPos||c.position,y.current.target,y.current.camUp);return y.current.camRot=new Yr().setFromRotationMatrix(R),v.current=Qs.START,g.current=0,this},to({position:T,target:M}){return this.moveTo(T).lookAt({target:M})},fit(){if(!mf(c))return this.reset();let T=0,M=0;const R=[new Ce(_.min.x,_.min.y,_.min.z),new Ce(_.min.x,_.max.y,_.min.z),new Ce(_.min.x,_.min.y,_.max.z),new Ce(_.min.x,_.max.y,_.max.z),new Ce(_.max.x,_.max.y,_.max.z),new Ce(_.max.x,_.max.y,_.min.z),new Ce(_.max.x,_.min.y,_.max.z),new Ce(_.max.x,_.min.y,_.min.z)],L=y.current.camPos||c.position,P=y.current.target||(f==null?void 0:f.target),C=y.current.camUp||c.up,k=P?new Gt().lookAt(L,P,C).setPosition(L).invert():c.matrixWorldInverse;for(const G of R)G.applyMatrix4(k),T=Math.max(T,Math.abs(G.y)),M=Math.max(M,Math.abs(G.x));T*=2,M*=2;const D=(c.top-c.bottom)/T,F=(c.right-c.left)/M;return y.current.camZoom=Math.min(D,F)/n,v.current=Qs.START,g.current=0,h.current&&h.current(this.getSize()),this},clip(){const{distance:T}=S();return c.near=T/100,c.far=T*100,c.updateProjectionMatrix(),f&&(f.maxDistance=T*10,f.update()),p(),this}}},[_,c,f,n,p]);Qe.useLayoutEffect(()=>{if(f){const S=()=>{if(f&&y.current.target&&v.current!==Qs.NONE){const T=new Ce().setFromMatrixColumn(c.matrix,2),M=m.current.camPos.distanceTo(f.target),R=(y.current.camPos||m.current.camPos).distanceTo(y.current.target),L=(1-g.current)*M+g.current*R;f.target.copy(c.position).addScaledVector(T,-L),f.update()}v.current=Qs.NONE};return f.addEventListener("start",S),()=>f.removeEventListener("start",S)}},[f]);const b=Qe.useRef(0);return Qe.useLayoutEffect(()=>{(r||b.current++===0)&&(x.refresh(),s&&x.reset().fit(),o&&x.clip())},[d,o,s,r,c,f]),e1((S,T)=>{if(v.current===Qs.START)v.current=Qs.ACTIVE,p();else if(v.current===Qs.ACTIVE){if(g.current+=T/t,g.current>=1)y.current.camPos&&c.position.copy(y.current.camPos),y.current.camRot&&c.quaternion.copy(y.current.camRot),y.current.camUp&&c.up.copy(y.current.camUp),y.current.camZoom&&mf(c)&&(c.zoom=y.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),f&&y.current.target&&(f.target.copy(y.current.target),f.update()),v.current=Qs.NONE;else{const M=a(g.current);y.current.camPos&&c.position.lerpVectors(m.current.camPos,y.current.camPos,M),y.current.camRot&&c.quaternion.slerpQuaternions(m.current.camRot,y.current.camRot,M),y.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),y.current.camZoom&&mf(c)&&(c.zoom=(1-M)*m.current.camZoom+M*y.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}p()}}),Qe.createElement("group",{ref:l},Qe.createElement(bX.Provider,{value:x},i))}function vR(i,t){if(t===SS)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===_c||t===Wp){let n=i.getIndex();if(n===null){const a=[],u=i.getAttribute("position");if(u!==void 0){for(let l=0;l<u.count;l++)a.push(l);i.setIndex(a),n=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=n.count-2,s=[];if(t===_c)for(let a=1;a<=r;a++)s.push(n.getX(0)),s.push(n.getX(a)),s.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(s.push(n.getX(a)),s.push(n.getX(a+1)),s.push(n.getX(a+2))):(s.push(n.getX(a+2)),s.push(n.getX(a+1)),s.push(n.getX(a)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=i.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}class SX extends bi{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new CX(n)}),this.register(function(n){return new RX(n)}),this.register(function(n){return new FX(n)}),this.register(function(n){return new UX(n)}),this.register(function(n){return new NX(n)}),this.register(function(n){return new IX(n)}),this.register(function(n){return new LX(n)}),this.register(function(n){return new jX(n)}),this.register(function(n){return new DX(n)}),this.register(function(n){return new TX(n)}),this.register(function(n){return new kX(n)}),this.register(function(n){return new PX(n)}),this.register(function(n){return new BX(n)}),this.register(function(n){return new OX(n)}),this.register(function(n){return new MX(n)}),this.register(function(n){return new GX(n)}),this.register(function(n){return new HX(n)})}load(t,n,r,s){const o=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=ks.extractUrlBase(t);a=ks.resolveURL(c,this.path)}else a=ks.extractUrlBase(t);this.manager.itemStart(t);const u=function(c){s?s(c):console.error(c),o.manager.itemError(t),o.manager.itemEnd(t)},l=new es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{o.parse(c,a,function(d){n(d),o.manager.itemEnd(t)},u)}catch(d){u(d)}},r,u)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,r,s){let o;const a={},u={},l=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===gD){try{a[Sr.KHR_BINARY_GLTF]=new zX(t)}catch(p){s&&s(p);return}o=JSON.parse(a[Sr.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new rY(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const p=this.pluginCallbacks[d](c);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),u[p.name]=p,a[p.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){const p=o.extensionsUsed[d],f=o.extensionsRequired||[];switch(p){case Sr.KHR_MATERIALS_UNLIT:a[p]=new EX;break;case Sr.KHR_DRACO_MESH_COMPRESSION:a[p]=new VX(o,this.dracoLoader);break;case Sr.KHR_TEXTURE_TRANSFORM:a[p]=new WX;break;case Sr.KHR_MESH_QUANTIZATION:a[p]=new XX;break;default:f.indexOf(p)>=0&&u[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}c.setExtensions(a),c.setPlugins(u),c.parse(r,s)}parseAsync(t,n){const r=this;return new Promise(function(s,o){r.parse(t,n,s,o)})}}function AX(){let i={};return{get:function(t){return i[t]},add:function(t,n){i[t]=n},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Sr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class MX{constructor(t){this.parser=t,this.name=Sr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,r="light:"+t;let s=n.cache.get(r);if(s)return s;const o=n.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let c;const d=new wt(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],fi);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Z0(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Q0(d),c.distance=p;break;case"spot":c=new K0(d),c.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,La(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+t),s=Promise.resolve(c),n.cache.add(r,s),s}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,r=this.parser,o=r.json.nodes[t],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(l){return r._getNodeRef(n.cache,u,l)})}}class EX{constructor(){this.name=Sr.KHR_MATERIALS_UNLIT}getMaterialType(){return Jn}extendParams(t,n,r){const s=[];t.color=new wt(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const a=o.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],fi),t.opacity=a[3]}o.baseColorTexture!==void 0&&s.push(r.assignTexture(t,"map",o.baseColorTexture,yi))}return Promise.all(s)}}class TX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class CX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const u=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new mt(u,u)}return Promise.all(o)}}class RX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_DISPERSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}}class PX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(o)}}class IX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_SHEEN}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new wt(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const u=a.sheenColorFactor;n.sheenColor.setRGB(u[0],u[1],u[2],fi)}return a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&o.push(r.assignTexture(n,"sheenColorMap",a.sheenColorTexture,yi)),a.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class LX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&o.push(r.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(o)}}class jX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_VOLUME}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&o.push(r.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const u=a.attenuationColor||[1,1,1];return n.attenuationColor=new wt().setRGB(u[0],u[1],u[2],fi),Promise.all(o)}}class DX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_IOR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class kX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_SPECULAR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&o.push(r.assignTexture(n,"specularIntensityMap",a.specularTexture));const u=a.specularColorFactor||[1,1,1];return n.specularColor=new wt().setRGB(u[0],u[1],u[2],fi),a.specularColorTexture!==void 0&&o.push(r.assignTexture(n,"specularColorMap",a.specularColorTexture,yi)),Promise.all(o)}}class OX{constructor(t){this.parser=t,this.name=Sr.EXT_MATERIALS_BUMP}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return n.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&o.push(r.assignTexture(n,"bumpMap",a.bumpTexture)),Promise.all(o)}}class BX{constructor(t){this.parser=t,this.name=Sr.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Cn}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&o.push(r.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(o)}}class FX{constructor(t){this.parser=t,this.name=Sr.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,a)}}class UX{constructor(t){this.parser=t,this.name=Sr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],u=s.images[a.source];let l=r.textureLoader;if(u.uri){const c=r.options.manager.getHandler(u.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(t,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class NX{constructor(t){this.parser=t,this.name=Sr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],u=s.images[a.source];let l=r.textureLoader;if(u.uri){const c=r.options.manager.getHandler(u.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(t,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class GX{constructor(t){this.name=Sr.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,r=n.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const l=s.byteOffset||0,c=s.byteLength||0,d=s.count,p=s.byteStride,f=new Uint8Array(u,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,p,f,s.mode,s.filter).then(function(h){return h.buffer}):a.ready.then(function(){const h=new ArrayBuffer(d*p);return a.decodeGltfBuffer(new Uint8Array(h),d,p,f,s.mode,s.filter),h})})}else return null}}class HX{constructor(t){this.name=Sr.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,r=n.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=n.meshes[r.mesh];for(const c of s.primitives)if(c.mode!==$s.TRIANGLES&&c.mode!==$s.TRIANGLE_STRIP&&c.mode!==$s.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=r.extensions[this.name].attributes,u=[],l={};for(const c in a)u.push(this.parser.getDependency("accessor",a[c]).then(d=>(l[c]=d,l[c])));return u.length<1?null:(u.push(this.parser.createNodeMesh(t)),Promise.all(u).then(c=>{const d=c.pop(),p=d.isGroup?d.children:[d],f=c[0].count,h=[];for(const m of p){const y=new Gt,v=new Ce,g=new Yr,_=new Ce(1,1,1),x=new L0(m.geometry,m.material,f);for(let b=0;b<f;b++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,b),l.SCALE&&_.fromBufferAttribute(l.SCALE,b),x.setMatrixAt(b,y.compose(v,g,_));for(const b in l)if(b==="_COLOR_0"){const S=l[b];x.instanceColor=new Ka(S.array,S.itemSize,S.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&m.geometry.setAttribute(b,l[b]);br.prototype.copy.call(x,m),this.parser.assignFinalMaterial(x),h.push(x)}return d.isGroup?(d.clear(),d.add(...h),d):h[0]}))}}const gD="glTF",mh=12,_R={JSON:1313821514,BIN:5130562};class zX{constructor(t){this.name=Sr.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,mh),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==gD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-mh,o=new DataView(t,mh);let a=0;for(;a<s;){const u=o.getUint32(a,!0);a+=4;const l=o.getUint32(a,!0);if(a+=4,l===_R.JSON){const c=new Uint8Array(t,mh+a,u);this.content=r.decode(c)}else if(l===_R.BIN){const c=mh+a;this.body=t.slice(c,c+u)}a+=u}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class VX{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sr.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const r=this.json,s=this.dracoLoader,o=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,u={},l={},c={};for(const d in a){const p=lw[d]||d.toLowerCase();u[p]=a[d]}for(const d in t.attributes){const p=lw[d]||d.toLowerCase();if(a[d]!==void 0){const f=r.accessors[t.attributes[d]],h=Xf[f.componentType];c[p]=h.name,l[p]=f.normalized===!0}}return n.getDependency("bufferView",o).then(function(d){return new Promise(function(p,f){s.decodeDracoFile(d,function(h){for(const m in h.attributes){const y=h.attributes[m],v=l[m];v!==void 0&&(y.normalized=v)}p(h)},u,c,fi,f)})})}}class WX{constructor(){this.name=Sr.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class XX{constructor(){this.name=Sr.KHR_MESH_QUANTIZATION}}class yD extends Ic{constructor(t,n,r,s){super(t,n,r,s)}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=t*s*3+s;for(let a=0;a!==s;a++)n[a]=r[o+a];return n}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,u=this.valueSize,l=u*2,c=u*3,d=s-n,p=(r-n)/d,f=p*p,h=f*p,m=t*c,y=m-c,v=-2*h+3*f,g=h-f,_=1-v,x=g-f+p;for(let b=0;b!==u;b++){const S=a[y+b+u],T=a[y+b+l]*d,M=a[m+b+u],R=a[m+b]*d;o[b]=_*S+x*T+v*M+g*R}return o}}const YX=new Yr;class qX extends yD{interpolate_(t,n,r,s){const o=super.interpolate_(t,n,r,s);return YX.fromArray(o).normalize().toArray(o),o}}const $s={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Xf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xR={9728:Nn,9729:sn,9984:zp,9985:nc,9986:kl,9987:gs},bR={33071:ms,33648:mc,10497:Uo},Rx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},El={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},JX={CUBICSPLINE:void 0,LINEAR:Ql,STEP:vc},Px={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function KX(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Pc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fo})),i.DefaultMaterial}function ku(i,t,n){for(const r in n.extensions)i[r]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function La(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function QX(i,t,n){let r=!1,s=!1,o=!1;for(let c=0,d=t.length;c<d;c++){const p=t[c];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(s=!0),p.COLOR_0!==void 0&&(o=!0),r&&s&&o)break}if(!r&&!s&&!o)return Promise.resolve(i);const a=[],u=[],l=[];for(let c=0,d=t.length;c<d;c++){const p=t[c];if(r){const f=p.POSITION!==void 0?n.getDependency("accessor",p.POSITION):i.attributes.position;a.push(f)}if(s){const f=p.NORMAL!==void 0?n.getDependency("accessor",p.NORMAL):i.attributes.normal;u.push(f)}if(o){const f=p.COLOR_0!==void 0?n.getDependency("accessor",p.COLOR_0):i.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(u),Promise.all(l)]).then(function(c){const d=c[0],p=c[1],f=c[2];return r&&(i.morphAttributes.position=d),s&&(i.morphAttributes.normal=p),o&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}function ZX(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let n=0,r=t.weights.length;n<r;n++)i.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(i.morphTargetInfluences.length===n.length){i.morphTargetDictionary={};for(let r=0,s=n.length;r<s;r++)i.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $X(i){let t;const n=i.extensions&&i.extensions[Sr.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Ix(n.attributes):t=i.indices+":"+Ix(i.attributes)+":"+i.mode,i.targets!==void 0)for(let r=0,s=i.targets.length;r<s;r++)t+=":"+Ix(i.targets[r]);return t}function Ix(i){let t="";const n=Object.keys(i).sort();for(let r=0,s=n.length;r<s;r++)t+=n[r]+":"+i[n[r]]+";";return t}function uw(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function eY(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const tY=new Gt;class rY{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new AX,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=-1,o=!1,a=-1;if(typeof navigator<"u"){const u=navigator.userAgent;r=/^((?!chrome|android).)*safari/i.test(u)===!0;const l=u.match(/Version\/(\d+)/);s=r&&l?parseInt(l[1],10):-1,o=u.indexOf("Firefox")>-1,a=o?u.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||r&&s<17||o&&a<98?this.textureLoader=new WS(this.options.manager):this.textureLoader=new qS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new es(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const r=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(a){const u={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:r,userData:{}};return ku(o,u,s),La(u,s),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(u)})).then(function(){for(const l of u.scenes)l.updateMatrixWorld();t(u)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let s=0,o=n.length;s<o;s++){const a=n[s].joints;for(let u=0,l=a.length;u<l;u++)t[a[u]].isBone=!0}for(let s=0,o=t.length;s<o;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(r[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,r){if(t.refs[n]<=1)return r;const s=r.clone(),o=(a,u)=>{const l=this.associations.get(a);l!=null&&this.associations.set(u,l);for(const[c,d]of a.children.entries())o(d,u.children[c])};return o(r,s),s.name+="_instance_"+t.uses[n]++,s}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const s=t(n[r]);if(s)return s}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let s=0;s<n.length;s++){const o=t(n[s]);o&&r.push(o)}return r}getDependency(t,n){const r=t+":"+n;let s=this.cache.get(r);if(!s){switch(t){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(r,s)}return s}getDependencies(t){let n=this.cache.get(t);if(!n){const r=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(o,a){return r.getDependency(t,a)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[Sr.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,a){r.load(ks.resolveURL(n.uri,s.path),o,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(r){const s=n.byteLength||0,o=n.byteOffset||0;return r.slice(o,o+s)})}loadAccessor(t){const n=this,r=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=Rx[s.type],u=Xf[s.componentType],l=s.normalized===!0,c=new u(s.count*a);return Promise.resolve(new Tr(c,a,l))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(a){const u=a[0],l=Rx[s.type],c=Xf[s.componentType],d=c.BYTES_PER_ELEMENT,p=d*l,f=s.byteOffset||0,h=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,m=s.normalized===!0;let y,v;if(h&&h!==p){const g=Math.floor(f/h),_="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+g+":"+s.count;let x=n.cache.get(_);x||(y=new c(u,g*h,s.count*h/d),x=new hd(y,h/d),n.cache.add(_,x)),v=new Ja(x,l,f%h/d,m)}else u===null?y=new c(s.count*l):y=new c(u,f,s.count*l),v=new Tr(y,l,m);if(s.sparse!==void 0){const g=Rx.SCALAR,_=Xf[s.sparse.indices.componentType],x=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,S=new _(a[1],x,s.sparse.count*g),T=new c(a[2],b,s.sparse.count*l);u!==null&&(v=new Tr(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let M=0,R=S.length;M<R;M++){const L=S[M];if(v.setX(L,T[M*l]),l>=2&&v.setY(L,T[M*l+1]),l>=3&&v.setZ(L,T[M*l+2]),l>=4&&v.setW(L,T[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=m}return v})}loadTexture(t){const n=this.json,r=this.options,o=n.textures[t].source,a=n.images[o];let u=this.textureLoader;if(a.uri){const l=r.manager.getHandler(a.uri);l!==null&&(u=l)}return this.loadTextureImage(t,o,u)}loadTextureImage(t,n,r){const s=this,o=this.json,a=o.textures[t],u=o.images[n],l=(u.uri||u.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(d){d.flipY=!1,d.name=a.name||u.name||"",d.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(d.name=u.uri);const f=(o.samplers||{})[a.sampler]||{};return d.magFilter=xR[f.magFilter]||sn,d.minFilter=xR[f.minFilter]||gs,d.wrapS=bR[f.wrapS]||Uo,d.wrapT=bR[f.wrapT]||Uo,s.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,n){const r=this,s=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(p=>p.clone());const a=s.images[t],u=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=r.getDependency("bufferView",a.bufferView).then(function(p){c=!0;const f=new Blob([p],{type:a.mimeType});return l=u.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(p){return new Promise(function(f,h){let m=f;n.isImageBitmapLoader===!0&&(m=function(y){const v=new Qr(y);v.needsUpdate=!0,f(v)}),n.load(ks.resolveURL(p,o.path),m,void 0,h)})}).then(function(p){return c===!0&&u.revokeObjectURL(l),La(p,a),p.userData.mimeType=a.mimeType||eY(a.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[t]=d,d}assignTexture(t,n,r,s){const o=this;return this.getDependency("texture",r.index).then(function(a){if(!a)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(a=a.clone(),a.channel=r.texCoord),o.extensions[Sr.KHR_TEXTURE_TRANSFORM]){const u=r.extensions!==void 0?r.extensions[Sr.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const l=o.associations.get(a);a=o.extensions[Sr.KHR_TEXTURE_TRANSFORM].extendTexture(a,u),o.associations.set(a,l)}}return s!==void 0&&(a.colorSpace=s),t[n]=a,a})}assignFinalMaterial(t){const n=t.geometry;let r=t.material;const s=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(t.isPoints){const u="PointsMaterial:"+r.uuid;let l=this.cache.get(u);l||(l=new Qp,Tn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(u,l)),r=l}else if(t.isLine){const u="LineBasicMaterial:"+r.uuid;let l=this.cache.get(u);l||(l=new xi,Tn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(u,l)),r=l}if(s||o||a){let u="ClonedMaterial:"+r.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:");let l=this.cache.get(u);l||(l=r.clone(),o&&(l.vertexColors=!0),a&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(u,l),this.associations.set(l,this.associations.get(r))),r=l}t.material=r}getMaterialType(){return Pc}loadMaterial(t){const n=this,r=this.json,s=this.extensions,o=r.materials[t];let a;const u={},l=o.extensions||{},c=[];if(l[Sr.KHR_MATERIALS_UNLIT]){const p=s[Sr.KHR_MATERIALS_UNLIT];a=p.getMaterialType(),c.push(p.extendParams(u,o,n))}else{const p=o.pbrMetallicRoughness||{};if(u.color=new wt(1,1,1),u.opacity=1,Array.isArray(p.baseColorFactor)){const f=p.baseColorFactor;u.color.setRGB(f[0],f[1],f[2],fi),u.opacity=f[3]}p.baseColorTexture!==void 0&&c.push(n.assignTexture(u,"map",p.baseColorTexture,yi)),u.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,u.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(u,"metalnessMap",p.metallicRoughnessTexture)),c.push(n.assignTexture(u,"roughnessMap",p.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(t,u)})))}o.doubleSided===!0&&(u.side=Is);const d=o.alphaMode||Px.OPAQUE;if(d===Px.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,d===Px.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&a!==Jn&&(c.push(n.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new mt(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;u.normalScale.set(p,p)}if(o.occlusionTexture!==void 0&&a!==Jn&&(c.push(n.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&a!==Jn){const p=o.emissiveFactor;u.emissive=new wt().setRGB(p[0],p[1],p[2],fi)}return o.emissiveTexture!==void 0&&a!==Jn&&c.push(n.assignTexture(u,"emissiveMap",o.emissiveTexture,yi)),Promise.all(c).then(function(){const p=new a(u);return o.name&&(p.name=o.name),La(p,o),n.associations.set(p,{materials:t}),o.extensions&&ku(s,p,o),p})}createUniqueName(t){const n=Pr.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,r=this.extensions,s=this.primitiveCache;function o(u){return r[Sr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,n).then(function(l){return wR(l,u,n)})}const a=[];for(let u=0,l=t.length;u<l;u++){const c=t[u],d=$X(c),p=s[d];if(p)a.push(p.promise);else{let f;c.extensions&&c.extensions[Sr.KHR_DRACO_MESH_COMPRESSION]?f=o(c):f=wR(new fr,c,n),s[d]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(t){const n=this,r=this.json,s=this.extensions,o=r.meshes[t],a=o.primitives,u=[];for(let l=0,c=a.length;l<c;l++){const d=a[l].material===void 0?KX(this.cache):this.getDependency("material",a[l].material);u.push(d)}return u.push(n.loadGeometries(a)),Promise.all(u).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],p=[];for(let h=0,m=d.length;h<m;h++){const y=d[h],v=a[h];let g;const _=c[h];if(v.mode===$s.TRIANGLES||v.mode===$s.TRIANGLE_STRIP||v.mode===$s.TRIANGLE_FAN||v.mode===void 0)g=o.isSkinnedMesh===!0?new I0(y,_):new dn(y,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),v.mode===$s.TRIANGLE_STRIP?g.geometry=vR(g.geometry,Wp):v.mode===$s.TRIANGLE_FAN&&(g.geometry=vR(g.geometry,_c));else if(v.mode===$s.LINES)g=new fo(y,_);else if(v.mode===$s.LINE_STRIP)g=new da(y,_);else if(v.mode===$s.LINE_LOOP)g=new j0(y,_);else if(v.mode===$s.POINTS)g=new D0(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&ZX(g,o),g.name=n.createUniqueName(o.name||"mesh_"+t),La(g,o),v.extensions&&ku(s,g,v),n.assignFinalMaterial(g),p.push(g)}for(let h=0,m=p.length;h<m;h++)n.associations.set(p[h],{meshes:t,primitives:h});if(p.length===1)return o.extensions&&ku(s,p[0],o),p[0];const f=new oo;o.extensions&&ku(s,f,o),n.associations.set(f,{meshes:t});for(let h=0,m=p.length;h<m;h++)f.add(p[h]);return f})}loadCamera(t){let n;const r=this.json.cameras[t],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new gn(A0.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(n=new ua(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),La(n,r),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],r=[];for(let s=0,o=n.joints.length;s<o;s++)r.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const o=s.pop(),a=s,u=[],l=[];for(let c=0,d=a.length;c<d;c++){const p=a[c];if(p){u.push(p);const f=new Gt;o!==null&&f.fromArray(o.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new pd(u,l)})}loadAnimation(t){const n=this.json,r=this,s=n.animations[t],o=s.name?s.name:"animation_"+t,a=[],u=[],l=[],c=[],d=[];for(let p=0,f=s.channels.length;p<f;p++){const h=s.channels[p],m=s.samplers[h.sampler],y=h.target,v=y.node,g=s.parameters!==void 0?s.parameters[m.input]:m.input,_=s.parameters!==void 0?s.parameters[m.output]:m.output;y.node!==void 0&&(a.push(this.getDependency("node",v)),u.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),c.push(m),d.push(y))}return Promise.all([Promise.all(a),Promise.all(u),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(p){const f=p[0],h=p[1],m=p[2],y=p[3],v=p[4],g=[];for(let _=0,x=f.length;_<x;_++){const b=f[_],S=h[_],T=m[_],M=y[_],R=v[_];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const L=r._createAnimationTracks(b,S,T,M,R);if(L)for(let P=0;P<L.length;P++)g.push(L[P])}return new bc(o,void 0,g)})}createNodeMesh(t){const n=this.json,r=this,s=n.nodes[t];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(o){const a=r._getNodeRef(r.meshCache,s.mesh,o);return s.weights!==void 0&&a.traverse(function(u){if(u.isMesh)for(let l=0,c=s.weights.length;l<c;l++)u.morphTargetInfluences[l]=s.weights[l]}),a})}loadNode(t){const n=this.json,r=this,s=n.nodes[t],o=r._loadNodeShallow(t),a=[],u=s.children||[];for(let c=0,d=u.length;c<d;c++)a.push(r.getDependency("node",u[c]));const l=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([o,Promise.all(a),l]).then(function(c){const d=c[0],p=c[1],f=c[2];f!==null&&d.traverse(function(h){h.isSkinnedMesh&&h.bind(f,tY)});for(let h=0,m=p.length;h<m;h++)d.add(p[h]);return d})}_loadNodeShallow(t){const n=this.json,r=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],a=o.name?s.createUniqueName(o.name):"",u=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&u.push(l),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(c){return s._getNodeRef(s.cameraCache,o.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){u.push(c)}),this.nodeCache[t]=Promise.all(u).then(function(c){let d;if(o.isBone===!0?d=new Kp:c.length>1?d=new oo:c.length===1?d=c[0]:d=new br,d!==c[0])for(let p=0,f=c.length;p<f;p++)d.add(c[p]);if(o.name&&(d.userData.name=o.name,d.name=a),La(d,o),o.extensions&&ku(r,d,o),o.matrix!==void 0){const p=new Gt;p.fromArray(o.matrix),d.applyMatrix4(p)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return s.associations.has(d)||s.associations.set(d,{}),s.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const n=this.extensions,r=this.json.scenes[t],s=this,o=new oo;r.name&&(o.name=s.createUniqueName(r.name)),La(o,r),r.extensions&&ku(n,o,r);const a=r.nodes||[],u=[];for(let l=0,c=a.length;l<c;l++)u.push(s.getDependency("node",a[l]));return Promise.all(u).then(function(l){for(let d=0,p=l.length;d<p;d++)o.add(l[d]);const c=d=>{const p=new Map;for(const[f,h]of s.associations)(f instanceof Tn||f instanceof Qr)&&p.set(f,h);return d.traverse(f=>{const h=s.associations.get(f);h!=null&&p.set(f,h)}),p};return s.associations=c(o),o})}_createAnimationTracks(t,n,r,s,o){const a=[],u=t.name?t.name:t.uuid,l=[];El[o.path]===El.weights?t.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(u);let c;switch(El[o.path]){case El.weights:c=Qa;break;case El.rotation:c=Za;break;case El.position:case El.scale:c=$a;break;default:switch(r.itemSize){case 1:c=Qa;break;case 2:case 3:default:c=$a;break}break}const d=s.interpolation!==void 0?JX[s.interpolation]:Ql,p=this._getArrayFromAccessor(r);for(let f=0,h=l.length;f<h;f++){const m=new c(l[f]+"."+El[o.path],n.array,p,d);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),a.push(m)}return a}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const r=uw(n.constructor),s=new Float32Array(n.length);for(let o=0,a=n.length;o<a;o++)s[o]=n[o]*r;n=s}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(r){const s=this instanceof Za?qX:yD;return new s(this.times,this.values,this.getValueSize()/3,r)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function nY(i,t,n){const r=t.attributes,s=new Hn;if(r.POSITION!==void 0){const u=n.json.accessors[r.POSITION],l=u.min,c=u.max;if(l!==void 0&&c!==void 0){if(s.set(new Ce(l[0],l[1],l[2]),new Ce(c[0],c[1],c[2])),u.normalized){const d=uw(Xf[u.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const u=new Ce,l=new Ce;for(let c=0,d=o.length;c<d;c++){const p=o[c];if(p.POSITION!==void 0){const f=n.json.accessors[p.POSITION],h=f.min,m=f.max;if(h!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(m[2]))),f.normalized){const y=uw(Xf[f.componentType]);l.multiplyScalar(y)}u.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}i.boundingBox=s;const a=new Qn;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function wR(i,t,n){const r=t.attributes,s=[];function o(a,u){return n.getDependency("accessor",a).then(function(l){i.setAttribute(u,l)})}for(const a in r){const u=lw[a]||a.toLowerCase();u in i.attributes||s.push(o(r[a],u))}if(t.indices!==void 0&&!i.index){const a=n.getDependency("accessor",t.indices).then(function(u){i.setIndex(u)});s.push(a)}return Ir.workingColorSpace!==fi&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ir.workingColorSpace}" not supported.`),La(i,t),nY(i,t,n),Promise.all(s).then(function(){return t.targets!==void 0?QX(i,t.targets,n):i})}const Yf=[{id:0,src:"./6_10_2024.glb",title:"WIRE 6 SET",grillMaterial:"Made from recycled 925 Sterling Silver",scale:.9},{id:1,src:"./6_10_2024_2.glb",title:"ANKH DOUBLE CAP",grillMaterial:"Made from recycled 9ct Yellow Gold",scale:1.2},{id:2,src:"./7_10_2024_2.glb",title:"STRETCHY STAR",grillMaterial:"Made from recycled 925 Sterling Silver"},{id:3,src:"./7_10_2024.glb",title:"BABY BOW FRONT",grillMaterial:"Made from recycled 925 Sterling Silver"},{id:4,src:"./06_01_2025.glb",title:"DUAL WINDOW BAR ",grillMaterial:"Made from recycled 925 Sterling Silver",scale:1.2},{id:5,src:"./06_01_2025_2.glb",title:"STAR CUTOUT CAP",grillMaterial:"Made from recycled 925 Sterling Silver"},{id:6,src:"./07_01_2025.glb",title:"GUMMY PENDANTS",grillMaterial:"Made from recycled 925 Sterling Silver and ethically sourced Baby Pink Sapphires"},{id:7,src:"./07_01_2025_2.glb",title:"RUBY BUBBLE RING",grillMaterial:"Made from recycled 925 Sterling Silver and ethically sourced Ruby Gemstone"},{id:8,src:"./07_01_2025_3.glb",title:"AMULET PENDANT",grillMaterial:"Made from recycled 925 Sterling Silver and ethically sourced Baby Pink Sapphire"}];var Ot={},cw={exports:{}};(function(i,t){(function(n,r){var s="1.0.40",o="",a="?",u="function",l="undefined",c="object",d="string",p="major",f="model",h="name",m="type",y="vendor",v="version",g="architecture",_="console",x="mobile",b="tablet",S="smarttv",T="wearable",M="embedded",R=500,L="Amazon",P="Apple",C="ASUS",k="BlackBerry",D="Browser",F="Chrome",G="Edge",z="Firefox",Q="Google",V="Huawei",W="LG",Y="Microsoft",J="Motorola",ie="Opera",I="Samsung",O="Sharp",H="Sony",q="Xiaomi",Z="Zebra",oe="Facebook",pe="Chromium OS",be="Mac OS",me=" Browser",ce=function(Je,Ve){var Se={};for(var We in Je)Ve[We]&&Ve[We].length%2===0?Se[We]=Ve[We].concat(Je[We]):Se[We]=Je[We];return Se},te=function(Je){for(var Ve={},Se=0;Se<Je.length;Se++)Ve[Je[Se].toUpperCase()]=Je[Se];return Ve},ue=function(Je,Ve){return typeof Je===d?ge(Ve).indexOf(ge(Je))!==-1:!1},ge=function(Je){return Je.toLowerCase()},xe=function(Je){return typeof Je===d?Je.replace(/[^\d\.]/g,o).split(".")[0]:r},Le=function(Je,Ve){if(typeof Je===d)return Je=Je.replace(/^\s\s*/,o),typeof Ve===l?Je:Je.substring(0,R)},we=function(Je,Ve){for(var Se=0,We,Re,le,de,ee,he;Se<Ve.length&&!ee;){var Pe=Ve[Se],ye=Ve[Se+1];for(We=Re=0;We<Pe.length&&!ee&&Pe[We];)if(ee=Pe[We++].exec(Je),ee)for(le=0;le<ye.length;le++)he=ee[++Re],de=ye[le],typeof de===c&&de.length>0?de.length===2?typeof de[1]==u?this[de[0]]=de[1].call(this,he):this[de[0]]=de[1]:de.length===3?typeof de[1]===u&&!(de[1].exec&&de[1].test)?this[de[0]]=he?de[1].call(this,he,de[2]):r:this[de[0]]=he?he.replace(de[1],de[2]):r:de.length===4&&(this[de[0]]=he?de[3].call(this,he.replace(de[1],de[2])):r):this[de]=he||r;Se+=2}},Ee=function(Je,Ve){for(var Se in Ve)if(typeof Ve[Se]===c&&Ve[Se].length>0){for(var We=0;We<Ve[Se].length;We++)if(ue(Ve[Se][We],Je))return Se===a?r:Se}else if(ue(Ve[Se],Je))return Se===a?r:Se;return Ve.hasOwnProperty("*")?Ve["*"]:Je},ae={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ne={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ae={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,v],[/opios[\/ ]+([\w\.]+)/i],[v,[h,ie+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[h,ie+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[h,ie]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[h,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[h,"Smart Lenovo "+D]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+D],v],[/\bfocus\/([\w\.]+)/i],[v,[h,z+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[h,ie+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[h,ie+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[h,"MIUI"+me]],[/fxios\/([\w\.-]+)/i],[v,[h,z]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+me],v],[/samsungbrowser\/([\w\.]+)/i],[v,[h,I+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,oe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[h,F+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,F+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[h,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[v,Ee,ae]],[/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[h,z+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,ge]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,o,ge]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,ge]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[y,I],[m,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[f,[y,I],[m,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[y,P],[m,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[y,P],[m,b]],[/(macintosh);/i],[f,[y,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[y,O],[m,x]],[/(?:honor)([-\w ]+)[;\)]/i],[f,[y,"Honor"],[m,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[y,V],[m,b]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[y,V],[m,x]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[f,/_/g," "],[y,q],[m,x]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[y,q],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[y,"OPPO"],[m,x]],[/\b(opd2\d{3}a?) bui/i],[f,[y,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[y,"Vivo"],[m,x]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[y,"Realme"],[m,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[y,J],[m,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[y,J],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[y,W],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[y,W],[m,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[y,"Lenovo"],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[y,"Nokia"],[m,x]],[/(pixel c)\b/i],[f,[y,Q],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[y,Q],[m,x]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[y,H],[m,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[y,H],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[y,"OnePlus"],[m,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[y,L],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[y,L],[m,x]],[/(playbook);[-\w\),; ]+(rim)/i],[f,y,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[y,k],[m,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[y,C],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[y,C],[m,x]],[/(nexus 9)/i],[f,[y,"HTC"],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[f,/_/g," "],[m,x]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[f,[y,"TCL"],[m,b]],[/(itel) ((\w+))/i],[[y,ge],f,[m,Ee,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[y,"Acer"],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[y,"Meizu"],[m,x]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[y,"Ulefone"],[m,x]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[f,[y,"Energizer"],[m,x]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[f,[y,"Cat"],[m,x]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[f,[y,"Smartfren"],[m,x]],[/droid.+; (a(?:015|06[35]|142p?))/i],[f,[y,"Nothing"],[m,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,f,[m,x]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,f,[m,b]],[/(surface duo)/i],[f,[y,Y],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[y,"Fairphone"],[m,x]],[/(u304aa)/i],[f,[y,"AT&T"],[m,x]],[/\bsie-(\w*)/i],[f,[y,"Siemens"],[m,x]],[/\b(rct\w+) b/i],[f,[y,"RCA"],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[f,[y,"Dell"],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[f,[y,"Verizon"],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[y,"Barnes & Noble"],[m,b]],[/\b(tm\d{3}\w+) b/i],[f,[y,"NuVision"],[m,b]],[/\b(k88) b/i],[f,[y,"ZTE"],[m,b]],[/\b(nx\d{3}j) b/i],[f,[y,"ZTE"],[m,x]],[/\b(gen\d{3}) b.+49h/i],[f,[y,"Swiss"],[m,x]],[/\b(zur\d{3}) b/i],[f,[y,"Swiss"],[m,b]],[/\b((zeki)?tb.*\b) b/i],[f,[y,"Zeki"],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],f,[m,b]],[/\b(ns-?\w{0,9}) b/i],[f,[y,"Insignia"],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[y,"NextBook"],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],f,[m,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],f,[m,x]],[/\b(ph-1) /i],[f,[y,"Essential"],[m,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[y,"Envizen"],[m,b]],[/\b(trio[-\w\. ]+) b/i],[f,[y,"MachSpeed"],[m,b]],[/\btu_(1491) b/i],[f,[y,"Rotor"],[m,b]],[/(shield[\w ]+) b/i],[f,[y,"Nvidia"],[m,b]],[/(sprint) (\w+)/i],[y,f,[m,x]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[y,Y],[m,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[y,Z],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[y,Z],[m,x]],[/smart-tv.+(samsung)/i],[y,[m,S]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[y,I],[m,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,W],[m,S]],[/(apple) ?tv/i],[y,[f,P+" TV"],[m,S]],[/crkey/i],[[f,F+"cast"],[y,Q],[m,S]],[/droid.+aft(\w+)( bui|\))/i],[f,[y,L],[m,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[y,O],[m,S]],[/(bravia[\w ]+)( bui|\))/i],[f,[y,H],[m,S]],[/(mitv-\w{5}) bui/i],[f,[y,q],[m,S]],[/Hbbtv.*(technisat) (.*);/i],[y,f,[m,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,Le],[f,Le],[m,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,f,[m,_]],[/droid.+; (shield) bui/i],[f,[y,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[f,[y,H],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[y,Y],[m,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[f,[y,I],[m,T]],[/((pebble))app/i],[y,f,[m,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[y,P],[m,T]],[/droid.+; (glass) \d/i],[f,[y,Q],[m,T]],[/droid.+; (wt63?0{2,3})\)/i],[f,[y,Z],[m,T]],[/droid.+; (glass) \d/i],[f,[y,Q],[m,T]],[/(pico) (4|neo3(?: link|pro)?)/i],[y,f,[m,T]],[/; (quest( \d| pro)?)/i],[f,[y,oe],[m,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[m,M]],[/(aeobc)\b/i],[f,[y,L],[m,M]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[m,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,x]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[h,G+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[h,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[v,Ee,ne]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,Ee,ne],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,be],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,v],[/\(bb(10);/i],[v,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[h,z+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[h,F+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,pe],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,v],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,v]]},Be=function(Je,Ve){if(typeof Je===c&&(Ve=Je,Je=r),!(this instanceof Be))return new Be(Je,Ve).getResult();var Se=typeof n!==l&&n.navigator?n.navigator:r,We=Je||(Se&&Se.userAgent?Se.userAgent:o),Re=Se&&Se.userAgentData?Se.userAgentData:r,le=Ve?ce(Ae,Ve):Ae,de=Se&&Se.userAgent==We;return this.getBrowser=function(){var ee={};return ee[h]=r,ee[v]=r,we.call(ee,We,le.browser),ee[p]=xe(ee[v]),de&&Se&&Se.brave&&typeof Se.brave.isBrave==u&&(ee[h]="Brave"),ee},this.getCPU=function(){var ee={};return ee[g]=r,we.call(ee,We,le.cpu),ee},this.getDevice=function(){var ee={};return ee[y]=r,ee[f]=r,ee[m]=r,we.call(ee,We,le.device),de&&!ee[m]&&Re&&Re.mobile&&(ee[m]=x),de&&ee[f]=="Macintosh"&&Se&&typeof Se.standalone!==l&&Se.maxTouchPoints&&Se.maxTouchPoints>2&&(ee[f]="iPad",ee[m]=b),ee},this.getEngine=function(){var ee={};return ee[h]=r,ee[v]=r,we.call(ee,We,le.engine),ee},this.getOS=function(){var ee={};return ee[h]=r,ee[v]=r,we.call(ee,We,le.os),de&&!ee[h]&&Re&&Re.platform&&Re.platform!="Unknown"&&(ee[h]=Re.platform.replace(/chrome os/i,pe).replace(/macos/i,be)),ee},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return We},this.setUA=function(ee){return We=typeof ee===d&&ee.length>R?Le(ee,R):ee,this},this.setUA(We),this};Be.VERSION=s,Be.BROWSER=te([h,v,p]),Be.CPU=te([g]),Be.DEVICE=te([f,y,m,_,x,S,b,T,M]),Be.ENGINE=Be.OS=te([h,v]),i.exports&&(t=i.exports=Be),t.UAParser=Be;var Fe=typeof n!==l&&(n.jQuery||n.Zepto);if(Fe&&!Fe.ua){var Oe=new Be;Fe.ua=Oe.getResult(),Fe.ua.get=function(){return Oe.getUA()},Fe.ua.set=function(Je){Oe.setUA(Je);var Ve=Oe.getResult();for(var Se in Ve)Fe.ua[Se]=Ve[Se]}}})(typeof window=="object"?window:Kk)})(cw,cw.exports);var iY=cw.exports;Object.defineProperty(Ot,"__esModule",{value:!0});function sY(i){return i&&typeof i=="object"&&"default"in i?i.default:i}var ki=Qe,on=sY(ki),vD=iY,iu=new vD,Bi=iu.getBrowser(),oY=iu.getCPU(),Us=iu.getDevice(),x2=iu.getEngine(),su=iu.getOS(),om=iu.getUA(),_D=function(t){return iu.setUA(t)},am=function(t){if(!t){console.error("No userAgent string was provided");return}var n=new vD(t);return{UA:n,browser:n.getBrowser(),cpu:n.getCPU(),device:n.getDevice(),engine:n.getEngine(),os:n.getOS(),ua:n.getUA(),setUserAgent:function(s){return n.setUA(s)}}},xD=Object.freeze({ClientUAInstance:iu,browser:Bi,cpu:oY,device:Us,engine:x2,os:su,ua:om,setUa:_D,parseUserAgent:am});function SR(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function aY(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(n),!0).forEach(function(r){fY(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function qh(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qh=function(t){return typeof t}:qh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(i)}function lY(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function uY(i,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function cY(i,t,n){return t&&uY(i.prototype,t),i}function fY(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function fw(){return fw=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},fw.apply(this,arguments)}function dY(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&hw(i,t)}function dw(i){return dw=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},dw(i)}function hw(i,t){return hw=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},hw(i,t)}function hY(i,t){if(i==null)return{};var n={},r=Object.keys(i),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=i[s]);return n}function ho(i,t){if(i==null)return{};var n=hY(i,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(n[r]=i[r])}return n}function Ey(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function pY(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ey(i)}function mY(i,t){return gY(i)||yY(i,t)||vY(i,t)||_Y()}function gY(i){if(Array.isArray(i))return i}function yY(i,t){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r=[],s=!0,o=!1,a,u;try{for(n=n.call(i);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(l){o=!0,u=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function vY(i,t){if(i){if(typeof i=="string")return AR(i,t);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AR(i,t)}}function AR(i,t){(t==null||t>i.length)&&(t=i.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=i[n];return r}function _Y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Li={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},ws={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},_d={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},xY={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},bY=function(t){switch(t){case Li.Mobile:return{isMobile:!0};case Li.Tablet:return{isTablet:!0};case Li.SmartTv:return{isSmartTV:!0};case Li.Console:return{isConsole:!0};case Li.Wearable:return{isWearable:!0};case Li.Browser:return{isBrowser:!0};case Li.Embedded:return{isEmbedded:!0};default:return xY}},wY=function(t){return _D(t)},sr=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return t||n},b2=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},w2=function(t){var n=b2();return n&&n.platform&&(n.platform.indexOf(t)!==-1||n.platform==="MacIntel"&&n.maxTouchPoints>1&&!window.MSStream)},SY=function(t,n,r,s,o){return{isBrowser:t,browserMajorVersion:sr(n.major),browserFullVersion:sr(n.version),browserName:sr(n.name),engineName:sr(r.name),engineVersion:sr(r.version),osName:sr(s.name),osVersion:sr(s.version),userAgent:sr(o)}},MR=function(t,n,r,s){return aY({},t,{vendor:sr(n.vendor),model:sr(n.model),os:sr(r.name),osVersion:sr(r.version),ua:sr(s)})},AY=function(t,n,r,s){return{isSmartTV:t,engineName:sr(n.name),engineVersion:sr(n.version),osName:sr(r.name),osVersion:sr(r.version),userAgent:sr(s)}},MY=function(t,n,r,s){return{isConsole:t,engineName:sr(n.name),engineVersion:sr(n.version),osName:sr(r.name),osVersion:sr(r.version),userAgent:sr(s)}},EY=function(t,n,r,s){return{isWearable:t,engineName:sr(n.name),engineVersion:sr(n.version),osName:sr(r.name),osVersion:sr(r.version),userAgent:sr(s)}},TY=function(t,n,r,s,o){return{isEmbedded:t,vendor:sr(n.vendor),model:sr(n.model),engineName:sr(r.name),engineVersion:sr(r.version),osName:sr(s.name),osVersion:sr(s.version),userAgent:sr(o)}};function CY(i){var t=i?am(i):xD,n=t.device,r=t.browser,s=t.engine,o=t.os,a=t.ua,u=bY(n.type),l=u.isBrowser,c=u.isMobile,d=u.isTablet,p=u.isSmartTV,f=u.isConsole,h=u.isWearable,m=u.isEmbedded;if(l)return SY(l,r,s,o,a);if(p)return AY(p,s,o,a);if(f)return MY(f,s,o,a);if(c||d)return MR(u,n,o,a);if(h)return EY(h,s,o,a);if(m)return TY(m,n,s,o,a)}var bD=function(t){var n=t.type;return n===Li.Mobile},wD=function(t){var n=t.type;return n===Li.Tablet},SD=function(t){var n=t.type;return n===Li.Mobile||n===Li.Tablet},AD=function(t){var n=t.type;return n===Li.SmartTv},qv=function(t){var n=t.type;return n===Li.Browser},MD=function(t){var n=t.type;return n===Li.Wearable},ED=function(t){var n=t.type;return n===Li.Console},TD=function(t){var n=t.type;return n===Li.Embedded},CD=function(t){var n=t.vendor;return sr(n)},RD=function(t){var n=t.model;return sr(n)},PD=function(t){var n=t.type;return sr(n,"browser")},ID=function(t){var n=t.name;return n===_d.Android},LD=function(t){var n=t.name;return n===_d.Windows},jD=function(t){var n=t.name;return n===_d.MAC_OS},DD=function(t){var n=t.name;return n===_d.WindowsPhone},kD=function(t){var n=t.name;return n===_d.IOS},OD=function(t){var n=t.version;return sr(n)},BD=function(t){var n=t.name;return sr(n)},FD=function(t){var n=t.name;return n===ws.Chrome},UD=function(t){var n=t.name;return n===ws.Firefox},ND=function(t){var n=t.name;return n===ws.Chromium},Jv=function(t){var n=t.name;return n===ws.Edge},GD=function(t){var n=t.name;return n===ws.Yandex},HD=function(t){var n=t.name;return n===ws.Safari||n===ws.MobileSafari},zD=function(t){var n=t.name;return n===ws.MobileSafari},VD=function(t){var n=t.name;return n===ws.Opera},WD=function(t){var n=t.name;return n===ws.InternetExplorer||n===ws.Ie},XD=function(t){var n=t.name;return n===ws.MIUI},YD=function(t){var n=t.name;return n===ws.SamsungBrowser},qD=function(t){var n=t.version;return sr(n)},JD=function(t){var n=t.major;return sr(n)},KD=function(t){var n=t.name;return sr(n)},QD=function(t){var n=t.name;return sr(n)},ZD=function(t){var n=t.version;return sr(n)},$D=function(){var t=b2(),n=t&&t.userAgent&&t.userAgent.toLowerCase();return typeof n=="string"?/electron/.test(n):!1},qf=function(t){return typeof t=="string"&&t.indexOf("Edg/")!==-1},ek=function(){var t=b2();return t&&(/iPad|iPhone|iPod/.test(t.platform)||t.platform==="MacIntel"&&t.maxTouchPoints>1)&&!window.MSStream},ia=function(){return w2("iPad")},tk=function(){return w2("iPhone")},rk=function(){return w2("iPod")},nk=function(t){return sr(t)};function ik(i){var t=i||xD,n=t.device,r=t.browser,s=t.os,o=t.engine,a=t.ua;return{isSmartTV:AD(n),isConsole:ED(n),isWearable:MD(n),isEmbedded:TD(n),isMobileSafari:zD(r)||ia(),isChromium:ND(r),isMobile:SD(n)||ia(),isMobileOnly:bD(n),isTablet:wD(n)||ia(),isBrowser:qv(n),isDesktop:qv(n),isAndroid:ID(s),isWinPhone:DD(s),isIOS:kD(s)||ia(),isChrome:FD(r),isFirefox:UD(r),isSafari:HD(r),isOpera:VD(r),isIE:WD(r),osVersion:OD(s),osName:BD(s),fullBrowserVersion:qD(r),browserVersion:JD(r),browserName:KD(r),mobileVendor:CD(n),mobileModel:RD(n),engineName:QD(o),engineVersion:ZD(o),getUA:nk(a),isEdge:Jv(r)||qf(a),isYandex:GD(r),deviceType:PD(n),isIOS13:ek(),isIPad13:ia(),isIPhone13:tk(),isIPod13:rk(),isElectron:$D(),isEdgeChromium:qf(a),isLegacyEdge:Jv(r)&&!qf(a),isWindows:LD(s),isMacOs:jD(s),isMIUI:XD(r),isSamsungBrowser:YD(r)}}var sk=AD(Us),ok=ED(Us),ak=MD(Us),RY=TD(Us),PY=zD(Bi)||ia(),IY=ND(Bi),u1=SD(Us)||ia(),lk=bD(Us),uk=wD(Us)||ia(),ck=qv(Us),LY=qv(Us),fk=ID(su),dk=DD(su),hk=kD(su)||ia(),jY=FD(Bi),DY=UD(Bi),kY=HD(Bi),OY=VD(Bi),pk=WD(Bi),BY=OD(su),FY=BD(su),UY=qD(Bi),NY=JD(Bi),GY=KD(Bi),HY=CD(Us),zY=RD(Us),VY=QD(x2),WY=ZD(x2),XY=nk(om),YY=Jv(Bi)||qf(om),qY=GD(Bi),JY=PD(Us),KY=ek(),QY=ia(),ZY=tk(),$Y=rk(),eq=$D(),tq=qf(om),rq=Jv(Bi)&&!qf(om),nq=LD(su),iq=jD(su),sq=XD(Bi),oq=YD(Bi),aq=function(t){if(!t||typeof t!="string"){console.error("No valid user agent string was provided");return}var n=am(t),r=n.device,s=n.browser,o=n.os,a=n.engine,u=n.ua;return ik({device:r,browser:s,os:o,engine:a,ua:u})},lq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return fk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},uq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return ck?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},cq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return pk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},fq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return hk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},dq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return u1?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},hq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return uk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},pq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return dk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},mq=function(t){var n=t.renderWithFragment,r=t.children;t.viewClassName,t.style;var s=ho(t,["renderWithFragment","children","viewClassName","style"]);return lk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},gq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return sk?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},yq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return ok?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},vq=function(t){var n=t.renderWithFragment,r=t.children,s=ho(t,["renderWithFragment","children"]);return ak?n?on.createElement(ki.Fragment,null,r):on.createElement("div",s,r):null},_q=function(t){var n=t.renderWithFragment,r=t.children;t.viewClassName,t.style;var s=t.condition,o=ho(t,["renderWithFragment","children","viewClassName","style","condition"]);return s?n?on.createElement(ki.Fragment,null,r):on.createElement("div",o,r):null};function xq(i){return function(t){dY(n,t);function n(r){var s;return lY(this,n),s=pY(this,dw(n).call(this,r)),s.isEventListenerAdded=!1,s.handleOrientationChange=s.handleOrientationChange.bind(Ey(s)),s.onOrientationChange=s.onOrientationChange.bind(Ey(s)),s.onPageLoad=s.onPageLoad.bind(Ey(s)),s.state={isLandscape:!1,isPortrait:!1},s}return cY(n,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var s=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:s===0,isLandscape:s===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":qh(window))!==void 0&&u1&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return on.createElement(i,fw({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),n}(on.Component)}function bq(){var i=ki.useState(function(){var o=window.innerWidth>window.innerHeight?90:0;return{isPortrait:o===0,isLandscape:o===90,orientation:o===0?"portrait":"landscape"}}),t=mY(i,2),n=t[0],r=t[1],s=ki.useCallback(function(){var o=window.innerWidth>window.innerHeight?90:0,a={isPortrait:o===0,isLandscape:o===90,orientation:o===0?"portrait":"landscape"};n.orientation!==a.orientation&&r(a)},[n.orientation]);return ki.useEffect(function(){return(typeof window>"u"?"undefined":qh(window))!==void 0&&u1&&(s(),window.addEventListener("load",s,!1),window.addEventListener("resize",s,!1)),function(){window.removeEventListener("resize",s,!1),window.removeEventListener("load",s,!1)}},[s]),n}function mk(i){var t=i||window.navigator.userAgent;return am(t)}function wq(i){var t=i||window.navigator.userAgent,n=mk(t),r=ik(n);return[r,n]}Ot.AndroidView=lq;Ot.BrowserTypes=ws;Ot.BrowserView=uq;Ot.ConsoleView=yq;Ot.CustomView=_q;Ot.IEView=cq;Ot.IOSView=fq;Ot.MobileOnlyView=mq;Ot.MobileView=dq;Ot.OsTypes=_d;Ot.SmartTVView=gq;Ot.TabletView=hq;Ot.WearableView=vq;Ot.WinPhoneView=pq;Ot.browserName=GY;Ot.browserVersion=NY;Ot.deviceDetect=CY;Ot.deviceType=JY;Ot.engineName=VY;Ot.engineVersion=WY;Ot.fullBrowserVersion=UY;Ot.getSelectorsByUserAgent=aq;Ot.getUA=XY;Ot.isAndroid=fk;Ot.isBrowser=ck;Ot.isChrome=jY;Ot.isChromium=IY;Ot.isConsole=ok;Ot.isDesktop=LY;Ot.isEdge=YY;Ot.isEdgeChromium=tq;Ot.isElectron=eq;Ot.isEmbedded=RY;Ot.isFirefox=DY;Ot.isIE=pk;Ot.isIOS=hk;Ot.isIOS13=KY;Ot.isIPad13=QY;Ot.isIPhone13=ZY;Ot.isIPod13=$Y;Ot.isLegacyEdge=rq;Ot.isMIUI=sq;Ot.isMacOs=iq;var Qi=Ot.isMobile=u1;Ot.isMobileOnly=lk;Ot.isMobileSafari=PY;Ot.isOpera=OY;Ot.isSafari=kY;Ot.isSamsungBrowser=oq;Ot.isSmartTV=sk;Ot.isTablet=uk;Ot.isWearable=ak;Ot.isWinPhone=dk;Ot.isWindows=nq;Ot.isYandex=qY;Ot.mobileModel=zY;Ot.mobileVendor=HY;Ot.osName=FY;Ot.osVersion=BY;Ot.parseUserAgent=am;Ot.setUserAgent=wY;Ot.useDeviceData=mk;Ot.useDeviceSelectors=wq;Ot.useMobileOrientation=bq;Ot.withOrientationChange=xq;const Sq=""+new URL("PerfectoCalligraphy-D8u-BZRs.ttf",import.meta.url).href;function Aq(){vd.preload(Yf[0].src,!0);const i=gd(SX,"./studio.glb"),{progress:t,loaded:n,total:r}=kz(),[s,o]=Qe.useState(!0),[a,u]=Qe.useState(!1),l=()=>(e1(({camera:c},d)=>{const p=s?new Ce(0,0,0):new Ce(0,1,0);if(c.lookAt(p),a)return;const f=s?Qi?new Ce(1,5,4):new Ce(3,3,3):new Ce(1,1,2);c.position.lerp(f,d*3),c.position.distanceTo(f)<.05&&u(!0)}),null);return Rt.jsxs(Rt.Fragment,{children:[Rt.jsxs(mj,{camera:{position:[10,10,10]},children:[Rt.jsx(l,{}),Rt.jsx("ambientLight",{}),Rt.jsx("directionalLight",{position:[10,10,10]}),Rt.jsx(hX,{enableZoom:!1}),Rt.jsx(dX,{color:"salmon",font:Sq,fontSize:.1,position:[-.7,1,-1.2],children:"Bambi"}),Rt.jsx("primitive",{position:[0,1,0],object:i.scene})]}),Rt.jsx("button",{className:`toggle ${Qi?"mobile":""} ${s?"":"in"}`,onClick:()=>{u(!1),o(!s)},children:""}),r===n?Rt.jsx(eI,{to:"/works",children:Rt.jsx("p",{className:`loading-text ${Qi?"mobile":""} ${s?"":"in"}`,children:"Enter studio"})}):Rt.jsxs("p",{className:`loading-text ${Qi?"mobile":""} ${s?"":"in"}`,children:["Loading studio: ",Math.floor(t),"%"]})]})}const Mq=()=>Rt.jsxs("div",{className:`footer-container ${Qi?"mobile":""}`,children:[Rt.jsx("div",{className:"footer-item",children:Rt.jsx("a",{href:"https://www.instagram.com/jewelsbybam/",className:"footer-item",target:"blank",children:"insta"})}),Rt.jsx("div",{className:"footer-item",children:Rt.jsx("a",{href:"mailto:jewelzbybam@gmail.com",className:"footer-item",target:"blank",children:"email"})})]});gk.propTypes={src:jo.string,scaleMultiplier:jo.number||void 0,onZoom:jo.func};yk.propTypes={src:jo.string,scale:jo.number||void 0,onZoom:jo.func};function gk({src:i,scaleMultiplier:t,onZoom:n}){const{nodes:r}=vd(i,!0),s=Qe.useRef(),[o]=Qe.useState(()=>new br),{pointer:a}=eo(),[u,l]=Qe.useState(!1),[c,d]=Qe.useState(!1);Qe.useEffect(()=>{u&&!c?document.body.className="cursor-zoom-in":u&&c?document.body.className="cursor-zoom-out":document.body.className=""},[c,u]),e1((v,g)=>{v.camera.fov=A0.lerp(v.camera.fov,50,.1),u?o.lookAt(a.x,a.y,1):o.lookAt(0,0,1),fV.dampQ(s.current.quaternion,o.quaternion,.15,g)});function p(){return Qi?[0,-2,0]:c?[0,-2,0]:[-10,-6,-1]}function f(){const g=(Qi?5:10)*(t||1);return c?g*1.05:u?g+1:g}const{scale:h,position:m}=_7({scale:f(),position:p(),config:Fj.gentle}),y=Object.values(r).filter(v=>v.isMesh)[0];return Rt.jsx(A7.mesh,{ref:s,castShadow:!0,receiveShadow:!0,geometry:y.geometry,material:y.material,scale:h,position:m,onClick:()=>{n(),d(!c)},onPointerEnter:()=>l(!0),onPointerLeave:()=>l(!1)})}function yk({src:i,scale:t,onZoom:n}){return Rt.jsxs(wX,{clip:!0,observe:!0,margin:1.2,children:[Rt.jsx("ambientLight",{}),Rt.jsx("directionalLight",{position:[10,10,10]}),Rt.jsx(gk,{src:i,onZoom:n,scaleMultiplier:t})]})}const Eq=(i,t,n)=>{i(!0),setTimeout(()=>{n(),i(!1),t(!0)},400)};function ER(i){return i.split(" ").map((t,n)=>Rt.jsxs("span",{className:"word",style:{"--index":n},children:[t,""]},`${t}-${n}`))}vk.propTypes={animatingIn:jo.bool,animatingOut:jo.bool,zoomedOut:jo.bool,onNav:jo.func,itemIndex:jo.number};function vk({animatingIn:i,animatingOut:t,zoomedOut:n,onNav:r,itemIndex:s}){const o=Qe.useMemo(()=>s>0?Yf[s-1]:null,[s]),a=Qe.useMemo(()=>s<Yf.length-1?Yf[s+1]:null,[s]);return Rt.jsxs("div",{className:"nav-container",children:[Rt.jsx("div",{className:`nav-item left ${!i&&!t?"":"pointer-events-none"}
          ${n?"":"nav-item-anim-rev"}  ${t?"nav-item-anim":""} ${i?"enter-from-left":""} ${Qi?"mobile":""}
          `,onClick:()=>{r(s-1)},children:o&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("p",{children:" "}),Rt.jsxs("p",{children:[" ",o.title]})]})}),Rt.jsx(eI,{to:"/",children:Rt.jsx("p",{className:`header ${Qi?"mobile":""} header-container`,children:"Jewels by Bam"})}),Rt.jsx("div",{className:`nav-item right ${!i&&!t?"":"pointer-events-none"}
          ${n?"":"nav-item-anim"} ${t?"nav-item-anim-rev":""} ${i?"enter-from-right":""} ${Qi?"mobile":""}
          `,onClick:()=>{r(s+1)},children:a&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsxs("p",{children:[" ",a.title]}),Rt.jsx("p",{children:" "})]})})]})}function Tq(){const[i,t]=Qe.useState(0),[n,r]=Qe.useState(!0),[s,o]=Qe.useState(!1),[a,u]=Qe.useState(!0),l=Qe.useMemo(()=>Yf[i],[i]),c=Qe.useCallback(d=>{Eq(o,r,()=>t(d))},[]);return Qe.useEffect(()=>{const d=Yf[i+1];d&&vd.preload(d.src,!0)},[i]),Rt.jsx(Rt.Fragment,{children:Rt.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:[Rt.jsx(vk,{itemIndex:i,onNav:c,animatingIn:n,animatingOut:s,zoomedOut:a}),Rt.jsxs("div",{className:" w-full h-full relative transition-all duration-500",children:[Rt.jsx("div",{className:`billboard-container ${Qi?"mobile":""}`,children:Rt.jsx("section",{className:"h-full",children:Rt.jsxs("div",{className:"full-billboard",children:[Rt.jsx("p",{className:"single-billboard",children:l.title}),Rt.jsx("p",{className:"single-billboard",children:l.title})]})})}),Rt.jsxs("div",{className:`item-info-container ${a?"zoomed-out":"zoomed-in"} ${Qi?"mobile":""}`,children:[Rt.jsx("p",{className:`item-info-header ${s?"grills-out":""} ${Qi?"mobile":""}`,children:ER(l.title)}),Rt.jsx("p",{className:`item-info ${s?"grills-out":""} ${Qi?"mobile":""}`,children:ER(l.grillMaterial)})]}),Rt.jsx("div",{className:`grill-object ${Qi?"mobile":""} ${n?"grills-in":""} ${s?"grills-out":""} 
                  ${!n&&!s?"pointer-events-auto":"pointer-events-none "}
                   `,onAnimationEnd:()=>{s?o(!1):n&&r(!1)},children:Rt.jsx(mj,{className:"logo h-full",camera:{position:[0,10,3]},children:Rt.jsx(yk,{src:l.src,scale:l.scale,onZoom:()=>u(!a)})})}),Rt.jsx(Mq,{})]})]})})}function Cq(i){let t=[];i.setup=()=>{i.createCanvas(innerWidth,innerHeight),i.noStroke();for(let n=0;n<i.width-0;n+=10)for(let r=0;r<i.height-0;r+=10)t.push({x:n,y:r})},i.draw=()=>{i.background(255),t.forEach(({x:n,y:r})=>{const s=i.dist(i.mouseX,i.mouseY,n,r),o=i.map(s,0,400,5,2,!0),a=i.map(s,0,400,200,150,!0);i.fill(250,128,114,a),i.circle(n,r,o)})},i.windowResized=()=>{t=[],i.createCanvas(innerWidth,innerHeight),i.noStroke();for(let n=0;n<i.width-0;n+=10)for(let r=0;r<i.height-0;r+=10)t.push({x:n,y:r})}}function Rq(){return Rt.jsxs(Rt.Fragment,{children:[Rt.jsx(jU,{future:{v7_startTransition:!0},children:Rt.jsxs(EU,{children:[Rt.jsx(Mb,{path:"/",exact:!0,element:Rt.jsx(Aq,{})}),Rt.jsx(Mb,{path:"/works",element:Rt.jsx(Tq,{})})]},location.pathname)}),Rt.jsx(DF,{sketch:Cq})]})}UP(document.getElementById("root")).render(Rt.jsx(Qe.StrictMode,{children:Rt.jsx(Rq,{})}));
